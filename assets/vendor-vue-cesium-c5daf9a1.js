import{c6 as e,c7 as t,c8 as i,by as n,bS as o,bF as r,bN as a,c3 as s,bT as l,c9 as c,ca as u,cb as d,cc as p,cd as m,ce as h,bC as v,bU as g,bZ as f,cf as y,bG as b,bz as C,cg as w,bH as _,bY as O,bL as x,bQ as P,bR as S,bO as E,bV as T,b_ as I,ch as M,bP as D,ci as j,cj as L,ck as A,V as k,aU as R,bB as V,cl as B,cm as N,cn as z,co as F}from"./vendor-36df2400.js";import{i as G,a as H,f as U,c as W,l as $,g as Z,b as q,d as Y,e as J,h as X,r as Q,j as K,m as ee,u as te}from"./vendor-lodash-c71fa835.js";import{r as ie,i as ne}from"./vendor-echarts-011f9a33.js";const oe="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,re=oe?Symbol("VueCesium"):"VueCesium",ae=oe?Symbol("_vc_f_"):"_vc_f_",se=Symbol();function le(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";let t=e.charCodeAt(0);const i=47===t;let n=-1,o=!0;for(let r=e.length-1;r>=1;--r)if(t=e.charCodeAt(r),47===t){if(!o){n=r;break}}else o=!1;return-1===n?i?"/":".":i&&1===n?"/":e.slice(0,n)}function ce(e){if(G(e)||H(e))return!0;if(e instanceof Element)return!1;return 0===Object.keys(e).length}const ue=e;function de(e,t){if("object"!=typeof e||null===e)return!1;let i=Object.getPrototypeOf(e);for(;;){if(null===i)return!1;if(i===(null==t?void 0:t.prototype))return!0;i=Object.getPrototypeOf(i)}}function pe(e,t=!1){if(e&&e.constructor){if(t){const t=function(e){let t;const i=Object.keys(Cesium);for(let n=0;n<i.length;n++){const o=i[n];if(de(e,Cesium[o])){t=o;break}}return t}(e);if(t)return t}return e.constructor.name}return typeof e}function me(e,t){return null!=e?e:t}function he(e,n=[]){const o={};return Object.keys(e).forEach((r=>{if(-1===n.indexOf(r)){const n=e[r];o[r]=t(n)?void 0:i(n)?t(n.default)?n.default():n.default:n}})),o}const ve=(e,t,i=[])=>{for(const n in t)e[n]||-1!==i.indexOf(n)||(e[n]=t[n])};function ge(e,t,i){const{JulianDate:n,Color:o}=Cesium,r=n.now();return e?("function"==typeof e.getValue&&(e=e.getValue(i||r)),"string"==typeof e?o.fromCssColorString(e):"function"==typeof e?ge(e(i),t):e):t}function fe(e,i,n){const{JulianDate:o,Property:r}=Cesium,a=o.now();if(!e)return e;if(i){if(e instanceof i)return e;if(e instanceof r&&e._value instanceof i)return e._value}return t(e.getValue)?e.getValue(n||a):e}const ye=e=>Object.keys(e),be=n();function Ce(e,t=void 0){const i=o()?r(se,be):be;return e?a((()=>{var n,o;return null!=(o=null==(n=i.value)?void 0:n[e])?o:t})):i}const we=(e,t,i=!1)=>{var n;const r=!!o(),c=r?Ce():void 0;if(!(null!=(n=null==t?void 0:t.provide)?n:r?s:void 0))return;const u=a((()=>{const t=l(e);return(null==c?void 0:c.value)?_e(c.value,t):t}));return(null==t?void 0:t.provide)?t.provide(se,u):s(se,u),!i&&be.value||(be.value=u.value),u},_e=(e,t)=>{var i;const n=[...new Set([...ye(e),...ye(t)])],o={};for(const r of n)o[r]=null!=(i=t[r])?i:e[r];return o};function Oe(e){var t,i,n,o;return{log:((e="")=>function(...t){e&&(c(t[0])?t[0]=e.trim()+" "+t[0]:t=[e.trim(),...t])})(`[VueCesium] ${null==(t=null==e?void 0:e.proxy)?void 0:t.$options.name}`),warn:((e="")=>function(...t){e&&(c(t[0])?t[0]=e.trim()+" "+t[0]:t=[e.trim(),...t])})(`[VueCesium] WARN ${null==(i=null==e?void 0:e.proxy)?void 0:i.$options.name}`),error:((e="")=>function(...t){e&&(c(t[0])?t[0]=e.trim()+" "+t[0]:t=[e.trim(),...t])})(`[VueCesium] ERR ${null==(n=null==e?void 0:e.proxy)?void 0:n.$options.name}`),debug:((e="")=>function(...t){e&&(c(t[0])?t[0]=e.trim()+" "+t[0]:t=[e.trim(),...t])})(`[VueCesium] Debug ${null==(o=null==e?void 0:e.proxy)?void 0:o.$options.name}`),capsule:(e,t,i="primary")=>{},success:e=>{},warning:e=>{},danger:e=>{},primary:e=>{}}}Oe(void 0);const xe=Symbol("INSTALLED_KEY"),Pe=(e=[])=>({version:"3.2.8",install:(t,i)=>{if(t[xe])return;t[xe]=!0;const n=Object.assign({cesiumPath:"https://unpkg.com/cesium@latest/Build/Cesium/Cesium.js",accessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2OGE2MjZlOC1mMzhiLTRkZjQtOWEwZi1jZTE0MWY0YzhlMTAiLCJpZCI6MjU5LCJpYXQiOjE2NDM3MjU1NzZ9.ptZ5tVXvMmuWRC0WhjtYTg-17nQh14fgxBsx0HJiVXQ"},i);e.forEach((e=>{t.use(e,n)})),we(n,t,!0)}}),Se=Object.prototype.hasOwnProperty;function Ee(...e){let t;return"object"!=typeof e[e.length-1]&&(t=e.pop()),e.slice(1).reduce(((e,i,n)=>function(e,t,i){if(!e)throw new TypeError("argument dest is required");if(!t)throw new TypeError("argument src is required");return void 0===i&&(i=!0),Object.getOwnPropertyNames(t).forEach((function(n){if(!i&&Se.call(e,n))return;const o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,o)})),e}(e,i,t)),e[0])}function Te(e,t){return null!==e.vnode.props&&void 0!==e.vnode.props[t]}function Ie(e,t){const i=e.vnode.props;if(null===i)return;const n=Object.keys(i);return i[n[U(n,(e=>e.includes(`on${u(t)}`)||e.includes(`on${u(W(t))}`)))]]}function Me(e){return e.value}function De(e){var t;const i=e.parent;return i.cesiumClass||"VcViewer"===(null==(t=i.proxy)?void 0:t.$options.name)?i:De(i)}let je=!1;class Le{static extend(e){var t;if(je)return;const{Material:i,Color:n,Cartesian2:o}=Cesium;let r="\nuniform float globalAlpha;\nuniform bool axisY;\nuniform bool mixt;\n\nczm_material czm_getMaterial(czm_materialInput materialInput) {\n  czm_material material = czm_getDefaultMaterial(materialInput);\n  vec2 st = repeat * materialInput.st;\n\n  vec4 colorImage;\n  if (speed != 0.0) {\n    float currTime;\n    if (time < 0.0) {\n      currTime = speed * czm_frameNumber / 1000.0;\n    } else {\n      currTime = time;\n    }\n    colorImage = texture(image, vec2(fract((axisY ? st.t : st.s) - currTime), st.t));\n  } else {\n    colorImage = texture(image, st);\n  }\n\n  if (color.a == 0.0) {\n    if (colorImage.rgb == vec3(1.0)) {\n      discard;\n    }\n  }\n\n  if (color.rgb == vec3(1.0)) {\n    material.alpha = colorImage.a * globalAlpha;\n    material.diffuse = colorImage.rgb;\n  } else {\n    material.alpha = colorImage.a * color.a * globalAlpha;\n    if (mixt)\n      material.diffuse = max(colorImage.rgb * color.rgb * material.alpha * 3.0, colorImage.rgb * color.rgb);\n    else\n      material.diffuse = max(color.rgb * material.alpha * 3.0, color.rgb);\n  }\n\n  if (hasImage2) {\n    vec4 colorBG = texture(image2, materialInput.st);\n    if (colorBG.a > 0.5) {\n      material.diffuse = color2.rgb;\n    }\n  }\n  return material;\n}\n",a="\nczm_material czm_getMaterial(czm_materialInput materialInput) {\nczm_material material = czm_getDefaultMaterial(materialInput);\nmaterial.diffuse = 1.5 * color.rgb;\nvec2 st = materialInput.st;\nvec3 str = materialInput.str;\nfloat dis = distance(st, vec2(0.5, 0.5));\nfloat per = fract(time);\nif (abs(str.z) > 0.001) {\n  discard;\n}\nif (dis > 0.5) {\n  discard;\n} else {\n  float perDis = 0.5 / count;\n  float disNum;\n  float bl = .0;\n  for (int i = 0; i <= 9; i++) {\n    if (float(i) <= count) {\n      disNum = perDis *float(i) - dis + per / count;\n      if (disNum > 0.0) {\n        if (disNum < perDis) {\n          bl = 1.0 - disNum / perDis;\n        } else if(disNum - perDis < perDis) {\n          bl = 1.0 - abs(1.0 - disNum / perDis);\n        }\n        material.alpha = pow(bl, gradient);\n      }\n    }\n  }\n}\nreturn material;\n}",s="\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n  czm_material material = czm_getDefaultMaterial(materialInput);\n  vec2 st = materialInput.st;\n  vec4 colorImage = texture(image, vec2(fract(st.s - time), st.t));\n  material.alpha = colorImage.a * color.a;\n  material.diffuse = (colorImage.rgb+color.rgb)/2.0;\n  return material;\n}\n";(null==(t=e.scene.context)?void 0:t.webgl2)||(r=r.replace(/texture\(/g,"texture2D("),a=a.replace(/texture\(/g,"texture2D("),s=s.replace(/texture\(/g,"texture2D(")),i.VcCircleWave="VcCircleWave",Cesium.Material._materialCache.addMaterial(i.VcCircleWave,{fabric:{type:i.VcCircleWave,uniforms:{color:new n(1,0,0,1),time:1,count:1,gradient:.1},source:a},translucent:()=>!0}),i.VcLineFlow="VcLineFlow",Cesium.Material._materialCache.addMaterial(i.VcLineFlow,{fabric:{type:i.VcLineFlow,uniforms:{image:i.DefaultImageId,color:new n(1,1,1,1),repeat:new o(1,1),axisY:!1,mixt:!1,speed:10,time:-1,hasImage2:!1,image2:i.DefaultImageId,color2:new n(1,1,1),globalAlpha:1},source:r},translucent:()=>!0}),i.VcLineTrail="VcLineTrail",Cesium.Material._materialCache.addMaterial(i.VcLineTrail,{fabric:{type:i.VcLineTrail,uniforms:{image:i.DefaultImageId,color:new n(1,0,0,1),repeat:new o(1,1),time:0,axisY:!1},source:s},translucent:()=>!0}),je=!0}static revoke(e){je&&(je=!1)}}class Ae{constructor(e={}){this.options=e,this._definitionChanged=new Cesium.Event}get isConstant(){return!0}get definitionChanged(){return this._definitionChanged}getType(e){return null}getValue(e,t={}){return t}equals(e){return this===e}}class ke extends Ae{constructor(e){super(e);const{Event:t,defaultValue:i}=Cesium;Object.getOwnPropertyDescriptor(ke.prototype,"color")||Object.defineProperties(ke.prototype,{color:Cesium.createPropertyDescriptor("color")}),this._definitionChanged=new t,this._color=new Cesium.ConstantProperty(e.color),this._duration=i(e.duration,1e3),this.count=i(e.count,2),this.count<=0&&(this.count=1),this._gradient=i(e.gradient,.1),0===this._gradient&&(this._gradient=0),this._gradient>1&&(this._gradient=1),this._time=(new Date).getTime()}get isConstant(){return!1}get definitionChanged(){return this._definitionChanged}get color(){return this._color}set color(e){const t=this._color;t!==e&&(this._color=new Cesium.ConstantProperty(e),this._definitionChanged.raiseEvent(this,"color",e,t))}get duration(){return this._duration}set duration(e){const t=this._duration;t!==e&&(this._duration=e,this._definitionChanged.raiseEvent(this,"duration",e,t))}get count(){return this._count}set count(e){const t=this._count;t!==e&&(this._count=e,this._definitionChanged.raiseEvent(this,"count",e,t))}getType(){return"VcCircleWave"}getValue(e,t){return Cesium.defined(t)||(t={}),t.color=Cesium.Property.getValueOrClonedDefault(this._color,e,Cesium.Color.YELLOW,t.color),t.time=((new Date).getTime()-this._time)%this.duration/this.duration,t.count=this.count,t.gradient=1+10*(1-this._gradient),t}equals(e){return this===e||e instanceof ke&&Cesium.Property.equals(this._color,e._color)}}class Re extends Ae{constructor(e={}){var t,i,n,o,r,a,s,l,c,u;super(e);const{Color:d,Cartesian2:p,defined:m}=Cesium;this.image=null!=(t=e.image)?t:e.url,this.color=null!=(i=e.color)?i:new d(1,1,1,0),this.axisY=null!=(n=e.axisY)&&n,this.mixt=null!=(o=e.mixt)&&o,this.speed=null!=(r=e.speed)?r:10,this.duration=e.duration,this.repeat=null!=(a=e.repeat)?a:new p(1,1),this.image2=null!=(s=e.image2)?s:e.bgUrl,this.color2=null!=(c=null!=(l=e.color2)?l:e.bgColor)?c:new d(1,1,1,0),this.hasImage2=m(this.image2),this.globalAlpha=null==(u=e.globalAlpha)||u}getType(e){return"VcLineFlow"}getValue(e,t){const{Color:i,Cartesian2:n,defined:o}=Cesium;return!o(t)&&(t={}),t.image=this.image,t.color=ge(this.color,new i(1,1,1,0),e),t.repeat=fe(this.repeat,n,e),t.axisY=this.axisY,t.mixt=this.mixt,t.speed=fe(this.speed,Number,e),this.duration?void 0===this._time&&(this._time=(new Date).getTime(),t.time=((new Date).getTime()-this._time)/(1e3*this.duration)):t.time=-1,t.hasImage2=this.hasImage2,t.image2=this.image2,t.color2=ge(this.color2,new i(1,1,1,0),e),t.globalAlpha=this.globalAlpha,t}equals(e){return this===e||e instanceof Re&&Cesium.Property.equals(this.color,e.color)&&Cesium.Property.equals(this.repeat,e.repeat)&&this.image===e.image&&this.axisY===e.axisY&&this.speed===e.speed&&this.hasImage2===e.hasImage2&&this.image2===e.image2&&this.image2===e.image2&&Cesium.Property.equals(this.color2,e.color2)}}class Ve extends Ae{constructor(e={}){var t,i,n,o,r,a,s;super(e);const{Color:l,Cartesian2:c,defined:u}=Cesium;this.image=null!=(t=e.image)?t:e.url,this.color=null!=(i=e.color)?i:new l(1,0,0,1),this.axisY=null!=(n=e.axisY)&&n,this.time=null!=(o=e.time)?o:0,this.repeat=null!=(r=e.repeat)?r:new c(1,1),this.loop=null==(a=e.loop)||a,this.duration=null!=(s=e.duration)?s:3,this._time=(new Date).getTime()}getType(e){return"VcLineTrail"}getValue(e,t){const{Color:i,Cartesian2:n,defined:o}=Cesium;return!o(t)&&(t={}),this.lastTime>=.99&&!this.loop||(t.image=this.image,t.color=ge(this.color,new i(1,1,1,0),e),t.repeat=fe(this.repeat,n,e),t.axisY=this.axisY,t.time=((new Date).getTime()-this._time)%this.duration/this.duration,this.lastTime=t.time),t}equals(e){return this===e||e instanceof Ve&&Cesium.Property.equals(this.color,e.color)&&Cesium.Property.equals(this.repeat,e.repeat)&&this.image===e.image&&this.axisY===e.axisY&&this.duration===e.duration}}function Be(e,n=!1){const{Cartesian2:o,CallbackProperty:r}=Cesium;if(e instanceof Cesium.Cartesian2||e instanceof r)return e;if(i(e)&&d(e,"x")&&d(e,"y")){const t=e;return new o(t.x,t.y)}return p(e)?new o(e[0],e[1]):t(e)?new r(e,n):void 0}function Ne(e,n,o=!1){const{CallbackProperty:r,Cartesian3:a,Ellipsoid:s,SampledPositionProperty:l,CompositePositionProperty:c,ConstantPositionProperty:u,TimeIntervalCollectionPositionProperty:m}=Cesium;if(e instanceof a||e instanceof r||e instanceof l||e instanceof c||e instanceof u||e instanceof m)return e;if(n=n||s.WGS84,i(e)){if(d(e,"x")&&d(e,"y")&&d(e,"z")){const t=e;return new a(t.x,t.y,t.z)}if(d(e,"lng")&&d(e,"lat")){const t=e;return a.fromDegrees(t.lng,t.lat,t.height||0,n)}}return p(e)?a.fromDegrees(e[0],e[1],e[2]||0,n):t(e)?new r(e,o):void 0}function ze(e,n,o=!1){const{CallbackProperty:r,Cartesian3:a,Ellipsoid:s}=Cesium;if(e instanceof r)return e;if(t(e))return new r(e,o);if(n=n||s.WGS84,p(e)){if(p(e[0])||i(e[0])){const t=[];return e.forEach((e=>{t.push(Ne(e,n))})),t}return a.fromDegreesArrayHeights(e,n)}}function Fe(e,i){const{CallbackProperty:n}=Cesium;if(e instanceof n)return e;if(t(e))return new n(e,i);if(p(e)){const t=[];return e.forEach((e=>{t.push(Be(e))})),t}}function Ge(e,n=!1){const{CallbackProperty:o,Quaternion:r,VelocityOrientationProperty:a}=Cesium;if(e instanceof r||e instanceof o||e instanceof a)return e;if(i(e)&&d(e,"x")&&d(e,"y")){const t=e;return new r(t.x,t.y,t.z,t.w)}return p(e)?new r(e[0],e[1],e[2],e[3]):t(e)?new o(e,n):void 0}function He(e,t){e.forEach((e=>{e.positions=ze(e.positions,t),e.holes&&He(e.holes,t)}))}function Ue(e,n,o=!1){var r;const{PolygonHierarchy:a,CallbackProperty:s}=Cesium;if(e instanceof a||e instanceof s)return e;if(t(e))return new s(e,o);if(p(e)&&e.length>=3){return new a(ze(e,n))}if(i(e)&&d(e,"positions")){const t=$.cloneDeep(e);return t.positions=ze(t.positions,n),(null==(r=t.holes)?void 0:r.length)&&He(t.holes,n),t}}function We(e,n=!1){const{NearFarScalar:o,CallbackProperty:r}=Cesium;if(e instanceof o||e instanceof r)return e;if(i(e)&&d(e,"near")&&d(e,"far")){const t=e;return new o(t.near,t.nearValue||0,t.far,t.farValue||1)}return p(e)?new o(e[0],e[1],e[2],e[3]):t(e)?new r(e,n):void 0}function $e(e,n=!1){const{Color:o,CallbackProperty:r,defaultValue:a}=Cesium;if(e instanceof o||e instanceof r)return e;if(c(e))return o.fromCssColorString(e);if(i(e)){if(d(e,"red")){const t=e;return o.fromBytes(a(t.red,255),a(t.green,255),a(t.blue,255),a(t.alpha,255))}if(d(e,"x")){const t=e;return new o(a(t.x,1),a(t.y,1),a(t.z,1),a(t.w,1))}}return p(e)?o.fromBytes(e[0],e[1],e[2],a(e[3],255)):t(e)?new r(e,n):void 0}function Ze(e){var n;const o=null==(n=null==this?void 0:this.proxy)?void 0:n.$options.name;if(o&&(-1!==o.indexOf("Graphics")||-1!==o.indexOf("Datasource")||"VcOverlayDynamic"===o||"VcEntity"===o))return function(e,n=!1){const{CallbackProperty:o,Color:r,CheckerboardMaterialProperty:a,ColorMaterialProperty:s,CompositeMaterialProperty:l,GridMaterialProperty:u,ImageMaterialProperty:m,MaterialProperty:h,PolylineArrowMaterialProperty:v,PolylineDashMaterialProperty:g,PolylineGlowMaterialProperty:f,PolylineOutlineMaterialProperty:y,StripeMaterialProperty:b,StripeOrientation:C,defaultValue:w,Cartesian2:_,Material:O}=Cesium;if(e instanceof o||e instanceof r||e instanceof a||e instanceof s||e instanceof l||e instanceof u||e instanceof m||e instanceof h||e instanceof v||e instanceof g||e instanceof f||e instanceof y||e instanceof b||e instanceof ke||e instanceof Re||e instanceof Ve)return e;if(c(e)&&/(.*)\.(jpg|bmp|gif|ico|pcx|jpeg|tif|png|raw|tga)$/.test(e)||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement)return new m({image:e,repeat:Be({x:1,y:1}),color:r.WHITE,transparent:!0});if(p(e)||c(e))return new s($e(e));if(i(e)&&d(e,"fabric")){const t=e;switch(t.fabric.type){case"Image":return new m({image:t.fabric.uniforms.image,repeat:Be(w(t.fabric.uniforms.repeat,{x:1,y:1})),color:w($e(t.fabric.uniforms.color),r.WHITE),transparent:w(t.fabric.uniforms.transparent,!1)});case"Color":return new s($e(w(t.fabric.uniforms.color,r.WHITE)));case"PolylineArrow":return new v($e(w(t.fabric.uniforms.color,r.WHITE)));case"PolylineDash":return new g({color:$e(w(t.fabric.uniforms.color,"white")),gapColor:$e(w(t.fabric.uniforms.gapColor,r.TRANSPARENT)),dashLength:w(t.fabric.uniforms.dashLength,16),dashPattern:w(t.fabric.uniforms.dashPattern,255)});case"PolylineGlow":return new f({color:$e(w(t.fabric.uniforms.color,r.WHITE)),glowPower:w(t.fabric.uniforms.glowPower,.25),taperPower:w(t.fabric.uniforms.taperPower,1)});case"PolylineOutline":return new y({color:$e(w(t.fabric.uniforms.color,r.WHITE)),outlineColor:$e(w(t.fabric.uniforms.outlineColor,r.BLACK)),outlineWidth:w(t.fabric.uniforms.outlineWidth,1)});case"Checkerboard":return new a({evenColor:$e(w(t.fabric.uniforms.evenColor,r.WHITE)),oddColor:$e(w(t.fabric.uniforms.oddColor,r.BLACK)),repeat:w(Be(t.fabric.uniforms.repeat),{x:2,y:2})});case"Grid":return new u({color:$e(w(t.fabric.uniforms.color,r.WHITE)),cellAlpha:w(t.fabric.uniforms.cellAlpha,.1),lineCount:w(Be(t.fabric.uniforms.lineCount),{x:8,y:8}),lineThickness:w(Be(t.fabric.uniforms.lineThickness),{x:1,y:1}),lineOffset:w(Be(t.fabric.uniforms.lineOffset),{x:0,y:0})});case"Stripe":return new b({orientation:w(t.fabric.uniforms.orientation,C.HORIZONTAL),evenColor:$e(w(t.fabric.uniforms.evenColor,"white")),oddColor:$e(w(t.fabric.uniforms.oddColor,"black")),offset:w(t.fabric.uniforms.offset,0),repeat:w(t.fabric.uniforms.repeat,1)});case"VcCircleWave":return new ke({duration:w(t.fabric.uniforms.duration,3e3),gradient:w(t.fabric.uniforms.gradient,.5),color:$e(w(t.fabric.uniforms.color,r.RED)),count:w(t.fabric.uniforms.count,3)});case"VcLineFlow":return new Re({image:w(t.fabric.uniforms.image,O.DefaultImageId),color:$e(w(t.fabric.uniforms.color,new r(1,1,1,1))),repeat:Be(w(t.fabric.uniforms.repeat,new _(1,1))),axisY:w(t.fabric.uniforms.axisY,!1),mixt:w(t.fabric.uniforms.mixt,!1),speed:w(t.fabric.uniforms.speed,10),time:w(t.fabric.uniforms.time,-1)});case"VcLineTrail":return new Ve({image:w(t.fabric.uniforms.image,O.DefaultImageId),color:$e(w(t.fabric.uniforms.color,new r(1,0,0,1))),repeat:Be(w(t.fabric.uniforms.repeat,new _(1,1))),axisY:w(t.fabric.uniforms.axisY,!1),duration:w(t.fabric.uniforms.duration,3e3),loop:w(t.fabric.uniforms.loop,!0)})}}return t(e)?new o(e,n):e}(e);const{Material:r,combine:a}=Cesium;if(e instanceof r)return e;if(i(e)&&d(e,"fabric")){const t=e=>{for(const n in e)if(!p(e[n])&&i(e[n]))t(e[n]);else if(-1!==n.toLocaleLowerCase().indexOf("color")&&!ce(e[n])){const t=$e(e[n]);e[n]=a(t,t,!0)}};return t(e),new r(e)}if(p(e)||c(e)){const t=r.fromType("Color");return t.uniforms.color=$e(e),t}}function qe(e){var t;const{Appearance:n,DebugAppearance:o,MaterialAppearance:r,PolylineColorAppearance:a,EllipsoidSurfaceAppearance:s,PerInstanceColorAppearance:l,PolylineMaterialAppearance:c}=Cesium;if(e instanceof n||e instanceof o||e instanceof r||e instanceof a||e instanceof s||e instanceof l||e instanceof c)return e;if(i(e)&&d(e,"type")){const i={...e.options};return(null==(t=e.options)?void 0:t.material)&&(i.material=Ze.call(this,e.options.material)),new Cesium[e.type]({...i})}}function Ye(e,n=!1){const{Rectangle:o,RectangleGraphics:r,CallbackProperty:a}=Cesium;if(e instanceof r||e instanceof o||e instanceof a)return e;if(p(e))return o.fromDegrees(e[0],e[1],e[2],e[3]);if(i(e)){if(d(e,"west")){const t=e;return o.fromDegrees(t.west,t.south,t.east,t.north)}if(d(e,"x")){const t=e;return new o(t.x,t.y,t.z,t.w)}}return t(e)?new a(e,n):void 0}function Je(e,n=!1){const{BoundingRectangle:o,CallbackProperty:r}=Cesium;if(e instanceof o||e instanceof r)return e;if(i(e)&&d(e,"x")){const t=e;return new o(t.x,t.y,t.width,t.height)}return p(e)?new o(e[0],e[1],e[2],e[3]):t(e)?new r(e,n):void 0}function Xe(e,t){const{Math:i,Rectangle:n,defaultValue:o}=Cesium;let r,a={};if(d(e,"position")){const n=e.position;r=Ne(n,t),a=d(n,"lng")&&d(n,"lat")||p(n)?{heading:i.toRadians(o(e.heading,360)),pitch:i.toRadians(o(e.pitch,-90)),roll:i.toRadians(o(e.roll,0))}:{heading:o(e.heading,2*Math.PI),pitch:o(e.pitch,-Math.PI/2),roll:o(e.roll,0)}}else if(d(e,"rectangle")){const t=e.rectangle;r=Ye(t),n.validate(r),a=d(t,"west")&&d(t,"south")&&d(t,"east")&&d(t,"north")||p(t)?{heading:i.toRadians(o(e.heading,360)),pitch:i.toRadians(o(e.pitch,-90)),roll:i.toRadians(o(e.roll,0))}:{heading:o(e.heading,2*Math.PI),pitch:o(e.pitch,-Math.PI/2),roll:o(e.roll,0)}}return{destination:r,orientation:a}}function Qe(e,t){const{destination:i,orientation:n}=Xe(t,e.scene.globe.ellipsoid);e.camera.setView({destination:i,orientation:n})}function Ke(e,t,i){const{destination:n,orientation:o}=Xe(t,e.scene.globe.ellipsoid);e.camera.flyTo({...i,destination:(null==i?void 0:i.destination)||n,orientation:(null==i?void 0:i.orientation)||o})}function et(e,t,i){const{EllipsoidGeodesic:n,Ellipsoid:o}=Cesium;return new n((i=i||o.WGS84).cartesianToCartographic(e),i.cartesianToCartographic(t)).surfaceDistance}function tt(e,t,i,n){const{HeadingPitchRoll:o,Transforms:r,Matrix4:a,Cartesian3:s,Cartesian4:l,Quaternion:c,Cartographic:u,Ellipsoid:d}=Cesium;n=n||d.WGS84;const p=new o(t,0,0),m=new s(1,1,1),h=r.headingPitchRollToFixedFrame(e,p),v=a.getColumn(h,1,new l),g=new s(v.x,v.y,v.z),f=c.fromAxisAngle(g,i*n.oneOverRadii.x),y=a.fromTranslationQuaternionRotationScale(s.ZERO,f,m),b=a.multiplyByPoint(y,e,new s),C=u.fromCartesian(e,n),w=u.fromCartesian(b,n);return w.height=C.height,u.toCartesian(w,n)}function it(e){let t=0;const{CoplanarPolygonGeometry:i,VertexFormat:n,defined:o,Cartesian3:r}=Cesium,a=i.createGeometry(i.fromPositions({positions:e,vertexFormat:n.POSITION_ONLY}));if(!G(a)&&o(a)){const e=a.indices,i=a.attributes.position.values;for(let n=0;n<e.length;n+=3){const o=e[n],a=e[n+1],s=e[n+2];t+=nt(r.unpack(i,3*o,{}),r.unpack(i,3*a,{}),r.unpack(i,3*s,{}))}}return t}const nt=(e,t,i)=>{const{Cartesian3:n}=Cesium,o=n.subtract(e,t,{}),r=n.subtract(i,t,{}),a=n.cross(o,r,o);return.5*n.magnitude(a)};function ot(e){const{JulianDate:t}=Cesium;return e instanceof t?e:c(e)?Cesium.JulianDate.fromDate(new Date(e)):e instanceof Date?Cesium.JulianDate.fromDate(e):Cesium.JulianDate.now()}function rt(e){const{HeadingPitchRange:t,Math:n}=Cesium;return e instanceof Cesium.HeadingPitchRange?e:Array.isArray(e)?new t(n.toRadians(e[0])||0,n.toRadians(e[1])||0,e[2]||0):i(e)?new t(e.heading||0,e.pitch||0,e.range||0):new t}function at(e,t){const{Cartesian3:i,Matrix4:n,Transforms:o,Math:r}=Cesium,a=new i,s=o.eastNorthUpToFixedFrame(e);return n.inverse(s,s),n.multiplyByPoint(s,t,a),i.normalize(a,a),r.toDegrees(Math.atan2(a.x,a.y))}function st(e,t){const{Cartesian3:i,Matrix4:n,Transforms:o,Math:r}=Cesium,a=new i,s=o.eastNorthUpToFixedFrame(e);return n.inverse(s,s),n.multiplyByPoint(s,t,a),i.normalize(a,a),r.toDegrees(Math.asin(a.z))}function lt(e,t,i,n=[]){const{Cartesian3:o,Ray:r,defined:a}=Cesium,s=new r(e,o.normalize(o.subtract(t,e,new o),new o)),l=i.scene.pickFromRay(s,n);if(a(l)&&a(l.position)){return l.position}}function ct(e){const t=-40467.74;return Math.round(t+80955.31/(1+Math.pow(e/91610.74,7096758e-11)))}function ut(e,t,i=">="){return m(e=e||"1.6.7",t,i)}const dt={position:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ne,deep:!0}}},pt={viewFrom:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ne,deep:!0}}},mt={orientation:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ge}}},ht={alignedAxis:{type:[Object,Array,Function],default:()=>({x:0,y:0,z:0}),watcherOptions:{cesiumObjectBuilder:Ne}}},vt={color:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:$e}}},gt={depthFailColor:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:$e}}},ft={disableDepthTestDistance:[Number,Object,Function]},yt={distanceDisplayCondition:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:function(e,n=!1){const{DistanceDisplayCondition:o,CallbackProperty:r}=Cesium;if(e instanceof o||e instanceof r)return e;if(i(e)&&d(e,"near")&&d(e,"far")){const t=e;return new o(t.near,t.far)}return p(e)?new o(e[0],e[1]):t(e)?new r(e,n):void 0}}}},bt={eyeOffset:{type:[Object,Array,Function],default:()=>({x:0,y:0,z:0}),watcherOptions:{cesiumObjectBuilder:Ne}}},Ct={height:[Number,Object,Function]},wt={heightReference:{type:[Number,Object,Function]}},_t={horizontalOrigin:{type:[Number,Object,Function],default:0}},Ot={image:[String,Object,HTMLCanvasElement,Function]},xt={imageSubRegion:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Je}}},Pt={pixelOffset:{type:[Object,Array,Function],default:()=>({x:0,y:0}),validator:e=>p(e)?2===e.length:h(e)?d(e,"x")&&d(e,"y"):!!t(e),watcherOptions:{cesiumObjectBuilder:Be}}},St={pixelOffsetScaleByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:We}}},Et={rotation:{type:[Number,Object,Function],default:0}},Tt={scale:{type:[Number,Object,Function],default:1}},It={scaleByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:We}}},Mt={show:{type:[Boolean,Object,Function],default:!0}},Dt={sizeInMeters:{type:[Boolean,Object,Function],default:!1}},jt={translucencyByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:We}}},Lt={verticalOrigin:{type:[Number,Object,Function],default:0}},At={width:[Number,Object,Function]},kt={dimensions:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ne}}},Rt={fill:{type:[Boolean,Object,Function],default:!0}},Vt={material:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:Ze}}},Bt={outline:{type:[Boolean,Object,Function],default:!1}},Nt={outlineColor:{type:[Object,String,Array,Function],default:"black",watcherOptions:{cesiumObjectBuilder:$e}}},zt={outlineWidth:{type:[Number,Object,Function],default:1}},Ft={shadows:[Number,Object,Function]},Gt={positions:{type:[Array,Object,Function],watcherOptions:{cesiumObjectBuilder:ze,exclude:"_callback",deep:!0}}},Ht={extrudedHeight:[Number,Object,Function]},Ut={extrudedHeightReference:[Number,Object,Function]},Wt={cornerType:{type:[Number,Object,Function],default:0}},$t={granularity:[Number,Object,Function]},Zt={classificationType:{type:[Number,Object,Function]}},qt={zIndex:[Number,Object,Function]},Yt={length:[Number,Object,Function]},Jt={topRadius:[Number,Object,Function]},Xt={bottomRadius:[Number,Object,Function]},Qt={numberOfVerticalLines:{type:[Number,Object,Function],default:16}},Kt={slices:{type:[Number,Object,Function],default:128}},ei={semiMajorAxis:[Number,Object,Function]},ti={semiMinorAxis:[Number,Object,Function]},ii={stRotation:{type:[Number,Object,Function],default:0}},ni={radii:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ne}}},oi={innerRadii:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ne}}},ri={minimumClock:{type:[Number,Object,Function],default:0}},ai={maximumClock:{type:[Number,Object,Function],default:2*Math.PI}},si={minimumCone:{type:[Number,Object,Function],default:0}},li={maximumCone:{type:[Number,Object,Function],default:Math.PI}},ci={stackPartitions:{type:[Number,Object,Function],default:64}},ui={slicePartitions:{type:[Number,Object,Function],default:64}},di={subdivisions:{type:[Number,Object,Function],default:128}},pi={text:[String,Object,Function]},mi={font:{type:[String,Object,Function],default:"30px sans-serif"}},hi={labelStyle:{type:[Number,Object,Function],default:0}},vi={showBackground:{type:[Boolean,Object,Function],default:!1}},gi={backgroundColor:{type:[Object,String,Array,Function],default:()=>({x:.165,y:.165,z:.165,w:.8}),watcherOptions:{cesiumObjectBuilder:$e}}},fi={backgroundPadding:{type:[Object,Array,Function],default:()=>({x:7,y:5}),watcherOptions:{cesiumObjectBuilder:Be}}},yi={fillColor:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:$e}}},bi={uri:[String,Object,Function]},Ci={minimumPixelSize:{type:[Number,Object,Function],default:0}},wi={maximumScale:[Number,Object,Function]},_i={incrementallyLoadTextures:{type:[Boolean,Object,Function],default:!0}},Oi={clampAnimations:{type:[Boolean,Object,Function],default:!0}},xi={clampAnimations:{type:[Boolean,Object,Function],default:!0}},Pi={silhouetteColor:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:$e}}},Si={silhouetteSize:{type:[Number,Object,Function],default:0}},Ei={colorBlendMode:{type:[Number,Object,Function],default:0}},Ti={colorBlendAmount:{type:[Number,Object,Function],default:.5}},Ii={imageBasedLightingFactor:{type:[Object,Array,Function],default:()=>[1,1],watcherOptions:{cesiumObjectBuilder:Be}}},Mi={lightColor:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:$e}}},Di={nodeTransformations:{type:[Object,Function],watcherOptions:{cesiumObjectBuilder:function(e,n=!1){const{TranslationRotationScale:o,CallbackProperty:r}=Cesium;if(e instanceof r||e instanceof o)return e;if(i(e)&&d(e,"translation")){const t=e;return new o(Ne(t.translation),Ge(t.rotation),Ne(t.scale))}return p(e)?new o(Ne(e[0]),Ge(e[1]),Ne(e[2])):t(e)?new r(e,n):e}}}},ji={articulations:[Object,Function]},Li={clippingPlanes:[Object,Function]},Ai={plane:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:function(e,n=!1){const{Cartesian3:o,Plane:r,PlaneGraphics:a,CallbackProperty:s}=Cesium;if(e instanceof a||e instanceof r||e instanceof s)return e;if(i(e)&&d(e,"normal")){const t=e;return o.normalize(Ne(t.normal),t.normal),new r(t.normal,t.distance)}if(p(e)){const t=Ne(e[0]);return new r(o.normalize(t,new o),e[1])}return t(e)?new s(e,n):void 0}}}},ki={pixelSize:{type:[Number,Object,Function],default:1}},Ri={hierarchy:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ue,deep:!0,exclude:"_callback"}}},Vi={perPositionHeight:{type:[Boolean,Object,Function],default:!1}},Bi={closeTop:{type:[Boolean,Object,Function],default:!0}},Ni={closeBottom:{type:[Boolean,Object,Function],default:!0}},zi={arcType:{type:[Number,Object,Function],default:1}},Fi={depthFailMaterial:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:Ze}}},Gi={clampToGround:{type:[Boolean,Object,Function],default:!1}},Hi={shape:{type:[Array,Object,Function],watcherOptions:{cesiumObjectBuilder:Fe}}},Ui={coordinates:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ye}}},Wi={maximumScreenSpaceError:{type:[Number,Object,Function],default:16}},$i={minimumHeights:[Array,Object,Function]},Zi={maximumHeights:[Array,Object,Function]},qi={cutoutRectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ye}}},Yi={colorToAlpha:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:$e}}},Ji={url:[String,Object]},Xi={token:String},Qi={tileDiscardPolicy:Object},Ki={layers:String},en={enablePickFeatures:{type:Boolean,default:!0}},tn={rectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ye}}},nn={tilingScheme:Object},on={ellipsoid:Object},rn={credit:{type:[String,Object],default:""}},an={tileWidth:{type:Number,default:256}},sn={tileHeight:{type:Number,default:256}},ln={maximumLevel:Number},cn={minimumLevel:{type:Number,default:0}},un={fileExtension:{type:String,default:"png"}},dn={accessToken:String},pn={format:{type:String,default:"png"}},mn={subdomains:[String,Array]},hn={getFeatureInfoFormats:Array},vn={clock:Object},gn={times:Object},fn={projectionTransforms:{type:[Boolean,Object],default:!1}},yn={customShader:{type:Object}},bn={maximumMemoryUsage:{type:Number,default:256}},Cn={defaultColor:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:$e}}},wn={tileStyle:{type:Object}},_n={allowPicking:{type:Boolean,default:!0}},On={asynchronous:{type:Boolean,default:!0}},xn={debugShowShadowVolume:{type:Boolean,default:!1}},Pn={releaseGeometryInstances:{type:Boolean,default:!0}},Sn={interleave:{type:Boolean,default:!1}},En={appearance:{type:Object,watcherOptions:{cesiumObjectBuilder:qe,deep:!0}}},Tn={depthFailAppearance:{type:Object,watcherOptions:{cesiumObjectBuilder:qe,deep:!0}}},In={geometryInstances:[Array,Object]},Mn={vertexCacheOptimize:{type:Boolean,default:!1}},Dn={compressVertices:{type:Boolean,default:!0}},jn={modelMatrix:Object},Ln={debugShowBoundingVolume:{tyep:Boolean,default:!1}},An={scene:Object},kn={blendOption:{type:Number,default:2}},Rn={id:null},Vn={loop:{type:Boolean,default:!1}},Bn={debugWireframe:{type:Boolean,default:!1}},Nn={vertexFormat:Object},zn={center:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ne}}},Fn={radius:Number},Gn={frustum:Object},Hn={origin:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ne}}},Un={polygonHierarchy:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ue,deep:!0}}},Wn={startColor:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:$e}}},$n={endColor:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:$e}}},Zn={minimumImageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Be}}},qn={maximumImageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Be}}},Yn={imageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Be}}},Jn={shapePositions:{type:Array,watcherOptions:{cesiumObjectBuilder:Fe,deep:!0}}},Xn={polylinePositions:{type:Array,watcherOptions:{cesiumObjectBuilder:ze,deep:!0}}},Qn={lightColor:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ne}}},Kn={luminanceAtZenith:{type:Number,default:.2}},eo={sphericalHarmonicCoefficients:{type:[Array,Object],watcherOptions:{cesiumObjectBuilder:ze}}},to={specularEnvironmentMaps:String},io={imageBasedLighting:{type:Object,watcherOptions:{cesiumObjectBuilder:function(e){const{ImageBasedLighting:t,defined:i}=Cesium;if(e instanceof Cesium.ImageBasedLighting)return e;const n=new t;return n.imageBasedLightingFactor&&(n.imageBasedLightingFactor=Be(e.imageBasedLightingFactor)),n.sphericalHarmonicCoefficients&&(n.sphericalHarmonicCoefficients=ze(e.sphericalHarmonicCoefficients)),n.luminanceAtZenith&&(n.luminanceAtZenith=Number(e.luminanceAtZenith)),i(n.specularEnvironmentMaps)&&(n.specularEnvironmentMaps=e.specularEnvironmentMaps),n}}}},no={backFaceCulling:{type:Boolean,default:!0}},oo={colors:{type:Array,watcherOptions:{cesiumObjectBuilder:function(e){if(p(e)){const t=[];return e.forEach((e=>{t.push($e(e))})),t}return e},deep:!0}}},ro={data:{type:[String,Object],required:!0}},ao={sourceUri:{type:[String,Object]}},so={options:{type:Object,watcherOptions:{cesiumObjectBuilder:function(e){var t;const i={};return"VcDatasourceGeojson"===(null==(t=this.proxy)?void 0:t.$options.name)?(Object.assign(i,e),i&&i.markerColor&&(i.markerColor=$e(i.markerColor)),i&&i.stroke&&(i.stroke=$e(i.stroke)),i&&i.fill&&(i.fill=$e(i.fill)),i):e},deep:!0}}},lo={glowColor:{type:[String,Array,Object],default:()=>[0,1,0,.05],watcherOptions:{cesiumObjectBuilder:$e}}},co={clearColor:{type:[String,Array,Object],watcherOptions:{cesiumObjectBuilder:$e}}},uo={scissorRectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Je}}},po={enableMouseEvent:{type:Boolean,default:!0}},mo=Object.freeze(Object.defineProperty({__proto__:null,accessToken:dn,alignedAxis:ht,allowPicking:_n,appearance:En,arcType:zi,articulations:ji,asynchronous:On,backFaceCulling:no,backgroundColor:gi,backgroundPadding:fi,blendOption:kn,bottomRadius:Xt,center:zn,clampAnimations:xi,clampToGround:Gi,classificationType:Zt,clearColor:co,clippingPlanes:Li,clock:vn,closeBottom:Ni,closeTop:Bi,color:vt,colorBlendAmount:Ti,colorBlendMode:Ei,colorToAlpha:Yi,colors:oo,compressVertices:Dn,coordinates:Ui,cornerType:Wt,credit:rn,customShader:yn,cutoutRectangle:qi,data:ro,debugShowBoundingVolume:Ln,debugShowShadowVolume:xn,debugWireframe:Bn,defaultColor:Cn,depthFailAppearance:Tn,depthFailColor:gt,depthFailMaterial:Fi,dimensions:kt,disableDepthTestDistance:ft,distanceDisplayCondition:yt,ellipsoid:on,enableMouseEvent:po,enablePickFeatures:en,endColor:$n,extrudedHeight:Ht,extrudedHeightReference:Ut,eyeOffset:bt,fileExtension:un,fill:Rt,fillColor:yi,font:mi,format:pn,frustum:Gn,geometryInstances:In,getFeatureInfoFormats:hn,glowColor:lo,granularity:$t,height:Ct,heightReference:wt,hierarchy:Ri,horizontalOrigin:_t,id:Rn,image:Ot,imageBasedLighting:io,imageBasedLightingFactor:Ii,imageSize:Yn,imageSubRegion:xt,incrementallyLoadTextures:_i,innerRadii:oi,interleave:Sn,labelStyle:hi,layers:Ki,length:Yt,lightColor:Mi,lightColor2:Qn,loop:Vn,luminanceAtZenith:Kn,material:Vt,maximumClock:ai,maximumCone:li,maximumHeights:Zi,maximumImageSize:qn,maximumLevel:ln,maximumMemoryUsage:bn,maximumScale:wi,maximumScreenSpaceError:Wi,minimumClock:ri,minimumCone:si,minimumHeights:$i,minimumImageSize:Zn,minimumLevel:cn,minimumPixelSize:Ci,modelMatrix:jn,nodeTransformations:Di,numberOfVerticalLines:Qt,options:so,orientation:mt,origin:Hn,outline:Bt,outlineColor:Nt,outlineWidth:zt,perPositionHeight:Vi,pixelOffset:Pt,pixelOffsetScaleByDistance:St,pixelSize:ki,plane:Ai,polygonHierarchy:Un,polylinePositions:Xn,position:dt,positions:Gt,projectionTransforms:fn,radii:ni,radius:Fn,rectangle:tn,releaseGeometryInstances:Pn,rotation:Et,runAnimations:Oi,scale:Tt,scaleByDistance:It,scene:An,scissorRectangle:uo,semiMajorAxis:ei,semiMinorAxis:ti,shadows:Ft,shape:Hi,shapePositions:Jn,show:Mt,showBackground:vi,silhouetteColor:Pi,silhouetteSize:Si,sizeInMeters:Dt,slicePartitions:ui,slices:Kt,sourceUri:ao,specularEnvironmentMaps:to,sphericalHarmonicCoefficients:eo,stRotation:ii,stackPartitions:ci,startColor:Wn,subdivisions:di,subdomains:mn,text:pi,tileDiscardPolicy:Qi,tileHeight:sn,tileStyle:wn,tileWidth:an,tilingScheme:nn,times:gn,token:Xi,topRadius:Jt,translucencyByDistance:jt,uri:bi,url:Ji,vertexCacheOptimize:Mn,vertexFormat:Nn,verticalOrigin:Lt,viewFrom:pt,width:At,zIndex:qt},Symbol.toStringTag,{value:"Module"}));var ho={name:"zh-hans",nativeName:"中文(简体)",vc:{loadError:"加载失败，必须作为 VcViewer 的子组件加载。",navigation:{compass:{outerTip:"旋转视图：顺/逆时针方向拖拽罗盘外环。\n重置视图：双击罗盘外环。",innerTip:"翻转视图：由内环向外环拖拽罗盘。\n 或者按住 Ctrl 键的同时拖拽地图。",title:"按住鼠标拖拽旋转相机。"},zoomCotrol:{zoomInTip:"放大",zoomResetTip:"重置视图",zoomOutTip:"缩小"},print:{printTip:"场景截图/打印",printViewTitle:"打印预览",credit:"地图版权",screenshot:"场景截图"},myLocation:{myLocationTip:"定位您的位置",positioning:"定位中...",fail:"定位失败",centreMap:"我的位置",lat:"纬度",lng:"经度",address:"地址"},statusBar:{lat:"纬度",lng:"经度",zone:"带号",e:"X",n:"Y",elev:"高程",level:"层级",heading:"方位",pitch:"俯仰",roll:"侧翻",cameraHeight:"视高",tip:"点击切换鼠标显示坐标为 UTM 投影坐标"}},navigationSm:{compass:{outerTip:"旋转视图：顺/逆时针方向拖拽罗盘外环；重置视图：双击罗盘外环。"},zoomCotrol:{zoomInTip:"放大",zoomBarTip:"按住滑块向上放大，向下缩小。",zoomOutTip:"缩小"}},measurement:{expand:"展开",collapse:"收拢",editor:{move:"移动节点",insert:"插入节点",remove:"移除节点",removeAll:"移除所有节点"},distance:{tip:"距离量算",drawingTipStart:"单击左键绘制距离量算起点。",drawingTipEnd:"单击左键绘制距离量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},"component-distance":{tip:"三角量算",drawingTipStart:"单击左键绘制三角量算起点。",drawingTipEnd:"单击左键绘制三角量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},polyline:{tip:"折线距离量算",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"单击左键绘制下一个点，双击左键结束量算。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},horizontal:{tip:"水平距离量算",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"单击左键绘制下一个点，双击左键结束量算。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},vertical:{tip:"垂直距离量算",drawingTipStart:"单击左键绘制垂直距离量算起点。",drawingTipEnd:"单击左键绘制垂直距离量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},height:{tip:"地表高度量算",drawingTipStart:"单击左键绘制高度量算点。",drawingTipEnd:"单击左键绘制高度量算点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},area:{tip:"面积量算",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"点击左键绘制下一个点，双击左键结束量算。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},point:{tip:"坐标量算",drawingTipStart:"点击左键绘制坐标量算点。",drawingTipEnd:"点击左键绘制坐标量算点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。",lng:"经度：",lat:"纬度：",height:"高度：",slope:"坡度："},rectangle:{tip:"矩形量算",drawingTipStart:"单击左键绘制矩形量算起点。",drawingTipEnd:"单击左键绘制矩形量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},regular:{tip:"正多边形量算",drawingTipStart:"单击左键绘制正多边形量算起点。",drawingTipEnd:"单击左键绘制正多边形量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},circle:{tip:"圆形量算",drawingTipStart:"单击左键绘制圆形量算起点。",drawingTipEnd:"单击左键绘制圆形量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},clear:{tip:"清除量算结果"}},drawing:{expand:"展开",collapse:"收拢",editor:{move:"移动节点",insert:"插入节点",remove:"移除节点",removeAll:"移除所有节点"},pin:{tip:"绘制图标点",drawingTipStart:"点击左键绘制图标点。",drawingTipEnd:"点击左键绘制图标点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},point:{tip:"绘制点",drawingTipStart:"点击左键绘制点。",drawingTipEnd:"点击左键绘制点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},polyline:{tip:"绘制线",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"单击左键绘制下一个点，双击左键结束绘制。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},polygon:{tip:"绘制面",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"单击左键绘制下一个点，双击左键结束绘制。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},rectangle:{tip:"绘制矩形",drawingTipStart:"单击左键绘制矩形起点。",drawingTipEnd:"单击左键绘制矩形终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},circle:{tip:"绘制圆",drawingTipStart:"单击左键绘制圆形起点。",drawingTipEnd:"单击左键绘制圆形终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},regular:{tip:"绘制正多边形",drawingTipStart:"单击左键绘制正多边形起点。",drawingTipEnd:"单击左键绘制正多边形终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},clear:{tip:"清除绘制结果"}},analysis:{expand:"展开",collapse:"收拢",editor:{move:"移动节点",insert:"插入节点",remove:"移除节点",removeAll:"移除所有节点"},sightline:{tip:"通视分析",drawingTipStart:"单击左键绘制观测点。",drawingTipEnd:"单击左键绘制目标点，双击左键结束绘制。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},viewshed:{tip:"可视域分析",drawingTipStart:"单击左键绘制可视域分析起点。",drawingTipEnd:"单击左键绘制可视域分析终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},clear:{tip:"清除分析结果"}},overview:{show:"显示鹰眼",hidden:"隐藏鹰眼"},typhoon:{warn:"播放台风失败，原因：未找到对应编号的台风数据。"}}};const vo=e=>(t,i)=>go(t,i,l(e)),go=(e,t,i)=>Z(i,e,e).replace(/\{(\w+)\}/g,((e,i)=>{var n;return`${null!=(n=null==t?void 0:t[i])?n:`{${i}}`}`})),fo=e=>({lang:a((()=>l(e).name)),locale:v(e)?e:n(e),t:vo(e)}),yo=()=>{const e=Ce("locale");return fo(a((()=>e.value||ho)))};function bo(e,t,i){const n=(e,i,n=!0)=>{const o=i||t.cesiumEvents||[];o&&o.forEach((i=>{if(e[i]){const o=Ie(t,i),r=n?"addEventListener":"removeEventListener";o&&e[i][r](o)}}))};function o(t){if(!e.enableMouseEvent||!t)return;const i=this.viewer,{eventName:n}=this,o=t.position||t.endPosition;if(!o)return;const r=[];let a,s;-1!==n.indexOf("LEFT_DOUBLE_CLICK")?a="dblclick":-1!==n.indexOf("CLICK")?a="click":-1!==n.indexOf("DOWN")?a="mousedown":-1!==n.indexOf("UP")?a="mouseup":-1!==n.indexOf("MOUSE_MOVE")&&(a="mousemove"),"mousemove"===a?s="mouseout":"click"===a&&(s="clickout");const l=i.scene.pick(o);if(Cesium.defined(l)?(this.pickedFeature&&this.pickedFeature.id!==l.id&&r.push({callbackName:s,pickedFeature:this.pickedFeature}),"mousemove"!==a||this.pickedFeature&&this.pickedFeature.id===l.id||r.push({callbackName:"mouseover",pickedFeature:l}),r.push({callbackName:a,pickedFeature:l})):(this.pickedFeature&&r.push({callbackName:s,pickedFeature:this.pickedFeature}),this.pickedFeature=void 0),0===r.length)return;let c;const d=i.scene;if(d.mode===Cesium.SceneMode.SCENE3D){const e=d.camera.getPickRay(o);c=d.globe.pick(e,d)}else c=d.camera.pickEllipsoid(o,d.globe.ellipsoid);let m=-1;-1!==n.indexOf("LEFT")?m=0:-1!==n.indexOf("MIDDLE")?m=1:-1!==n.indexOf("RIGHT")&&(m=2);const h=[];r.forEach((e=>{const t=e.callbackName,i=e.pickedFeature;i.id&&(p(i.id)?i.id[0]instanceof Cesium.Entity?h.push({callbackName:t,cesiumObject:i.id[0].entityCollection.owner,pickedFeature:i}):h.push({callbackName:t,cesiumObject:i.primitive.owner,pickedFeature:i}):i.id instanceof Cesium.Entity&&(h.push({callbackName:t,cesiumObject:i.id,pickedFeature:i}),h.push({callbackName:t,cesiumObject:i.id.entityCollection.owner,pickedFeature:i})));const n=e=>{h.push({callbackName:t,cesiumObject:e,pickedFeature:i}),e._vcParent&&n(e._vcParent)};i.primitive&&(i.primitive._vcParent&&n(i.primitive._vcParent),h.push({callbackName:t,cesiumObject:i.primitive,pickedFeature:i})),i.collection&&(i.collection._vcParent&&n(i.collection._vcParent),h.push({callbackName:t,cesiumObject:i.collection,pickedFeature:i}))})),h.forEach((e=>{if(e.callbackName){const t=e.cesiumObject[`vc${e.callbackName}`]||e.cesiumObject[`on${u(e.callbackName)}`]||e.cesiumObject[ue(`on${u(e.callbackName)}`)];if(Cesium.defined(t)){const i={type:`on${e.callbackName}`,windowPosition:o,surfacePosition:c,pickedFeature:e.pickedFeature,button:m,cesiumObject:e.cesiumObject};t instanceof Cesium.CallbackProperty?t._callback(i):t(i)}}})),this.pickedFeature=l}return{bindEvents:n,registerEvents:i=>{var r;const{viewer:a,cesiumObject:s}=t;if(void 0===s||void 0===a)return;const{ScreenSpaceEventHandler:l,ScreenSpaceEventType:c}=Cesium;a._vcPickScreenSpaceEventHandler&&a._vcViewerScreenSpaceEventHandler||(a._vcPickScreenSpaceEventHandler=new l(a.canvas),a._vcViewerScreenSpaceEventHandler=new l(a.canvas),Co.forEach((e=>{const i=Ie(t,e);i&&a._vcViewerScreenSpaceEventHandler.setInputAction(i,c[e]),a._vcPickScreenSpaceEventHandler.setInputAction(o.bind({eventName:e,viewer:a}),c[e])}))),n(s,t.cesiumEvents||[],i),null==(r=t.cesiumMembersEvents)||r.forEach((e=>{const t=p(e.name)&&e.name.length>0&&s[e.name[0]]?s[e.name[0]][e.name[1]]:s[e.name];t&&n(t,e.events,i)})),e.enableMouseEvent&&wo.forEach((e=>{const n=Ie(t,e);i?n&&(s[`vc${e}`]=n):n&&delete s[`vc${e}`]}))}}}const Co=["LEFT_CLICK","LEFT_DOUBLE_CLICK","LEFT_DOWN","LEFT_UP","MIDDLE_CLICK","MIDDLE_DOWN","MIDDLE_UP","MOUSE_MOVE","PINCH_END","PINCH_MOVE","PINCH_START","RIGHT_CLICK","RIGHT_DOWN","RIGHT_UP","WHEEL"],wo=["mousedown","mouseup","click","clickout","dblclick","mousemove","mouseover","mouseout"];function _o(){let e;return g((()=>{clearTimeout(e)})),{registerTimeout(t,i){clearTimeout(e),e=setTimeout(t,i)},removeTimeout(){clearTimeout(e)}}}const Oo=["Graphics","VcEntity","Datasource","VcOverlayDynamic"];function xo(e,{emit:i,attrs:n},o){const a=Oe(o),{registerTimeout:s,removeTimeout:l}=_o();o.alreadyListening=[],o.removeCallbacks=[];let c=[];o.mounted=!1;const u=y();o.vcMitt=u;const d=r(re),{t:p}=yo();if(void 0===d)return;const m=De(o),h=bo(e,o);o.children=[];const v={billboard:!0,box:!0,corridor:!0,cylinder:!0,ellipse:!0,ellipsoid:!0,label:!0,model:!0,tileset:!0,path:!0,plane:!0,point:!0,polygon:!0,polyline:!0,polylineVolume:!0,rectangle:!0,wall:!0},g=Ce(),b=async()=>{var e;if(o.mounted)return!1;a.debug(`${o.cesiumClass}---loading`),await(async()=>{if(i("beforeLoad",o),m.nowaiting)return!0;await m.proxy.creatingPromise})();const{Cesium:t,viewer:n}=d;return o.viewer=n,o.Cesium=t,m.cesiumObject||m.nowaiting?(S(!0),x().then((async e=>(o.cesiumObject=e,_().then((()=>{o.mounted=!0,m.children.push(o),Object.assign(o.proxy,{cesiumObject:o.cesiumObject});const r={Cesium:t,viewer:n,cesiumObject:e,vm:o};return i("ready",r),u.emit("ready",r),a.debug(`${o.cesiumClass}---loaded`),r})))))):await(null==(e=m.proxy)?void 0:e.load())},C=async()=>{await(async()=>{await o.unloadingPromise})();for(let e=0;e<o.children.length;e++){const t=o.children[e].proxy;await t.unload()}return o.children.length=0,o.isUnmounted=!1,!!o.mounted&&O().then((async()=>(S(!1),o.cesiumObject=void 0,o.mounted=!1,o.removeCallbacks.forEach((e=>{e()})),i("destroyed",o),u.emit("destroyed",o),a.debug(`${o.cesiumClass}---unmounted`),!(o.renderByParent&&!o.unloadingPromise)||m.proxy.unload())))},w=async()=>(await(async()=>{await o.reloadingPromise})(),C().then((()=>b()))),_=async()=>{var e;return h.registerEvents(!0),(null==(e=o.mount)?void 0:e.call(o))||!0},O=async()=>{var e;return h.registerEvents(!1),(null==(e=o.unmount)?void 0:e.call(o))||!0},x=async()=>{if(a.debug("do createCesiumObject"),t(o.createCesiumObject))return o.createCesiumObject();{const t=E(e);return new Cesium[o.cesiumClass](t)}},P=(e,t)=>{let i=null==t?void 0:t.deep;const{SampledPositionProperty:n,Appearance:r,DebugAppearance:a,MaterialAppearance:s,PolylineColorAppearance:l,EllipsoidSurfaceAppearance:c,PerInstanceColorAppearance:u,PolylineMaterialAppearance:d}=Cesium;if("position"===e)i=!(o.proxy[e]instanceof n);else if("appearance"===e||"depthFailAppearance"===e){const t=o.proxy[e];i=!(t instanceof r||t instanceof a||t instanceof s||t instanceof l||t instanceof c||t instanceof u||t instanceof d||-1!==pe(t).indexOf("Appearance"))}return i},S=t=>{if(t){if(!o.cesiumClass||!Cesium[o.cesiumClass])return;e&&Object.keys(e).forEach((e=>{var t,i,r,a,u;let d=e;if("labelStyle"===e||"wmtsStyle"===e?d="style":"bmKey"===e&&(d="key"),(null==(i=null==(t=o.proxy)?void 0:t.$options.watch)?void 0:i[e])||-1!==o.alreadyListening.indexOf(e))return;const p=null==(a=null==(r=o.proxy)?void 0:r.$options.props[e])?void 0:a.watcherOptions,m=null==(u=o.proxy)?void 0:u.$watch(e,(async(e,t)=>{await o.proxy.creatingPromise;const{cesiumObject:i}=o,r=i&&Object.getOwnPropertyDescriptor(i,d),a=i&&Object.getOwnPropertyDescriptor(Object.getPrototypeOf(i),d);if(r&&(r.writable||r.set)||a&&(a.writable||a.set)){if(p&&p.cesiumObjectBuilder){const t=p.cesiumObjectBuilder.call(o,e,o.viewer.scene.globe.ellipsoid);Cesium.defined(i[d])&&Cesium.defined(i[d]._callback)||(i[d]=t)}else i[d]=T(d,e);return!0}q(e,t)&&!Array.isArray(e)||("once"===n["reload-mode"]||"once"===n.reloadMode||"once"===g.value.reloadMode?(l(),s((()=>{o.proxy.reload()}),0)):o.reloadingPromise=new Promise(((e,t)=>{o.proxy.reload().then((()=>{e(!0)})).catch((e=>{t(e)}))})))}),{deep:P(e,p)});c.push(m)}))}else c.forEach((e=>e())),c=[]},E=(e,t)=>{const i={};return e&&Object.keys(e).forEach((n=>{let r=n;if("labelStyle"===n||"wmtsStyle"===n?r="style":"bmKey"===n&&(r="key"),void 0===e[n]||null===e[n])return;pe(e[n])&&v[r]&&("Entity"===o.cesiumClass||o.cesiumClass.indexOf("DataSource")>0||"VcOverlayDynamic"===o.cesiumClass)?i[r]=E(e[n],t):i[r]=T(n,e[n],t)})),i},T=(e,i,n)=>{var r,a;if(pe(i)&&v[e]&&("Entity"===o.cesiumClass||o.cesiumClass.indexOf("DataSource")>0||"VcOverlayDynamic"===o.cesiumClass))return E(i,n);{const s=null==(r=o.proxy)?void 0:r.$options.name;let l=!1;t(i)&&s&&Oo.forEach((e=>{-1!==s.indexOf(e)&&(l=!0)}));const c=(null==(a=o.proxy)?void 0:a.$options.props[e])||(null==n?void 0:n[e])||mo[e]&&mo[e][e];return(null==c?void 0:c.watcherOptions)&&!ce(i)?c.watcherOptions.cesiumObjectBuilder.call(o,i,o.viewer.scene.globe.ellipsoid):l?new Cesium.CallbackProperty(i,!1):i}},I=new Promise(((e,t)=>{try{let n=!1;d.viewer&&(n=!0,b().then((t=>{e(t),n=!1})).catch((e=>{i("unready",e),t(e)}))),m.vcMitt.on("ready",(()=>{n||o.isUnmounted||b().then((t=>{e(t)})).catch((e=>{i("unready",e),t(e)}))}))}catch(n){i("unready",n),t(n)}}));return a.debug(`${o.cesiumClass}---onCreated`),f((()=>{a.debug(`${o.cesiumClass}---onUnmounted`),o.unloadingPromise=new Promise(((e,t)=>{C().then((()=>{a.debug(`${o.cesiumClass}---unloaded`),e(!0),o.isUnmounted=!0,o.unloadingPromise=void 0,u.all.clear()}))})),o.alreadyListening=[]})),Object.assign(o.proxy,{creatingPromise:I,load:b,unload:C,reload:w,getCreatingPromise:()=>I,getCesiumObject:()=>o.cesiumObject}),{$services:d,load:b,unload:C,reload:w,creatingPromise:I,transformProp:T,transformProps:E,unwatchFns:c,setPropsWatcher:S,logger:a,getServices:()=>Ee({},d||{})}}function Po(e,t,i){i.cesiumEvents=["changedEvent","errorEvent","loadingEvent"],"KmlDataSource"===i.cesiumClass&&(i.cesiumEvents.push("refreshEvent"),i.cesiumEvents.push("unsupportedNodeEvent")),i.cesiumMembersEvents=[{name:"clock",events:["definitionChanged"]},{name:"clustering",events:["clusterEvent"]},{name:"entities",events:["collectionChanged"]}];const n=xo(e,t,i);if(void 0===n)return;i.alreadyListening.push("entities");let o=[];o.push(b((()=>J(e.entities)),((e,t)=>{if(!i.mounted)return;const o=i.cesiumObject;if(e.length===t.length){const i=[];for(let n=0;n<e.length;n++){const o=e[n],r=t[n];JSON.stringify(o)!==JSON.stringify(r)&&i.push({newOptions:o,oldOptions:r})}i.forEach((e=>{const t=o.entities.getById(e.oldOptions.id);if(e.oldOptions.id===e.newOptions.id)t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=n.transformProp(i,e.newOptions[i]))}));else{o.entities.remove(t);const i=e.newOptions;r(o,[i])}}))}else{const i=Y(e,t,"id"),n=Y(t,e,"id"),a=[];for(let e=0;e<n.length;e++){const t=o.entities.getById(n[e].id);a.push(t)}a.forEach((e=>{o.entities.remove(e)})),r(o,i)}}),{deep:!0}));const r=(e,t)=>{for(let i=0;i<t.length;i++){const o=t[i],r=n.transformProps(o),a=e.entities.add(r);o.id!==a.id&&(o.id=a.id),ve(a,r)}};i.mount=async()=>{const t=n.$services.dataSources,o=i.cesiumObject;return o.show=e.show,r(o,e.entities),t.add(o).then((()=>!0))},i.unmount=async()=>{const t=n.$services.dataSources,o=i.cesiumObject;return t&&t.remove(o,e.destroy)};return f((()=>{o.forEach((e=>e())),o=[]})),s(re,Ee(n.getServices(),{get datasource(){return i.cesiumObject},get entities(){var e;return null==(e=i.cesiumObject)?void 0:e.entities}})),{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function So(e,t,i){i.cesiumEvents=[],i.renderByParent=!0;const n=xo(e,t,i);if(void 0!==n)return i.mount=async()=>{var e;const t=i.cesiumObject,n=De(i).proxy;return null==(e=n.__updateGeometry)?void 0:e.call(n,t)},{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function Eo(e,t,i){i.cesiumEvents=["definitionChanged"];void 0!==xo(e,t,i)&&(i.mount=async()=>{var e,t;const n=i.cesiumObject;if(void 0===n)return!1;const o=ue((null==(e=i.proxy)?void 0:e.$options.name)||"").split("-"),r=3===o.length?`update:${o[2]}`:"update:polylineVolume",a=De(i).proxy;return a&&(null==(t=a.__updateGraphics)?void 0:t.call(a,n,r))},i.unmount=async()=>{var e,t;const n=ue((null==(e=i.proxy)?void 0:e.$options.name)||"").split("-"),o=3===n.length?`update:${n[2]}`:"update:polylineVolume",r=De(i).proxy;return r&&(null==(t=r.__updateGraphics)?void 0:t.call(r,void 0,o))})}const To=e=>C(e);function Io(e,t){const i=e.style;Object.keys(t).forEach((e=>{i[e]=t[e]}))}function Mo(e){if(null==e)return;if("string"==typeof e)try{return document.querySelector(e)||void 0}catch(i){return}const t=!0===v(e)?e.value:e;return t?t.$el||t:void 0}const Do={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0,passive:void 0};try{const e=Object.defineProperty({},"passive",{get(){Object.assign(Do,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,e),window.removeEventListener("qtest",null,e)}catch(Qb){}function jo(){}function Lo(e){return 0===e.button}function Ao(e){return e.touches&&e.touches[0]?e=e.touches[0]:e.changedTouches&&e.changedTouches[0]?e=e.changedTouches[0]:e.targetTouches&&e.targetTouches[0]&&(e=e.targetTouches[0]),{top:e.clientY,left:e.clientX}}function ko(e){e.stopPropagation()}function Ro(e){!1!==e.cancelable&&e.preventDefault()}function Vo(e){!1!==e.cancelable&&e.preventDefault(),e.stopPropagation()}function Bo(e,t){if(void 0===e||!0===t&&!0===e.__dragPrevented)return;const i=!0===t?e=>{e.__dragPrevented=!0,e.addEventListener("dragstart",Ro,Do.notPassiveCapture)}:e=>{delete e.__dragPrevented,e.removeEventListener("dragstart",Ro,Do.notPassiveCapture)};e.querySelectorAll("a, img").forEach(i)}function No(e,t,i){const n=`__vc_${t}_evt`;e[n]=void 0!==e[n]?e[n].concat(i):i,i.forEach((t=>{t[0].addEventListener(t[1],e[t[2]],Do[t[3]])}))}function zo(e,t){const i=`__vc_${t}_evt`;void 0!==e[i]&&(e[i].forEach((t=>{t[0].removeEventListener(t[1],e[t[2]],Do[t[3]])})),e[i]=void 0)}let Fo=!1;function Go(e,t){return!0!==function(e){return!0===Fo||e!==Object(e)||!0===e.isComposing||!0===e.qKeyEvent}(e)&&[].concat(t).includes(e.keyCode)}function Ho(e,t=250){let i,n=!1;return function(){return!1===n&&(n=!0,setTimeout((()=>{n=!1}),t),i=e.apply(this,arguments)),i}}function Uo(e,t,i,n){!0===i.modifiers.stop&&ko(e);const o=i.modifiers.color;let r=i.modifiers.center;r=!0===r||!0===n;const a=document.createElement("span"),s=document.createElement("span"),l=Ao(e),{left:c,top:u,width:d,height:p}=t.getBoundingClientRect(),m=Math.sqrt(d*d+p*p),h=m/2,v=(d-m)/2+"px",g=r?v:l.left-c-h+"px",f=(p-m)/2+"px",y=r?f:l.top-u-h+"px";s.className="vc-ripple__inner",Io(s,{height:`${m}px`,width:`${m}px`,transform:`translate3d(${g},${y},0) scale3d(.2,.2,1)`,opacity:0}),a.className="vc-ripple"+(o?" text-"+o:""),a.setAttribute("dir","ltr"),a.appendChild(s),t.appendChild(a);const b=()=>{a.remove(),clearTimeout(C)};i.abort.push(b);let C=setTimeout((()=>{s.classList.add("vc-ripple__inner--enter"),s.style.transform=`translate3d(${v},${f},0) scale3d(1,1,1)`,s.style.opacity="0.2",C=setTimeout((()=>{s.classList.remove("vc-ripple__inner--enter"),s.classList.add("vc-ripple__inner--leave"),s.style.opacity="0",C=setTimeout((()=>{a.remove(),i.abort.splice(i.abort.indexOf(b),1)}),275)}),250)}),50)}function Wo(e,{modifiers:t,value:i,arg:n,instance:o}){const r=Object.assign({},t,i);e.modifiers={early:!0===r.early,stop:!0===r.stop,center:!0===r.center,color:r.color||n,keyCodes:[].concat(r.keyCodes||13)}}var $o=To({name:"ripple",beforeMount(e,t){const i={enabled:!1!==t.value,modifiers:{},abort:[],start(t){!0===i.enabled&&!0!==t.qSkipRipple&&(!0===i.modifiers.early?!0===["mousedown","touchstart"].includes(t.type):"click"===t.type)&&Uo(t,e,i,!0===t.qKeyEvent)},keystart:Ho((t=>{!0===i.enabled&&!0!==t.qSkipRipple&&!0===Go(t,i.modifiers.keyCodes)&&t.type==="key"+(!0===i.modifiers.early?"down":"up")&&Uo(t,e,i,!0)}),300)};Wo(i,t),e.__vcripple=i,No(i,"main",[[e,"mousedown","start","passive"],[e,"touchstart","start","passive"],[e,"click","start","passive"],[e,"keydown","keystart","passive"],[e,"keyup","keystart","passive"]])},updated(e,t){if(t.oldValue!==t.value){const i=e.__vcripple;i.enabled=!1!==t.value,!0===i.enabled&&Object(t.value)===t.value&&Wo(i,t)}},beforeUnmount(e){const t=e.__vcripple;t.abort.forEach((e=>{e()})),zo(t,"main"),delete e._vcripple}});function Zo(){const e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),i=/(?:SymbianOS)/.test(e)||t,n=/(?:Android)/.test(e),o=/(?:Firefox)/.test(e),r=/(?:Chrome|CriOS)/.test(e),a=/(?:iPad|PlayBook)/.test(e)||n&&!/(?:Mobile)/.test(e)||o&&/(?:Tablet)/.test(e),s=/(?:iPhone)/.test(e)&&!a;return{isTablet:a,isPhone:s,isAndroid:n,isPc:!s&&!n&&!i,isFireFox:o,isChrome:r,isIOS:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),hasTouch:"ontouchstart"in window||window.navigator.maxTouchPoints>0}}function qo(){if(void 0!==window.getSelection){const e=window.getSelection();void 0!==(null==e?void 0:e.empty)?e.empty():void 0!==(null==e?void 0:e.removeAllRanges)&&(e.removeAllRanges(),!0!==Zo().isPhone&&e.addRange(document.createRange()))}else void 0!==document.selection&&document.selection.empty()}var Yo=To({name:"touch-hold",beforeMount(e,t){const{modifiers:i}=t;if(!0!==i.mouse&&!0!==Zo().hasTouch)return;const n={handler:t.value,noop:jo,mouseStart(e){"function"==typeof n.handler&&!0===Lo(e)&&(No(n,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),n.start(e,!0))},touchStart(e){var i;if(void 0!==e.target&&"function"==typeof n.handler){const o=e.target;No(n,"temp",[[o,"touchmove","move","passiveCapture"],[o,"touchcancel","end","notPassiveCapture"],[o,"touchend","end","notPassiveCapture"]]),n.start(e),null==(i=null==t?void 0:t.touchStart)||i.call(t,e)}},start(e,t){n.origin=Ao(e);const i=Date.now();!0===Zo().isPhone&&(document.body.classList.add("non-selectable"),qo(),n.styleCleanup=e=>{n.styleCleanup=void 0;const t=()=>{document.body.classList.remove("non-selectable")};!0===e?(qo(),setTimeout(t,10)):t()}),n.triggered=!1,n.sensitivity=!0===t?n.mouseSensitivity:n.touchSensitivity,n.timer=setTimeout((()=>{qo(),n.triggered=!0,n.handler({evt:e,touch:!0!==t,mouse:!0===t,position:n.origin,duration:Date.now()-i})}),n.duration)},move(e){const{top:t,left:i}=Ao(e);(Math.abs(i-n.origin.left)>=n.sensitivity||Math.abs(t-n.origin.top)>=n.sensitivity)&&clearTimeout(n.timer)},end(e){var i;zo(n,"temp"),void 0!==n.styleCleanup&&n.styleCleanup(n.triggered),!0===n.triggered?void 0!==e&&Vo(e):clearTimeout(n.timer),null==(i=null==t?void 0:t.touchEnd)||i.call(t,e)}},o=[600,5,7];"string"==typeof t.arg&&t.arg.length>0&&t.arg.split(":").forEach(((e,t)=>{const i=parseInt(e,10);i&&(o[t]=i)})),[n.duration,n.touchSensitivity,n.mouseSensitivity]=o,e.__vctouchhold=n,!0===i.mouse&&No(n,"main",[[e,"mousedown","mouseStart","passive"+(!0===i.mouseCapture?"Capture":"")]]),!0===Zo().hasTouch&&No(n,"main",[[e,"touchstart","touchStart","passive"+(!0===i.capture?"Capture":"")],[e,"touchend","noop","notPassiveCapture"]])},updated(e,t){const i=e.__vctouchhold;void 0!==i&&t.oldValue!==t.value&&("function"!=typeof t.value&&i.end(),i.handler=t.value)},beforeUnmount(e){const t=e.__vctouchhold;void 0!==t&&(zo(t,"main"),zo(t,"temp"),clearTimeout(t.timer),void 0!==t.styleCleanup&&t.styleCleanup(),delete e.__vctouchhold)}});const Jo={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Xo=new RegExp(`^([\\d+]+|${Object.keys(Jo).join("|")})$`,"i");var Qo=To({name:"touch-repeat",beforeMount(e,{modifiers:t,value:i,arg:n,touchStart:o}){const r=Object.keys(t).reduce(((e,t)=>{if(!0===Xo.test(t)){const i=isNaN(parseInt(t,10))?Jo[t.toLowerCase()]:parseInt(t,10);i>=0&&e.push(i)}return e}),[]);if(!0!==t.mouse&&!0!==Zo().hasTouch&&0===r.length)return;const a="string"==typeof n&&n.length>0?n.split(":").map((e=>parseInt(e,10))):[0,600,300],s=a.length-1,l={keyboard:r,handler:i,noop:jo,mouseStart(e){void 0===l.event&&"function"==typeof l.handler&&!0===Lo(e)&&(No(l,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),l.start(e,!0))},keyboardStart(t){if("function"==typeof l.handler&&!0===Go(t,r)){if((0===a[0]||void 0!==l.event)&&(Vo(t),e.focus(),void 0!==l.event))return;No(l,"temp",[[document,"keyup","end","notPassiveCapture"],[document,"click","end","notPassiveCapture"]]),l.start(t,!1,!0)}},touchStart(e){if(void 0!==e.target&&"function"==typeof l.handler){const t=e.target;No(l,"temp",[[t,"touchmove","move","passiveCapture"],[t,"touchcancel","end","notPassiveCapture"],[t,"touchend","end","notPassiveCapture"]]),l.start(e),null==o||o(e)}},start(e,t,i){function n(e){l.styleCleanup=void 0,document.documentElement.style.cursor="";const t=()=>{document.body.classList.remove("non-selectable")};!0===e?(qo(),setTimeout(t,10)):t()}!0!==i&&(l.origin=Ao(e)),!0===Zo().isPhone&&(document.body.classList.add("non-selectable"),qo(),l.styleCleanup=n),l.event={touch:!0!==t&&!0!==i,mouse:!0===t,keyboard:!0===i,startTime:Date.now(),repeatCount:0};const o=()=>{if(void 0===l.event)return;0===l.event.repeatCount&&(l.event.evt=e,!0===i?l.event.keyCode=e.keyCode:l.event.position=Ao(e),!0!==Zo().isPhone&&(document.documentElement.style.cursor="pointer",document.body.classList.add("non-selectable"),qo(),l.styleCleanup=n)),l.event.duration=Date.now()-l.event.startTime,l.event.repeatCount+=1,l.handler(l.event);const t=s<l.event.repeatCount?s:l.event.repeatCount;l.timer=setTimeout(o,a[t])};0===a[0]?o():l.timer=setTimeout(o,a[0])},move(e){void 0!==l.event&&!0===function(e,t){const{top:i,left:n}=Ao(e);return Math.abs(n-t.left)>=7||Math.abs(i-t.top)>=7}(e,l.origin)&&clearTimeout(l.timer)},end(e){void 0!==l.event&&(void 0!==l.styleCleanup&&l.styleCleanup(!0),void 0!==e&&l.event.repeatCount>0&&Vo(e),zo(l,"temp"),clearTimeout(l.timer),l.event=void 0)}};e.__vctouchrepeat=l,!0===t.mouse&&No(l,"main",[[e,"mousedown","mouseStart","passive"+(!0===t.mouseCapture?"Capture":"")]]),!0===Zo().hasTouch&&No(l,"main",[[e,"touchstart","touchStart","passive"+(!0===t.capture?"Capture":"")],[e,"touchend","noop","notPassiveCapture"]]),r.length>0&&No(l,"main",[[e,"keydown","keyboardStart","notPassive"+(!0===t.keyCapture?"Capture":"")]])},updated(e,{oldValue:t,value:i}){const n=e.__vctouchrepeat;void 0!==n&&t!==i&&("function"!=typeof i&&n.end(),n.handler=i)},beforeUnmount(e){const t=e.__vctouchrepeat;void 0!==t&&(clearTimeout(t.timer),zo(t,"main"),zo(t,"temp"),void 0!==t.styleCleanup&&t.styleCleanup(),delete e.__vctouchrepeat)}});const Ko=["left","right","up","down","horizontal","vertical"],er={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0,all:!0};function tr(e){const t={};return Ko.forEach((i=>{e[i]&&(t[i]=!0)})),0===Object.keys(t).length?er:(!0===t.horizontal&&(t.left=t.right=!0),!0===t.vertical&&(t.up=t.down=!0),!0===t.left&&!0===t.right&&(t.horizontal=!0),!0===t.up&&!0===t.down&&(t.vertical=!0),!0===t.horizontal&&!0===t.vertical&&(t.all=!0),t)}const ir=Zo().isIOS||navigator.vendor.toLowerCase().indexOf("apple")>-1?()=>document:e=>e;function nr(e,t){return void 0===t.event&&void 0!==e.target&&!0!==e.target.draggable&&"function"==typeof t.handler&&"INPUT"!==e.target.nodeName.toUpperCase()&&(void 0===e.qClonedBy||-1===e.qClonedBy.indexOf(t.uid))}function or(e,t,i){const n=Ao(e);let o,r=n.left-t.event.x,a=n.top-t.event.y,s=Math.abs(r),l=Math.abs(a);const c=t.direction;!0===c.horizontal&&!0!==c.vertical?o=r<0?"left":"right":!0!==c.horizontal&&!0===c.vertical?o=a<0?"up":"down":!0===c.up&&a<0?(o="up",s>l&&(!0===c.left&&r<0?o="left":!0===c.right&&r>0&&(o="right"))):!0===c.down&&a>0?(o="down",s>l&&(!0===c.left&&r<0?o="left":!0===c.right&&r>0&&(o="right"))):!0===c.left&&r<0?(o="left",s<l&&(!0===c.up&&a<0?o="up":!0===c.down&&a>0&&(o="down"))):!0===c.right&&r>0&&(o="right",s<l&&(!0===c.up&&a<0?o="up":!0===c.down&&a>0&&(o="down")));let u=!1;if(void 0===o&&!1===i){if(!0===t.event.isFirst||void 0===t.event.lastDir)return{};o=t.event.lastDir,u=!0,"left"===o||"right"===o?(n.left-=r,s=0,r=0):(n.top-=a,l=0,a=0)}return{synthetic:u,payload:{evt:e,touch:!0!==t.event.mouse,mouse:!0===t.event.mouse,position:n,direction:o,isFirst:t.event.isFirst,isFinal:!0===i,duration:Date.now()-t.event.time,distance:{x:s,y:l},offset:{x:r,y:a},delta:{x:n.left-t.event.lastX,y:n.top-t.event.lastY}}}}let rr=0;var ar=To({name:"touch-pan",beforeMount(e,{value:t,modifiers:i}){if(!0!==i.mouse&&!0!==Zo().hasTouch)return;function n(e,t){!0===i.mouse&&!0===t?Vo(e):(!0===i.stop&&ko(e),!0===i.prevent&&Ro(e))}const o={uid:"qvtp_"+rr++,handler:t,modifiers:i,direction:tr(i),noop:jo,mouseStart(e){nr(e,o)&&Lo(e)&&(No(o,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),o.start(e,!0))},touchStart(e){if(nr(e,o)){const t=e.target;No(o,"temp",[[t,"touchmove","move","notPassiveCapture"],[t,"touchcancel","end","passiveCapture"],[t,"touchend","end","passiveCapture"]]),o.start(e)}},start(t,n){if(!0===Zo().isFireFox&&Bo(e,!0),o.lastEvt=t,!0===n||!0===i.stop){if(!0!==o.direction.all&&(!0!==n||!0!==o.modifiers.mouseAllDir&&!0!==o.modifiers.mousealldir)){const e=t.type.indexOf("mouse")>-1?new MouseEvent(t.type,t):new TouchEvent(t.type,t);!0===t.defaultPrevented&&Ro(e),!0===t.cancelBubble&&ko(e),Object.assign(e,{qKeyEvent:t.qKeyEvent,qClickOutside:t.qClickOutside,qAnchorHandled:t.qAnchorHandled,qClonedBy:void 0===t.qClonedBy?[o.uid]:t.qClonedBy.concat(o.uid)}),o.initialEvent={target:t.target,event:e}}ko(t)}const{left:r,top:a}=Ao(t);o.event={x:r,y:a,time:Date.now(),mouse:!0===n,detected:!1,isFirst:!0,isFinal:!1,lastX:r,lastY:a}},move(e){if(void 0===o.event)return;const t=Ao(e),r=t.left-o.event.x,a=t.top-o.event.y;if(0===r&&0===a)return;o.lastEvt=e;const s=!0===o.event.mouse,l=()=>{let t;n(e,s),!0!==i.preserveCursor&&!0!==i.preservecursor&&(t=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),!0===s&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),qo(),o.styleCleanup=e=>{if(o.styleCleanup=void 0,void 0!==t&&(document.documentElement.style.cursor=t),document.body.classList.remove("non-selectable"),!0===s){const t=()=>{document.body.classList.remove("no-pointer-events--children")};void 0!==e?setTimeout((()=>{t(),e()}),50):t()}else void 0!==e&&e()}};if(!0===o.event.detected){!0!==o.event.isFirst&&n(e,o.event.mouse);const{payload:t,synthetic:i}=or(e,o,!1);return void(void 0!==t&&(!1===o.handler(t)?o.end(e):(void 0===o.styleCleanup&&!0===o.event.isFirst&&l(),o.event.lastX=t.position.left,o.event.lastY=t.position.top,o.event.lastDir=!0===i?void 0:t.direction,o.event.isFirst=!1)))}if(!0===o.direction.all||!0===s&&(!0===o.modifiers.mouseAllDir||!0===o.modifiers.mousealldir))return l(),o.event.detected=!0,void o.move(e);const c=Math.abs(r),u=Math.abs(a);c!==u&&(!0===o.direction.horizontal&&c>u||!0===o.direction.vertical&&c<u||!0===o.direction.up&&c<u&&a<0||!0===o.direction.down&&c<u&&a>0||!0===o.direction.left&&c>u&&r<0||!0===o.direction.right&&c>u&&r>0?(o.event.detected=!0,o.move(e)):o.end(e,!0))},end(t,i){if(void 0!==o.event){if(zo(o,"temp"),!0===Zo().isFireFox&&Bo(e,!1),!0===i)void 0!==o.styleCleanup&&o.styleCleanup(),!0!==o.event.detected&&void 0!==o.initialEvent&&o.initialEvent.target.dispatchEvent(o.initialEvent.event);else if(!0===o.event.detected){!0===o.event.isFirst&&o.handler(or(void 0===t?o.lastEvt:t,o).payload);const{payload:e}=or(void 0===t?o.lastEvt:t,o,!0),i=()=>{o.handler(e)};void 0!==o.styleCleanup?o.styleCleanup(i):i()}o.event=void 0,o.initialEvent=void 0,o.lastEvt=void 0}}};if(e.__qtouchpan=o,!0===i.mouse){const t=!0===i.mouseCapture||!0===i.mousecapture?"Capture":"";No(o,"main",[[e,"mousedown","mouseStart",`passive${t}`]])}!0===Zo().hasTouch&&No(o,"main",[[e,"touchstart","touchStart","passive"+(!0===i.capture?"Capture":"")],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const i=e.__qtouchpan;void 0!==i&&(t.oldValue!==t.value&&("function"!=typeof t.value&&i.end(),i.handler=t.value),i.direction=tr(t.modifiers))},beforeUnmount(e){const t=e.__qtouchpan;void 0!==t&&(void 0!==t.event&&t.end(),zo(t,"main"),zo(t,"temp"),!0===Zo().isFireFox&&Bo(e,!1),void 0!==t.styleCleanup&&t.styleCleanup(),delete e.__qtouchpan)}});function sr(){let e,t;const i=new Promise((function(i,n){e=i,t=n}));return{resolve:e,reject:t,promise:i}}function lr(e,{handleMouseClick:t,handleMouseDown:i,handleMouseUp:o,handleMouseMove:r,handleDoubleClick:a,handleMouseWheel:s,handlePinch:l}){const c=n(void 0),u=n(!1),d=e=>{null==t||t(e,{button:0})},p=e=>{null==t||t(e,{button:0,shift:!0})},m=e=>{null==t||t(e,{button:0,ctrl:!0})},h=e=>{null==t||t(e,{button:1})},v=e=>{null==t||t(e,{button:1,shift:!0})},g=e=>{null==t||t(e,{button:1,ctrl:!0})};let f;const y=e=>{var i;f?null==(i=null==f?void 0:f.promise)||i.then((i=>{i&&(null==t||t(e,{button:2}))})):null==t||t(e,{button:2})},b=e=>{null==t||t(e,{button:2,shift:!0})},C=e=>{null==t||t(e,{button:2,ctrl:!0})},w=e=>{null==i||i(e,{button:0})},_=e=>{null==i||i(e,{button:0,shift:!0})},O=e=>{null==i||i(e,{button:0,ctrl:!0})},x=e=>{null==i||i(e,{button:1})},P=e=>{null==i||i(e,{button:1,shift:!0})},S=e=>{null==i||i(e,{button:1,ctrl:!0})},E=e=>{null==i||i(e,{button:2})},T=e=>{null==i||i(e,{button:2,shift:!0})},I=e=>{null==i||i(e,{button:2,ctrl:!0})},M=e=>{null==o||o(e,{button:0})},D=e=>{null==o||o(e,{button:0,shift:!0})},j=e=>{null==o||o(e,{button:0,ctrl:!0})},L=e=>{null==o||o(e,{button:1,ctrl:!0})},A=e=>{null==o||o(e,{button:1,shift:!0})},k=e=>{null==o||o(e,{button:1,ctrl:!0})},R=e=>{null==o||o(e,{button:2})},V=e=>{null==o||o(e,{button:2,shift:!0})},B=e=>{null==o||o(e,{button:2,ctrl:!0})},N=e=>{null==a||a(e,{button:0})},z=e=>{null==a||a(e,{button:0,shift:!0})},F=e=>{null==a||a(e,{button:0,ctrl:!0})},G=e=>{null==r||r(e)},H=e=>{null==r||r(e,{shift:!0})},U=e=>{null==r||r(e,{ctrl:!0})},W=e=>{null==s||s(e)},$=e=>{null==s||s(e,{shift:!0})},Z=e=>{null==s||s(e,{ctrl:!0})},q=e=>{null==l||l(e,{start:!0})},Y=e=>{null==l||l(e,{start:!0,shift:!0})},J=e=>{null==l||l(e,{start:!0,ctrl:!0})},X=e=>{null==l||l(e,{end:!0})},Q=e=>{null==l||l(e,{end:!0,shift:!0})},K=e=>{null==l||l(e,{end:!0,ctrl:!0})},ee=e=>{null==l||l(e,{move:!0})},te=e=>{null==l||l(e,{move:!0,shift:!0})},ie=e=>{null==l||l(e,{move:!0,ctrl:!0})},ne=e=>{if(e.touch){const t={position:{x:e.position.left,y:e.position.top}};null==a||a(t,{button:0})}f.resolve(!1)},oe=e=>{f.resolve(!0)},re=e=>{f=sr()};return{activate:()=>{if(u.value)return;const{ScreenSpaceEventType:t,KeyboardEventModifier:i,ScreenSpaceEventHandler:n}=Cesium;if(!c.value){const{viewer:t}=e;c.value=new n(t.canvas),Yo.beforeMount(t.canvas,{arg:"2000",value:ne,touchStart:re,touchEnd:oe,modifiers:{}})}const o=c.value;o.setInputAction(d,t.LEFT_CLICK),o.setInputAction(p,t.LEFT_CLICK,i.SHIFT),o.setInputAction(m,t.LEFT_CLICK,i.CTRL),o.setInputAction(w,t.LEFT_DOWN),o.setInputAction(_,t.LEFT_DOWN,i.SHIFT),o.setInputAction(O,t.LEFT_DOWN,i.CTRL),o.setInputAction(M,t.LEFT_UP),o.setInputAction(D,t.LEFT_UP,i.SHIFT),o.setInputAction(j,t.LEFT_UP,i.CTRL),o.setInputAction(y,t.RIGHT_CLICK),o.setInputAction(b,t.RIGHT_CLICK,i.SHIFT),o.setInputAction(C,t.RIGHT_CLICK,i.CTRL),o.setInputAction(E,t.RIGHT_DOWN),o.setInputAction(T,t.RIGHT_DOWN,i.SHIFT),o.setInputAction(I,t.RIGHT_DOWN,i.CTRL),o.setInputAction(R,t.RIGHT_UP),o.setInputAction(V,t.RIGHT_UP,i.SHIFT),o.setInputAction(B,t.RIGHT_UP,i.CTRL),o.setInputAction(h,t.MIDDLE_CLICK),o.setInputAction(v,t.MIDDLE_CLICK,i.SHIFT),o.setInputAction(g,t.MIDDLE_CLICK,i.CTRL),o.setInputAction(x,t.MIDDLE_DOWN),o.setInputAction(P,t.MIDDLE_DOWN,i.SHIFT),o.setInputAction(S,t.MIDDLE_DOWN,i.CTRL),o.setInputAction(L,t.MIDDLE_UP),o.setInputAction(A,t.MIDDLE_UP,i.SHIFT),o.setInputAction(k,t.MIDDLE_UP,i.CTRL),o.setInputAction(N,t.LEFT_DOUBLE_CLICK),o.setInputAction(z,t.LEFT_DOUBLE_CLICK,i.SHIFT),o.setInputAction(F,t.LEFT_DOUBLE_CLICK,i.CTRL),o.setInputAction(G,t.MOUSE_MOVE),o.setInputAction(H,t.MOUSE_MOVE,i.SHIFT),o.setInputAction(U,t.MOUSE_MOVE,i.CTRL),o.setInputAction(W,t.WHEEL),o.setInputAction($,t.WHEEL,i.SHIFT),o.setInputAction(Z,t.WHEEL,i.CTRL),o.setInputAction(q,t.PINCH_START),o.setInputAction(Y,t.PINCH_START,i.SHIFT),o.setInputAction(J,t.PINCH_START,i.CTRL),o.setInputAction(X,t.PINCH_END),o.setInputAction(Q,t.PINCH_END,i.SHIFT),o.setInputAction(K,t.PINCH_END,i.CTRL),o.setInputAction(ee,t.PINCH_MOVE),o.setInputAction(te,t.PINCH_MOVE,i.SHIFT),o.setInputAction(ie,t.PINCH_MOVE,i.CTRL),u.value=!0},deactivate:()=>{if(!u.value)return;const{ScreenSpaceEventType:t,KeyboardEventModifier:i}=Cesium,n=c.value;if(!n)return;n.removeInputAction(t.LEFT_CLICK),n.removeInputAction(t.LEFT_CLICK,i.SHIFT),n.removeInputAction(t.LEFT_CLICK,i.CTRL),n.removeInputAction(t.LEFT_DOWN),n.removeInputAction(t.LEFT_DOWN,i.SHIFT),n.removeInputAction(t.LEFT_DOWN,i.CTRL),n.removeInputAction(t.LEFT_UP),n.removeInputAction(t.LEFT_UP,i.SHIFT),n.removeInputAction(t.LEFT_UP,i.CTRL),n.removeInputAction(t.RIGHT_CLICK),n.removeInputAction(t.RIGHT_CLICK,i.SHIFT),n.removeInputAction(t.RIGHT_CLICK,i.CTRL),n.removeInputAction(t.RIGHT_DOWN),n.removeInputAction(t.RIGHT_DOWN,i.SHIFT),n.removeInputAction(t.RIGHT_DOWN,i.CTRL),n.removeInputAction(t.RIGHT_UP),n.removeInputAction(t.RIGHT_UP,i.SHIFT),n.removeInputAction(t.RIGHT_UP,i.CTRL),n.removeInputAction(t.MIDDLE_CLICK),n.removeInputAction(t.MIDDLE_CLICK,i.SHIFT),n.removeInputAction(t.MIDDLE_CLICK,i.CTRL),n.removeInputAction(t.MIDDLE_DOWN),n.removeInputAction(t.MIDDLE_DOWN,i.SHIFT),n.removeInputAction(t.MIDDLE_DOWN,i.CTRL),n.removeInputAction(t.MIDDLE_UP),n.removeInputAction(t.MIDDLE_UP,i.SHIFT),n.removeInputAction(t.MIDDLE_UP,i.CTRL),n.removeInputAction(t.LEFT_DOUBLE_CLICK),n.removeInputAction(t.LEFT_DOUBLE_CLICK,i.SHIFT),n.removeInputAction(t.LEFT_DOUBLE_CLICK,i.CTRL),n.removeInputAction(t.MOUSE_MOVE),n.removeInputAction(t.MOUSE_MOVE,i.SHIFT),n.removeInputAction(t.MOUSE_MOVE,i.CTRL),n.removeInputAction(t.WHEEL),n.removeInputAction(t.WHEEL,i.SHIFT),n.removeInputAction(t.WHEEL,i.CTRL),n.removeInputAction(t.PINCH_START),n.removeInputAction(t.PINCH_START,i.SHIFT),n.removeInputAction(t.PINCH_START,i.CTRL),n.removeInputAction(t.PINCH_END),n.removeInputAction(t.PINCH_END,i.SHIFT),n.removeInputAction(t.PINCH_END,i.CTRL),n.removeInputAction(t.PINCH_MOVE),n.removeInputAction(t.PINCH_MOVE,i.SHIFT),n.removeInputAction(t.PINCH_MOVE,i.CTRL);const{viewer:o}=e;Yo.beforeUnmount(o.canvas),u.value=!1},destroy:()=>{var e;null==(e=c.value)||e.destroy(),c.value=void 0},isActive:u}}function cr(e,t,i){const n=xo(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{const t=n.transformProps(e),i=n.$services.primitives;return i&&i.add(t)},i.mount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return e&&e.contains(t)},i.unmount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return e&&!e.isDestroyed()&&e.remove(t)},{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher,$services:n.$services}}function ur(e,t,i){i.cesiumEvents=["primitiveAdded","primitiveRemoved"];const n=xo(e,t,i);if(void 0===n)return;i.mount=async()=>{const e=n.$services.primitives,t=i.cesiumObject,o=e&&e.add(t);return Cesium.defined(o)},i.unmount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return e&&e.remove(t)};return s(re,Ee(n.getServices(),{get primitives(){return i.cesiumObject}})),{transformProps:n.transformProps,transformProp:n.transformProp,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function dr(e,t,i){const o=xo(e,t,i);if(void 0===o)return;const{emit:r}=t,a=n(0),l=n([]);i.createCesiumObject=async()=>{var t,n;const r=o.transformProps(e);if(r.asynchronous||await(null==(n=(t=Cesium[i.cesiumClass]).initializeTerrainHeights)?void 0:n.call(t)),e.geometryInstances&&(p(e.geometryInstances)?(l.value.push(...e.geometryInstances),a.value+=e.geometryInstances.length):(a.value+=1,l.value.push(e.geometryInstances))),"Cesium3DTileset"!==i.cesiumClass&&"I3SDataProvider"!==i.cesiumClass||!ut(Cesium.VERSION,"1.104"))return new Cesium[i.cesiumClass](r);try{return Cesium.defined(e.assetId)&&"Cesium3DTileset"===i.cesiumClass?await Cesium[i.cesiumClass].fromIonAssetId(e.assetId,r):await Cesium[i.cesiumClass].fromUrl(e.url,r)}catch(s){o.logger.error(`Failed to load tileset: ${s}`)}},i.mount=async()=>{var e;const t=o.$services.primitives,n=i.cesiumObject;null==(e=null==n?void 0:n.readyPromise)||e.then((e=>{Ie(i,"readyPromise")&&r("readyPromise",e,o.$services.viewer,i.proxy)})),n._vcParent=t;const a=t&&t.add(n);if("ParticleSystem"===i.cesiumClass){const e=setInterval((()=>{Cesium.defined(a._billboardCollection)&&(a._billboardCollection._vcParent=a,clearInterval(e))}),500)}return Cesium.defined(a)},i.unmount=async()=>{a.value=0,l.value=[];const e=o.$services.primitives,t=i.cesiumObject;return e&&e.remove(t)};return s(re,Ee(o.getServices(),{get primitive(){return i.cesiumObject}})),Object.assign(i.proxy,{__updateGeometryInstances:(e,n)=>{if(l.value.push(e),n===a.value-1){if(Ie(i,"update:geometryInstances"))t.emit("update:geometryInstances",l.value);else{i.cesiumObject.geometryInstances=0===n?e:l.value}}return!0},__removeGeometryInstances:e=>{const t=l.value.indexOf(e);return l.value.splice(t,1),!0},__childCount:a}),{transformProps:o.transformProps,transformProp:o.transformProp,unwatchFns:o.unwatchFns,setPropsWatcher:o.setPropsWatcher,$services:o.$services}}const pr=3e3*Math.PI/180,mr=Math.PI,hr=6378245,vr=.006693421622965943,gr=function(e,t){const i=(e=+e)-.0065,n=(t=+t)-.006,o=Math.sqrt(i*i+n*n)-2e-5*Math.sin(n*pr),r=Math.atan2(n,i)-3e-6*Math.cos(i*pr);return[o*Math.cos(r),o*Math.sin(r)]},fr=function(e,t){t=+t,e=+e;const i=Math.sqrt(e*e+t*t)+2e-5*Math.sin(t*pr),n=Math.atan2(t,e)+3e-6*Math.cos(e*pr);return[i*Math.cos(n)+.0065,i*Math.sin(n)+.006]},yr=function(e,t){if(_r(e=+e,t=+t))return[e,t];{let i=Cr(e-105,t-35),n=wr(e-105,t-35);const o=t/180*mr;let r=Math.sin(o);r=1-vr*r*r;const a=Math.sqrt(r);i=180*i/(hr*(1-vr)/(r*a)*mr),n=180*n/(hr/a*Math.cos(o)*mr);return[e+n,t+i]}},br=function(e,t){if(_r(e=+e,t=+t))return[e,t];{let i=Cr(e-105,t-35),n=wr(e-105,t-35);const o=t/180*mr;let r=Math.sin(o);r=1-vr*r*r;const a=Math.sqrt(r);i=180*i/(hr*(1-vr)/(r*a)*mr),n=180*n/(hr/a*Math.cos(o)*mr);return[2*e-(e+n),2*t-(t+i)]}};var Cr=function(e,t){let i=2*(e=+e)-100+3*(t=+t)+.2*t*t+.1*e*t+.2*Math.sqrt(Math.abs(e));return i+=2*(20*Math.sin(6*e*mr)+20*Math.sin(2*e*mr))/3,i+=2*(20*Math.sin(t*mr)+40*Math.sin(t/3*mr))/3,i+=2*(160*Math.sin(t/12*mr)+320*Math.sin(t*mr/30))/3,i},wr=function(e,t){let i=300+(e=+e)+2*(t=+t)+.1*e*e+.1*e*t+.1*Math.sqrt(Math.abs(e));return i+=2*(20*Math.sin(6*e*mr)+20*Math.sin(2*e*mr))/3,i+=2*(20*Math.sin(e*mr)+40*Math.sin(e/3*mr))/3,i+=2*(150*Math.sin(e/12*mr)+300*Math.sin(e/30*mr))/3,i},_r=function(e,t){t=+t;return!((e=+e)>73.66&&e<135.05&&t>3.86&&t<53.55)};const Or=Object.freeze(Object.defineProperty({__proto__:null,bd09togcj02:gr,gcj02tobd09:fr,gcj02towgs84:br,wgs84togcj02:yr},Symbol.toStringTag,{value:"Module"}));function xr(e,t,i){i.cesiumEvents=["errorEvent"];const n=xo(e,t,i);if(void 0===n)return;const{emit:o}=t;return i.createCesiumObject=async()=>{const t=n.transformProps(e);return ut(Cesium.VERSION,"1.104")&&"function"==typeof Cesium[i.cesiumClass].fromUrl?await Cesium[i.cesiumClass].fromUrl(t.url,t):new Cesium[i.cesiumClass](t)},i.mount=async()=>{var t,r,a,s,l;const{viewer:c}=n.$services;if(-1!==i.cesiumClass.indexOf("ImageryProvider")){i.renderByParent=!0;const n=i.cesiumObject;if(null==(t=null==n?void 0:n.readyPromise)||t.then((()=>{Ie(i,"readyPromise")&&o("readyPromise",n,c,i.proxy)})),e.projectionTransforms&&e.projectionTransforms.from!==e.projectionTransforms.to){if(!("VcImageryProviderBaidu"===(null==(r=i.proxy)?void 0:r.$options.name)||"VcImageryProviderTianditu"===(null==(a=i.proxy)?void 0:a.$options.name)&&"4490"===n._epsgCode)){const{WebMercatorTilingScheme:t,Cartographic:i,Math:o}=Cesium,r=new t,a=r.projection,s=a.project,l=a.unproject;let c,u;"WGS84"===e.projectionTransforms.to.toUpperCase()?(c="wgs84togcj02",u="gcj02towgs84"):"GCJ02"===e.projectionTransforms.to.toUpperCase()&&(c="gcj02towgs84",u="wgs84togcj02"),c&&u&&(a.project=function(e,t){return t=t||new Cesium.Cartesian3,t=Or[c](o.toDegrees(e.longitude),o.toDegrees(e.latitude)),s.call(this,new i(o.toRadians(null==t?void 0:t[0]),o.toRadians(null==t?void 0:t[1])))},a.unproject=function(e,t){t=t||new i;const n=l.call(this,e);return t=Or[u](o.toDegrees(n.longitude),o.toDegrees(n.latitude)),new i(o.toRadians(null==t?void 0:t[0]),o.toRadians(null==t?void 0:t[1]))},n._tilingScheme=r)}}const l=De(i).proxy;return l&&(null==(s=l.__updateProvider)?void 0:s.call(l,n))}{const e=i.cesiumObject;return null==(l=null==e?void 0:e.readyPromise)||l.then((()=>{Ie(i,"readyPromise")&&o("readyPromise",e,c,i.proxy)})),c.terrainProvider=e,!0}},i.unmount=async()=>{var e,t;const{viewer:r}=n.$services;if(-1!==i.cesiumClass.indexOf("ImageryProvider")){const t=De(i).proxy;return t&&(null==(e=t.__updateProvider)?void 0:e.call(t,void 0))}{const e=new Cesium.EllipsoidTerrainProvider;return null==(t=null==e?void 0:e.readyPromise)||t.then((()=>{Ie(i,"readyPromise")&&o("readyPromise",e,r,i.proxy)})),r.terrainProvider=e,!0}},{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function Pr(e){var t,i,n;const a=o(),s=null===(null==a?void 0:a.parent)?a.vnode.appContext&&a.vnode.appContext.provides:null==(t=null==a?void 0:a.parent)?void 0:t.provides;s&&re in s||e||(e="cesiumContainer");const l=Oe();if(a){if(e){const t=null==(n=null==(i=a.appContext.config.globalProperties)?void 0:i.$VueCesium)?void 0:n[e];return t||l.warn(`Failed to get $vc, reason: vc-viewer with containerId: ${e} was not found.`),t}return r(re)}l.warn("VueCesium useVueCesium() can only be used inside setup().")}var Sr={cesiumPath:String,animation:{type:Boolean,default:!1},baseLayerPicker:{type:Boolean,default:!1},fullscreenButton:{type:Boolean,default:!1},vrButton:{type:Boolean,default:!1},geocoder:{type:[Boolean,Array],default:!1},homeButton:{type:Boolean,default:!1},infoBox:{type:Boolean,default:!0},sceneModePicker:{type:Boolean,default:!1},selectionIndicator:{type:Boolean,default:!0},timeline:{type:Boolean,default:!1},navigationHelpButton:{type:Boolean,default:!1},navigationInstructionsInitiallyVisible:{type:Boolean,default:!1},scene3DOnly:{type:Boolean,default:!1},shouldAnimate:{type:Boolean,default:!1},clockViewModel:Object,selectedImageryProviderViewModel:Object,imageryProviderViewModels:Array,selectedTerrainProviderViewModel:Object,terrainProviderViewModels:Array,imageryProvider:Object,baseLayer:Object,terrainProvider:Object,skyBox:{type:[Object,Boolean],default:()=>{}},skyAtmosphere:{type:[Object,Boolean],default:()=>{}},fullscreenElement:{type:[String,Element]},useDefaultRenderLoop:{type:Boolean,default:!0},targetFrameRate:Number,showRenderLoopErrors:{type:Boolean,default:!0},useBrowserRecommendedResolution:{type:Boolean,default:!0},automaticallyTrackDataSourceClocks:{type:Boolean,default:!0},contextOptions:Object,sceneMode:{type:Number,default:3},mapProjection:Object,globe:{type:[Object,Boolean],default:()=>{}},orderIndependentTranslucency:{type:Boolean,default:!0},creditContainer:[String,Element],creditViewport:[String,Element],dataSources:Object,terrainExaggeration:{type:Number,default:1},shadows:{type:Boolean,default:!1},terrainShadows:{type:Number,default:3},mapMode2D:{type:Number,default:1},projectionPicker:{type:Boolean,default:!1},requestRenderMode:{type:Boolean,default:!1},maximumRenderTimeChange:{type:Number,default:0},debugShowFramesPerSecond:{type:Boolean,default:!1},showCredit:{type:Boolean,default:!0},accessToken:String,camera:{type:Object,default:()=>({position:{lng:105,lat:29.999999999999993,height:19059568.497290563},heading:360,pitch:-90,roll:0})},navigation:{type:Boolean,default:!1},TZCode:{type:String},UTCOffset:{type:Number},removeCesiumScript:{type:Boolean,default:!0},autoSortImageryLayers:{type:Boolean,default:!0},enableMouseEvent:{type:Boolean,default:!0},skeleton:{type:[Boolean,Object],default:()=>({dark:!1,animation:"wave",square:!0,bordered:!0,color:void 0})},touchHoldArg:{type:String,default:"1000"},viewerCreator:Function,mars3dConfig:Object,dcConfig:Object,containerId:String};class Er{constructor(){this.states=new Cesium.ManagedArray,this.count=0}hidePrimitiveCollection(e){const{PrimitiveCollection:t,Cesium3DTileset:i,Model:n}=Cesium,o=e.length;for(let r=0;r<o;r++){const o=e.get(r);o instanceof t?this.hidePrimitiveCollection(o):(this.states.push(o.show),o instanceof i||o instanceof n||(o.show=!1))}}restorePrimitiveCollection(e){const{PrimitiveCollection:t}=Cesium,i=e.length;for(let n=0;n<i;n++){const i=e.get(n);i instanceof t?this.restorePrimitiveCollection(i):i.show=this.states.get(this.count++)}}hide(e){this.states.length=0,this.hidePrimitiveCollection(e.primitives),this.hidePrimitiveCollection(e.groundPrimitives)}restore(e){this.count=0,this.restorePrimitiveCollection(e.primitives),this.restorePrimitiveCollection(e.groundPrimitives)}}var Tr={BeforeDraw:0,Drawing:1,AfterDraw:2};const Ir=Object.freeze({METERS:"METERS",CENTIMETERS:"CENTIMETERS",KILOMETERS:"KILOMETERS",FEET:"FEET",US_SURVEY_FEET:"US_SURVEY_FEET",INCHES:"INCHES",YARDS:"YARDS",MILES:"MILES"}),Mr=Object.freeze({SQUARE_METERS:"SQUARE_METERS",SQUARE_CENTIMETERS:"SQUARE_CENTIMETERS",SQUARE_KILOMETERS:"SQUARE_KILOMETERS",SQUARE_FEET:"SQUARE_FEET",SQUARE_INCHES:"SQUARE_INCHES",SQUARE_YARDS:"SQUARE_YARDS",SQUARE_MILES:"SQUARE_MILES",ACRES:"ACRES",HECTARES:"HECTARES"}),Dr=Object.freeze({CUBIC_METERS:"CUBIC_METERS",CUBIC_CENTIMETERS:"CUBIC_CENTIMETERS",CUBIC_KILOMETERS:"CUBIC_KILOMETERS",CUBIC_FEET:"CUBIC_FEET",CUBIC_INCHES:"CUBIC_INCHES",CUBIC_YARDS:"CUBIC_YARDS",CUBIC_MILES:"CUBIC_MILES"}),jr=Object.freeze({DEGREES:"DEGREES",RADIANS:"RADIANS",DEGREES_MINUTES_SECONDS:"DEGREES_MINUTES_SECONDS",GRADE:"GRADE",RATIO:"RATIO"}),Lr=class e{constructor(e){e=me(e,{}),this.distanceUnits=me(e.distanceUnits,Ir.METERS),this.areaUnits=me(e.areaUnits,Mr.SQUARE_METERS),this.volumeUnits=me(e.volumeUnits,Dr.CUBIC_METERS),this.angleUnits=me(e.angleUnits,jr.DEGREES),this.slopeUnits=me(e.slopeUnits,jr.DEGREES)}static distanceToString(t,i,n,o){return Nr(t=e.convertDistance(t,Ir.METERS,i),n,o)+e.getDistanceUnitSpacing(i)+e.getDistanceUnitSymbol(i)}static areaToString(t,i,n,o){return Nr(t=e.convertArea(t,Mr.SQUARE_METERS,i),n,o)+e.getAreaUnitSpacing(i)+e.getAreaUnitSymbol(i)}static angleToString(t,i,n,o){const{Math:r}=Cesium;if(i===jr.DEGREES||i===jr.RADIANS||i===jr.GRADE)return Nr(t=Br(t,i),n,o)+e.getAngleUnitSpacing(i)+e.getAngleUnitSymbol(i);if(i===jr.DEGREES_MINUTES_SECONDS){const e=r.toDegrees(t),i=e<0?"-":"",n=Math.floor(e),a=60*(e-n),s=Math.floor(a);return i+n+"° "+s+"' "+Nr(60*(a-s),void 0,o)+'"'}jr.RATIO}static volumeToString(t,i,n,o){return Nr(t=e.convertArea(t,Dr.CUBIC_METERS,i),n,o)+e.getVolumeUnitSpacing(i)+e.getVolumeUnitSymbol(i)}static getDistanceUnitSpacing(e){return" "}static getAreaUnitSpacing(e){return" "}static getAngleUnitSpacing(e){return e===jr.RADIANS?" ":""}static getVolumeUnitSpacing(e){return" "}static getDistanceUnitSymbol(e){switch(e){case Ir.METERS:return"m";case Ir.CENTIMETERS:return"cm";case Ir.KILOMETERS:return"km";case Ir.FEET:case Ir.US_SURVEY_FEET:return"ft";case Ir.INCHES:return"in";case Ir.YARDS:return"yd";case Ir.MILES:return"mi";default:return}}static getAreaUnitSymbol(e){switch(e){case Mr.SQUARE_METERS:return"m²";case Mr.SQUARE_CENTIMETERS:return"cm²";case Mr.SQUARE_KILOMETERS:return"km²";case Mr.SQUARE_FEET:return"sq ft";case Mr.SQUARE_INCHES:return"sq in";case Mr.SQUARE_YARDS:return"sq yd";case Mr.SQUARE_MILES:return"sq mi";case Mr.ACRES:return"ac";case Mr.HECTARES:return"ha";default:return}}static getVolumeUnitSymbol(e){switch(e){case Dr.CUBIC_METERS:return"m³";case Dr.CUBIC_CENTIMETERS:return"cm³";case Dr.CUBIC_KILOMETERS:return"km³";case Dr.CUBIC_FEET:return"cu ft";case Dr.CUBIC_INCHES:return"cu in";case Dr.CUBIC_YARDS:return"cu yd";case Dr.CUBIC_MILES:return"cu mi";default:return}}static getAngleUnitSymbol(e){return e===jr.DEGREES?"°":e===jr.RADIANS?"rad":e===jr.GRADE?"%":void 0}static convertDistance(e,t,i){return t===i?e:e*kr(t)*(1/kr(i))}static convertArea(e,t,i){return t===i?e:e*Rr(t)*(1/Rr(i))}static convertVolume(e,t,i){return t===i?e:e*Vr(t)*(1/Vr(i))}static convertAngle(e,t,i){return t===i?e:Br(function(e,t){const{defined:i,Math:n,RuntimeError:o}=Cesium;if(t===jr.RADIANS)return e;if(t===jr.DEGREES)return n.toRadians(e);if(t===jr.GRADE)return e===Number.POSITIVE_INFINITY?n.PI_OVER_TWO:Math.atan(e/100);if(t===jr.RATIO)return Math.atan(e);if(t===jr.DEGREES_MINUTES_SECONDS){const t=/(-?)(\d+)\s*°\s*(\d+)\s*'\s*([\d.,]+)"\s*([WENS]?)/i.exec(e)||[];if(!i(t))throw new o("Could not convert angle to radians: "+e);let r=0<t[1].length?-1:1;const a=parseInt(t[2]),s=parseInt(t[3]),l=parseFloat(t[4]);let c=t[5];1===c.length&&("W"!==(c=c.toUpperCase())&&"S"!==c||(r*=-1));const u=r*(a+s/60+l/3600);return n.toRadians(u)}}(e,t),i)}static longitudeToString(t,i,n,o){return e.angleToString(Math.abs(t),i,n,o)+" "+(t<0?"W":"E")}static latitudeToString(t,i,n,o){return e.angleToString(Math.abs(t),i,n,o)+" "+(t<0?"S":"N")}};Lr.numberToString=function(e,t,i){return Nr(e,t,i)};let Ar=Lr;function kr(e){switch(e){case Ir.METERS:return 1;case Ir.CENTIMETERS:return.01;case Ir.KILOMETERS:return 1e3;case Ir.FEET:return.3048;case Ir.US_SURVEY_FEET:return 1200/3937;case Ir.INCHES:return.254;case Ir.YARDS:return.9144;case Ir.MILES:return 1609.344;default:return 1}}function Rr(e){switch(e){case Mr.SQUARE_METERS:return 1;case Mr.SQUARE_CENTIMETERS:return 1e-4;case Mr.SQUARE_KILOMETERS:return 1e6;case Mr.SQUARE_FEET:return.09290304;case Mr.SQUARE_INCHES:return 64516e-8;case Mr.SQUARE_YARDS:return.83612736;case Mr.SQUARE_MILES:return 2589988.110336;case Mr.ACRES:return 4046.85642232;case Mr.HECTARES:return 1e4;default:return 1}}function Vr(e){switch(e){case Dr.CUBIC_METERS:return 1;case Dr.CUBIC_CENTIMETERS:return 1e-6;case Dr.CUBIC_KILOMETERS:return 1e9;case Dr.CUBIC_FEET:return.09290304*.3048;case Dr.CUBIC_INCHES:return 16387064e-12;case Dr.CUBIC_YARDS:return.764554857984;case Dr.CUBIC_MILES:return 4168181825.44058;default:return 1}}function Br(e,t){const{Math:i}=Cesium;return t===jr.RADIANS?e:t===jr.DEGREES?i.toDegrees(e):t===jr.GRADE?i.clamp(e,0,i.PI_OVER_TWO)===i.PI_OVER_TWO?Number.POSITIVE_INFINITY:100*Math.tan(e):t===jr.RATIO?Math.sin(e)/Math.cos(e):void 0}function Nr(e,t,i){const n=function(e,t,i){let n={minimumFractionDigits:0,maximumFractionDigits:0};e=Cesium.defaultValue(e,2),"number"==typeof e?(n.minimumFractionDigits=e,n.maximumFractionDigits=e):n="function"==typeof e?e(t,i):e;return n}(i,e,t),o=e.toLocaleString(t,n);return o===(-0).toLocaleString(t,n)?(0).toLocaleString(t,n):o}class zr{constructor(e){const{defined:t,defaultValue:i,createGuid:n,BoundingSphere:o,Ellipsoid:r,ClassificationType:a,ArcType:s}=Cesium;e=i(e,{}),this.show=i(e.show,!0),this._id=t(e.id)?e.id:n(),this._ellipsoid=i(e.ellipsoid,r.WGS84),this._appearance=i(e.appearance,new Cesium.MaterialAppearance),this._depthFailAppearance=e.depthFailAppearance,this._positions=i(e.positions,[]),this._polygonHierarchy=e.polygonHierarchy,this._clampToGround=i(e.clampToGround,!1),this._classificationType=i(e.classificationType,a.BOTH),this._arcType=i(e.arcType,s.RHUMB),this._allowPicking=i(e.allowPicking,!0),this._asynchronous=i(e.asynchronous,!1),this._boundingSphere=new o,this._primitive=void 0,this._update=!0}get positions(){return this._positions}set positions(e){this._positions=e,this._update=!0}get polygonHierarchy(){return this._polygonHierarchy}set polygonHierarchy(e){this._polygonHierarchy=e,this._update=!0}get appearance(){return this._appearance}set appearance(e){this._appearance=e,void 0!==this._primitive&&(this._primitive.appearance=e)}get depthFailAppearance(){return this._depthFailAppearance}set depthFailAppearance(e){this._depthFailAppearance=e,void 0!==this._primitive&&this._primitive instanceof Cesium.Primitive&&(this._primitive.depthFailAppearance=e)}get id(){return this._id}set id(e){this._id=e}get boundingVolume(){return this._boundingSphere}get ellipsoid(){return this._ellipsoid}get clampToGround(){return this._clampToGround}set clampToGround(e){this._clampToGround=e}get classificationType(){return this._classificationType}set classificationType(e){this._classificationType=e,this._update=!0}get allowPicking(){return this._allowPicking}set allowPicking(e){this._allowPicking=e}get asynchronous(){return this._asynchronous}set asynchronous(e){this._asynchronous=e}async update(e){if(this.show){const t=this._polygonHierarchy?this._polygonHierarchy.positions:this._positions;if(t.length<3)this._primitive&&this._primitive.destroy(),this._primitive=void 0;else{if(this._update){let e;this._update=!1,e=this._clampToGround?this._createGroundPolygon():this._createPolygon(),e.then((e=>{this._primitive&&this._primitive.destroy(),this._primitive=void 0,this._primitive=e,this._primitive._vcParent=this,this._boundingSphere=Cesium.BoundingSphere.fromPoints(t,this._boundingSphere)}))}this._primitive&&this._primitive.update(e)}}}async _createPolygon(){const{Primitive:e,GeometryInstance:t,CoplanarPolygonGeometry:i,Cartesian3:n}=Cesium;return new e({geometryInstances:new t({geometry:this._polygonHierarchy?new i({polygonHierarchy:this._polygonHierarchy,ellipsoid:this._ellipsoid}):i.fromPositions({positions:this._positions.map((function(e){return n.clone(e)})),ellipsoid:this._ellipsoid}),id:this._id}),appearance:this._appearance,depthFailAppearance:this._depthFailAppearance,allowPicking:this._allowPicking,asynchronous:this._asynchronous})}async _createGroundPolygon(){const{GroundPrimitive:e,GeometryInstance:t,PolygonGeometry:i,Cartesian3:n}=Cesium;return await Cesium.GroundPrimitive.initializeTerrainHeights(),new e({geometryInstances:new t({geometry:this._polygonHierarchy?new i({polygonHierarchy:this._polygonHierarchy,ellipsoid:this._ellipsoid,arcType:this._arcType}):i.fromPositions({positions:this._positions.map((function(e){return n.clone(e)})),ellipsoid:this._ellipsoid,arcType:this._arcType}),id:this._id}),appearance:this._appearance,allowPicking:this._allowPicking,asynchronous:this._asynchronous,classificationType:this._classificationType})}isDestroyed(){return!1}destroy(){return this._primitive&&this._primitive.destroy(),this._primitive=void 0,Cesium.destroyObject(this)}}class Fr{constructor(e){const{SampledPositionProperty:t,Entity:i,ExtrapolationType:n,VelocityOrientationProperty:o,CallbackProperty:r}=Cesium;this._lastTime=void 0,this._sampledPosition=new t,this._sampledPosition.forwardExtrapolationType=e.forwardExtrapolationType||n.HOLD,this._sampledPosition.backwardExtrapolationType=e.backwardExtrapolationType||n.HOLD,this._cache=[],this._maxCacheSize=e.maxCacheSize||10;const a=new i(e);if(a.position=this._sampledPosition,!Cesium.defined(e.orientation)){const e=new o(this._sampledPosition);let t;a.orientation=new r(((i,n)=>{const o=e.getValue(i);return o?(t=o,o):t}),!1)}this._entity=a,this._velocityVectorProperty=new Cesium.VelocityVectorProperty(this._sampledPosition,!1)}get id(){return this._entity.id}set id(e){this._entity.id=e}set maxCacheSize(e){this._maxCacheSize=e}get maxCacheSize(){return this._maxCacheSize}get position(){return this._sampledPosition.getValue(Cesium.JulianDate.now())}_removePosition(){if(this._cache.length>this._maxCacheSize){const e=Cesium.JulianDate.addSeconds(this._cache[0],-.2,new Cesium.JulianDate),t=Cesium.JulianDate.addSeconds(this._cache[this._cache.length-this._maxCacheSize],-.2,new Cesium.JulianDate);this._sampledPosition.removeSamples(new Cesium.TimeInterval({start:e,stop:t})),this._cache.splice(0,this._cache.length-this._maxCacheSize)}}addPosition(e,t){let i;if(this._removePosition(),"number"==typeof t){const e=Cesium.JulianDate.now();i=Cesium.JulianDate.addSeconds(e,t,new Cesium.JulianDate),Cesium.destroyObject(e)}else i=ot(t);return this._sampledPosition.addSample(i,Ne(e)),this._lastTime=i,this._cache.push(this._lastTime),i}}const Gr={position:0,normal:1};class Hr{constructor(e){const{defaultValue:t,Matrix4:i,Math:n,Color:o,BoundingSphere:r}=Cesium;this.modelMatrix=t(e.modelMatrix,new i),this.fovH=t(e.fovH,n.toRadians(60)),this.fovV=t(e.fovV,n.toRadians(30)),this.segmentH=t(e.segmentH,16),this.segmentV=t(e.segmentV,8),this.subSegmentH=t(e.subSegmentH,3),this.subSegmentV=t(e.subSegmentV,3),this._faceColor=t(e.faceColor,new o(1,1,1,.1)),this._lineColor=t(e.lineColor,new o(1,1,1,.4)),this.show=t(e.show,!0),this._modelMatrix=i.clone(i.IDENTITY),this._fovH=0,this._fovV=0,this._segmentH=1,this._segmentV=1,this._subSegmentH=1,this._subSegmentV=1,this._boundingSphere=new r,this._initBoundingSphere=void 0,this._command=void 0}get faceColor(){return this._faceColor}set faceColor(e){this._faceColor=e}get lineColor(){return this._lineColor}set lineColor(e){this._lineColor=e}update(e){if(this.show&&e.passes.render){const{clone:t,Matrix4:i,defined:n,BoundingSphere:o}=Cesium;this.fovH===this._fovH&&this.fovV===this._fovV&&this.segmentH===this._segmentH&&this.segmentV===this._segmentV&&this.subSegmentH===this._subSegmentH&&this.subSegmentV===this._subSegmentV||(this._fovH=this.fovH,this._fovV=this.fovV,this._segmentH=this.segmentH,this._segmentV=this.segmentV,this._subSegmentH=this.subSegmentH,this._subSegmentV=this.subSegmentV,this._modelMatrix=t(i.IDENTITY),this._destroyVideoMemory()),this.fovH!==this._fovH&&this.fovV!==this._fovV&&this.segmentH!==this._segmentH&&this.segmentV!==this._segmentV&&this.subSegmentH!==this._subSegmentH&&this.subSegmentV!==this._subSegmentV&&(this._fovH=this.fovH,this._fovV=this.fovV,this._segmentH=this.segmentH,this._segmentV=this.segmentV,this._subSegmentH=this.subSegmentH,this._subSegmentV=this.subSegmentV,this._modelMatrix=t(i.IDENTITY),this._destroyVideoMemory()),n(this._command)||this._createCommand(e.context),i.equals(this.modelMatrix,this._modelMatrix)||(i.clone(this.modelMatrix,this._modelMatrix),this._command.modelMatrix=i.IDENTITY,this._command.modelMatrix=this._modelMatrix,this._command.boundingVolume=o.transform(this._initBoundingSphere,this._modelMatrix,this._boundingSphere),this._lineCommand.modelMatrix=i.IDENTITY,this._lineCommand.modelMatrix=this._modelMatrix,this._lineCommand.boundingVolume=o.transform(this._initBoundingSphere,this._modelMatrix,this._boundingSphere)),this._command&&e.commandList.push(this._command),this._lineCommand&&e.commandList.push(this._lineCommand)}}isDestroyed(){return!1}destroy(){this._destroyVideoMemory(),Cesium.destroyObject(this)}_createCommand(e){const{Appearance:t,RenderState:i,ShaderSource:n,ShaderProgram:o,BufferUsage:r,IndexDatatype:a,VertexArray:s,ComponentDatatype:l,BoundingSphere:c,DrawCommand:u,PrimitiveType:d,Pass:p,Matrix4:m}=Cesium,h=this,v=this._subSegmentH*this._segmentH,g=this._subSegmentV*this._segmentV,f=Ur(this._fovH,this._fovV,v,g),y=Ur(this._fovH,this._fovV,v,g),b=function(e,t){const i=e*t*6,n=new Uint16Array(i);for(let o=0;o<e;o++)for(let i=0;i<t;i++){const t=i*(1+e)+o,r=i*(1+e)+o+1,a=(i+1)*(1+e)+o,s=(i+1)*(1+e)+o+1,l=6*(i*e+o);n[0+l]=t,n[1+l]=r,n[2+l]=s,n[3+l]=t,n[4+l]=s,n[5+l]=a}return n}(v,g),C=function(e,t,i,n){const o=e*i,r=t*n,a=new Uint16Array((e+1)*(2*r)+(t+1)*(2*o)+8);for(let c=0;c<e+1;c++)for(let e=0;e<r;e++){const t=c*i;a[2*(c*r+e)+0]=e*(1+o)+t,a[2*(c*r+e)+1]=(e+1)*(1+o)+t}const s=(e+1)*(2*r);for(let c=0;c<t;c++)for(let e=0;e<o;e++){const t=c*n;a[s+2*(e+c*o)]=t*(1+o)+e,a[s+2*(e+c*o)+1]=t*(1+o)+e+1}const l=(e+1)*(2*r)+(t+1)*(2*o);return a[l]=0,a[l+1]=(1+o)*(1+r),a[l+2]=o,a[l+3]=(1+o)*(1+r),a[l+4]=(1+o)*r,a[l+5]=(1+o)*(1+r),a[l+6]=(1+o)*(1+r)-1,a[l+7]=(1+o)*(1+r),a}(this._segmentH,this._segmentV,this._subSegmentH,this._subSegmentV),w=t.getDefaultRenderState(!0,!1,void 0),_=i.fromCache(w),O=e.webgl2,x=new n({sources:[`\n        // 使用double类型的position进行计算\n        // attribute vec3 position3DHigh;\n        // attribute vec3 position3DLow;\n        ${O?"in":"attribute"} vec3 position;\n        ${O?"in":"attribute"} vec3 normal;\n        // attribute vec2 st;\n        // attribute float batchId;\n        ${O?"out":"varying"} vec3 v_positionEC;\n        ${O?"out":"varying"} vec3 v_normalEC;\n        // varying vec2 v_st;\n        void main()\n          {\n            // 使用double类型的position进行计算\n            // vec4 p = czm_translateRelativeToEye(position3DHigh, position3DLow);\n            // v_positionEC = (czm_modelViewRelativeToEye * p).xyz;\n            // position in eye coordinates\n            // v_normalEC = czm_normal * normal;\n            // normal in eye coordinates\n            // v_st = st;\n            // gl_Position = czm_modelViewProjectionRelativeToEye * p;\n            v_positionEC = (czm_modelView * vec4(position, 1.0)).xyz;\n            // position in eye coordinates\n            v_normalEC = czm_normal * normal;\n            // normal in eye coordinates\n            // v_st = st;\n            gl_Position = czm_modelViewProjection * vec4(position, 1.0);\n          }\n        `]}),P=new n({sources:[`\n        ${O?"in":"varying"} vec3 v_positionEC;\n        ${O?"in":"varying"} vec3 v_normalEC;\n        // varying vec2 v_st;\n        // uniform sampler2D myImage;\n        uniform vec4 vcColor;\n        void main()\n        {\n          vec3 positionToEyeEC = -v_positionEC;\n          vec3 normalEC = normalize(v_normalEC);\n          #ifdef FACE_FORWARD\n          normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n          #endif\n          czm_materialInput materialInput;\n          materialInput.normalEC = normalEC;\n          materialInput.positionToEyeEC = positionToEyeEC;\n          // materialInput.st = v_st;\n          //czm_material material = czm_getMaterial(materialInput);\n          czm_material material = czm_getDefaultMaterial(materialInput);\n          // material.diffuse = texture2D(myImage, materialInput.st).rgb;\n          material.diffuse = vcColor.rgb;\n          material.alpha = vcColor.a;\n          #ifdef FLAT\n          ${O?"out_FragColor":"gl_FragColor"} = vec4(material.diffuse + material.emission, material.alpha);\n          #else\n          ${O?"out_FragColor":"gl_FragColor"} = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n          #endif\n        }\n        `]}),S={vcColor:function(){return h._faceColor}},E={vcColor:function(){return h._lineColor}},T=o.fromCache({context:e,vertexShaderSource:x,fragmentShaderSource:P,attributeLocations:Gr});this._shaderprogram=T;const I=Cesium.Buffer.createVertexBuffer({context:e,typedArray:f,usage:r.STATIC_DRAW}),M=Cesium.Buffer.createVertexBuffer({context:e,typedArray:y,usage:r.STATIC_DRAW}),D=Cesium.Buffer.createIndexBuffer({context:e,typedArray:b,usage:r.STATIC_DRAW,indexDatatype:a.UNSIGNED_SHORT}),j=Cesium.Buffer.createIndexBuffer({context:e,typedArray:C,usage:r.STATIC_DRAW,indexDatatype:a.UNSIGNED_SHORT}),L=new s({context:e,attributes:[{index:0,vertexBuffer:I,componentsPerAttribute:3,componentDatatype:l.FLOAT},{index:1,vertexBuffer:M,componentsPerAttribute:3,componentDatatype:l.FLOAT}],indexBuffer:D}),A=new s({context:e,attributes:[{index:0,vertexBuffer:I,componentsPerAttribute:3,componentDatatype:l.FLOAT},{index:1,vertexBuffer:M,componentsPerAttribute:3,componentDatatype:l.FLOAT}],indexBuffer:j});this._initBoundingSphere=c.fromVertices(f),this._command=new u({vertexArray:L,primitiveType:d.TRIANGLES,renderState:_,shaderProgram:T,uniformMap:S,owner:this,pass:p.TRANSLUCENT,modelMatrix:new m,boundingVolume:new c,cull:!0}),this._lineCommand=new u({vertexArray:A,primitiveType:d.LINES,renderState:_,shaderProgram:T,uniformMap:E,owner:this,pass:p.TRANSLUCENT,modelMatrix:new m,boundingVolume:new c,cull:!0})}_destroyVideoMemory(){const{defined:e}=Cesium;this._shaderprogram=this._shaderprogram&&this._shaderprogram.destroy(),e(this._command)&&(this._command.vertexArray.destroy(),this._command=void 0),e(this._lineCommand)&&(this._lineCommand.vertexArray.destroy(),this._lineCommand=void 0)}}function Ur(e,t,i,n){const o=new Float32Array((i+1)*(n+1)*3+3);for(let r=0;r<i+1;r++)for(let a=0;a<n+1;a++){const s=e*(r/i-.5),l=t*(a/n-.5),c=[Math.cos(-s)*Math.cos(-l),Math.sin(-s)*Math.cos(-l),Math.sin(l)];o[3*(a*(i+1)+r)+0]=c[0],o[3*(a*(i+1)+r)+1]=c[1],o[3*(a*(i+1)+r)+2]=c[2]}return o[(i+1)*(n+1)*3+0]=0,o[(i+1)*(n+1)*3+1]=0,o[(i+1)*(n+1)*3+2]=0,o}let Wr=class{constructor(e){e=me(e,{}),this._enabled=me(e.enabled,!1),this._pixelRange=me(e.pixelRange,80),this._minimumClusterSize=me(e.minimumClusterSize,2),this._clusterBillboards=me(e.clusterBillboards,!0),this._clusterLabels=me(e.clusterLabels,!0),this._clusterPoints=me(e.clusterPoints,!0),this._labelCollection=void 0,this._billboardCollection=void 0,this._pointCollection=void 0,this._clusterBillboardCollection=void 0,this._clusterLabelCollection=void 0,this._clusterPointCollection=void 0,this._collectionIndicesByEntity={},this._unusedLabelIndices=[],this._unusedBillboardIndices=[],this._unusedPointIndices=[],this._previousClusters=[],this._previousHeight=void 0,this._enabledDirty=!1,this._clusterDirty=!1,this._cluster=void 0,this._removeEventListener=void 0,this._clusterEvent=new Cesium.Event,this.show=me(e.show,!0)}_initialize(e){this._scene=e;const t=function(e){const{defined:t,LabelCollection:i,BillboardCollection:n,PointPrimitiveCollection:o,Billboard:r,Matrix4:a,Cartesian3:s,Cartesian2:l,BoundingRectangle:c}=Cesium,u=new c,d=new c,p=new c;return function(m){if(t(m)&&m<.05||!e.enabled)return;const h=e._scene,v=e._labelCollection,g=e._billboardCollection,f=e._pointCollection;if(!t(v)&&!t(g)&&!t(f)||!e._clusterBillboards&&!e._clusterLabels&&!e._clusterPoints)return;let y=e._clusterLabelCollection,b=e._clusterBillboardCollection,C=e._clusterPointCollection;t(y)?y.removeAll():y=e._clusterLabelCollection=new i({scene:h}),t(b)?b.removeAll():b=e._clusterBillboardCollection=new n({scene:h}),t(C)?C.removeAll():C=e._clusterPointCollection=new o;const _=e._pixelRange,O=e._minimumClusterSize,x=e._previousClusters,P=[],S=e._previousHeight,E=h.camera.positionCartographic.height,T=h.mapProjection.ellipsoid,I=h.camera.positionWC,M=new Cesium.EllipsoidalOccluder(T,I),D=[];let j,L,A,k,R,V,B,N,z,F,G,H;e._clusterLabels&&ea(v,D,h,M,e),e._clusterBillboards&&ea(g,D,h,M,e),e._clusterPoints&&ea(f,D,h,M,e);const U=new w(D.length,64,Int32Array);for(let e=0;e<D.length;e++)U.add(D[e].coord.x,D[e].coord.y);if(U.finish(),E<S)for(A=x.length,j=0;j<A;++j){const i=x[j];if(!M.isPointVisible(i.position))continue;const n=r._computeScreenSpacePosition(a.IDENTITY,i.position,s.ZERO,l.ZERO,h);if(!t(n))continue;const o=1-E/S;let c=i.width=i.width*o,u=i.height=i.height*o;c=Math.max(c,i.minimumWidth),u=Math.max(u,i.minimumHeight);const d=n.x-.5*c,p=n.y-.5*u,m=n.x+c,v=n.y+u;for(R=U.range(d,p,m,v),V=R.length,F=0,z=[],L=0;L<V;++L)B=R[L],N=D[B],N.clustered||(++F,G=N.collection,H=N.index,z.push(G.get(H).id));if(F>=O)for(Qr(i.position,F,z,e),P.push(i),L=0;L<V;++L)D[R[L]].clustered=!0}for(A=D.length,j=0;j<A;++j){const t=D[j];if(t.clustered)continue;t.clustered=!0,G=t.collection,H=t.index;const i=G.get(H);k=Jr(i,t.coord,_,e,u);const n=c.clone(k,d);R=U.range(k.x,k.y,k.x+k.width,k.y+k.height),V=R.length;const o=s.clone(i.position);for(F=1,z=[i.id],L=0;L<V;++L)if(B=R[L],N=D[B],!N.clustered){const t=N.collection.get(N.index),i=Jr(t,N.coord,_,e,p);s.add(t.position,o,o),c.union(n,i,n),++F,z.push(t.id)}if(F>=O){const t=s.multiplyByScalar(o,1/F,o);for(Qr(t,F,z,e),P.push({position:t,width:n.width,height:n.height,minimumWidth:k.width,minimumHeight:k.height}),L=0;L<V;++L)D[R[L]].clustered=!0}else Xr(i,e)}0===y.length&&(y.destroy(),e._clusterLabelCollection=void 0),0===b.length&&(b.destroy(),e._clusterBillboardCollection=void 0),0===C.length&&(C.destroy(),e._clusterPointCollection=void 0),e._previousClusters=P,e._previousHeight=E}}(this);this._cluster=t,this._removeEventListener=e.camera.changed.addEventListener(t)}get enabled(){return this._enabled}set enabled(e){this._enabledDirty=e!==this._enabled,this._enabled=e}get pixelRange(){return this._pixelRange}set pixelRange(e){this._clusterDirty=this._clusterDirty||e!==this._pixelRange,this._pixelRange=e}get minimumClusterSize(){return this._minimumClusterSize}set minimumClusterSize(e){this._clusterDirty=this._clusterDirty||e!==this._minimumClusterSize,this._minimumClusterSize=e}get clusterEvent(){return this._clusterEvent}get clusterBillboards(){return this._clusterBillboards}set clusterBillboards(e){this._clusterDirty=this._clusterDirty||e!==this._clusterBillboards,this._clusterBillboards=e}get clusterLabels(){return this._clusterLabels}set clusterLabels(e){this._clusterDirty=this._clusterDirty||e!==this._clusterLabels,this._clusterLabels=e}get clusterPoints(){return this._clusterPoints}set clusterPoints(e){this._clusterDirty=this._clusterDirty||e!==this._clusterPoints,this._clusterPoints=e}getLabel(e){return Zr.call(this,e,"_labelCollection",Cesium.LabelCollection,"_unusedLabelIndices","labelIndex")}removeLabel(e){const{defined:t}=Cesium,i=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[e.id];if(!t(this._labelCollection)||!t(i)||!t(i.labelIndex))return;const n=i.labelIndex;i.labelIndex=void 0,qr(this,e.id);const o=this._labelCollection.get(n);o.show=!1,o.text="",o.id=void 0,this._unusedLabelIndices.push(n),this._clusterDirty=!0}getBillboard(e){return Zr.call(this,e,"_billboardCollection",Cesium.BillboardCollection,"_unusedBillboardIndices","billboardIndex")}removeBillboard(e){const{defined:t}=Cesium,i=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[e.id];if(!t(this._billboardCollection)||!t(i)||!t(i.billboardIndex))return;const n=i.billboardIndex;i.billboardIndex=void 0,qr(this,e.id);const o=this._billboardCollection.get(n);o.id=void 0,o.show=!1,o.image=void 0,this._unusedBillboardIndices.push(n),this._clusterDirty=!0}getPoint(e){return Zr.call(this,e,"_pointCollection",Cesium.PointPrimitiveCollection,"_unusedPointIndices","pointIndex")}removePoint(e){const{defined:t}=Cesium,i=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[e.id];if(!t(this._pointCollection)||!t(i)||!t(i.pointIndex))return;const n=i.pointIndex;i.pointIndex=void 0,qr(this,e.id);const o=this._pointCollection.get(n);o.show=!1,o.id=void 0,this._unusedPointIndices.push(n),this._clusterDirty=!0}update(e){if(!this.show)return;const{defined:t}=Cesium;let i;t(this._labelCollection)&&this._labelCollection.length>0&&0===this._labelCollection.get(0)._glyphs.length&&(i=e.commandList,e.commandList=[],this._labelCollection.update(e),e.commandList=i),t(this._billboardCollection)&&this._billboardCollection.length>0&&!t(this._billboardCollection.get(0).width)&&(i=e.commandList,e.commandList=[],this._billboardCollection.update(e),e.commandList=i),this._enabledDirty&&(this._enabledDirty=!1,function(e){if(e.enabled)return;const{defined:t}=Cesium;t(e._clusterLabelCollection)&&e._clusterLabelCollection.destroy();t(e._clusterBillboardCollection)&&e._clusterBillboardCollection.destroy();t(e._clusterPointCollection)&&e._clusterPointCollection.destroy();e._clusterLabelCollection=void 0,e._clusterBillboardCollection=void 0,e._clusterPointCollection=void 0,$r(e._labelCollection),$r(e._billboardCollection),$r(e._pointCollection)}(this),this._clusterDirty=!0),this._clusterDirty&&(this._clusterDirty=!1,this._cluster()),t(this._clusterLabelCollection)&&this._clusterLabelCollection.update(e),t(this._clusterBillboardCollection)&&this._clusterBillboardCollection.update(e),t(this._clusterPointCollection)&&this._clusterPointCollection.update(e),t(this._labelCollection)&&this._labelCollection.update(e),t(this._billboardCollection)&&this._billboardCollection.update(e),t(this._pointCollection)&&this._pointCollection.update(e)}destroy(){const{defined:e}=Cesium;this._labelCollection=this._labelCollection&&this._labelCollection.destroy(),this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),this._pointCollection=this._pointCollection&&this._pointCollection.destroy(),this._clusterLabelCollection=this._clusterLabelCollection&&this._clusterLabelCollection.destroy(),this._clusterBillboardCollection=this._clusterBillboardCollection&&this._clusterBillboardCollection.destroy(),this._clusterPointCollection=this._clusterPointCollection&&this._clusterPointCollection.destroy(),e(this._removeEventListener)&&(this._removeEventListener(),this._removeEventListener=void 0),this._labelCollection=void 0,this._billboardCollection=void 0,this._pointCollection=void 0,this._clusterBillboardCollection=void 0,this._clusterLabelCollection=void 0,this._clusterPointCollection=void 0,this._collectionIndicesByEntity=void 0,this._unusedLabelIndices=[],this._unusedBillboardIndices=[],this._unusedPointIndices=[],this._previousClusters=[],this._previousHeight=void 0,this._enabledDirty=!1,this._pixelRangeDirty=!1,this._minimumClusterSizeDirty=!1}};function $r(e){const{defined:t}=Cesium;if(!t(e))return;const i=e.length;for(let n=0;n<i;++n)e.get(n).clusterShow=!0}function Zr(e,t,i,n,o){const{defined:r}=Cesium;let a=this[t];r(this._collectionIndicesByEntity)||(this._collectionIndicesByEntity={});let s,l,c=this._collectionIndicesByEntity[e.id];if(r(c)||(c=this._collectionIndicesByEntity[e.id]={billboardIndex:void 0,labelIndex:void 0,pointIndex:void 0}),r(a)&&r(c[o]))return a.get(c[o]);r(a)||(a=this[t]=new i({scene:this._scene}));const u=this[n];u.length>0?(s=u.pop(),l=a.get(s)):(l=a.add(),s=a.length-1),c[o]=s;const d=this;return Promise.resolve().then((function(){d._clusterDirty=!0})),l}function qr(e,t){const{defined:i}=Cesium,n=e._collectionIndicesByEntity[t];i(n.billboardIndex)||i(n.labelIndex)||i(n.pointIndex)||delete e._collectionIndicesByEntity[t]}function Yr(e,t){e.x-=t,e.y-=t,e.width+=2*t,e.height+=2*t}function Jr(e,t,i,n,o){const{defined:r,Label:a,Billboard:s,PointPrimitive:l,BoundingRectangle:c}=Cesium,u=new c;if(r(e._labelCollection)&&n._clusterLabels?o=a.getScreenSpaceBoundingBox(e,t,o):r(e._billboardCollection)&&n._clusterBillboards?o=s.getScreenSpaceBoundingBox(e,t,o):r(e._pointPrimitiveCollection)&&n._clusterPoints&&(o=l.getScreenSpaceBoundingBox(e,t,o)),Yr(o,i),n._clusterLabels&&!r(e._labelCollection)&&r(e.id)&&Kr(n,e.id.id)&&r(e.id._label)){const r=n._collectionIndicesByEntity[e.id.id].labelIndex,s=n._labelCollection.get(r),l=a.getScreenSpaceBoundingBox(s,t,u);Yr(l,i),o=c.union(o,l,o)}return o}function Xr(e,t){const{defined:i}=Cesium;if(e.clusterShow=!0,!i(e._labelCollection)&&i(e.id)&&Kr(t,e.id.id)&&i(e.id._label)){const i=t._collectionIndicesByEntity[e.id.id].labelIndex;t._labelCollection.get(i).clusterShow=!0}}function Qr(e,t,i,n){const o={billboard:n._clusterBillboardCollection.add(),label:n._clusterLabelCollection.add(),point:n._clusterPointCollection.add()};o.billboard.show=!1,o.point.show=!1,o.label.show=!0,o.label.text=t.toLocaleString(),o.label.id=i,o.billboard.position=o.label.position=o.point.position=e,o.billboard.owner=n,o.label.owner=n,o.point.owner=n,n._clusterEvent.raiseEvent(i,o)}function Kr(e,t){const{defined:i}=Cesium;return i(e)&&i(e._collectionIndicesByEntity[t])&&i(e._collectionIndicesByEntity[t].labelIndex)}function ea(e,t,i,n,o){const{defined:r,SceneMode:a}=Cesium;if(!r(e))return;const s=e.length;for(let l=0;l<s;++l){const s=e.get(l);if(s.clusterShow=!1,!s.show||o._scene.mode===a.SCENE3D&&!n.isPointVisible(s.position))continue;const c=s.computeScreenSpacePosition(i);r(c)&&t.push({index:l,collection:e,clustered:!1,coord:c})}}let ta=!1;class ia{static extend(e){if(ta)return;const{Rectangle:t}=Cesium;t.prototype.expand=function(e,i,n){return e=(n=n&&n instanceof t?n:this.clone()).width*(1-e)/2,i=n.height*(1-i)/2,n.west+=e,n.south+=i,n.east-=e,n.north-=i,n.west=n.west<-Math.PI?-Math.PI:n.west,n.east=n.east>Math.PI?Math.PI:n.east,n.north=n.north>Math.PI/2?Math.PI/2:n.north,n.south=n.south<-Math.PI/2?-Math.PI/2:n.south,n},ta=!0}static revoke(e){if(!ta)return;const{Rectangle:t}=Cesium;t.prototype.expand=void 0,ta=!1}}let na,oa=!1;class ra{static extend(e){if(oa)return;const t=Cesium.ShadowMapShader;na=t.createShadowReceiveFragmentShader,t.createShadowReceiveFragmentShader=function(t,i,n,o,r){var a;t=na.bind(this)(t,i,n,o,r);if(i._isSpotLight){t.sources[0]=`\n          uniform vec4 shadowMap_viewshedVisibleColor;\n          uniform vec4 shadowMap_viewshedInvisibleColor;\n          ${t.sources[0]}\n        `;const i=null==(a=e.scene.context)?void 0:a.webgl2;t.sources[t.sources.length-1]=t.sources[t.sources.length-1].replace((i?"out_FragColor":"gl_FragColor")+".rgb *= visibility;",`\n          float _depth = shadowPosition.z - shadowParameters.depthBias;\n          float _visibility = czm_shadowDepthCompare(shadowMap_texture, shadowPosition.xy, _depth);\n          ${i?"out_FragColor":"gl_FragColor"}.rgb *= (_visibility < 0.999 ? shadowMap_viewshedInvisibleColor.rgb :shadowMap_viewshedVisibleColor.rgb);\n          `),t.sources[t.sources.length-1]=t.sources[t.sources.length-1].replace("vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);","vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);if (distance(positionEC.xyz, shadowMap_lightPositionEC.xyz) > shadowMap_lightPositionEC.w) { return; }")}return t},oa=!0}static revoke(e){if(!oa)return;Cesium.ShadowMapShader.createShadowReceiveFragmentShader=na,oa=!1}}class aa{constructor(e,t){const{defined:i,DeveloperError:n,PerspectiveFrustum:o,Math:r,Camera:a,ShadowMap:s,ShadowMode:l,Event:c,Cartesian3:u,defaultValue:d,Color:p}=Cesium;if(!i(e))throw new n("scene is required.");this._scene=e,this._frustum=new o,this._frustum.fov=r.PI/3,this._frustum.aspectRatio=3,this._frustum.near=1,this._frustum.far=400,this._spotLightCamera=new a(this._scene),this._frustum.clone(this._spotLightCamera.frustum),this._viewshedShadowMap=new s({context:this._scene.context,lightCamera:this._spotLightCamera,cascadesEnabled:!1}),t=t||{},this._scene.globe.shadows=l.ENABLED,this._viewshedShadowMap._terrainBias.depthBias=0,this._debugCameraPrimitive=new Hr({}),this._enabledChangedEvent=new c,this._position=new u,this._offsetHeight=d(t.offsetHeight,1.8),this._visibleColor=d(t.visibleColor,new p(0,1,0,1)),this._invisibleColor=d(t.invisibleColor,new p(1,0,0,1)),this._viewshedShadowMap._viewshedColors={visible:this._visibleColor,invisible:this._invisibleColor},this._showGridLine=t.showGridLine,this._debugCameraPrimitive.show=this._showGridLine,this._debugCameraPrimitive.lineColor=d(t.lineColor,new p(1,1,1,.4)),this._debugCameraPrimitive.faceColor=d(t.faceColor,new p(1,1,1,.1))}get frustum(){return this._frustum}get fovH(){return this._fovH}set fovH(e){if(isNaN(e)||void 0===e||null==e||e<0||e>=Math.PI)throw new Error("fovH must be in the range [0, PI).");this._fovH=Number(e),this.frustum.aspectRatio=Math.tan(.5*this._fovH)/Math.tan(.5*this._fovV),this.frustum.fov=this._fovH>this._fovV?this._fovH:this._fovV}get fovV(){return this._fovV}set fovV(e){if(isNaN(e)||void 0===e||null==e||e<0||e>=Math.PI)throw new Error("fovV must be in the range [0, PI).");this._fovV=Number(e),this.frustum.aspectRatio=Math.tan(.5*this._fovH)/Math.tan(.5*this._fovV),this.frustum.fov=this._fovH>this._fovV?this._fovH:this._fovV}get near(){return this.frustum.near}set near(e){this.frustum.near!==e&&(this.frustum.near=e)}get far(){return this.far.near}set far(e){this.frustum.far!==e&&(this.frustum.far=e)}get position(){return this._position}set position(e){e instanceof Cesium.Cartesian3&&this.setView({destination:e.clone(),orientation:{heading:this._spotLightCamera.heading,pitch:this._spotLightCamera.pitch,roll:this._spotLightCamera.roll}})}get offsetHeight(){return this._offsetHeight}set offsetHeight(e){if(isNaN(e)||null==e||null==e)throw new Error("Unacceptable offset.");this._offsetHeight=Number(e),this.setView({destination:this._position,orientation:{heading:this._spotLightCamera.heading,pitch:this._spotLightCamera.pitch,roll:this._spotLightCamera.roll}})}get heading(){return this._spotLightCamera.heading}set heading(e){this._spotLightCamera.heading!==e&&this._spotLightCamera.setView({destination:this._spotLightCamera.positionWC,orientation:{heading:e,pitch:this._spotLightCamera.pitch,roll:this._spotLightCamera.roll}})}get pitch(){return this._spotLightCamera.pitch}set pitch(e){this._spotLightCamera.pitch!==e&&this._spotLightCamera.setView({destination:this._spotLightCamera.positionWC,orientation:{heading:this._spotLightCamera.heading,pitch:e,roll:this._spotLightCamera.roll}})}get roll(){return this._spotLightCamera.roll}set roll(e){this._spotLightCamera.roll!==e&&this._spotLightCamera.setView({destination:this._spotLightCamera.positionWC,orientation:{heading:this._spotLightCamera.heading,pitch:this._spotLightCamera.pitch,roll:e}})}get shadowMap(){return this._viewshedShadowMap}get lightCamera(){return this._spotLightCamera}get enabled(){return this._viewshedShadowMap.enabled}set enabled(e){this._viewshedShadowMap.enabled!==e&&(e?(this._viewshedShadowMap.enabled=!0,this._viewshedShadowMap._pointLightRadius=this._spotLightCamera.frustum.far):this._viewshedShadowMap.enabled=!1,this._enabledChangedEvent.raiseEvent(e))}get enabledChangedEvent(){return this._enabledChangedEvent}get visibleColor(){return this._visibleColor}set visibleColor(e){this._visibleColor=e,this._viewshedShadowMap._viewshedColors.visible=e}get invisibleColor(){return this._invisibleColor}set invisibleColor(e){this._invisibleColor=e,this._viewshedShadowMap._viewshedColors.invisible=e}get showGridLine(){return this._showGridLine}set showGridLine(e){this._showGridLine=e,this._debugCameraPrimitive.show=e}get faceColor(){return this._debugCameraPrimitive.faceColor}set faceColor(e){this._debugCameraPrimitive.faceColor=e}get lineColor(){return this._debugCameraPrimitive.lineColor}set lineColor(e){this._debugCameraPrimitive.lineColor=e}update(e){if(this._viewshedShadowMap.enabled){const{ShadowMode:t,Matrix3:i,Matrix4:n,Math:o}=Cesium;if(this._scene.globe.shadows!==t.ENABLED&&(this._scene.globe.shadows=t.ENABLED),e.shadowMaps.unshift(this._viewshedShadowMap),this._frustum.equals(this._spotLightCamera.frustum)||(this._frustum.clone(this._spotLightCamera.frustum),this._viewshedShadowMap._pointLightRadius=this._frustum.far,this.shadowMap._boundingSphere.radius=Math.random()),this._debugCameraPrimitive.show){const t=this._debugCameraPrimitive.modelMatrix;n.clone(this._spotLightCamera.inverseViewMatrix,t);const r=i.fromRotationZ(.5*o.PI),a=i.fromRotationY(.5*o.PI),s=new i;i.multiply(r,a,s),n.multiplyByMatrix3(t,s,t),n.multiplyByUniformScale(t,this._spotLightCamera.frustum.far,t);const l=this._spotLightCamera.frustum;this._debugCameraPrimitive.fovV=l.aspectRatio<=1?l.fov:2*Math.atan(Math.tan(.5*l.fov)/l.aspectRatio),this._debugCameraPrimitive.fovH=1<l.aspectRatio?l.fov:2*Math.atan(Math.tan(.5*l.fov)*l.aspectRatio),this._debugCameraPrimitive.segmentH=parseInt(String(this._debugCameraPrimitive.fovH/(Math.PI/30)))||1,this._debugCameraPrimitive.segmentV=parseInt(String(this._debugCameraPrimitive.fovV/(Math.PI/30)))||1,this._debugCameraPrimitive.update(e)}}}setView(e){const t=(e=e||{}).destination;if(t instanceof Cesium.Cartesian3){this._position=t.clone();const i=this._offsetHeight,n=Cesium.Cartographic.fromCartesian(t,this._scene.globe.ellipsoid);if(n){n.height=n.height+i;const t=Cesium.Cartesian3.fromRadians(n.longitude,n.latitude,n.height,this._scene.globe.ellipsoid);e.destination=t}}this._spotLightCamera.setView(e)}isDestroyed(){return!1}destroy(){this._debugCameraPrimitive&&this._debugCameraPrimitive.destroy(),this._viewshedShadowMap&&this._viewshedShadowMap.destroy(),Cesium.destroyObject(this)}}class sa{constructor(e,t,i){this._color=e,this._height=t,this._base=Cesium.defaultValue(i,0)}getHeight(){return this._height}getBase(){return this._base}getStartTime(){return this._start}getStopTime(){return this._stop}setRange(e,t){this._start=e,this._stop=t}render(e){let t="";const{JulianDate:i}=Cesium;if(this._start&&this._stop&&this._color){const n=i.secondsDifference(this._start,e.epochJulian);let o=Math.round(e.timeBarWidth*e.getAlpha(n));const r=i.secondsDifference(this._stop,e.epochJulian);let a=Math.round(e.timeBarWidth*e.getAlpha(r))-o;o<0&&(a+=o,o=0),o+a>e.timeBarWidth&&(a=e.timeBarWidth-o),a>0&&(t=`<span class="cesium-timeline-highlight" style="left: ${o.toString()}px; width: ${a.toString()}px; bottom: ${this._base.toString()}px; height: ${this._height}px; background-color: ${this._color};"></span>`)}return t}}class la{constructor(e,t,i,n){const{Color:o}=Cesium;this.interval=e,this.height=t,this.color=i||new o(.5,.5,.5,1),this.backgroundColor=n||new o(0,0,0,0)}render(e,t){const{JulianDate:i,defined:n}=Cesium,o=this.interval.start,r=this.interval.stop,a=t.startJulian,s=i.addSeconds(t.startJulian,t.duration,new i);if(i.lessThan(o,a)&&i.greaterThan(r,s))e.fillStyle=this.color.toCssColorString(),e.fillRect(0,t.y,t.timeBarWidth,this.height);else if(i.lessThanOrEquals(o,s)&&i.greaterThanOrEquals(r,a)){let a,s,l;for(a=0;a<t.timeBarWidth;++a){const e=i.addSeconds(t.startJulian,a/t.timeBarWidth*t.duration,new i);!n(s)&&i.greaterThanOrEquals(e,o)?s=a:!n(l)&&i.greaterThanOrEquals(e,r)&&(l=a)}e.fillStyle=this.backgroundColor.toCssColorString(),e.fillRect(0,t.y,t.timeBarWidth,this.height),n(s)&&(n(l)||(l=t.timeBarWidth),e.fillStyle=this.color.toCssColorString(),e.fillRect(s,t.y,Math.max(l-s,1),this.height))}}}let ca=1e12;const ua=0,da=1,pa=2,ma=3,ha=4,va=0,ga=1,fa=2,ya=3,ba=4,Ca=[.001,.002,.005,.01,.02,.05,.1,.25,.5,1,2,5,10,15,30,60,120,300,600,900,1800,3600,7200,14400,21600,43200,86400,172800,345600,604800,1296e3,2592e3,5184e3,7776e3,15552e3,31536e3,63072e3,126144e3,15768e4,31536e4,63072e4,126144e4,15768e5,31536e5,63072e5,126144e5,15768e6,31536e6],wa=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function _a(e){return e<10?`0${e.toString()}`:e.toString()}const Oa=[ia,ra,Le];const xa=Sr;function Pa(e,t,i){let o,r;const a=new Promise(((e,t)=>{o=e,r=t})),s=n(),l=n(!1),c=y(),{emit:u}=t,p=Ce(),m=Oe(i);i.mounted=!1,i.vcMitt=c,i.cesiumClass="Viewer",i.children=[];const h=bo(e,i),v=_({toolbarContainerRC:void 0,timelineContainerRC:void 0,animationContainerRC:void 0,bottomContainerRC:void 0});let g=[];m.debug("viewer creating");const{t:C}=yo(),{invokeExtensions:w,revokeExtensions:P}={invokeExtensions:e=>{Oa.forEach((t=>{t.extend(e)}))},revokeExtensions:e=>{Oa.forEach((t=>{t.revoke(e)}))}};b((()=>e.selectionIndicator),(e=>{const{viewer:t,viewerElement:n}=i,{defined:o,SelectionIndicator:r}=Cesium;let a;if(!o(t.selectionIndicator)||t.selectionIndicator.isDestroyed()||e){if(!o(t.selectionIndicator)||t.selectionIndicator.isDestroyed()){a=document.createElement("div"),a.className="cesium-viewer-selectionIndicatorContainer",null==n||n.appendChild(a);const e=new r(a,t.scene);t._selectionIndicator=e}}else a=t.selectionIndicator.container,null==n||n.removeChild(a),t.selectionIndicator.destroy(),t._selectionIndicator=void 0;t.viewerWidgetResized.raiseEvent({type:"selectionIndicator",status:e?"added":"removed",target:a})})),b((()=>e.infoBox),(e=>{var t,n;const{viewer:o,viewerElement:r}=i,{defined:a,InfoBox:s}=Cesium,l=["cameraClicked","closeClicked"];let c;if(!a(o.infoBox)||o.infoBox.isDestroyed()||e){if(!a(o.infoBox)||o.infoBox.isDestroyed()){c=document.createElement("div"),c.className="cesium-viewer-infoBoxContainer",null==r||r.appendChild(c);const e=new s(c),i=e.viewModel;o._onInfoBoxCameraClicked&&(null==(t=o._eventHelper)||t.add(i.cameraClicked,o._onInfoBoxCameraClicked,o)),o._onInfoBoxClockClicked&&(null==(n=o._eventHelper)||n.add(i.closeClicked,o._onInfoBoxClockClicked,o)),i&&h.bindEvents(i,l,!0),o._infoBox=e}}else{const e=o.infoBox.viewModel;e&&h.bindEvents(e,l,!1),c=o.infoBox.container,null==r||r.removeChild(c),o.infoBox.destroy(),o._infoBox=void 0}o.forceResize(),o.viewerWidgetResized.raiseEvent({type:"infoBox",status:e?"added":"removed",target:c})})),b((()=>e.geocoder),(t=>{var n;const{viewer:o}=i,r=o._toolbar,{defined:a,Geocoder:s}=Cesium;let l;if(!a(o.geocoder)||o.geocoder.isDestroyed()||t){if(!a(o.geocoder)||o.geocoder.isDestroyed()){l=document.createElement("div"),l.className="cesium-viewer-geocoderContainer",null==r||r.appendChild(l);const t=new s({container:l,geocoderServices:a(e.geocoder)&&"boolean"!=typeof e.geocoder?Array.isArray(e.geocoder)?e.geocoder:[e.geocoder]:void 0,scene:o.scene});o._clearObjects&&(null==(n=o._eventHelper)||n.add(t.viewModel.search.beforeExecute,o._clearObjects,o)),o._geocoder=t,V(r)}}else l=o.geocoder.container,null==r||r.removeChild(l),o.geocoder.destroy(),o._geocoder=void 0;o.viewerWidgetResized.raiseEvent({type:"geocoder",status:t?"added":"removed",target:l})})),b((()=>e.homeButton),(e=>{var t,n;const{viewer:o}=i,r=o._toolbar,{defined:a,HomeButton:s}=Cesium;if(!a(o.homeButton)||o.homeButton.isDestroyed()||e){if(!a(o.homeButton)||o.homeButton.isDestroyed()){const e=new s(r,o.scene);a(o.geocoder)&&(null==(t=o._eventHelper)||t.add(e.viewModel.command.afterExecute,(function(){const e=o.geocoder.viewModel;e.searchText="",e.isSearchInProgress&&e.search()}))),o._clearTrackedObject&&(null==(n=o._eventHelper)||n.add(e.viewModel.command.beforeExecute,o._clearTrackedObject,o)),o._homeButton=e,V(r)}}else o.homeButton.destroy(),o._homeButton=void 0;o.viewerWidgetResized.raiseEvent({type:"homeButton",status:e?"added":"removed",target:r})})),b((()=>e.sceneModePicker),(t=>{const{viewer:n}=i,o=n._toolbar,{defined:r,DeveloperError:a,SceneModePicker:s}=Cesium;if(!r(n.sceneModePicker)||n.sceneModePicker.isDestroyed()||t){if(!r(n.sceneModePicker)||n.sceneModePicker.isDestroyed()){if(e.sceneModePicker&&e.scene3DOnly)throw new a("options.sceneModePicker is not available when options.scene3DOnly is set to true.");if(!e.scene3DOnly&&e.sceneModePicker){const e=new s(o,n.scene);n._sceneModePicker=e,V(o)}}}else n.sceneModePicker.destroy(),n._sceneModePicker=void 0;n.viewerWidgetResized.raiseEvent({type:"sceneModePicker",status:t?"added":"removed",target:o})})),b((()=>e.projectionPicker),(e=>{const{viewer:t}=i,n=t._toolbar,{defined:o,ProjectionPicker:r}=Cesium;if(!o(t.projectionPicker)||t.projectionPicker.isDestroyed()||e){if(!o(t.projectionPicker)||t.projectionPicker.isDestroyed()){const e=new r(n,t.scene);t._projectionPicker=e,V(n)}}else t.projectionPicker.destroy(),t._projectionPicker=void 0;t.viewerWidgetResized.raiseEvent({type:"projectionPicker",status:e?"added":"removed",target:n})})),b((()=>e.baseLayerPicker),(async t=>{const{viewer:n}=i,o=n._toolbar,{defined:r,buildModuleUrl:a,DeveloperError:s,defaultValue:l,createDefaultImageryProviderViewModels:c,createDefaultTerrainProviderViewModels:u,BaseLayerPicker:d}=Cesium;if(!r(n.baseLayerPicker)||n.baseLayerPicker.isDestroyed()||t){if(!r(n.baseLayerPicker)||n.baseLayerPicker.isDestroyed()){const t=!(Cesium.defined(n.scene.globe)&&!1===e.globe||Cesium.defined(n.baseLayerPicker)&&!1===e.baseLayerPicker);if(t&&r(e.imageryProvider))throw new s("options.imageryProvider is not available when using the BaseLayerPicker widget.\n        Either specify options.selectedImageryProviderViewModel instead or set options.baseLayerPicker to false.");if(!t&&r(e.selectedImageryProviderViewModel))throw new s("options.selectedImageryProviderViewModel is not available when not using the BaseLayerPicker widget.\n        Either specify options.imageryProvider instead or set options.baseLayerPicker to true.");if(t&&r(e.terrainProvider))throw new s("options.terrainProvider is not available when using the BaseLayerPicker widget.\n        Either specify options.selectedTerrainProviderViewModel instead or set options.baseLayerPicker to false.");if(!t&&r(e.selectedTerrainProviderViewModel))throw new s("options.selectedTerrainProviderViewModel is not available when not using the BaseLayerPicker widget.\n        Either specify options.terrainProvider instead or set options.baseLayerPicker to true.");if(t){const t=l(e.imageryProviderViewModels,c()),i=l(e.terrainProviderViewModels,u()),r=new d(o,{globe:n.scene.globe,imageryProviderViewModels:t,selectedImageryProviderViewModel:t[0],terrainProviderViewModels:i,selectedTerrainProviderViewModel:i[0]}),a=null==o?void 0:o.getElementsByClassName("cesium-baseLayerPicker-dropDown"),s=null==a?void 0:a[0];n._baseLayerPickerDropDown=s,n._baseLayerPicker=r,n.imageryLayers.raiseToTop(n.imageryLayers.get(0)),V(o)}}}else{n.baseLayerPicker.destroy(),n._baseLayerPicker=void 0,n.imageryLayers.remove(n.imageryLayers.get(n.imageryLayers.length-1));const e=a("Assets/Textures/NaturalEarthII"),t=n.imageryLayers.addImageryProvider(ut(Cesium.VERSION,"1.104")?await Cesium.TileMapServiceImageryProvider.fromUrl(e):new Cesium.TileMapServiceImageryProvider({url:e}));n.imageryLayers.lowerToBottom(t)}n.viewerWidgetResized.raiseEvent({type:"baseLayerPicker",status:t?"added":"removed",target:o})})),b((()=>e.navigationHelpButton),(t=>{const{viewer:n}=i,o=n._toolbar,{defined:r,defaultValue:a,NavigationHelpButton:s}=Cesium;if(!r(n.navigationHelpButton)||n.navigationHelpButton.isDestroyed()||t){if(!r(n.navigationHelpButton)||n.navigationHelpButton.isDestroyed()){let t=!0;try{if(r(window.localStorage)){const e=window.localStorage.getItem("cesium-hasSeenNavHelp");r(e)&&Boolean(e)?t=!1:window.localStorage.setItem("cesium-hasSeenNavHelp","true")}}catch(Qb){}const i=new s({container:o,instructionsInitiallyVisible:a(e.navigationInstructionsInitiallyVisible,t)});n._navigationHelpButton=i,V(o)}}else n.navigationHelpButton.destroy(),n._navigationHelpButton=void 0;n.viewerWidgetResized.raiseEvent({type:"navigationHelpButton",status:t?"added":"removed",target:o})})),b((()=>e.animation),(e=>{const{viewer:t,viewerElement:n}=i,{defined:o,Animation:r,AnimationViewModel:a}=Cesium;let s;if(!o(t.animation)||t.animation.isDestroyed()||e){if(!o(t.animation)||t.animation.isDestroyed()){s=document.createElement("div"),s.className="cesium-viewer-animationContainer",null==n||n.appendChild(s);const e=new r(s,new a(t.clockViewModel));e.viewModel.dateFormatter=L,e.viewModel.timeFormatter=A,t._animation=e}}else s=t.animation.container,null==n||n.removeChild(s),t.animation.destroy(),t._animation=void 0;t.forceResize(),t.viewerWidgetResized.raiseEvent({type:"animation",status:e?"added":"removed",target:s})})),b((()=>e.timeline),(e=>{var t;const{viewer:n,viewerElement:o}=i,{defined:r,Timeline:a}=Cesium;let s;if(!r(n.timeline)||n.timeline.isDestroyed()||e){if(!r(n.timeline)||n.timeline.isDestroyed()){s=document.createElement("div"),s.className="cesium-viewer-timelineContainer",null==o||o.appendChild(s);const e=new a(s,n.clock);e.makeLabel=e=>L(e),null==(t=e.addEventListener)||t.call(e,"settime",k,!1),e.zoomTo(n.clock.startTime,n.clock.stopTime),n._timeline=e}}else s=n.timeline.container,null==o||o.removeChild(s),n.timeline.destroy(),n._timeline=void 0;n.forceResize(),n.viewerWidgetResized.raiseEvent({type:"timeline",status:e?"added":"removed",target:s})})),b((()=>e.fullscreenButton),(e=>{const{viewer:t,viewerElement:n}=i,{defined:o,FullscreenButton:r}=Cesium;let a;if(!o(t.fullscreenButton)||t.fullscreenButton.isDestroyed()||e){if(!o(t.fullscreenButton)||t.fullscreenButton.isDestroyed()){a=document.createElement("div"),a.className="cesium-viewer-fullscreenContainer",null==n||n.appendChild(a);const e=new r(a,n);t._fullscreenButton=e}}else a=t.fullscreenButton.container,null==n||n.removeChild(a),t.fullscreenButton.destroy(),t._fullscreenButton=void 0;t.forceResize(),t.viewerWidgetResized.raiseEvent({type:"fullscreenButton",status:e?"added":"removed",target:a})})),b((()=>e.fullscreenElement),(e=>{const{viewer:t}=i,{defined:n}=Cesium;n(t.fullscreenButton)&&n(e)&&(t.fullscreenButton.viewModel.fullscreenElement=e)})),b((()=>e.vrButton),(e=>{const{viewer:t,viewerElement:n}=i,{defined:o,VRButton:r}=Cesium;let a;if(!o(t.vrButton)||t.vrButton.isDestroyed()||e){if(!o(t.vrButton)||t.vrButton.isDestroyed()){a=document.createElement("div"),a.className="cesium-viewer-vrContainer",null==n||n.appendChild(a);const e=new r(a,t.scene,n),i=e.viewModel.command;e.viewModel._command=function(e){i(),R(t,e.isVRMode)},t._vrButton=e}}else a=t.vrButton.container,null==n||n.removeChild(a),t.vrButton.destroy(),t._vrButton=void 0;t.forceResize(),t.viewerWidgetResized.raiseEvent({type:"fullscreenButton",status:e?"added":"removed",target:a})})),b((()=>e.useDefaultRenderLoop),(e=>{i.viewer.useDefaultRenderLoop=e})),b((()=>e.sceneMode),(e=>{const{SceneMode:t}=Cesium;t.COLUMBUS_VIEW!==e&&t.MORPHING!==e&&t.SCENE2D!==e&&t.SCENE3D!==e||(i.viewer.scene.mode=e)})),b((()=>e.shouldAnimate),(e=>{i.viewer.clock.shouldAnimate=e})),b((()=>e.terrainExaggeration),(e=>{i.viewer._terrainExaggeration=e})),b((()=>e.shadows),(e=>{i.viewer.scene.shadowMap.enabled=e})),b((()=>e.terrainProvider),(e=>{e&&(i.viewer.terrainProvider=e)})),b((()=>e.camera),(e=>{Qe(i.viewer,e)}),{deep:!0}),b((()=>e.imageryProvider),((e,t)=>{const{viewer:n}=i,{defined:o}=Cesium;if(o(e)){for(let e=0;e<n.imageryLayers.length;e++)n.imageryLayers.get(e).imageryProvider===t&&n.imageryLayers.remove(n.imageryLayers[e]);e&&n.imageryLayers.addImageryProvider(e)}})),b((()=>e.showCredit),(e=>{const{viewer:t}=i;t.cesiumWidget.creditContainer.style.display=e?"inline":"none",t.viewerWidgetResized.raiseEvent({type:"credit",status:e?"added":"removed",target:t.cesiumWidget.creditContainer})})),b((()=>e.debugShowFramesPerSecond),(e=>{const{viewer:t}=i;t.scene.debugShowFramesPerSecond=e}));const S=async function(){var t,n,o;if(m.debug("loading-viewer"),i.mounted)return!1;if(await async function(){m.debug("beforeLoad - viewer"),Ie(i,"beforeLoad")&&u("beforeLoad",i),p.value.__scriptPromise=p.value.__scriptPromise||T(),await p.value.__scriptPromise}(),"undefined"==typeof Cesium)return!1;const{Ion:r,buildModuleUrl:a,ImageryLayer:v,TileMapServiceImageryProvider:g,Viewer:f,defined:y,Math:b,Event:C}=Cesium,_=e.accessToken?e.accessToken:p.value.accessToken;r.defaultAccessToken=_;const O=a("Assets/Textures/NaturalEarthII"),P={};let S;e&&Object.keys(e).forEach((t=>{void 0!==e[t]&&null!==e[t]&&(P[t]=e[t])})),P.fullscreenElement=ce(P.fullscreenElement)?Me(s):P.fullscreenElement,ut(Cesium.VERSION,"1.104")?P.baseLayer=ce(P.baseLayer)?v.fromProviderAsync(g.fromUrl(O),{}):P.baseLayer:P.imageryProvider=ce(P.imageryProvider)?new g({url:O}):P.imageryProvider,e.viewerCreator?S=e.viewerCreator(i,Me(s),P):globalThis.mars3d?(i.map=new mars3d.Map(Me(s).id,{scene:P,control:P}),S=null==(t=i.map)?void 0:t._viewer):globalThis.DC?(i.dcViewer=new DC.Viewer(Me(s).id,P),S=null==(n=i.dcViewer)?void 0:n.delegate):globalThis.XE?(i.earth=new globalThis.XE.Earth(Me(s),P),S=null==(o=i.earth)?void 0:o.czm.viewer):S=new f(Me(s),P),w(S),i.Cesium=Cesium,i.viewer=S,i.viewerElement=S._element,i.mounted=!0,ut(Cesium.VERSION,"1.83")&&(S.scene.globe.terrainExaggeration=P.terrainExaggeration),y(P.camera)&&Qe(S,P.camera);Ie(i,"update:camera")&&S.camera.changed.addEventListener((()=>{const e=S.camera.positionCartographic;let t;t=d(P.camera.position,"lng")?{position:{lng:b.toDegrees(e.longitude),lat:b.toDegrees(e.latitude),height:e.height},heading:b.toDegrees(S.camera.heading||360),pitch:b.toDegrees(S.camera.pitch||-90),roll:b.toDegrees(S.camera.roll||0)}:{position:{x:S.camera.position.x,y:S.camera.position.y,z:S.camera.position.z},heading:S.camera.heading||2*Math.PI,pitch:S.camera.pitch||-Math.PI/2,roll:S.camera.roll||0},u("update:camera",t)})),y(S.animation)&&(S.animation.viewModel.dateFormatter=L,S.animation.viewModel.timeFormatter=A),y(S.timeline)&&(S.timeline.makeLabel=e=>L(e),S.timeline.zoomTo(S.clock.startTime,S.clock.stopTime)),!e.showCredit&&(S.cesiumWidget.creditContainer.style.display="none"),e.debugShowFramesPerSecond&&(S.scene.debugShowFramesPerSecond=!0),S.viewerWidgetResized=S.viewerWidgetResized||new C,S.viewerWidgetResized.addEventListener(D),S.imageryLayers.layerAdded.addEventListener(j),h.registerEvents(!0);const E={Cesium:Cesium,viewer:S,vm:i};globalThis.XE?Object.assign(E,{earth:i.earth}):globalThis.mars3d?Object.assign(E,{map:i.map}):globalThis.DC&&Object.assign(E,{dcViewer:i.dcViewer});return Ie(i,"ready")&&u("ready",E),null==c||c.emit("ready",E),x((()=>{S.resize(),D({type:"viewer",status:"added",target:S.container}),l.value=!0})),m.debug("loaded-viewer"),Object.assign(i.proxy,{cesiumObject:S}),E},E=async function(){if(!i.mounted)return!1;let t;m.debug("viewer---unloading"),p.value.__viewerUnloadingPromise=new Promise(((e,i)=>{t=e}));for(let e=0;e<i.children.length;e++){const t=i.children[e].proxy;await t.unload()}i.children.length=0;const{viewer:n,earth:o,map:r,dcViewer:a}=i;globalThis.Cesium&&(n.imageryLayers.layerAdded.removeEventListener(j),h.registerEvents(!1));const{removeCesiumScript:s}=e;if(n._vcPickScreenSpaceEventHandler&&n._vcPickScreenSpaceEventHandler.destroy(),n._vcViewerScreenSpaceEventHandler&&n._vcViewerScreenSpaceEventHandler.destroy(),n._vcPickScreenSpaceEventHandler=void 0,n._vcViewerScreenSpaceEventHandler=void 0,s&&P(n),delete i.appContext.config.globalProperties.$VueCesium[n.container.id],globalThis.XE?o&&o.destroy():globalThis.mars3d?r&&r.destroy():globalThis.DC?a&&a.destroy():n&&n.destroy(),i.viewer=void 0,i.mounted=!1,s&&globalThis.Cesium){const e=document.getElementsByTagName("script"),t=[];for(const n of e)n.src.indexOf("/Cesium.js")>-1&&t.push(n),n.src.indexOf("/Workers/zlib.min.js")>-1&&t.push(n),globalThis.XE&&(n.src.indexOf("/rxjs.umd.min.js")>-1&&t.push(n),n.src.indexOf("/XbsjCesium.js")>-1&&t.push(n),n.src.indexOf("/viewerCesiumNavigationMixin.js")>-1&&t.push(n),n.src.indexOf("/XbsjEarth.js")>-1&&t.push(n)),g.includes(n.src)&&!t.includes(n)&&t.push(n);const i=document.getElementsByTagName("link");for(const n of i)n.href.includes("Widgets/widgets.css")&&!t.includes(n)&&t.push(n),g.includes(n.href)&&!t.includes(n)&&t.push(n);t.forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)})),globalThis.Cesium&&(globalThis.Cesium=void 0),globalThis.XbsjCesium&&(globalThis.XbsjCesium=void 0),globalThis.XbsjEarth&&(globalThis.XbsjEarth=void 0),globalThis.XE&&(globalThis.XE=void 0),globalThis.mars3d&&(globalThis.mars3d=void 0),globalThis.DC&&(globalThis.DC=void 0),globalThis.DcCore&&(globalThis.DcCore=void 0),p.value.__scriptPromise=void 0,g=[]}i.isUnmounted=!1;return Ie(i,"destroyed")&&u("destroyed",i),c.emit("destroyed",i),m.debug("viewer---unloaded"),t(!0),p.value.__viewerUnloadingPromise=void 0,l.value=!1,!0},T=async function(){if(m.debug("getCesiumScript"),globalThis.Cesium)return Promise.resolve(globalThis.Cesium);{const t=e.cesiumPath?e.cesiumPath:p.value.cesiumPath,n=le(t),o=p.value.mars3dConfig||e.mars3dConfig,a=p.value.dcConfig||e.dcConfig;if(o){const e=o.libs||{"font-awesome":["https://unpkg.com/font-awesome@latest/css/font-awesome.min.css"],haoutil:["https://unpkg.com/haoutil@latest/dist/haoutil-src.js"],turf:["https://unpkg.com/@turf/turf@latest/turf.min.js"],"mars3d-space":["https://unpkg.com/mars3d-space@latest/dist/mars3d-space.js"],"mars3d-echarts":["https://unpkg.com/echarts@latest/dist/echarts.min.js","https://unpkg.com/echarts-gl@latest/dist/echarts-gl.min.js","https://unpkg.com/mars3d-echarts@latest/dist/mars3d-echarts.js"],"mars3d-mapv":["https://unpkg.com/mapv@latest/build/mapv.min.js","https://unpkg.com/mars3d-mapv@latest/dist/mars3d-mapv.js"],"mars3d-heatmap":["https://unpkg.com/heatmapjs@latest/heatmap.min.js","https://unpkg.com/mars3d-heatmap@latest/dist/mars3d-heatmap.js"],"mars3d-wind":["https://unpkg.com/netcdfjs@latest/lib/index.js","https://unpkg.com/mars3d-wind@latest/dist/mars3d-wind.js"],"mars3d-tdt":["https://unpkg.com/mars3d-tdt@latest/dist/mars3d-tdt.js"],"mars3d-widget":["https://unpkg.com/mars3d-widget@latest/dist/mars3d-widget.js"],mars3d:["https://unpkg.com/mars3d-cesium@latest/Build/Cesium/Widgets/widgets.css","https://unpkg.com/mars3d-cesium@latest/Build/Cesium/Cesium.js","https://unpkg.com/mars3d@latest/dist/mars3d.css","https://unpkg.com/mars3d@latest/dist/mars3d.js"]},t=(o.include||"mars3d").trim().split(","),i={};for(let n=0,o=t.length;n<o;n++){const o=t[n];i[o]||(i[o]=!0,g.push(...e[o]))}}else if(a){g.push(t),g.push(t.replace("dc.min.js","dc.min.css")),g.push(a.Cesium);const e=le(a.Cesium);g.push(`${e}/Widgets/widgets.css`),a.turf&&g.push(a.turf),a.echarts&&g.push(a.echarts)}else t.includes("/dc.base.min.js")?(g.push(t),g.push(t.replace("/dc.base.min.js","/dc.core.min.js")),g.push(t.replace("/dc.base.min.js","/dc.core.min.js").replace("/dc.core.min.js","/dc.core.min.css"))):t.includes("/XbsjEarth.js")?g.push(t):(g.push(t),g.push(`${n}/Widgets/widgets.css`));const s=g;if(o||a){const e=g.find((e=>e.includes("Cesium.js")));await I(e),s.splice(s.indexOf(e),1)}const l=[];return s.forEach((e=>{new RegExp("\\.css").test(e)?l.push(M(e)):l.push(I(e))})),Promise.all(l).then((()=>{if(globalThis.Cesium){if(globalThis.DC){const e={...a,Cesium:globalThis.Cesium};return a.echarts&&(e.echarts=globalThis.echarts),a.turf&&(e.turf=globalThis.turf),globalThis.DC.ready(e).then((()=>{globalThis.Cesium=DC.getLib("Cesium");return Ie(i,"cesiumReady")&&u("cesiumReady",globalThis.DC),globalThis.Cesium}))}return Ie(i,"cesiumReady")&&u("cesiumReady",globalThis.Cesium),globalThis.Cesium}return globalThis.XE?globalThis.XE.ready().then((()=>(Ie(i,"cesiumReady")&&u("cesiumReady",globalThis.Cesium),globalThis.Cesium))):globalThis.DC?ut(globalThis.DC.VERSION,"3.0.0")?globalThis.DC.ready({...a,Cesium:globalThis.Cesium}).then((()=>{globalThis.Cesium=DC.getLib("Cesium");return Ie(i,"cesiumReady")&&u("cesiumReady",globalThis.DC),globalThis.Cesium})):(globalThis.DC.use(globalThis.DcCore.default||globalThis.DcCore),globalThis.DC.baseUrl=`${n}/resources/`,globalThis.DC.ready((()=>{globalThis.Cesium=DC.Namespace.Cesium;return Ie(i,"cesiumReady")&&u("cesiumReady",globalThis.DC),globalThis.Cesium})),globalThis.Cesium):void r(new Error("VueCesium ERROR: Error loading CesiumJS!"))}))}},I=e=>{const t=document.createElement("script");return t.async=!1,t.src=e,document.body.appendChild(t),new Promise(((e,i)=>{t.onload=()=>{e(!0)}}))},M=e=>{const t=document.createElement("link");return t.rel="stylesheet",t.href=e,document.head.appendChild(t),new Promise(((e,i)=>{t.onload=()=>{e(!0)}}))},D=e=>{var t,n;const{viewer:o}=i,r=o._toolbar;void 0!==r&&"hidden"!==getComputedStyle(r).visibility&&"none"!==getComputedStyle(r).display?v.toolbarContainerRC=r.getBoundingClientRect():v.toolbarContainerRC=void 0;const a=o.bottomContainer;void 0!==a&&"hidden"!==getComputedStyle(a).visibility&&"none"!==getComputedStyle(a).display?v.bottomContainerRC=a.getBoundingClientRect():v.bottomContainerRC=void 0;const s=null==(t=o.timeline)?void 0:t.container;void 0!==s&&"hidden"!==getComputedStyle(s).visibility&&"none"!==getComputedStyle(s).display?v.timelineContainerRC=s.getBoundingClientRect():v.timelineContainerRC=void 0;const l=null==(n=o.animation)?void 0:n.container;void 0!==l&&"hidden"!==getComputedStyle(l).visibility&&"none"!==getComputedStyle(l).display?v.animationContainerRC=l.getBoundingClientRect():v.animationContainerRC=void 0,o.resize();Ie(i,"viewerWidgetResized")&&u("viewerWidgetResized",e)},j=t=>{const n=i.viewer,{autoSortImageryLayers:o}=e;n.baseLayerPicker&&n.imageryLayers.raiseToTop(t);const{defined:r}=Cesium;o&&(t.sortOrder=r(t.sortOrder)?t.sortOrder:9999,n.imageryLayers._layers.sort(((e,t)=>e.sortOrder-t.sortOrder)),n.imageryLayers._update())},L=function(t,i,n){const{JulianDate:o}=Cesium;let r;if(e.UTCOffset){t=o.addMinutes(t,e.UTCOffset,new o);const i=(new Date).getTimezoneOffset()-e.UTCOffset;r=0===i?"UTC":"UTC+"+-i/60}else r=0===(new Date).getTimezoneOffset()?"UTC":"UTC+"+-(new Date).getTimezoneOffset()/60;const a=o.toDate(t),s=a.toLocaleString(C("name"),{hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}).replace(/,/g,""),l=a.toLocaleString(C("name"),{year:"numeric",month:"short",day:"numeric"}).replace(/,/g,"");return n||!i&&a.getHours()+a.getMinutes()!==0?(e.TZCode&&(r=e.TZCode),n?`${s} ${r}`:`${l} ${s} ${r}`):l},A=function(e,t){return L(e,t,!0)},k=function(e){const t=e.clock;t.currentTime=e.timeJulian,t.shouldAnimate=!1},R=function(e,t){const i=e._geocoder,n=e._homeButton,o=e._sceneModePicker,r=e._projectionPicker,a=e._baseLayerPicker,s=e._animation,l=e._timeline,c=e._fullscreenButton,u=e._infoBox,d=e._selectionIndicator,p=t?"hidden":"visible",{defined:m}=Cesium;if(m(i)&&(i.container.style.visibility=p),m(n)&&(n.container.style.visibility=p),m(o)&&(o.container.style.visibility=p),m(r)&&(r.container.style.visibility=p),m(a)&&(a.container.style.visibility=p),m(s)&&(s.container.style.visibility=p),m(l)&&(l.container.style.visibility=p),m(c)&&c.viewModel.isFullscreenEnabled&&(c.container.style.visibility=p),m(u)&&(u.container.style.visibility=p),m(d)&&(d.container.style.visibility=p),e._container){const i=t||!m(c)?0:c.container.clientWidth;e._vrButton.container.style.right=i+"px",e.forceResize()}},V=function(e,t){Array.prototype.slice.call(e.children).forEach((e=>{switch(e.className){case"cesium-viewer-geocoderContainer":e.customIndex=1;break;case"cesium-button cesium-toolbar-button cesium-home-button":e.customIndex=2;break;case"cesium-sceneModePicker-wrapper cesium-toolbar-button":e.customIndex=3;break;case"cesium-projectionPicker-wrapper cesium-toolbar-button":e.customIndex=4;break;case"cesium-button cesium-toolbar-button":case"cesium-baseLayerPicker-dropDown":e.customIndex=5;break;case"cesium-navigationHelpButton-wrapper":e.customIndex=6}}));const i=[];Array.prototype.slice.call(e.children).forEach((e=>{i.push(e)})),i.sort((function(e,t){return e.customIndex-t.customIndex}));for(let n=0;n<i.length;n++)e.appendChild(i[n])};return Object.defineProperties(i,{cesiumObject:{enumerable:!0,get:()=>i.viewer}}),O((async()=>{var e;try{m.debug("viewer - onMounted"),await(null==(e=p.value)?void 0:e.__viewerUnloadingPromise),S().then((e=>{o(e)})).catch((e=>{u("unready",e),r(e)}))}catch(Qb){u("unready",Qb),r(Qb)}})),f((()=>{m.debug("viewer - onUnmounted"),E().then((()=>{c.all.clear()}))})),{isReady:l,load:S,unload:E,reload:function(){return E().then((()=>S()))},getServices:function(){return Ee({},{get layout(){return v},get vm(){return i},get Cesium(){return i.Cesium},get viewer(){return i.viewer},get dataSources(){var e;return null==(e=i.viewer)?void 0:e.dataSources},get entities(){var e;return null==(e=i.viewer)?void 0:e.entities},get imageryLayers(){var e;return null==(e=i.viewer)?void 0:e.imageryLayers},get primitives(){var e;return null==(e=i.viewer)?void 0:e.scene.primitives},get groundPrimitives(){var e;return null==(e=i.viewer)?void 0:e.scene.groundPrimitives},get postProcessStages(){var e;return null==(e=i.viewer)?void 0:e.postProcessStages},get creatingPromise(){return a},get mars3dMap(){return i.map},get dcViewer(){return i.dcViewer},get earth(){return i.earth}})},viewerRef:s,creatingPromise:a}}const Sa=[{name:"imageryLayers",events:["layerAdded","layerMoved","layerRemoved","layerShownOrHidden"]},{name:"dataSources",events:["dataSourceAdded","dataSourceMoved","dataSourceRemoved"]},{name:"entities",events:["collectionChanged"]},{name:"scene",events:["morphComplete","morphStart","postRender","postUpdate","preRender","preUpdate","renderError","terrainProviderChanged"]},{name:"camera",events:["changed","moveEnd","moveStart"]},{name:"clock",events:["onStop","onTick"]},{name:"terrainProvider",events:["errorEvent"]},{name:["infoBox","viewModel"],events:["cameraClicked","closeClicked"]},{name:["scene","globe"],events:["imageryLayersUpdatedEvent","terrainProviderChanged","tileLoadProgressEvent"]}],Ea=Co.map((e=>W(e))),Ta=["beforeLoad","cesiumReady","ready","destroyed","update:camera","viewerWidgetResized",...Co,...Ea,...wo];Sa.reduce(((e,t)=>e.concat(t.events)),Ta);const Ia={xs:18,sm:24,md:32,lg:38,xl:46},Ma={size:String};function Da(e,t=Ia){return a((()=>void 0!==e.size?{fontSize:e.size in t?`${t[e.size]}px`:e.size}:null))}function ja(e,t){return void 0!==e?e():t}function La(e,t){return void 0!==e?t.concat(e()):t}function Aa(e,t,i,n,o,r){t.key=n+o;const a=P(e,t,i);return!0===o?S(a,r()):a}const ka={...Ma,tag:{type:String,default:"i"},name:String,color:String,hoverColor:String,left:Boolean,right:Boolean};var Ra=E({name:"VcIcon",props:ka,setup(e,{slots:t}){const i=Da(e),n=a((()=>{const t=i.value;if(t)return e.color&&(t.color=e.color),e.hoverColor&&(t["--hover-color"]=e.hoverColor),t})),o=a((()=>"vc-icon"+(!0===e.left?" on-left":"")+(!0===e.right?" on-right":"")+(void 0!==e.color?` text-${e.color}`:""))),r=a((()=>{let t,i=e.name;if(!i)return{none:!0,cls:o.value};if(!0===i.startsWith("M")){const[e,t]=i.split("|");return{svg:!0,cls:o.value,nodes:e.split("&&").map((e=>{const[t,i,n]=e.split("@@");return P("path",{style:i,d:t,transform:n})})),viewBox:void 0!==t?t:"0 0 24 24"}}if(!0===i.startsWith("img:"))return{img:!0,cls:o.value,src:i.substring(4)};if(!0===i.startsWith("svguse:")){const[e,t]=i.split("|");return{svguse:!0,cls:o.value,src:e.substring(7),viewBox:void 0!==t?t:"0 0 24 24"}}let n=" ";return/^[l|f]a[s|r|l|b|d]{0,1} /.test(i)||!0===i.startsWith("icon-")?t=i:!0===i.startsWith("bt-")?t=`bt ${i}`:!0===i.startsWith("eva-")?t=`eva ${i}`:!0===/^ion-(md|ios|logo)/.test(i)?t=`ionicons ${i}`:!0===i.startsWith("ion-")?t=`ionicons ion-md${i.substr(3)}`:!0===i.startsWith("mdi-")?t=`mdi ${i}`:!0===i.startsWith("iconfont ")?t=`${i}`:!0===i.startsWith("ti-")?t=`themify-icon ${i}`:!0===i.startsWith("vc-")?t=`vc-icons ${i}`:(t="notranslate material-icons",!0===i.startsWith("o_")?(i=i.substring(2),t+="-outlined"):!0===i.startsWith("r_")?(i=i.substring(2),t+="-round"):!0===i.startsWith("s_")&&(i=i.substring(2),t+="-sharp"),n=i),{cls:t+" "+o.value,content:n}}));return()=>{const i={class:r.value.cls,style:n.value,"aria-hidden":"true",role:"presentation",viewBox:"",src:""};return!0===r.value.none?P(e.tag,i,ja(t.default)):!0===r.value.img?(i.src=r.value.src,i.style&&(i.style.width=i.style.fontSize,i.style.height=i.style.fontSize),P("img",i)):!0===r.value.svg?(i.viewBox=r.value.viewBox,i["aria-hidden"]="true",i.style&&(i.style.width=i.style.fontSize,i.style.height=i.style.fontSize),P("svg",i,La(t.default,r.value.nodes))):!0===r.value.svguse?(i.viewBox=r.value.viewBox,i["aria-hidden"]="true",i.style&&(i.style.width=i.style.fontSize,i.style.height=i.style.fontSize),P("svg",i,La(t.default,[P("use",{"xlink:href":r.value.src})]))):P(e.tag,i,La(t.default,[r.value.content]))}}});const Va={size:{type:[Number,String],default:"1em"},color:String};function Ba(e){return{cSize:a((()=>e.size in Ia?`${Ia[e.size]}px`:e.size)),classes:a((()=>"vc-spinner"+(e.color?` text-${e.color}`:"")))}}const Na=[P("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},[P("circle",{cx:"5",cy:"50",r:"5"},[P("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}),P("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"})]),P("circle",{cx:"27",cy:"5",r:"5"},[P("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}),P("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"})]),P("circle",{cx:"49",cy:"50",r:"5"},[P("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}),P("animate",{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"})])])];var za=E({name:"VcSpinnerBall",props:Va,setup(e){const{cSize:t,classes:i}=Ba(e);return()=>P("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 57 57",xmlns:"http://www.w3.org/2000/svg"},Na)}});const Fa=[P("rect",{y:"10",width:"15",height:"120",rx:"6"},[P("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),P("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),P("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},[P("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),P("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),P("rect",{x:"60",width:"15",height:"140",rx:"6"},[P("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),P("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),P("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},[P("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),P("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),P("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},[P("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),P("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})])];var Ga=E({name:"VcSpinnerBars",props:Va,setup(e){const{cSize:t,classes:i}=Ba(e);return()=>P("svg",{class:i.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg"},Fa)}});const Ha=[P("circle",{cx:"15",cy:"15",r:"15"},[P("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),P("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),P("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[P("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),P("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),P("circle",{cx:"105",cy:"15",r:"15"},[P("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),P("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var Ua=E({name:"VcSpinnerDots",props:Va,setup(e){const{cSize:t,classes:i}=Ba(e);return()=>P("svg",{class:i.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},Ha)}});const Wa=[P("g",{transform:"translate(-20,-20)"},[P("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[P("animateTransform",{attributeName:"transform",type:"rotate",from:"90 50 50",to:"0 50 50",dur:"1s",repeatCount:"indefinite"})])]),P("g",{transform:"translate(20,20) rotate(15 50 50)"},[P("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[P("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"90 50 50",dur:"1s",repeatCount:"indefinite"})])])];var $a=E({name:"VcSpinnerGears",props:Va,setup(e){const{cSize:t,classes:i}=Ba(e);return()=>P("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},Wa)}});const Za=[P("g",[P("path",{fill:"none",stroke:"currentColor","stroke-width":"5","stroke-miterlimit":"10",d:"M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"}),P("clipPath",{id:"uil-hourglass-clip1"},[P("rect",{x:"15",y:"20",width:" 70",height:"25"},[P("animate",{attributeName:"height",from:"25",to:"0",dur:"1s",repeatCount:"indefinite",values:"25;0;0",keyTimes:"0;0.5;1"}),P("animate",{attributeName:"y",from:"20",to:"45",dur:"1s",repeatCount:"indefinite",values:"20;45;45",keyTimes:"0;0.5;1"})])]),P("clipPath",{id:"uil-hourglass-clip2"},[P("rect",{x:"15",y:"55",width:" 70",height:"25"},[P("animate",{attributeName:"height",from:"0",to:"25",dur:"1s",repeatCount:"indefinite",values:"0;25;25",keyTimes:"0;0.5;1"}),P("animate",{attributeName:"y",from:"80",to:"55",dur:"1s",repeatCount:"indefinite",values:"80;55;55",keyTimes:"0;0.5;1"})])]),P("path",{d:"M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z","clip-path":"url(#uil-hourglass-clip1)",fill:"currentColor"}),P("path",{d:"M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z","clip-path":"url(#uil-hourglass-clip2)",fill:"currentColor"}),P("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"180 50 50",repeatCount:"indefinite",dur:"1s",values:"0 50 50;0 50 50;180 50 50",keyTimes:"0;0.7;1"})])];var qa=E({name:"VcSpinnerHourglass",props:Va,setup(e){const{cSize:t,classes:i}=Ba(e);return()=>P("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},Za)}});const Ya=[P("g",{"stroke-width":"4","stroke-linecap":"round"},[P("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(180)"},[P("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"})]),P("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(210)"},[P("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0",repeatCount:"indefinite"})]),P("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(240)"},[P("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".1;0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1",repeatCount:"indefinite"})]),P("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(270)"},[P("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".15;.1;0;1;.85;.7;.65;.55;.45;.35;.25;.15",repeatCount:"indefinite"})]),P("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(300)"},[P("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".25;.15;.1;0;1;.85;.7;.65;.55;.45;.35;.25",repeatCount:"indefinite"})]),P("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(330)"},[P("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".35;.25;.15;.1;0;1;.85;.7;.65;.55;.45;.35",repeatCount:"indefinite"})]),P("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(0)"},[P("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".45;.35;.25;.15;.1;0;1;.85;.7;.65;.55;.45",repeatCount:"indefinite"})]),P("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(30)"},[P("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".55;.45;.35;.25;.15;.1;0;1;.85;.7;.65;.55",repeatCount:"indefinite"})]),P("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(60)"},[P("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".65;.55;.45;.35;.25;.15;.1;0;1;.85;.7;.65",repeatCount:"indefinite"})]),P("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(90)"},[P("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".7;.65;.55;.45;.35;.25;.15;.1;0;1;.85;.7",repeatCount:"indefinite"})]),P("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(120)"},[P("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".85;.7;.65;.55;.45;.35;.25;.15;.1;0;1;.85",repeatCount:"indefinite"})]),P("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(150)"},[P("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"})])])];var Ja=E({name:"VcSpinnerIos",props:Va,setup(e){const{cSize:t,classes:i}=Ba(e);return()=>P("svg",{class:i.value,width:t.value,height:t.value,stroke:"currentColor",fill:"currentColor",viewBox:"0 0 64 64"},Ya)}});const Xa=[P("circle",{cx:"50",cy:"50",r:"44",fill:"none","stroke-width":"4","stroke-opacity":".5",stroke:"currentColor"}),P("circle",{cx:"8",cy:"54",r:"6",fill:"currentColor","stroke-width":"3",stroke:"currentColor"},[P("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 48",to:"360 50 52",dur:"2s",repeatCount:"indefinite"})])];var Qa=E({name:"VcSpinnerOrbit",props:Va,setup(e){const{cSize:t,classes:i}=Ba(e);return()=>P("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},Xa)}});const Ka=[P("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},[P("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),P("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[P("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})])])];var es=E({name:"VcSpinnerOval",props:Va,setup(e){const{cSize:t,classes:i}=Ba(e);return()=>P("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"},Ka)}});const ts=[P("g",{fill:"none","fill-rule":"evenodd","stroke-width":"2"},[P("circle",{cx:"22",cy:"22",r:"1"},[P("animate",{attributeName:"r",begin:"0s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),P("animate",{attributeName:"stroke-opacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})]),P("circle",{cx:"22",cy:"22",r:"1"},[P("animate",{attributeName:"r",begin:"-0.9s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),P("animate",{attributeName:"stroke-opacity",begin:"-0.9s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})])])];var is=E({name:"VcSpinnerPuff",props:Va,setup(e){const{cSize:t,classes:i}=Ba(e);return()=>P("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg"},ts)}});const ns=[P("g",{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)","stroke-width":"2"},[P("circle",{cx:"22",cy:"22",r:"6"},[P("animate",{attributeName:"r",begin:"1.5s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),P("animate",{attributeName:"stroke-opacity",begin:"1.5s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),P("animate",{attributeName:"stroke-width",begin:"1.5s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),P("circle",{cx:"22",cy:"22",r:"6"},[P("animate",{attributeName:"r",begin:"3s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),P("animate",{attributeName:"stroke-opacity",begin:"3s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),P("animate",{attributeName:"stroke-width",begin:"3s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),P("circle",{cx:"22",cy:"22",r:"8"},[P("animate",{attributeName:"r",begin:"0s",dur:"1.5s",values:"6;1;2;3;4;5;6",calcMode:"linear",repeatCount:"indefinite"})])])];var os=E({name:"VcSpinnerRings",props:Va,setup(e){const{cSize:t,classes:i}=Ba(e);return()=>P("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"},ns)}});const rs=[P("defs",[P("linearGradient",{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"a"},[P("stop",{"stop-color":"currentColor","stop-opacity":"0",offset:"0%"}),P("stop",{"stop-color":"currentColor","stop-opacity":".631",offset:"63.146%"}),P("stop",{"stop-color":"currentColor",offset:"100%"})])]),P("g",{transform:"translate(1 1)",fill:"none","fill-rule":"evenodd"},[P("path",{d:"M36 18c0-9.94-8.06-18-18-18",stroke:"url(#a)","stroke-width":"2"},[P("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})]),P("circle",{fill:"currentColor",cx:"36",cy:"18",r:"1"},[P("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})])])];var as=E({name:"VcSpinnerTail",props:Va,setup(e){const{cSize:t,classes:i}=Ba(e);return()=>P("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"},rs)}}),ss=E({name:"VcSpinner",props:{...Va,thickness:{type:Number,default:5}},setup(e){const{cSize:t,classes:i}=Ba(e);return()=>P("svg",{class:i.value+" vc-spinner-mat",width:t.value,height:t.value,viewBox:"25 25 50 50"},[P("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":e.thickness,"stroke-miterlimit":"10"})])}});const ls={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},cs=Object.keys(ls),us={type:String,validator:e=>cs.includes(e)};const ds={none:0,xs:4,sm:8,md:16,lg:24,xl:32},ps={xs:8,sm:10,md:14,lg:20,xl:24},ms={...Ma,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,round:Boolean,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...us,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean};function hs(e){const t=Da(e,ps),i=function(e){return a((()=>{const t=void 0===e.align?!0===e.vertical?"stretch":"left":e.align;return`${!0===e.vertical?"items":"justify"}-${ls[t]}`}))}(e),n=a((()=>{const i=!1===e.fab&&!1===e.fabMini?t.value:{};return void 0!==e.padding?Object.assign({},i,{padding:e.padding.split(/\s+/).map((e=>e in ds?ds[e]+"px":e)).join(" "),minWidth:"0",minHeight:"0"}):i})),o=a((()=>!0===e.rounded||!0===e.fab||!0===e.fabMini)),r=a((()=>!0!==e.disable&&!0!==e.loading)),s=a((()=>!0===r.value?e.tabindex||0:-1)),l=a((()=>!0===e.flat?"flat":!0===e.outline?"outline":!0===e.push?"push":!0===e.unelevated?"unelevated":"standard")),c=a((()=>{const t={tabindex:s.value};return"a"!==e.type&&(t.type=e.type),t.role="a"===e.type?"link":"button",!0===e.loading&&void 0!==e.percentage&&Object.assign(t,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":e.percentage}),!0===e.disable&&(t.disabled="",t["aria-disabled"]="true"),t}));return{classes:a((()=>{let t;return void 0!==e.color?t=!0===e.flat||!0===e.outline?`text-${e.textColor||e.color}`:`bg-${e.color} text-${e.textColor||"white"}`:e.textColor&&(t=`text-${e.textColor}`),`vc-btn--${l.value} vc-btn--${!0===e.round?"round":"rectangle"+(!0===o.value?" vc-btn--rounded":"")}`+(void 0!==t?" "+t:"")+(!0===r.value?" vc-btn--actionable vc-focusable vc-hoverable":!0===e.disable?" disabled":"")+(!0===e.fab?" vc-btn--fab":!0===e.fabMini?" vc-btn--fab-mini":"")+(!0===e.noCaps?" vc-btn--no-uppercase":"")+(!0===e.dense?" vc-btn--dense":"")+(!0===e.stretch?" no-border-radius self-stretch":"")+(!0===e.glossy?" glossy":"")})),style:n,innerClasses:a((()=>i.value+(!0===e.stack?" column":" row")+(!0===e.noWrap?" no-wrap text-no-wrap":"")+(!0===e.loading?" vc-btn__content--hidden":""))),attributes:c,isActionable:r}}const{passiveCapture:vs}=Do;let gs,fs,ys;const bs={...ms,percentage:{type:Number,default:0},darkPercentage:Boolean};var Cs=E({name:"VcBtn",props:bs,emits:["click","keydown","touchstart","mousedown","keyup"],setup(e,{slots:t,emit:i}){var r;const s=null==(r=o())?void 0:r.proxy,{classes:l,style:c,innerClasses:u,attributes:d,isActionable:p}=hs(e),m=n(),h=n();let v,f,y=null;const b=a((()=>void 0!==e.label&&null!==e.label&&""!==e.label)),C=a((()=>!1!==e.ripple&&{keyCodes:13,...!0===e.ripple?{}:e.ripple})),w=a((()=>{const t=Math.max(0,Math.min(100,e.percentage));return t>0?{transition:"transform 0.6s",transform:`translateX(${t-100}%)`}:{}})),_=a((()=>!0===e.loading?{onMousedown:L,onTouchstart:L,onClick:L,onKeydown:L,onKeyup:L}:!0===p.value?{onClick:S,onKeydown:E,onMousedown:M,onTouchstart:I}:{})),O=a((()=>[[$o,C.value,void 0,{center:e.round}]])),x=a((()=>({ref:m,class:"vc-btn vc-btn-item non-selectable no-outline "+l.value,style:c.value,...d.value,..._.value})));function S(t){var n;if(void 0!==t){if(!0===t.defaultPrevented)return;const i=document.activeElement;if("submit"===e.type&&i!==document.body&&!1===(null==(n=m.value)?void 0:n.contains(i))&&!1===(null==i?void 0:i.contains(m.value))){m.value.focus();const e=()=>{document.removeEventListener("keydown",Vo,!0),document.removeEventListener("keyup",e,vs),null!==m.value&&m.value.removeEventListener("blur",e,vs)};document.addEventListener("keydown",Vo,!0),document.addEventListener("keyup",e,vs),m.value.addEventListener("blur",e,vs)}}i("click",t,(()=>{}))}function E(e){var t,n,o;!0===Go(e,[13,32])&&(Vo(e),fs!==m.value&&(null!==fs&&j(),null==(t=m.value)||t.focus(),fs=m.value,null==(n=m.value)||n.classList.add("vc-btn--active"),document.addEventListener("keyup",D,!0),null==(o=m.value)||o.addEventListener("blur",D,vs))),i("keydown",e)}function I(e){gs!==m.value&&(null!==gs&&j(),gs=m.value,y=ir(e.target),null==y||y.addEventListener("touchcancel",D,vs),null==y||y.addEventListener("touchend",D,vs)),v=!0,clearTimeout(f),f=setTimeout((()=>{v=!1}),200),i("touchstart",e)}function M(e){var t;ys!==m.value&&(null!==ys&&j(),ys=m.value,null==(t=m.value)||t.classList.add("vc-btn--active"),document.addEventListener("mouseup",D,vs)),e.qSkipRipple=!0===v,i("mousedown",e)}function D(e){var t;if(void 0===e||"blur"!==e.type||document.activeElement!==m.value){if(void 0!==e&&"keyup"===e.type){if(fs===m.value&&!0===Go(e,[13,32])){const i=new MouseEvent("click",e);i.qKeyEvent=!0,!0===e.defaultPrevented&&Ro(i),!0===e.cancelBubble&&ko(i),null==(t=m.value)||t.dispatchEvent(i),Vo(e),e.qKeyEvent=!0}i("keyup",e)}j()}}function j(e){const t=h.value;!0===e||gs!==m.value&&ys!==m.value||null===t||t===document.activeElement||(t.setAttribute("tabindex","-1"),t.focus()),gs===m.value&&(null!==y&&(y.removeEventListener("touchcancel",D,vs),y.removeEventListener("touchend",D,vs)),gs=y=null),ys===m.value&&(document.removeEventListener("mouseup",D,vs),ys=null),fs===m.value&&(document.removeEventListener("keyup",D,!0),null!==m.value&&m.value.removeEventListener("blur",D,vs),fs=null),null!==m.value&&m.value.classList.remove("vc-btn--active")}function L(e){Vo(e),e.qSkipRipple=!0}return g((()=>{j(!0)})),Object.assign(s,{click:S}),()=>{let i=[];void 0!==e.icon&&i.push(P(Ra,{name:e.icon,left:!1===e.stack&&!0===b.value,role:"img","aria-hidden":"true"})),!0===b.value&&i.push(P("span",{class:"block"},[e.label])),i=La(t.default,i),void 0!==e.iconRight&&!1===e.round&&i.push(P(Ra,{name:e.iconRight,right:!1===e.stack&&!0===b.value,role:"img","aria-hidden":"true"}));const n=[P("span",{class:"vc-focus-helper",ref:h})];return!0===e.loading&&void 0!==e.percentage&&n.push(P("span",{class:"vc-btn__progress absolute-full overflow-hidden"},[P("span",{class:"vc-btn__progress-indicator fit block"+(!0===e.darkPercentage?" vc-btn__progress--dark":""),style:w.value})])),n.push(P("span",{class:"vc-btn__content text-center col items-center vc-anchor--skip "+u.value},i)),null!==e.loading&&n.push(P(T,{name:"vc-transition--fade"},(()=>!0===e.loading?[P("span",{key:"loading",class:"absolute-full flex flex-center"},void 0!==t.loading?t.loading():[P(ss)])]:null))),Aa("button",x.value,n,"ripple",!0!==e.disable&&!1!==e.ripple,(()=>O.value))}}});const ws={target:{type:[Boolean,String],default:!0},noParentEvent:Boolean,contextMenu:Boolean};function _s({showing:e,avoidEmit:t,configureAnchorEl:i}){const{props:r,proxy:a,emit:s}=o(),l=n(null);let c;function u(e){return null!==l.value&&(void 0===e||void 0===e.touches||e.touches.length<=1)}const d={};function p(){zo(d,"anchor")}function m(){if(!1===r.target||""===r.target)l.value=null;else if(!0===r.target)!function(e){for(l.value=e;l.value.classList.contains("vc-anchor--skip");)l.value=l.value.parentNode;i()}(null==a?void 0:a.$el.parentNode);else{let t=r.target;if("string"==typeof r.target)try{t=document.querySelector(r.target)}catch(e){t=void 0}null!=t?(l.value=t.$el||t,i()):l.value=null}}return void 0===i&&(Object.assign(d,{hide(e){a.hide(e)},toggle(e){a.toggle(e)},toggleKey(e){!0===Go(e,13)&&a.toggle(e)},contextClick(e){a.hide(e),x((()=>{a.show(e)})),Ro(e)},mobilePrevent:Ro,mobileTouch(e){var t;if(d.mobileCleanup(e),!0!==u(e))return;a.hide(e),null==(t=l.value)||t.classList.add("non-selectable");const i=ir(e.target);No(d,"anchor",[[i,"touchmove","mobileCleanup","passive"],[i,"touchend","mobileCleanup","passive"],[i,"touchcancel","mobileCleanup","passive"],[l.value,"contextmenu","mobilePrevent","notPassive"]]),c=setTimeout((()=>{a.show(e)}),300)},mobileCleanup(t){l.value.classList.remove("non-selectable"),clearTimeout(c),!0===e.value&&void 0!==t&&qo()}}),i=function(e=r.contextMenu){if(!0===r.noParentEvent||null===l.value)return;let t;t=!0===e?!0===Zo().isPhone?[[l.value,"touchstart","mobileTouch","passive"]]:[[l.value,"click","hide","passive"],[l.value,"contextmenu","contextClick","notPassive"]]:[[l.value,"click","toggle","passive"],[l.value,"keyup","toggleKey","passive"]],No(d,"anchor",t)}),b((()=>r.contextMenu),(e=>{null!==l.value&&(p(),i(e))})),b((()=>r.target),(()=>{null!==l.value&&p(),m()})),b((()=>r.noParentEvent),(e=>{null!==l.value&&(!0===e?p():i())})),O((()=>{m(),!0!==t&&!0===r.modelValue&&null===l.value&&s("update:modelValue",!1)})),g((()=>{clearTimeout(c),p()})),{anchorEl:l,canShow:u,anchorEvents:d}}const Os={modelValue:{type:Boolean,default:null}},xs=["update:modelValue","before-show","show","before-hide","hide"];function Ps({showing:e,canShow:t,hideOnRouteChange:i,handleShow:n,handleHide:r,processOnMount:a}){const s=o(),{props:l,emit:c,proxy:u}=s;let d;function p(e){if(!0===l.disable||void 0!==t&&!0!==t(e))return;const i=!0===Te(s,"onUpdate:modelValue");!0===i&&(c("update:modelValue",!0),d=e,x((()=>{d===e&&(d=void 0)}))),null!==l.modelValue&&!1!==i||m(e)}function m(t){!0!==(null==e?void 0:e.value)&&(e&&(e.value=!0),c("before-show",t),t&&!0===t.cancel||(void 0!==n?n(t):c("show",t)))}function h(e){if(!0===l.disable)return;const t=!0===Te(s,"onUpdate:modelValue");!0===t&&(c("update:modelValue",!1),d=e,x((()=>{d===e&&(d=void 0)}))),null!==l.modelValue&&!1!==t||v(e)}function v(t){!1!==(null==e?void 0:e.value)&&(e&&(e.value=!1),c("before-hide",t),void 0!==r?r(t):c("hide",t))}function g(t){if(!0===l.disable&&!0===t)!0===Te(s,"onUpdate:modelValue")&&c("update:modelValue",!1);else if(!0===t!==(null==e?void 0:e.value)){(!0===t?m:v)(d)}}b((()=>l.modelValue),g),void 0!==i&&!0===function(e){return void 0!==e.appContext.config.globalProperties.$router}(s)&&b((()=>u.$route),(()=>{!0===i.value&&!0===(null==e?void 0:e.value)&&h()})),!0===a&&O((()=>{g(l.modelValue)}));const f={show:p,hide:h,toggle:function(t){!0===(null==e?void 0:e.value)?h(t):p(t)}};return Object.assign(u,f),f}const Ss=[];let Es=document.body;const Ts=[];function Is(e,t,i,o){var r,a,s,l;let c=null;(null==(a=null==(r=e.props)?void 0:r.teleport)?void 0:a.to)&&(c=null==(l=null==(s=e.props)?void 0:s.teleport)?void 0:l.to);const u=!0===o&&function(e){for(e=e.parent;null!=e;){if("VcGlobalDialog"===e.type.name)return!0;if("VcDialog"===e.type.name||"VcMenu"===e.type.name)return!1;e=e.parent}return!1}(e),d=n(!1);function p(){var t,i;d.value=!1;const n=Ts.indexOf(e.proxy);var o;n>-1&&Ts.splice(n,1),null===c||(null==(i=null==(t=e.props)?void 0:t.teleport)?void 0:i.to)||(o=c,Ss.splice(Ss.indexOf(o),1),o.remove(),c=null)}return f(p),Object.assign(e.proxy,{__vcPortalInnerRef:t}),{showPortal:function(){!1===u&&null===c&&(c=function(e){const t=document.createElement("div");return void 0!==e&&(t.id=e),Es.appendChild(t),Ss.push(t),t}()),d.value=!0,Ts.push(e.proxy)},hidePortal:p,portalIsActive:d,renderPortal:()=>!0===u?i():!0===d.value?[P(I,{to:c},i())]:void 0}}const Ms={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};const Ds=[null,document,document.body,document.scrollingElement,document.documentElement];let js,Ls,As;function ks(e){const t=e.split(" ");return 2===t.length&&(!0===["top","center","bottom"].includes(t[0])&&!0===["left","middle","right","start","end"].includes(t[1]))}const Rs={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};function Vs(e,t){const i=e.split(" ");return{vertical:i[0],horizontal:Rs[`${i[1]}#${!0===t?"rtl":"ltr"}`]}}function Bs(e){if(!0===Zo().isIOS&&void 0!==window.visualViewport){const e=document.body.style,{offsetLeft:t,offsetTop:i}=window.visualViewport;t!==Ls&&(e.setProperty("--vc-pe-left",t+"px"),Ls=t),i!==As&&(e.setProperty("--vc-pe-top",i+"px"),As=i)}let t={};const{scrollLeft:i,scrollTop:n}=e.el;if(void 0===e.absoluteOffset)t=function(e,t){let{top:i,left:n,right:o,bottom:r,width:a,height:s}=e.getBoundingClientRect();return void 0!==t&&(i-=t[1],n-=t[0],r+=t[1],o+=t[0],a+=t[0],s+=t[1]),{top:i,left:n,right:o,bottom:r,width:a,height:s,middle:n+(o-n)/2,center:i+(r-i)/2}}(e.anchorEl,!0===e.cover?[0,0]:e.offset);else{const{top:i,left:n}=e.anchorEl.getBoundingClientRect(),o=i+e.absoluteOffset.top,r=n+e.absoluteOffset.left;t={top:o,left:r,width:1,height:1,right:r+1,center:o,middle:r,bottom:o+1}}let o={maxHeight:e.maxHeight,maxWidth:e.maxWidth,visibility:"visible"};!0!==e.fit&&!0!==e.cover||(o.minWidth=t.width+"px",!0===e.cover&&(o.minHeight=t.height+"px")),Object.assign(e.el.style,o);const r={top:0,center:(s=e.el).offsetHeight/2,bottom:s.offsetHeight,left:0,middle:s.offsetWidth/2,right:s.offsetWidth},a={top:t[e.anchorOrigin.vertical]-r[e.selfOrigin.vertical],left:t[e.anchorOrigin.horizontal]-r[e.selfOrigin.horizontal]};var s;!function(e,t,i,n,o){const r=i.bottom,a=i.right,s=function(){if(void 0!==js)return js;const e=document.createElement("p"),t=document.createElement("div");Io(e,{width:"100%",height:"200px"}),Io(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);const i=e.offsetWidth;t.style.overflow="scroll";let n=e.offsetWidth;return i===n&&(n=t.clientWidth),t.remove(),js=i-n,js}(),l=window.innerHeight-s,c=document.body.clientWidth;if(e.top<0||e.top+r>l)if("center"===o.vertical)e.top=t[n.vertical]>l/2?Math.max(0,l-r):0,e.maxHeight=Math.min(r,l);else if(t[n.vertical]>l/2){const i=Math.min(l,"center"===n.vertical?t.center:n.vertical===o.vertical?t.bottom:t.top);e.maxHeight=Math.min(r,i),e.top=Math.max(0,i-r)}else e.top=Math.max(0,"center"===n.vertical?t.center:n.vertical===o.vertical?t.top:t.bottom),e.maxHeight=Math.min(r,l-e.top);if(e.left<0||e.left+a>c)if(e.maxWidth=Math.min(a,c),"middle"===o.horizontal)e.left=t[n.horizontal]>c/2?Math.max(0,c-a):0;else if(t[n.horizontal]>c/2){const i=Math.min(c,"middle"===n.horizontal?t.middle:n.horizontal===o.horizontal?t.right:t.left);e.maxWidth=Math.min(a,i),e.left=Math.max(0,i-e.maxWidth)}else e.left=Math.max(0,"middle"===n.horizontal?t.middle:n.horizontal===o.horizontal?t.left:t.right),e.maxWidth=Math.min(a,c-e.left)}(a,t,r,e.anchorOrigin,e.selfOrigin),o={top:a.top+"px",left:a.left+"px"},void 0!==a.maxHeight&&(o.maxHeight=a.maxHeight+"px",t.height>a.maxHeight&&(o.minHeight=o.maxHeight)),void 0!==a.maxWidth&&(o.maxWidth=a.maxWidth+"px",t.width>a.maxWidth&&(o.minWidth=o.maxWidth)),Object.assign(e.el.style,o),e.el.scrollTop!==n&&(e.el.scrollTop=n),e.el.scrollLeft!==i&&(e.el.scrollLeft=i)}["left","middle","right"].forEach((e=>{Rs[`${e}#ltr`]=e,Rs[`${e}#rtl`]=e}));const Ns={...ws,...Os,...Ms,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{type:String,default:"jump-down"},transitionHide:{type:String,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:ks},self:{type:String,default:"top middle",validator:ks},offset:{type:Array,default:()=>[14,14],validator:function(e){return!e||2===e.length&&("number"==typeof e[0]&&"number"==typeof e[1])}},scrollTarget:String,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:{type:Boolean}};var zs=E({name:"VcTooltip",inheritAttrs:!1,props:Ns,emits:[...xs],setup(e,{slots:t,emit:i,attrs:r}){let s,l;const c=o(),u=n(null),d=n(!1),p=a((()=>Vs(e.anchor,!0))),m=a((()=>Vs(e.self,!0))),h=a((()=>!0!==e.persistent)),{registerTick:v,removeTick:f,prepareTick:y}=function(){let e;return g((()=>{e=void 0})),{registerTick(t){e=t},removeTick(){e=void 0},prepareTick(){if(void 0!==e){const t=e;x((()=>{e===t&&(e(),e=void 0)}))}}}}(),{registerTimeout:C,removeTimeout:w}=_o(),{transition:_,transitionStyle:O}=function(e,t){const i=n(t.value);return b(t,(e=>{x((()=>{i.value=e}))})),{transition:a((()=>"vc-transition--"+(!0===i.value?e.transitionHide:e.transitionShow))),transitionStyle:a((()=>`--vc-transition-duration: ${e.transitionDuration}ms`))}}(e,d),{localScrollTarget:S,changeScrollEvent:E,unconfigureScrollTarget:I}=function(e,t){const i=n(null);let o;function r(e,t){const i=(void 0!==t?"add":"remove")+"EventListener",n=void 0!==t?t:o;e!==window&&e[i]("scroll",n,Do.passive),window[i]("scroll",n,Do.passive),o=t}function a(){null!==i.value&&(r(i.value),i.value=null)}const s=b((()=>e.noParentEvent),(()=>{null!==i.value&&(a(),t())}));return g(s),{localScrollTarget:i,unconfigureScrollTarget:a,changeScrollEvent:r}}(e,z),{anchorEl:M,canShow:D,anchorEvents:j}=_s({showing:d,configureAnchorEl:function(){if(!0===e.noParentEvent||void 0===M.value)return;const t=!0===Zo().isPhone?[[M.value,"touchstart","delayShow","passive"]]:[[M.value,"mouseenter","delayShow","passive"],[M.value,"mouseleave","delayHide","passive"]];No(j,"anchor",t)},avoidEmit:void 0}),{show:L,hide:A}=Ps({showing:d,canShow:D,handleShow:function(t){f(),w(),k(),v((()=>{l=new MutationObserver((()=>N())),l.observe(u.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),N(),z()})),y(),void 0===s&&(s=b((()=>e.self+"|"+e.anchor),N));C((()=>{i("show",t)}),e.transitionDuration)},handleHide:function(t){f(),w(),B(),C((()=>{R(),i("hide",t)}),e.transitionDuration)},hideOnRouteChange:h,processOnMount:!0});Object.assign(j,{delayShow:function(t){if(!0===Zo().isPhone){qo(),document.body.classList.add("non-selectable");const e=ir(M.value),t=["touchmove","touchcancel","touchend","click"].map((t=>[e,t,"__delayHide","passiveCapture"]));No(j,"tooltipTemp",t)}C((()=>{L(t)}),e.delay)},delayHide:function(t){w(),!0===Zo().isPhone&&(zo(j,"tooltipTemp"),qo(),setTimeout((()=>{document.body.classList.remove("non-selectable")}),10));C((()=>{A(t)}),e.hideDelay)}});const{showPortal:k,hidePortal:R,renderPortal:V}=Is(c,u,(function(){return P(T,{name:_.value,appear:!0},F)}));function B(){void 0!==l&&(l.disconnect(),l=void 0),void 0!==s&&(s(),s=void 0),I(),zo(j,"tooltipTemp")}function N(){const t=u.value;void 0!==M.value&&t&&Bs({el:t,offset:e.offset,anchorEl:M.value,anchorOrigin:p.value,selfOrigin:m.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function z(){if(void 0!==M.value||void 0!==e.scrollTarget){S.value=function(e,t){let i=Mo(t);if(void 0===i){if(null==e)return window;i=e.closest(".scroll,.scroll-y,.overflow-auto")}return Ds.includes(i)?window:i}(M.value,e.scrollTarget);const t=!0===e.noParentEvent?N:A;E(S.value,t)}}function F(){return!0===d.value?P("div",{...r,ref:u,class:["vc-tooltip vc-tooltip--style vc-position-engine no-pointer-events",r.class],style:O.value,role:"complementary"},ja(t.default)):null}return g(B),Object.assign(null==c?void 0:c.proxy,{updatePosition:N}),V}});function Fs(e,t,i){return i<=t?t:Math.min(i,Math.max(t,e))}const Gs=XMLHttpRequest,Hs=Gs.prototype.open,Us=["top","right","bottom","left"];let Ws=[],$s=0;const Zs={position:{type:String,default:"top",validator:e=>Us.includes(e)},size:{type:String,default:"2px"},color:String,skipHijack:Boolean,reverse:Boolean,positioning:{type:String,default:"absolute",validator:e=>["absolute","fixed"].includes(e)},hijackFilter:Function};var qs=E({name:"VcAjaxBar",props:Zs,emits:["start","stop"],setup(e,{emit:t}){const{proxy:i}=o(),r=n(0),s=n(!1),l=n(!0);let c,u,d=0;const p=a((()=>`vc-loading-bar vc-loading-bar--${e.position}`+(void 0!==e.color?` bg-${e.color}`:"")+(!0===l.value?"":" no-transition"))),m=a((()=>"top"===e.position||"bottom"===e.position)),h=a((()=>!0===m.value?"height":"width")),v=a((()=>{const t=s.value,i=function({p:e,pos:t,active:i,horiz:n,reverse:o,dir:r}){let a=1,s=1;return!0===n?(!0===o&&(a=-1),"bottom"===t&&(s=-1),{transform:`translate3d(${a*(e-100)}%,${i?0:-200*s}%,0)`}):(!0===o&&(s=-1),"right"===t&&(a=-1),{transform:`translate3d(${i?0:r*a*-200}%,${s*(e-100)}%,0)`})}({p:r.value,pos:e.position,active:t,horiz:m.value,reverse:e.reverse,dir:1});return i[h.value]=e.size,i.opacity=t?1:0,i.position="absolute"===e.positioning?"absolute":"fixed",i.backgroundColor=e.color,i})),f=a((()=>!0===s.value?{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":r.value}:{"aria-hidden":"true"}));function y(e=300){const i=u;return u=Math.max(0,e)||0,d++,d>1?(0===i&&e>0?w():i>0&&e<=0&&clearTimeout(c),d):(clearTimeout(c),t("start"),r.value=0,c=setTimeout((()=>{l.value=!0,e>0&&w()}),!0===s.value?500:1),!0!==s.value&&(s.value=!0,l.value=!1),d)}function b(e){return d>0&&(r.value=function(e,t){return"number"!=typeof t&&(t=e<25?3*Math.random()+3:e<65?3*Math.random():e<85?2*Math.random():e<99?.6:0),Fs(e+t,0,100)}(r.value,e)),d}function C(){if(d=Math.max(0,d-1),d>0)return d;clearTimeout(c),t("stop");const e=()=>{l.value=!0,r.value=100,c=setTimeout((()=>{s.value=!1}),1e3)};0===r.value?c=setTimeout(e,1):e()}function w(){r.value<100&&(c=setTimeout((()=>{b(),w()}),u))}let _;return O((()=>{var t;!0!==e.skipHijack&&(_=!0,t={start:y,stop:C,hijackFilter:a((()=>e.hijackFilter||null))},$s++,Ws.push(t),$s>1||(Gs.prototype.open=function(e,t){const i=[];this.addEventListener("loadstart",(()=>{Ws.forEach((e=>{null!==e.hijackFilter.value&&!0!==e.hijackFilter.value(t)||(e.start(),i.push(e.stop))}))}),{once:!0}),this.addEventListener("loadend",(()=>{i.forEach((e=>{e()}))}),{once:!0}),Hs.apply(this,arguments)}))})),g((()=>{clearTimeout(c),!0===_&&function(e){Ws=Ws.filter((t=>t.start!==e)),$s=Math.max(0,$s-1),0===$s&&(Gs.prototype.open=Hs)}(y)})),Object.assign(i,{start:y,stop:C,increment:b}),()=>P("div",{class:p.value,style:v.value,...f.value})}});const Ys={dark:{type:Boolean,default:null}};function Js(e){return a((()=>e.dark))}const Xs=["text","rect","circle","VcBtn","VcBadge","VcChip","VcToolbar","VcCheckbox","VcRadio","VcToggle","VcSlider","VcRange","VcInput","VcAvatar"],Qs=["wave","pulse","pulse-x","pulse-y","fade","blink","none"],Ks={...Ys,tag:{type:String,default:"div"},type:{type:String,validator:e=>Xs.includes(e),default:"rect"},animation:{type:String,validator:e=>Qs.includes(e),default:"wave"},square:Boolean,bordered:Boolean,size:String,width:String,height:String};var el=E({name:"VcSkeleton",props:Ks,setup(e,{slots:t}){const i=Js(e),n=a((()=>void 0!==e.size?{width:e.size,height:e.size}:{width:e.width,height:e.height})),o=a((()=>`vc-skeleton vc-skeleton--${!0===i.value?"dark":"light"} vc-skeleton--type-${e.type}`+("none"!==e.animation?` vc-skeleton--anim vc-skeleton--anim-${e.animation}`:"")+(!0===e.square?" vc-skeleton--square":"")+(!0===e.bordered?" vc-skeleton--bordered":"")));return()=>P(e.tag,{class:o.value,style:n.value},ja(t.default))}});const tl=["top","right","bottom","left"],il={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,size:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>tl.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function nl(e,t){return{formClass:a((()=>"vc-fab--form-"+(!0===e.square?"square":"rounded"))),stacked:a((()=>!1===e.externalLabel&&["top","bottom"].includes(e.labelPosition))),labelProps:a((()=>{if(!0===e.externalLabel){const i=null===e.hideLabel?!1===t.value:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`vc-fab__label vc-tooltip--style vc-fab__label--external vc-fab__label--external-${e.labelPosition}`+(!0===i?" vc-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`vc-fab__label vc-fab__label--internal vc-fab__label--internal-${e.labelPosition}`+(!0===e.hideLabel?" vc-fab__label--internal-hidden":"")],style:e.labelStyle}}}))}}const ol=["up","right","down","left"],rl=["left","center","right"],al={...il,...Os,icon:String,activeIcon:String,hideActionOnClick:{type:Boolean,default:!0},hideIcon:Boolean,hideLabel:{type:Boolean,default:!0},direction:{type:String,default:"right",validator:e=>ol.includes(e)},persistent:Boolean,stacked:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>rl.includes(e)}};var sl=E({name:"VcFab",props:al,emits:xs,setup(e,{slots:t}){const i=n(null),o=n(!0===e.modelValue),{formClass:r,labelProps:l}=nl(e,o),c=a((()=>!0!==e.persistent)),{hide:u,toggle:d}=Ps({showing:o,hideOnRouteChange:c}),p=a((()=>({opened:o.value}))),m=a((()=>`vc-fab z-fab row inline justify-center vc-fab--align-${e.verticalActionsAlign} ${r.value}`+(!0===o.value?" vc-fab--opened":" vc-fab--closed"))),h=a((()=>`vc-fab__actions flex no-wrap inline vc-fab__actions--${e.direction} vc-fab__actions--${!0===o.value?"opened":"closed"}`)),v=a((()=>"vc-fab__icon-holder  vc-fab__icon-holder--"+(!0===o.value?"opened":"closed")));function g(i,n){const o=t[i],r=`vc-fab__${i} absolute-full`;return void 0===o?P(Ra,{class:r,name:e[n]}):P("div",{class:r},o(p.value))}function f(){const i=[];return!0!==e.hideIcon&&i.push(P("div",{class:v.value},[g("icon","icon"),g("active-icon","activeIcon")])),""===e.label&&void 0===t.label||i[l.value.action](P("div",l.value.data,void 0!==t.label?t.label(p.value):[e.label])),La(t.tooltip,i)}return s(ae,{showing:o,onChildClick(t){e.hideActionOnClick&&u(t),null!==i.value&&i.value.$el.focus()}}),()=>P("div",{class:m.value},[P(Cs,{ref:i,class:r.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,flat:e.flat,size:e.size,"aria-expanded":!0===o.value?"true":"false","aria-haspopup":"true",onClick:d},f),P("div",{class:h.value},ja(t.default))])}});const ll={start:"self-end",center:"self-center",end:"self-start"},cl=Object.keys(ll),ul={...il,icon:{type:String,default:""},stacked:Boolean,anchor:{type:String,validator:e=>cl.includes(e)},to:[String,Object],replace:Boolean};var dl=E({name:"VcFabAction",props:ul,emits:["click"],setup(e,{slots:t,emit:i}){const n=r(ae),{formClass:s,labelProps:l}=nl(e,null==n?void 0:n.showing),c=a((()=>{let t;return e.anchor&&(t=ll[e.anchor]),s.value+(void 0!==t?` ${t}`:"")})),u=a((()=>{var t;return!0===e.disable||!0!==(null==(t=null==n?void 0:n.showing)?void 0:t.value)}));function d(e){var t;null==(t=null==n?void 0:n.onChildClick)||t.call(n,e),i("click",e)}function p(){const i=[];return""!==e.icon&&i.push(P(Ra,{name:e.icon})),""!==e.label&&i[l.value.action](P("div",l.value.data,[e.label])),La(t.default,i)}const m=o();return Object.assign(null==m?void 0:m.proxy,{click:d}),()=>P(Cs,{class:c.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:u.value,size:e.size,onClick:d},p)}});const pl={name:String};function ml(e){return a((()=>({type:"hidden",name:e.name,value:e.modelValue})))}const hl="vc-slider__marker-labels",vl=e=>({value:e}),gl=({marker:e})=>P("div",{key:e.value,style:e.style,class:e.classes},e.label),fl=[34,37,40,33,39,38],yl={...Ys,...pl,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}};function bl({updateValue:e,updatePosition:t,getDragging:i,formAttrs:r}){const{props:s,emit:l,slots:c,proxy:u}=o(),d=Js(s),p=function(e={}){return(t,i,n)=>{t[i](P("input",{class:"hidden"+(n||""),...e.value}))}}(r),m=n(!1),v=n(!1),f=n(!1),y=n(!1),b=a((()=>!0===s.vertical?"--v":"--h")),C=a((()=>"-"+(!0===s.switchLabelSide?"switched":"standard"))),w=a((()=>!0===s.reverse)),_=a((()=>!0===isNaN(s.innerMin)||s.innerMin<s.min?s.min:s.innerMin)),O=a((()=>!0===isNaN(s.innerMax)||s.innerMax>s.max?s.max:s.innerMax)),x=a((()=>!0!==s.disable&&!0!==s.readonly&&_.value<O.value)),S=a((()=>(String(s.step).trim().split(".")[1]||"").length)),E=a((()=>0===s.step?1:s.step)),T=a((()=>!0===x.value?s.tabindex||0:-1)),I=a((()=>s.max-s.min)),M=a((()=>O.value-_.value)),D=a((()=>Q(_.value))),j=a((()=>Q(O.value))),L=a((()=>!0===s.vertical?!0===w.value?"bottom":"top":!0===w.value?"right":"left")),A=a((()=>!0===s.vertical?"height":"width")),k=a((()=>!0===s.vertical?"width":"height")),R=a((()=>!0===s.vertical?"vertical":"horizontal")),V=a((()=>{const e={role:"slider","aria-valuemin":_.value,"aria-valuemax":O.value,"aria-orientation":R.value,"data-step":s.step};return!0===s.disable?e["aria-disabled"]="true":!0===s.readonly&&(e["aria-readonly"]="true"),e})),B=a((()=>`vc-slider vc-slider${b.value} vc-slider--${!0===m.value?"":"in"}active inline no-wrap `+(!0===s.vertical?"row":"column")+(!0===s.disable?" disabled":" vc-slider--enabled"+(!0===x.value?" vc-slider--editable":""))+("both"===f.value?" vc-slider--focus":"")+(s.label||!0===s.labelAlways?" vc-slider--label":"")+(!0===s.labelAlways?" vc-slider--label-always":"")+(!0===d.value?" vc-slider--dark":"")+(!0===s.dense?" vc-slider--dense vc-slider--dense"+b.value:"")));function N(e){const t="vc-slider__"+e;return`${t} ${t}${b.value} ${t}${b.value}${C.value}`}function z(e){const t="vc-slider__"+e;return`${t} ${t}${b.value}`}const F=a((()=>{const e=s.selectionColor||s.color;return"vc-slider__selection absolute"+(void 0!==e?` text-${e}`:"")})),G=a((()=>z("markers")+" absolute overflow-hidden")),H=a((()=>z("track-container"))),U=a((()=>N("pin"))),W=a((()=>N("label"))),$=a((()=>N("text-container"))),Z=a((()=>N("marker-labels-container")+(void 0!==s.markerLabelsClass?` ${s.markerLabelsClass}`:""))),q=a((()=>"vc-slider__track relative-position no-outline"+(void 0!==s.trackColor?` bg-${s.trackColor}`:""))),Y=a((()=>{const e={[k.value]:s.trackSize};return void 0!==s.trackImg&&(e.backgroundImage=`url(${s.trackImg}) !important`),e})),J=a((()=>"vc-slider__inner absolute"+(void 0!==s.innerTrackColor?` bg-${s.innerTrackColor}`:""))),X=a((()=>{const e={[L.value]:100*D.value+"%",[A.value]:100*(j.value-D.value)+"%"};return void 0!==s.innerTrackImg&&(e.backgroundImage=`url(${s.innerTrackImg}) !important`),e}));function Q(e){return 0===I.value?0:(e-s.min)/I.value}const K=a((()=>{return!0===("number"==typeof(e=s.markers)&&isFinite(e))?s.markers:E.value;var e})),ee=a((()=>{const e=[],t=K.value,i=s.max;let n=s.min;do{e.push(n),n+=t}while(n<i);return e.push(i),e})),te=a((()=>{const e=` ${hl}${b.value}-`;return hl+`${e}${!0===s.switchMarkerLabelsSide?"switched":"standard"}${e}${!0===w.value?"rtl":"ltr"}`})),ie=a((()=>!1===s.markerLabels?null:function(e){if(!1===e)return null;if(!0===e)return ee.value.map(vl);if("function"==typeof e)return ee.value.map((t=>{const i=e(t);return!0===h(i)?{...i,value:t}:{value:t,label:i}}));const t=({value:e})=>e>=s.min&&e<=s.max;if(!0===Array.isArray(e))return e.map((e=>!0===h(e)?e:{value:e})).filter(t);return Object.keys(e).map((t=>{const i=e[t],n=Number(t);return!0===h(i)?{...i,value:n}:{value:n,label:i}})).filter(t)}(s.markerLabels).map(((e,t)=>({index:t,value:e.value,label:e.label||e.value,classes:te.value+(void 0!==e.classes?" "+e.classes:""),style:{...re(e.value),...e.style||{}}}))))),ne=a((()=>({markerList:ie.value,markerMap:ae.value,classes:te.value,getStyle:re}))),oe=a((()=>{if(0!==M.value){const e=100*K.value/M.value;return{...X.value,backgroundSize:!0===s.vertical?`2px ${e}%`:`${e}% 2px`}}return null}));function re(e){return{[L.value]:100*(e-s.min)/I.value+"%"}}const ae=a((()=>{if(!1===s.markerLabels)return null;const e={};return ie.value.forEach((t=>{e[t.value]=t})),e}));const se=a((()=>[[ar,le,void 0,{[R.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]));function le(n){!0===n.isFinal?(void 0!==y.value&&(t(n.evt),!0===n.touch&&e(!0),y.value=void 0,l("pan","end")),m.value=!1,f.value=!1):!0===n.isFirst?(y.value=i(n.evt),t(n.evt),e(),m.value=!0,l("pan","start")):(t(n.evt),e())}function ce(){f.value=!1}function ue(){v.value=!1,m.value=!1,e(!0),ce(),document.removeEventListener("mouseup",ue,!0)}return g((()=>{document.removeEventListener("mouseup",ue,!0)})),{state:{active:m,focus:f,preventFocus:v,dragging:y,editable:x,classes:B,tabindex:T,attributes:V,step:E,decimals:S,trackLen:I,innerMin:_,innerMinRatio:D,innerMax:O,innerMaxRatio:j,positionProp:L,sizeProp:A,isReversed:w},methods:{onActivate:function(n){t(n,i(n)),e(),v.value=!0,m.value=!0,document.addEventListener("mouseup",ue,!0)},onMobileClick:function(n){t(n,i(n)),e(!0)},onBlur:ce,onKeyup:function(t){fl.includes(t.keyCode)&&e(!0)},getContent:function(e,t,i,n){const o=[];"transparent"!==s.innerTrackColor&&o.push(P("div",{key:"inner",class:J.value,style:X.value})),"transparent"!==s.selectionColor&&o.push(P("div",{key:"selection",class:F.value,style:e.value})),!1!==s.markers&&o.push(P("div",{key:"marker",class:G.value,style:oe.value})),n(o);const r=[Aa("div",{key:"trackC",class:H.value,tabindex:t.value,...i.value},[P("div",{class:q.value,style:Y.value},o)],"slide",x.value,(()=>se.value))];if(!1!==s.markerLabels){r[!0===s.switchMarkerLabelsSide?"unshift":"push"](P("div",{key:"markerL",class:Z.value},function(){if(void 0!==c["marker-label-group"])return c["marker-label-group"](ne.value);const e=c["marker-label"]||gl;return ie.value.map((t=>e({marker:t,...ne.value})))}()))}return r},getThumbRenderFn:function(e){const t=a((()=>!1!==v.value||f.value!==e.focusValue&&"both"!==f.value?"":" vc-slider--focus")),i=a((()=>`vc-slider__thumb vc-slider__thumb${b.value} vc-slider__thumb${b.value}-${!0===w.value?"rtl":"ltr"} absolute non-selectable`+t.value+(void 0!==e.thumbColor.value?` text-${e.thumbColor.value}`:""))),n=a((()=>({width:s.thumbSize,height:s.thumbSize,[L.value]:100*e.ratio.value+"%",zIndex:f.value===e.focusValue?2:void 0}))),o=a((()=>void 0!==e.labelColor.value?` text-${e.labelColor.value}`:"")),r=a((()=>function(e){if(!0===s.vertical)return null;const t=e;return{transform:`translateX(calc(${2*t-1} * ${s.thumbSize} / 2 + ${50-100*t}%))`}}(e.ratio.value))),l=a((()=>"vc-slider__text"+(void 0!==e.labelTextColor.value?` text-${e.labelTextColor.value}`:"")));return()=>{const t=[P("svg",{class:"vc-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[P("path",{d:s.thumbPath})]),P("div",{class:"vc-slider__focus-ring fit"})];return!0!==s.label&&!0!==s.labelAlways||(t.push(P("div",{class:U.value+" absolute fit no-pointer-events"+o.value},[P("div",{class:W.value,style:{minWidth:s.thumbSize}},[P("div",{class:$.value,style:r.value},[P("span",{class:l.value},e.label.value)])])])),void 0!==s.name&&!0!==s.disable&&p(t,"push")),P("div",{class:i.value,style:n.value,...e.getNodeData()},t)}},convertRatioToModel:function(e){const{min:t,max:i,step:n}=s;let o=t+e*(i-t);if(n>0){const e=(o-t)%n;o+=(Math.abs(e)>=n/2?(e<0?-1:1)*n:0)-e}return S.value>0&&(o=parseFloat(o.toFixed(S.value))),Fs(o,_.value,O.value)},convertModelToRatio:Q,getDraggingRatio:function(e,t){const i=Ao(e),n=!0===s.vertical?Fs((i.top-t.top)/t.height,0,1):Fs((i.left-t.left)/t.width,0,1);return Fs(!0===w.value?1-n:n,D.value,j.value)}}}}const Cl=()=>({}),wl={...yl,modelValue:{required:!0,default:null,validator:e=>"number"==typeof e||null===e},labelValue:[String,Number]};var _l=E({name:"VcSlider",props:wl,emits:["pan","update:modelValue","change"],setup(e,{emit:t}){const{state:i,methods:o}=bl({updateValue:v,updatePosition:function(t,n=i.dragging.value){const r=o.getDraggingRatio(t,n);l.value=o.convertRatioToModel(r),s.value=!0!==e.snap||0===e.step?r:o.convertModelToRatio(l.value)},getDragging:function(){return r.value.getBoundingClientRect()},formAttrs:ml(e)}),r=n(null),s=n(0),l=n(0);function c(){l.value=null===e.modelValue?i.innerMin.value:Fs(e.modelValue,i.innerMin.value,i.innerMax.value)}b((()=>`${e.modelValue}|${i.innerMin.value}|${i.innerMax.value}`),c),c();const u=a((()=>o.convertModelToRatio(l.value))),d=a((()=>!0===i.active.value?s.value:u.value)),p=a((()=>{const t={[i.positionProp.value]:100*i.innerMinRatio.value+"%",[i.sizeProp.value]:100*(d.value-i.innerMinRatio.value)+"%"};return void 0!==e.selectionImg&&(t.backgroundImage=`url(${e.selectionImg}) !important`),t})),m=o.getThumbRenderFn({focusValue:!0,getNodeData:Cl,ratio:d,label:a((()=>void 0!==e.labelValue?e.labelValue:l.value)),thumbColor:a((()=>e.thumbColor||e.color)),labelColor:a((()=>e.labelColor)),labelTextColor:a((()=>e.labelTextColor))}),h=a((()=>!0!==i.editable.value?{}:!0===Zo().isPhone?{onClick:o.onMobileClick}:{onMousedown:o.onActivate,onFocus:g,onBlur:o.onBlur,onKeydown:f,onKeyup:o.onKeyup}));function v(i){l.value!==e.modelValue&&t("update:modelValue",l.value),!0===i&&t("change",l.value)}function g(){i.focus.value=!0}function f(t){if(!fl.includes(t.keyCode))return;Vo(t);const n=([34,33].includes(t.keyCode)?10:1)*i.step.value,o=([34,37,40].includes(t.keyCode)?-1:1)*(!0===i.isReversed.value?-1:1)*(!0===e.vertical?-1:1)*n;l.value=Fs(parseFloat((l.value+o).toFixed(i.decimals.value)),i.innerMin.value,i.innerMax.value),v()}return()=>{const t=o.getContent(p,i.tabindex,h,(e=>{e.push(m())}));return P("div",{ref:r,class:i.classes.value+(null===e.modelValue?" vc-slider--no-value":""),...i.attributes.value,"aria-valuenow":e.modelValue},t)}}});[Cs,Ra,za,Ga,Ua,$a,qa,Ja,Qa,es,is,os,as,ss,zs,qs,el,sl,dl,_l].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Ol=Cs,xl=Ra,Pl=za,Sl=Ga,El=Ua,Tl=$a,Il=qa,Ml=Ja,Dl=Qa,jl=es,Ll=is,Al=os,kl=as,Rl=ss,Vl=zs,Bl=qs,Nl=el,zl=sl,Fl=dl,Gl=_l,Hl={beforeLoad:e=>!0,ready:e=>!0,unready:e=>!0,destroyed:e=>!0},Ul={mousedown:e=>!0,mouseup:e=>!0,click:e=>!0,clickout:e=>!0,dblclick:e=>!0,mousemove:e=>!0,mouseover:e=>!0,mouseout:e=>!0},Wl={...Hl,definitionChanged:e=>!0},$l={...Hl,errorEvent:e=>!0,readyPromise:(e,t,i)=>!0},Zl={...Hl,...Ul,readyPromise:(e,t,i)=>!0,"update:geometryInstances":e=>!0},ql={...Hl,...Ul},Yl={...Hl,...Ul,definitionChanged:e=>!0,clusterEvent:(e,t)=>!0,collectionChanged:(e,t,i,n)=>!0,changedEvent:e=>!0,errorEvent:(e,t)=>!0,loadingEvent:(e,t)=>!0,refreshEvent:(e,t)=>!0,unsupportedNodeEvent:(e,t,i,n,o,r,a)=>!0},Jl={...Hl,activeEvt:(e,t)=>!0,drawEvt:(e,t)=>!0,editorEvt:(e,t)=>!0,mouseEvt:(e,t)=>!0};var Xl=E({name:"VcViewer",props:xa,emits:{...Hl,cesiumReady:e=>!0,viewerWidgetResized:e=>!0,selectedEntityChanged:e=>!0,trackedEntityChanged:e=>!0,layerAdded:(e,t)=>!0,layerMoved:(e,t,i)=>!0,layerRemoved:(e,t)=>!0,layerShownOrHidden:(e,t,i)=>!0,dataSourceAdded:(e,t)=>!0,dataSourceMoved:(e,t,i)=>!0,dataSourceRemoved:(e,t)=>!0,collectionChanged:(e,t,i,n)=>!0,morphComplete:(e,t,i,n)=>!0,morphStart:(e,t,i,n)=>!0,postRender:(e,t)=>!0,preRender:(e,t)=>!0,postUpdate:(e,t)=>!0,preUpdate:(e,t)=>!0,renderError:(e,t)=>!0,terrainProviderChanged:e=>!0,changed:e=>!0,moveEnd:()=>!0,moveStart:()=>!0,onStop:e=>!0,onTick:e=>!0,errorEvent:e=>!0,cameraClicked:e=>!0,closeClicked:e=>!0,leftClick:e=>!0,leftDoubleClick:e=>!0,leftDown:e=>!0,leftUp:e=>!0,middleClick:e=>!0,middleDown:e=>!0,middleUp:e=>!0,mouseMove:e=>!0,pinchStart:e=>!0,pinchMove:e=>!0,pinchEnd:()=>!0,rightClick:e=>!0,rightDown:e=>!0,rightUp:e=>!0,wheel:e=>!0,imageryLayersUpdatedEvent:()=>!0,tileLoadProgressEvent:e=>!0,touchEnd:e=>!0,"update:camera":e=>!0},setup(e,t){const n=o();n.cesiumEvents=["selectedEntityChanged","trackedEntityChanged"],n.cesiumMembersEvents=Sa;const r=Pa(e,t,n),l=a((()=>e.containerId||t.attrs.id||"cesiumContainer"));s(re,r.getServices()),n.appContext.config.globalProperties.$VueCesium=n.appContext.config.globalProperties.$VueCesium||{},n.appContext.config.globalProperties.$VueCesium[l.value]=r.getServices(),Object.assign(n.proxy,{creatingPromise:r.creatingPromise,load:r.load,unload:r.unload,reload:r.reload,cesiumObject:n.cesiumObject,getCesiumObject:()=>n.cesiumObject});const c=e=>{t.emit("touchEnd",e)};return()=>{var o;const a=[];return i(e.skeleton)&&!r.isReady.value?a.push(P(Nl,{...e.skeleton,style:{background:e.skeleton.color,width:"100%",height:"100%"}})):a.push(M("v-if")),a.push(M("vc-viewer"),S(P("div",{ref:r.viewerRef,class:ue((null==(o=n.proxy)?void 0:o.$options.name)||""),id:l.value,style:t.attrs.style||{width:"100%",height:"100%"}},ja(t.slots.default)),[[Yo,c,e.touchHoldArg]])),a}}});Xl.install=(e,t)=>{e.component(Xl.name,Xl)};const Ql=Xl,Kl=Ql,ec={position:{type:String,default:"top-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>2===e.length}};function tc(e,t){const i=a((()=>{const t=e.position;return{top:t.indexOf("top")>-1,right:t.indexOf("right")>-1,bottom:t.indexOf("bottom")>-1,left:t.indexOf("left")>-1,vertical:"top"===t||"bottom"===t,horizontal:"left"===t||"right"===t}})),o=n(0),r=n(0),s=n(0),l=n(0),c=a((()=>{let t=0,n=0;const a=i.value;!0===a.top&&0!==o.value?n=`${o.value}px`:!0===a.bottom&&0!==l.value&&(n=-l.value+"px"),!0===a.left&&0!==s.value?t=1*s.value+"px":!0===a.right&&0!==r.value&&(t=-1*r.value+"px");const c={transform:`translate(${t}, ${n})`};return e.offset&&(c.margin=`${e.offset[1]}px ${e.offset[0]}px`),!0===a.vertical?(0!==s.value&&(c.right=`${s.value}px`),0!==r.value&&(c.left=`${r.value}px`)):!0===a.horizontal&&(0!==o.value&&(c.top=`${o.value}px`),0!==l.value&&(c.bottom=`${l.value}px`)),void 0===e.teleportToViewer||e.teleportToViewer?c:{}})),u=a((()=>void 0===e.teleportToViewer||e.teleportToViewer?`absolute absolute-${e.position}`:"relative-position"));return{attach:i,style:c,classes:u}}const ic={enableCompassOuterRing:{type:Boolean,default:!0},duration:{type:Number,default:1.5},...ec,outerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-outer",size:"96px",color:"#3f4854",background:"transparent",tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}})},innerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-inner",size:"24px",color:"#3f4854",background:"#fff",tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}})},markerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-rotation-marker",size:"96px",color:"#1976D2"})},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}},nc=he(ic);class oc{static createTween(e,t){const{Cartesian2:i,Cartesian3:n,defaultValue:o,defined:r,DeveloperError:a,EasingFunction:s,Math:l,SceneMode:c}=Cesium;let u=(t=o(t,{})).destination;if(!r(e))throw new a("scene is required.");if(!r(u))throw new a("destination is required.");const d=e.mode;if(d===c.MORPHING)return fc();const p=o(t.convert,!0),m=e.mapProjection,h=m.ellipsoid,v=t.maximumHeight,g=t.flyOverLongitude,f=t.flyOverLongitudeWeight,y=t.pitchAdjustHeight;let b=t.easingFunction;p&&d!==c.SCENE3D&&(h.cartesianToCartographic(u,vc),u=m.project(vc,gc));const C=e.camera,w=t.endTransform;r(w)&&C._setTransform(w);let _=t.duration;r(_)||(_=Math.ceil(n.distance(C.position,u)/1e6)+2,_=Math.min(_,3));const O=o(t.heading,0),x=o(t.pitch,-l.PI_OVER_TWO),P=o(t.roll,0),S=e.screenSpaceCameraController;S.enableInputs=!1;const E=yc(S,t.complete),T=yc(S,t.cancel),I=C.frustum;let M=e.mode===c.SCENE2D;if(M=M&&i.equalsEpsilon(C.position,u,l.EPSILON6),M=M&&l.equalsEpsilon(Math.max(I.right-I.left,I.top-I.bottom),u.z,l.EPSILON6),M=M||e.mode!==c.SCENE2D&&n.equalsEpsilon(u,C.position,l.EPSILON10),M=M&&l.equalsEpsilon(l.negativePiToPi(O),l.negativePiToPi(C.heading),l.EPSILON10)&&l.equalsEpsilon(l.negativePiToPi(x),l.negativePiToPi(C.pitch),l.EPSILON10)&&l.equalsEpsilon(l.negativePiToPi(P),l.negativePiToPi(C.roll),l.EPSILON10),M)return fc(E,T);const D=new Array(4);if(D[c.SCENE2D]=hc,D[c.SCENE3D]=mc,D[c.COLUMBUS_VIEW]=uc,_<=0){return fc((function(){D[d](e,1,u,O,x,P,v,g,f,y)({time:1}),"function"==typeof E&&E()}),T)}const j=D[d](e,_,u,O,x,P,v,g,f,y);if(!r(b)){const e=C.positionCartographic.height;b=e>(d===c.SCENE3D?h.cartesianToCartographic(u).height:u.z)&&e>11500?s.CUBIC_OUT:s.QUINTIC_IN_OUT}return{duration:_,easingFunction:b,startObject:{time:0},stopObject:{time:_},update:j,complete:E,cancel:T}}}const rc={},ac={};function sc(e,t,i,n,o){const{Cartesian3:r,defined:a,Math:s}=Cesium;let l=o;const c=Math.max(i,n);if(!a(l)){const i=e.position,n=t,o=e.up,a=e.right,s=e.frustum,c=r.subtract(i,n,rc),u=r.magnitude(r.multiplyByScalar(o,r.dot(c,o),ac)),d=r.magnitude(r.multiplyByScalar(a,r.dot(c,a),ac));l=Math.min(.2*function(e,t,i){const{PerspectiveFrustum:n,PerspectiveOffCenterFrustum:o}=Cesium;let r,a,s;if(e instanceof n){const n=Math.tan(.5*e.fovy);return r=e.near,a=e.near*n,s=e.aspectRatio*a,Math.max(t*r/s,i*r/a)}return e instanceof o?(r=e.near,a=e.top,s=e.right,Math.max(t*r/s,i*r/a)):Math.max(t,i)}(s,u,d),1e9)}if(c<l){const e=8,t=1e6,o=-Math.pow((l-i)*t,1/e),r=Math.pow((l-n)*t,1/e);return function(i){const n=i*(r-o)+o;return-Math.pow(n,e)/t+l}}return function(e){return s.lerp(i,n,e)}}function lc(e,t){const{Math:i}=Cesium;return i.equalsEpsilon(e,i.TWO_PI,i.EPSILON11)&&(e=0),t>e+Math.PI?e+=i.TWO_PI:t<e-Math.PI&&(e-=i.TWO_PI),e}const cc={};function uc(e,t,i,n,o,r,a){const{Cartesian2:s,Cartesian3:l,Math:c}=Cesium,u=e.camera,d=l.clone(u.position,cc),p=u.pitch,m=lc(u.heading,n),h=lc(u.roll,r),v=sc(u,i,d.z,i.z,a);return function(e){const a=e.time/t;u.setView({orientation:{heading:c.lerp(m,n,a),pitch:c.lerp(p,o,a),roll:c.lerp(h,r,a)}}),s.lerp(d,i,a,u.position),u.position.z=v(a)}}const dc={},pc={};function mc(e,t,i,n,o,r,a,s,l,c){const{Cartesian3:u,Cartographic:d,defined:p,Math:m}=Cesium,h=e.camera,v=e.mapProjection.ellipsoid,g=d.clone(h.positionCartographic,dc),f=h.pitch,y=lc(h.heading,n),b=lc(h.roll,r),C=v.cartesianToCartographic(i,pc);g.longitude=m.zeroToTwoPi(g.longitude),C.longitude=m.zeroToTwoPi(C.longitude);let w=!1;if(p(s)){const e=m.zeroToTwoPi(s),t=Math.min(g.longitude,C.longitude),i=Math.max(g.longitude,C.longitude),n=e>=t&&e<=i;if(p(l)){const e=Math.abs(g.longitude-C.longitude),t=m.TWO_PI-e;(n?e:t)<(n?t:e)*l&&!n&&(w=!0)}else n||(w=!0)}w?function(e,t){const{Math:i}=Cesium;e.longitude<t.longitude?e.longitude+=i.TWO_PI:t.longitude+=i.TWO_PI}(g,C):function(e,t){const{Math:i}=Cesium,n=e.longitude-t.longitude;n<-i.PI?e.longitude+=i.TWO_PI:n>i.PI&&(t.longitude+=i.TWO_PI)}(g,C);const _=sc(h,i,g.height,C.height,a),O=function(e,t,i,n){const{defined:o,Math:r}=Cesium;if(o(n)&&i(.5)>n){const n=i(0),o=i(1),a=i(.5),s=a-n,l=a-o;return function(a){const c=i(a);if(a<=.5){const t=(c-n)/s;return r.lerp(e,-r.PI_OVER_TWO,t)}const u=(c-o)/l;return r.lerp(-r.PI_OVER_TWO,t,1-u)}}return function(i){return r.lerp(e,t,i)}}(f,o,_,c);return function(){const i=g.longitude,o=C.longitude,a=g.latitude,s=C.latitude;return function(l){const c=l.time/t,d=u.fromRadians(m.lerp(i,o,c),m.lerp(a,s,c),_(c),e.globe.ellipsoid);h.setView({destination:d,orientation:{heading:m.lerp(y,n,c),pitch:O(c),roll:m.lerp(b,r,c)}})}}()}function hc(e,t,i,n,o,r,a){const{Cartesian2:s,Cartesian3:l,Math:c}=Cesium,u=e.camera,d=l.clone(u.position,cc),p=lc(u.heading,n),m=u.frustum.right-u.frustum.left,h=sc(u,i,m,i.z,a);return function(e){const o=e.time/t;u.setView({orientation:{heading:c.lerp(p,n,o)}}),s.lerp(d,i,o,u.position);const r=h(o),a=u.frustum,l=a.top/a.right,m=.5*(r-(a.right-a.left));a.right+=m,a.left-=m,a.top=l*a.right,a.bottom=-a.top}}const vc={},gc={};function fc(e,t){return{startObject:{},stopObject:{},duration:0,complete:e,cancel:t}}function yc(e,t){return function(){"function"==typeof t&&t(),e.enableInputs=!0}}const bc={...Hl,compassEvt:e=>!0},Cc=ic;var wc=E({name:"VcCompass",props:Cc,emits:bc,setup(e,t){var i;const r=o();r.cesiumClass="VcCompass";const s=xo(e,t,r);if(void 0===s)return;const{t:l}=yo(),c=De(r),{$services:u}=s,d=function(e,{emit:t},i){const o={},r={},a={},s={};let l,c,u,d,p;const m=n(0),v=n(0),g=n(0);let f,y,b=0,C={},w=!1,_=0,O={},x=0;const P=n(null),S=n(null),E=()=>{g.value=0,v.value=0},T=()=>{const{defined:e}=Cesium;e(i.viewer)?(l&&(l(),l=void 0),l=i.viewer.scene.postRender.addEventListener((function(){m.value!==i.viewer.scene.camera.heading&&(m.value=i.viewer.scene.camera.heading)}))):l&&(l(),l=void 0)},I=(e,n)=>{const{Cartesian2:l,Cartesian3:m,defined:h,getTimestamp:f,Math:y,Matrix4:_,Ray:O,SceneMode:x,Transforms:P}=Cesium;let S=i.viewer.scene,T=S.camera;const I=S.screenSpaceCameraController;if(S.mode===x.MORPHING||!I.enableInputs)return;switch(S.mode){case x.COLUMBUS_VIEW:if(I.enableLook)break;if(!I.enableTranslate||!I.enableTilt)return;break;case x.SCENE3D:if(I.enableLook)break;if(!I.enableTilt||!I.enableRotate)return;break;case Cesium.SceneMode.SCENE2D:if(!I.enableTranslate)return}const M=Ie(i,"compassEvt");M&&t("compassEvt",{type:"orbit",camera:S.camera,status:"start",target:e}),document.removeEventListener("mousemove",u,!1),document.removeEventListener("mouseup",d,!1),document.removeEventListener("touchmove",u,!1),document.removeEventListener("touchend",d,!1),h(p)&&i.viewer.clock.onTick.removeEventListener(p),u=void 0,d=void 0,p=void 0,b=f();const D=new l;D.x=S.canvas.clientWidth/2,D.y=S.canvas.clientHeight/2;const j=new O,L=T.getPickRay(D,j),A=S.globe.pick(L,S,s);function k(e,t){const i=Math.atan2(-e.y,e.x);v.value=y.zeroToTwoPi(i-y.PI_OVER_TWO);const n=l.magnitude(e),o=t/2,r=Math.min(n/o,1),a=.5*r*r+.5;g.value=a}h(A)?(C=P.eastNorthUpToFixedFrame(A||new Cesium.Cartesian3,S.globe.ellipsoid,a),w=!1):(C=P.eastNorthUpToFixedFrame(T.positionWC,S.globe.ellipsoid,a),w=!0),p=function(e){const t=f(),n=(t-b)*(2.5*(g.value-.5)/1e3),o=v.value+y.PI_OVER_TWO,a=Math.cos(o)*n,s=Math.sin(o)*n;S=i.viewer.scene,T=S.camera;const l=_.clone(T.transform,r);T.lookAtTransform(C),w?(T.look(m.UNIT_Z,-a),T.look(T.right,-s)):(T.rotateLeft(a),T.rotateUp(s)),T.lookAtTransform(l),b=t},u=function(i){const n=e.getBoundingClientRect(),r=new l((n.right-n.left)/2,(n.bottom-n.top)/2);let a;i instanceof MouseEvent?a=new l(i.clientX-n.left,i.clientY-n.top):i instanceof TouchEvent&&(a=new l(i.changedTouches[0].clientX-n.left,i.changedTouches[0].clientY-n.top)),k(l.subtract(a,r,o),n.width),M&&t("compassEvt",{type:"orbit",camera:S.camera,status:"changing",target:e})},d=function(n){document.removeEventListener("mousemove",u,!1),document.removeEventListener("mouseup",d,!1),document.removeEventListener("touchmove",u,!1),document.removeEventListener("touchend",d,!1),h(p)&&i.viewer.clock.onTick.removeEventListener(p),u=void 0,d=void 0,p=void 0,E(),M&&t("compassEvt",{type:"orbit",camera:S.camera,status:"end",target:e})},document.addEventListener("mousemove",u,!1),document.addEventListener("mouseup",d,!1),document.addEventListener("touchmove",u,!1),document.addEventListener("touchend",d,!1),c=i.viewer.clock.onTick.addEventListener(p),k(n,e.getBoundingClientRect().width)},M=(n,l)=>{if(!e.enableCompassOuterRing)return;const c=i.viewer.scene;let u=c.camera;const d=c.screenSpaceCameraController;if(c.mode===Cesium.SceneMode.MORPHING||c.mode===Cesium.SceneMode.SCENE2D||!d.enableInputs)return;if(!d.enableLook&&(c.mode===Cesium.SceneMode.COLUMBUS_VIEW||c.mode===Cesium.SceneMode.SCENE3D&&!d.enableRotate))return;document.removeEventListener("mousemove",y,!1),document.removeEventListener("touchmove",y,!1),document.removeEventListener("mouseup",f,!1),document.removeEventListener("touchend",f,!1);const{Cartesian2:p,Cartesian3:m,defined:h,Math:v,Matrix4:g,Ray:b,Transforms:C}=Cesium;y=void 0,f=void 0;const w=Ie(i,"compassEvt");w&&t("compassEvt",{type:"rotate",camera:c.camera,status:"start",target:n}),_=Math.atan2(-l.y,l.x);const P=new p;P.x=c.canvas.clientWidth/2,P.y=c.canvas.clientHeight/2;const S=new b,E=u.getPickRay(P,S),T=c.globe.pick(E,c,s);O=h(T)?C.eastNorthUpToFixedFrame(T||new m,c.globe.ellipsoid,a):C.eastNorthUpToFixedFrame(u.positionWC,c.globe.ellipsoid,a);let I=g.clone(u.transform,r);u.lookAtTransform(O),x=Math.atan2(u.position.y,u.position.x),m.magnitude(new m(u.position.x,u.position.y,0)),u.lookAtTransform(I),y=function(e){const a=n.getBoundingClientRect(),s=new p((a.right-a.left)/2,(a.bottom-a.top)/2);let l;e instanceof MouseEvent?l=new p(e.clientX-a.left,e.clientY-a.top):e instanceof TouchEvent&&(l=new p(e.changedTouches[0].clientX-a.left,e.changedTouches[0].clientY-a.top));const d=p.subtract(l,s,o),m=Math.atan2(-d.y,d.x)-_,h=v.zeroToTwoPi(x-m);u=i.viewer.scene.camera,I=g.clone(u.transform,r),u.lookAtTransform(O);const f=Math.atan2(u.position.y,u.position.x);u.rotateRight(h-f),u.lookAtTransform(I),w&&t("compassEvt",{type:"rotate",camera:c.camera,status:"changing",target:n})},f=function(e){document.removeEventListener("mousemove",y,!1),document.removeEventListener("touchmove",y,!1),document.removeEventListener("mouseup",f,!1),document.removeEventListener("touchend",f,!1),y=void 0,f=void 0,w&&t("compassEvt",{type:"rotate",camera:c.camera,status:"end",target:n})},document.addEventListener("mousemove",y,!1),document.addEventListener("touchmove",y,!1),document.addEventListener("mouseup",f,!1),document.addEventListener("touchend",f,!1)};return{heading:m,orbitCursorAngle:v,orbitCursorOpacity:g,handleDoubleClick:n=>{const{Cartesian2:o,Cartesian3:r,defined:a,Ellipsoid:l,Matrix4:c,Ray:u,SceneMode:d,Transforms:p}=Cesium,{viewer:m}=i,v=m.scene,g=v.camera,f=v.screenSpaceCameraController;if(v.mode===d.MORPHING||!f.enableInputs)return!0;if(v.mode===d.COLUMBUS_VIEW&&!f.enableTranslate)return;if(v.mode===d.SCENE3D||v.mode===d.COLUMBUS_VIEW){if(!f.enableLook)return;if(v.mode===d.SCENE3D&&!f.enableRotate)return}const y=new o;y.x=v.canvas.clientWidth/2,y.y=v.canvas.clientHeight/2;const b=new u,C=g.getPickRay(y,b),w=v.globe.pick(C,v,s);if(!h(w)||!a(w))return void m.camera.flyHome();const _=Ie(i,"compassEvt");_&&t("compassEvt",{type:"reset",camera:m.camera,status:"start",target:n.currentTarget});const O=p.eastNorthUpToFixedFrame(w,m.scene.globe.ellipsoid),x=r.subtract(w,g.position,new r),P=oc.createTween(v,{destination:c.multiplyByPoint(O,new r(0,0,r.magnitude(x)),new r),direction:c.multiplyByPointAsVector(O,new r(0,0,-1),new r),up:c.multiplyByPointAsVector(O,new r(0,1,0),new r),duration:e.duration,complete:()=>{_&&t("compassEvt",{type:"reset",camera:m.camera,status:"end",target:n.currentTarget})},cancel:()=>{_&&t("compassEvt",{type:"reset",camera:m.camera,status:"cancel",target:n.currentTarget})}});v.tweens.add(P)},handleMouseDown:e=>{var t,n;e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),null==(t=Me(P))||t.hide(),null==(n=Me(S))||n.hide();const{SceneMode:r,Cartesian2:a}=Cesium;if(i.viewer.scene.mode===r.MORPHING)return!0;const s=e.currentTarget,l=s.getBoundingClientRect(),c=l.width/2,u=new a((l.right-l.left)/2,(l.bottom-l.top)/2);let d;e instanceof MouseEvent?d=new a(e.clientX-l.left,e.clientY-l.top):e instanceof TouchEvent&&(d=new a(e.changedTouches[0].clientX-l.left,e.changedTouches[0].clientY-l.top));const p=a.subtract(d,u,o),m=a.magnitude(p)/c;if(m<50/145)I(s,p);else{if(!(m<1))return!0;M(s,p)}},resetRotater:E,onTooltipBeforeShow:e=>{void 0===y&&void 0===u||(e.cancel=!0)},viewerChange:T,load:async e=>(i.viewer=e,T(),!0),unload:async()=>(document.removeEventListener("mousemove",u,!1),document.removeEventListener("mouseup",d,!1),document.removeEventListener("touchmove",u,!1),document.removeEventListener("touchend",d,!1),c&&c(),l&&l(),!0),iconOuterTooltipRef:P,iconInnerTooltipRef:S}}(e,t,r),p=tc(e),m=n(null),v=n(null),g="VcNavigation"===(null==(i=c.proxy)?void 0:i.$options.name),f=n(g),y=_({});b((()=>e),(e=>{x((()=>{r.mounted&&D()}))}),{deep:!0});const C=a((()=>Object.assign({},nc.innerOptions,e.innerOptions))),w=a((()=>Object.assign({},nc.outerOptions,e.outerOptions))),O=a((()=>Object.assign({},nc.markerOptions,e.markerOptions))),S=a((()=>({transform:"translate(-50%,-50%) rotate(-"+d.heading.value+"rad)",WebkitTransform:"translate(-50%,-50%) rotate(-"+d.heading.value+"rad)",opacity:void 0,background:w.value.background,color:w.value.color}))),E=a((()=>({transform:"rotate(-"+d.orbitCursorAngle.value+"rad)",WebkitTransform:"rotate(-"+d.orbitCursorAngle.value+"rad)",opacity:d.orbitCursorOpacity.value,color:O.value.color}))),T=a((()=>({background:C.value.background,color:C.value.color})));r.createCesiumObject=async()=>m,r.mount=async()=>{var e;f.value=!0,x((()=>{D()}));const{viewer:t}=u;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:r.cesiumClass,status:"mounted",target:Me(m)}),d.load(u.viewer)},r.unmount=async()=>{var e;f.value=!1;const{viewer:t}=u;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:r.cesiumClass,status:"unmounted",target:Me(m)}),d.unload()};const D=()=>{var t;const i=p.style.value,n=null==(t=Me(v))?void 0:t.$el;if(void 0!==n){const e=n.getBoundingClientRect();i.width=`${e.width}px`,i.height=`${e.height}px`}if(void 0===e.teleportToViewer||e.teleportToViewer){y.left=i.left,y.top=i.top,y.transform=i.transform;const e=p.attach.value;void 0!==n&&(!e.bottom&&!e.top||e.left||e.right||(i.left="50%",i.transform="translate(-50%, 0)"),!e.left&&!e.right||e.top||e.bottom||(i.top="50%",i.transform="translate(0, -50%)"))}Object.assign(y,i)};return()=>{if(f.value){let i=[];i=La(t.slots.default,i),i.push(P(Ol,{ref:v,class:"vc-compass-outerRing absolute-center",style:S.value,size:w.value.size,dense:!0,round:!0,disabled:!e.enableCompassOuterRing},(()=>[P(xl,{size:w.value.size,name:w.value.icon}),w.value.tooltip?P(Vl,{ref:d.iconOuterTooltipRef,...w.value.tooltip,onBeforeShow:d.onTooltipBeforeShow},(()=>P("strong",{},w.value.tooltip.tip||l("vc.navigation.compass.outerTip")))):M("v-if")]))),i.push(P(Ol,{class:"vc-compass-innerRing absolute-center",style:T.value,size:C.value.size,dense:!0,round:!0},(()=>[P(xl,{size:C.value.size,name:C.value.icon}),C.value.tooltip?P(Vl,{ref:d.iconInnerTooltipRef,...C.value.tooltip,onBeforeShow:d.onTooltipBeforeShow},(()=>P("strong",{},C.value.tooltip.tip||l("vc.navigation.compass.innerTip")))):M("v-if")]))),i.push(E.value.opacity?P(Ol,{class:"vc-compass-rotation-marker absolute-center",dense:!0,round:!0},(()=>[P(xl,{size:O.value.size,name:O.value.icon,style:E.value})])):M("v-if"));const n=P("div",{ref:m,class:`vc-compass ${p.classes.value} ${e.customClass}`,style:y,onDblclick:d.handleDoubleClick,onMousedown:d.handleMouseDown,onMouseup:d.resetRotater,onTouchend:d.resetRotater,onTouchstart:d.handleMouseDown},i);return!g&&e.teleportToViewer?P(I,{to:u.viewer._element},n):n}return M("v-if")}}});const _c={enableResetButton:{type:Boolean,default:!0},zoomAmount:{type:Number,default:2},duration:{type:Number,default:.5},durationReset:{type:Number},defaultResetView:{type:Object,default:()=>({position:{lng:105,lat:30,height:19059568.5}})},overrideViewerCamera:{type:Boolean,default:!1},...ec,background:{type:String,default:"#3f4854"},border:{type:String,default:"solid 1px rgba(255, 255, 255, 0.2)"},borderRadius:{type:String,default:"100px"},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},zoomInOptions:{type:Object,default:()=>({icon:"vc-icons-zoom-in",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})},zoomOutOptions:{type:Object,default:()=>({icon:"vc-icons-zoom-out",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})},zoomResetOptions:{type:Object,default:()=>({icon:"vc-icons-reset",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}},Oc=he(_c);const xc={...Hl,zoomEvt:e=>!0},Pc=_c;var Sc=E({name:"VcZoomControl",props:Pc,emits:xc,setup(e,t){var i;const r=o();r.cesiumClass="VcZoomControl",r.cesiumEvents=[];const s=xo(e,t,r);if(void 0===s)return;const{t:l}=yo(),{$services:c}=s,u=function(e,{emit:t},i,o){const r=n(null),a=n(null),s=n(null),l=(n,s)=>{var l,u;null==(l=Me(r))||l.hide(),null==(u=Me(a))||u.hide();const{Cartesian3:d,defined:p,IntersectionTests:m,Ray:h,SceneMode:v}=Cesium,{viewer:g}=o;if(p(g)){const o=g.scene,r=o.screenSpaceCameraController;if(!r.enableInputs||!r.enableZoom)return;if(o.mode===v.COLUMBUS_VIEW&&!r.enableTranslate)return;const a=o.camera;let l;switch(o.mode){case v.MORPHING:break;case v.SCENE2D:a.zoomIn(a.positionCartographic.height*(1-n));break;default:{let r;if(r=p(g.trackedEntity)?new Cesium.Cartesian3:c(g.scene),Cesium.defined(r))l={direction:a.direction,up:a.up};else{const e=new h(a.worldToCameraCoordinatesPoint(o.globe.ellipsoid.cartographicToCartesian(a.positionCartographic)),a.directionWC);r=m.grazingAltitudeLocation(e,o.globe.ellipsoid),l={heading:a.heading,pitch:a.pitch,roll:a.roll}}const u=new d,f=d.subtract(a.position,r,u),y=d.multiplyByScalar(f,n,f),b=d.add(r,y,r),C=n<1?"zoomIn":"zoomOut",w=s.currentTarget,_=ct(a.positionCartographic.height).toFixed(0),O=Ie(i,"zoomEvt");O&&t("zoomEvt",{type:C,camera:g.camera,status:"start",target:w,level:_}),Cesium.defined(g.trackedEntity)||o.mode===v.COLUMBUS_VIEW?a.position=b:a.flyTo({destination:b,orientation:l,duration:e.duration,convert:!1,complete:()=>{O&&t("zoomEvt",{type:C,camera:g.camera,status:"end",target:w,level:_})},cancel:()=>{O&&t("zoomEvt",{type:C,camera:g.camera,status:"cancel",target:w,level:_})}})}}}},c=e=>{const{defined:t,IntersectionTests:i,Ray:n}=Cesium,o=new n(e.camera.positionWC,e.camera.directionWC),r=i.rayEllipsoid(o,e.globe.ellipsoid);return t(r)?n.getPoint(o,r.start):i.grazingAltitudeLocation(o,e.globe.ellipsoid)};return{zoomIn:t=>{l(1/e.zoomAmount,t)},zoomOut:t=>{l(e.zoomAmount,t)},zoomReset:n=>{var r;null==(r=Me(s))||r.hide();const{viewer:a}=o;if(a.scene.screenSpaceCameraController.enableInputs)if(Cesium.defined(a.trackedEntity)){const e=a.trackedEntity;a.trackedEntity=void 0,a.trackedEntity=e}else{const o=Ie(i,"zoomEvt"),r=null==n?void 0:n.currentTarget,s=ct(a.camera.positionCartographic.height).toFixed(0);o&&t("zoomEvt",{type:"zoomReset",camera:a.camera,status:"start",target:r,level:s});const l=()=>{o&&t("zoomEvt",{type:"zoomReset",camera:a.camera,status:"end",target:r,level:s})},c=()=>{o&&t("zoomEvt",{type:"zoomReset",camera:a.camera,status:"cancel",target:r,level:s})},u=e.defaultResetView,d={duration:e.durationReset,complete:l,cancel:c};Ke(a,u,d)}},zoomInTooltipRef:r,zoomOutTooltipRef:a,resetTooltipRef:s}}(e,t,r,c),d=tc(e),p=n(null),m=n(null),h=n(null),v=n(null),g="VcNavigation"===(null==(i=De(r).proxy)?void 0:i.$options.name),f=n(g),y=_({});b((()=>e),(e=>{x((()=>{r.mounted&&S()}))}),{deep:!0});const C=a((()=>Object.assign({},Oc.zoomOutOptions,e.zoomOutOptions))),w=a((()=>Object.assign({},Oc.zoomInOptions,e.zoomInOptions))),O=a((()=>Object.assign({},Oc.zoomResetOptions,e.zoomResetOptions)));r.createCesiumObject=async()=>{const{viewer:t}=c;if(e.overrideViewerCamera){Qe(t,e.defaultResetView)}return p},r.mount=async()=>{var e;f.value=!0,x((()=>{S()}));const{viewer:t}=c;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:r.cesiumClass,status:"mounted",target:Me(p)}),!0},r.unmount=async()=>{var e;f.value=!1;const{viewer:t}=c;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:r.cesiumClass,status:"unmounted",target:Me(p)}),!0};const S=()=>{var t,i,n;const o=d.style.value;if(y.left=o.left,y.top=o.top,y.transform=o.transform,o.flexDirection="vertical"===e.direction?"column":"row",o.background=e.background,o.borderRadius=e.borderRadius,o.border=e.border,!g){const r=null==(t=Me(m))?void 0:t.$el,a=null==(i=Me(h))?void 0:i.$el,s=null==(n=Me(v))?void 0:n.$el;let l=0,c=0;if(void 0!==r){const t=r.getBoundingClientRect();"horizontal"===e.direction?(l+=t.width,c=t.height>c?t.height:c):(c+=t.height,l=t.width>l?t.width:l)}if(void 0!==a){const t=a.getBoundingClientRect();"horizontal"===e.direction?(l+=t.width,c=t.height>c?t.height:c):(c+=t.height,l=t.width>l?t.width:l)}if(void 0!==s){const t=s.getBoundingClientRect();"horizontal"===e.direction?(l+=t.width,c=t.height>c?t.height:c):(c+=t.height,l=t.width>l?t.width:l)}if(o.width=`${l+4}px`,o.height=`${c+4}px`,void 0===e.teleportToViewer||e.teleportToViewer){const e=d.attach.value;!e.bottom&&!e.top||e.left||e.right||(o.left="50%",o.transform="translate(-50%, 0)"),!e.left&&!e.right||e.top||e.bottom||(o.top="50%",o.transform="translate(0, -50%)")}}Object.assign(y,o)},E=(e,i)=>{var n,o,r;let a,s,c,d;"zoomIn"===i?(a=m,s=u.zoomInTooltipRef,c=(null==(n=e.tooltip)?void 0:n.tip)||l("vc.navigation.zoomCotrol.zoomInTip"),d=u.zoomIn):"zoomOut"===i?(a=v,s=u.zoomOutTooltipRef,c=(null==(o=e.tooltip)?void 0:o.tip)||l("vc.navigation.zoomCotrol.zoomOutTip"),d=u.zoomOut):"zoomReset"===i&&(a=h,s=u.resetTooltipRef,c=(null==(r=e.tooltip)?void 0:r.tip)||l("vc.navigation.zoomCotrol.zoomResetTip"),d=u.zoomReset);const p=[];p.push(P(xl,{name:e.icon,size:e.size})),p.push(P("div",null,e.label)),e.tooltip?p.push(P(Vl,{ref:s,...e.tooltip},(()=>P("strong",null,c)))):p.push(M("v-if"));return P(Ol,{class:`vc-${ue(i)}`,ref:a,size:e.size,flat:e.flat,stack:e.stack,round:e.round,dense:!0,style:{color:e.color,background:e.background},onClick:d},(()=>La(t.slots.default,p)))};return Object.assign(r.proxy,{zoomIn:e=>u.zoomIn(e),zoomOut:e=>u.zoomOut(e),zoomReset:e=>u.zoomReset(e)}),()=>{if(f.value){const t=[];t.push(P("li",null,E(w.value,"zoomIn"))),e.enableResetButton?t.push(P("li",null,E(O.value,"zoomReset"))):t.push(M("v-if")),t.push(P("li",null,E(C.value,"zoomOut")));const i=P("div",{ref:p,class:`vc-zoom-control ${d.classes.value} ${e.customClass}`,style:y},P("ul",{class:"vc-list"},t));return!g&&e.teleportToViewer?P(I,{to:c.viewer._element},i):i}return M("v-if")}}});const Ec=E({name:"VcPrintView",props:{options:Object},setup(e){const t=n(!1),i=n(!1);o().cesiumClass="VcPrintView";const{t:r}=yo(),a=()=>{var n,o;if(t.value)return;const r=null==(n=e.options)?void 0:n.printWindow.document.getElementsByTagName("img");if(0===r.length)return;let a=!0;for(let e=0;a&&e<r.length;++e)a=r[e].complete;a&&(l(),t.value=a,t.value&&!i.value&&((null==(o=e.options)?void 0:o.readyCallback)&&e.options.readyCallback(e.options.printWindow),i.value=!0))};let s;const l=()=>{s&&s()};return O((()=>{var t;const i=null==(t=e.options)?void 0:t.printWindow,n=window,o=null==i?void 0:i.setInterval(a,200),r=n.setInterval(a,200);s=()=>{i.clearInterval(o),n.clearInterval(r),s=void 0}})),f((()=>{l()})),()=>{var t,i,n,o,a,s;const l=[];if(l.push(P("p",{},P("img",{src:null==(t=e.options)?void 0:t.image,alt:r("vc.navigation.screenshot"),class:"vc-map-image"}))),(null==(i=e.options)?void 0:i.credits.length)&&(null==(n=e.options)?void 0:n.showCredit)?l.push(P("h1",{},r("vc.navigation.credit"))):l.push(M("v-if")),(null==(o=e.options)?void 0:o.credits.length)&&(null==(a=e.options)?void 0:a.showCredit)){const t=[];null==(s=e.options)||s.credits.forEach((e=>{t.push(P("li",{innerHTML:e}))})),l.push(P("ul",{},t))}else l.push(M("v-if"));return P("div",{},l)}}});var Tc={showCredit:{type:Boolean,default:!0},printAutomatically:{type:Boolean,default:!1},showPrintView:{type:Boolean,default:!0},downloadAutomatically:{type:Boolean,default:!1},...ec,icon:{type:String,default:"vc-icons-capture"},size:{type:String,default:"24px"},color:{type:String,default:"#3f4854"},background:{type:String,default:"#fff"},round:{type:Boolean,default:!0},flat:{type:Boolean,default:!1},label:String,stack:{type:Boolean,default:!1},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},screenshotName:String,customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}};const Ic={...Hl,printEvt:e=>!0},Mc=Tc;var Dc=E({name:"VcPrint",props:Mc,emits:Ic,setup(e,t){var r;const a=o();a.cesiumClass="VcPrint",a.cesiumEvents=[];const s=xo(e,t,a);if(void 0===s)return;const{t:l}=yo(),{$services:c}=s,u=n(null),d=n(null),p=n(null),m=tc(e),h=n(!1),v="VcNavigation"===(null==(r=De(a).proxy)?void 0:r.$options.name),g=n(v),f=_({});b((()=>e),(e=>{x((()=>{a.mounted&&y()}))}),{deep:!0}),a.createCesiumObject=async()=>u,a.mount=async()=>{var e;g.value=!0,x((()=>{y()}));const{viewer:t}=c;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:a.cesiumClass,status:"mounted",target:Me(u)}),!0},a.unmount=async()=>{var e;g.value=!1;const{viewer:t}=c;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:a.cesiumClass,status:"unmounted",target:Me(u)}),!0};const y=()=>{var t;const i=m.style.value;if(f.left=i.left,f.top=i.top,f.transform=i.transform,!v){const n=m.attach.value;void 0!==(null==(t=Me(p))?void 0:t.$el)&&(void 0===e.teleportToViewer||e.teleportToViewer)&&(!n.bottom&&!n.top||n.left||n.right||(i.left="50%",i.transform="translate(-50%, 0)"),!n.left&&!n.right||n.top||n.bottom||(i.top="50%",i.transform="translate(0, -50%)"))}Object.assign(f,i)},C=()=>{var i;null==(i=Me(d))||i.hide();const{viewer:n}=c;(function(e){const t=e.scene,i=new Promise(((t,i)=>{const n=e.scene.postRender.addEventListener((()=>{n();try{const i=e.scene.canvas;t(i.toDataURL("image/png"))}catch(Qb){i(Qb)}}))}));return t.render(e.clock.currentTime),i})(n).then((i=>{if(e.downloadAutomatically){const t=document.createElement("a");t.download=e.screenshotName||l("vc.navigation.print.screenshot"),t.style.display="none",t.href=i,document.body.appendChild(t),t.click(),document.body.removeChild(t)}(e.printAutomatically||e.showPrintView)&&(e.showPrintView?O(i):e.printAutomatically&&w(i));Ie(a,"printEvt")&&t.emit("printEvt",{type:"capture",image:i,status:"end"})}))},w=e=>{S(!0,!0,e)},O=e=>{S(!1,!1,e)},S=(t,i,n)=>{let o;h.value=!0,t&&(o=document.createElement("iframe"),document.body.appendChild(o));const{viewer:r}=c;(e=>{const{printWindow:t=window.open(),closeCallback:i,title:n}=e;i&&t.addEventListener("unload",(()=>{i(t)})),t.document.open(),t.document.close(),t.document.head.innerHTML=`\n    <meta charset="UTF-8">\n    <title>${e.title}</title>\n    <style>\n  .background {\n    width: 100%;\n    fill: rgba(255, 255, 255, 1.0);\n  }\n\n  .map-image {\n    max-width: 95vw;\n    max-height: 95vh;\n  }\n\n  .layer-legends {\n    display: inline;\n    float: left;\n    padding-left: 20px;\n    padding-right: 20px;\n  }\n\n  .layer-title {\n    font-weight: bold;\n  }\n\n  h1, h2, h3 {\n    clear: both;\n  }\n</style>\n    `,t.document.body.innerHTML='<div id="print"></div>',e.printWindow=e.printWindow||t,D(Ec,{options:e}).mount(t.document.getElementById("print"))})({image:n,showCredit:e.showCredit,credits:E(r),printWindow:o?o.contentWindow:void 0,title:l("vc.navigation.print.printViewTitle"),readyCallback:e=>{i&&function(e){const t=sr();let i=0;const n=setTimeout((function(){t.reject(!1)}),1e4);function o(){clearTimeout(n)}function r(){i<=0&&t.resolve()}return e.matchMedia&&e.matchMedia("print").addListener((function(e){o(),e.matches?++i:(--i,r())})),e.onbeforeprint=function(){o(),++i},e.onafterprint=function(){o(),--i,r()},e.document.execCommand("print",!0,null)||e.print(),t.promise}(e).catch((e=>{s.logger.warn(e)})).then((()=>{o&&document.body.removeChild(o),t&&(h.value=!1)}))},closeCallback:e=>{t&&(h.value=!1)}}),t||(h.value=!1)},E=e=>e.scene.frameState.creditDisplay._currentFrameCredits.screenCredits.values.concat(e.scene.frameState.creditDisplay._currentFrameCredits.lightboxCredits.values).map((e=>e.html)),T=e=>{h.value&&(e.cancel=!0)};return()=>{if(g.value){const t=[];t.push(P(xl,{name:e.icon,size:e.size})),t.push(P("div",null,e.label)),i(e.tooltip)?t.push(P(Vl,{ref:d,onBeforeShow:T,...e.tooltip},(()=>P("strong",null,i(e.tooltip)&&e.tooltip.tip||l("vc.navigation.print.printTip"))))):t.push(M("v-if"));const n=[P(Ol,{ref:p,size:e.size,disabled:h.value,flat:e.flat,stack:e.stack,round:e.round,style:{color:e.color,background:e.background},dense:!0,onClick:C},(()=>t))],o=P("div",{ref:u,class:`vc-print ${m.classes.value} ${e.customClass}`,style:f},n);return!v&&e.teleportToViewer?P(I,{to:c.viewer._element},o):o}return M("v-if")}}}),jc={geolocation:{type:Object,default:()=>({enableHighAccuracy:!0,timeout:5e3,maximumAge:0})},amap:Object,id:{type:String,default:"My Location"},pointColor:{type:[Array,Object,String],default:"#08ABD5"},pixelSize:{type:Number,default:12.5},outlineWidth:{type:Number,default:3},outlineColor:{type:[Array,Object,String],default:"#ffffff"},level:{type:Number,default:6},duration:{type:Number,default:3},factor:{type:Number,default:.01},maximumHeight:Number,hpr:{type:Array,default:()=>[0,0,3e3]},customAPI:Function,customApi:Function,description:Function,...ec,icon:{type:String,default:"vc-icons-geolocation"},size:{type:String,default:"24px"},color:{type:String,default:"#3f4854"},background:{type:String,default:"#fff"},round:{type:Boolean,default:!0},flat:{type:Boolean,default:!1},label:String,stack:{type:Boolean,default:!1},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},loadingType:{type:String,default:"puff"},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}};const Lc={...Hl,locationEvt:e=>!0},Ac=jc;var kc=E({name:"VcMyLocation",props:Ac,emits:Lc,setup(e,r){var s;const l=o();l.cesiumClass="VcMyLocation",l.cesiumEvents=[];const c=xo(e,r,l);if(void 0===c)return;const{$services:u}=c,{t:d}=yo(),m=n(null),h=n(null),v=n(null),g=n(!1),f=tc(e),y="VcNavigation"===(null==(s=De(l).proxy)?void 0:s.$options.name),C=n(y),w=_({});let O,S;b((()=>e),(e=>{x((()=>{l.mounted&&T()}))}),{deep:!0});const E=a((()=>g.value?d("vc.navigation.myLocation.positioning"):i(e.tooltip)&&e.tooltip.tip||d("vc.navigation.myLocation.myLocationTip")));l.createCesiumObject=async()=>{const{viewer:t}=u,{CustomDataSource:i}=Cesium,n=t.dataSources.getByName("__vc-myLocation__");let o;if(n.length?O=n[0]:t.dataSources.add(new i("__vc-myLocation__")).then((e=>{O=e})),e.amap&&e.amap.key){const t=e.amap.options;o=new Promise(((i,n)=>{var o,r;j.load({key:null==(o=e.amap)?void 0:o.key,version:null==(r=e.amap)?void 0:r.version,plugins:["AMap.Geolocation"]}).then((e=>{S=new e.Geolocation(t),i(S)})).catch((e=>{c.logger.error(e),n(e)}))}))}const r=new Promise(((e,t)=>{x((()=>{e(Me(m))}))}));return Promise.all([r,o]).then((e=>e[0]))},l.mount=async()=>{var e;C.value=!0,x((()=>{T()}));const{viewer:t}=u;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:l.cesiumClass,status:"mounted",target:Me(m)}),!0},l.unmount=async()=>{var e;C.value=!1;const{viewer:t}=u;if(S){const e=document.getElementsByTagName("script"),t=[];for(const i of e)i.src.indexOf("/webapi.amap.com/maps")>-1&&t.push(i);t.forEach((e=>{document.getElementsByTagName("body")[0].removeChild(e)}))}return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:l.cesiumClass,status:"unmounted",target:Me(m)}),t.dataSources.remove(O,!0)};const T=()=>{var t;const i=f.style.value;if(w.left=i.left,w.top=i.top,w.transform=i.transform,!y){const n=f.attach.value;void 0!==(null==(t=Me(v))?void 0:t.$el)&&(void 0===e.teleportToViewer||e.teleportToViewer)&&(!n.bottom&&!n.top||n.left||n.right||(i.left="50%",i.transform="translate(-50%, 0)"),!n.left&&!n.right||n.top||n.bottom||(i.top="50%",i.transform="translate(0, -50%)"))}Object.assign(w,i)},D=()=>{var i;null==(i=Me(h))||i.hide(),g.value=!0;const n=e.customApi||e.customAPI;if(t(n)){const e=n(k);L(e)}else S&&e.amap&&e.amap.key?S.getCurrentPosition(((t,i)=>{var n;if("complete"===t){let t=[i.position.lng,i.position.lat];(null==(n=e.amap)?void 0:n.transformToWGS84)&&(t=br(t[0],t[1])),L({lng:t[0],lat:t[1],address:i.formattedAddress},i)}else k(d("vc.navigation.myLocation.fail"),i.message)})):e.geolocation?navigator.geolocation.getCurrentPosition((e=>{L({lng:e.coords.longitude,lat:e.coords.latitude},e)}),k,{enableHighAccuracy:e.geolocation.enableHighAccuracy,timeout:e.geolocation.timeout,maximumAge:e.geolocation.maximumAge}):k(d("vc.navigation.myLocation.fail"))},L=(t,i)=>{var n;const o=t.lng,a=t.lat,s=t.address,{Rectangle:c,sampleTerrain:m,defined:h,SceneMode:v}=Cesium,{viewer:f}=u;O.entities.removeAll();const y=O.entities.add({id:e.id,position:Ne([o,a],f.scene.globe.ellipsoid),point:{color:$e(e.pointColor),pixelSize:e.pixelSize,outlineWidth:e.outlineWidth,outlineColor:$e(e.outlineColor)},properties:{...i},description:(null==(n=e.description)?void 0:n.call(this,t,i))||A({[d("vc.navigation.myLocation.lng")]:o,[d("vc.navigation.myLocation.lat")]:a,[d("vc.navigation.myLocation.address")]:s})}),b=Ie(l,"locationEvt");b&&r.emit("locationEvt",{type:"location",position:t,detail:i,entity:y});const C={duration:e.duration};if(h(e.maximumHeight)&&(C.maximumHeight=e.maximumHeight),h(e.hpr)&&p(e.hpr)&&(C.offset=new Cesium.HeadingPitchRange(e.hpr[0],e.hpr[1],e.hpr[2])),f.scene.mode===v.SCENE2D||f.scene.mode===v.COLUMBUS_VIEW)return f.flyTo(y,C).then((()=>{g.value=!1,b&&r.emit("locationEvt",{type:"zoomIn",camera:f.camera,status:"end"})}));const w=e.factor,_=c.fromDegrees(o-w,a-w,o+w,a+w),x=f.scene.camera,P=x.getRectangleCameraCoordinates(_),S=f.scene.globe.ellipsoid.cartesianToCartographic(P);return m(f.scene.globe.terrainProvider,e.level,[c.center(_)]).then((function(t){const i={longitude:S.longitude,latitude:S.latitude,height:S.height+t[0].height},n=f.scene.globe.ellipsoid.cartographicToCartesian(i);b&&r.emit("locationEvt",{type:"zoomIn",camera:f.camera,status:"start"}),x.flyTo({duration:e.duration,destination:n,complete:()=>{g.value=!1,b&&r.emit("locationEvt",{type:"zoomIn",camera:f.camera,status:"end"})},cancel:()=>{g.value=!1,b&&r.emit("locationEvt",{type:"zoomIn",camera:f.camera,status:"cancel"})}})}))},A=(e,t)=>{let i="";e instanceof Cesium.PropertyBag&&(e=e.getValue(Cesium.JulianDate.now()));for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(n===t)continue;let o=e[n];"object"==typeof o&&(o=A(o)),n=n.replace(/_/g," "),Cesium.defined(o)&&(i+="<tr><th>"+n+"</th><td>"+o+"</td></tr>")}return i.length>0&&(i='<table class="cesium-infoBox-defaultTable"><tbody>'+i+"</tbody></table>"),i},k=(...e)=>{g.value=!1,c.logger.error(...e)},R=e=>{g.value&&(e.cancel=!0)};return()=>{if(C.value){const t=[];t.push(P(xl,{name:e.icon,size:e.size})),t.push(P("div",null,e.label)),i(e.tooltip)?t.push(P(Vl,{ref:h,onBeforeShow:R,...e.tooltip},(()=>P("strong",null,E.value)))):t.push(M("v-if"));const n=P("div",{ref:m,class:`vc-my-location ${f.classes.value} ${e.customClass}`,style:w},[P(Ol,{ref:v,size:e.size,flat:e.flat,stack:e.stack,round:e.round,loading:g.value,dense:!0,style:{color:e.color,background:e.background},onClick:D},{default:()=>t,loading:()=>P((()=>{switch(e.loadingType){case"bars":default:return Sl;case"ios":return Ml;case"orbit":return Dl;case"oval":return jl;case"puff":return Ll;case"tail":return kl}})())})]);return!y&&e.teleportToViewer?P(I,{to:u.viewer._element},n):n}return M("v-if")}}});class Rc{constructor(e){this.gridFileUrl=e,this.data=void 0,this.minimumHeight=-106.99,this.maximumHeight=85.39}isSupported(){return"undefined"!=typeof Int16Array&&"undefined"!=typeof Uint8Array}getHeight(e,t){return Vc(this).then((function(i){return Bc(i,e,t)}))}getHeights(e){return Vc(this).then((function(t){for(let i=0;i<e.length;++i){const n=e[i];n.height=Bc(t,n.longitude,n.latitude)}return e}))}}async function Vc(e){const{defined:t}=Cesium;t(e.data)||(e.data=function(e){const{Resource:t}=Cesium;return t.createIfNeeded(e).fetchArrayBuffer()}(e.gridFileUrl));let i=e.data;if(e.data instanceof Promise&&(i=await e.data),!(e.data instanceof Int16Array)){const t=new Uint8Array(i);for(let e=0;e<t.length;e+=2){const i=t[e];t[e]=t[e+1],t[e+1]=i}e.data=new Int16Array(i)}return e.data}function Bc(e,t,i){const{Math:n}=Cesium;let o=720*(n.PI_OVER_TWO-i)/Math.PI;o<0?o=0:o>720&&(o=720);let r=1440*(t=n.zeroToTwoPi(t))/n.TWO_PI;r<0?r=0:r>1440&&(r=1440);const a=0|r,s=0|o,l=r-a,c=o-s,u=1-l,d=1-c;return(Nc(e,s,a)*u*d+Nc(e,s,a+1)*l*d+Nc(e,s+1,a)*u*c+Nc(e,s+1,a+1)*l*c)/100}function Nc(e,t,i){return t>720?t=720:t<0&&(t=0),i>1439?i-=1440:i<0&&(i+=1440),e[1440*t+i]}class zc{constructor(e){const{Cartographic:t,knockout:i}=Cesium,n=e.gridFileUrl;n&&(this.geoidModel=new Rc(n)),this.proj4Projection=e.proj4Projection,this.projectionUnits=e.projectionUnits,this.proj4longlat=e.proj4longlat,this.lastHeightSamplePosition=new t,this.accurateSamplingDebounceTime=250,this.tileRequestInFlight=void 0,this.elevation="",this.utmZone="",this.latitude="",this.longitude="",this.north="",this.east="",this.useProjection=!1,this.debounceSampleAccurateHeight=X(this.sampleAccurateHeight,this.accurateSamplingDebounceTime),this.decimal=e.decimal||5,this.rangeType=e.rangeType||0,i.track(this,["elevation","utmZone","latitude","longitude","north","east","useProjection"])}toggleUseProjection(){this.useProjection=!this.useProjection}updateCoordinatesFromCesium(e,t){const{Cartographic:i,defined:n,EllipsoidTerrainProvider:o,Intersections2D:r,SceneMode:a}=Cesium,s=e.scene,l=s.camera.getPickRay(t),c=s.globe,u=c.pickTriangle(l,s);if(n(u)){const e=c.ellipsoid,t=e.cartesianToCartographic(u.v0),n=e.cartesianToCartographic(u.v1),d=e.cartesianToCartographic(u.v2),p=e.cartesianToCartographic(s.mode===a.SCENE3D?u.intersection:s.globe.pick(l,s));let m;if(c.terrainProvider instanceof o)p.height=void 0;else{const e=r.computeBarycentricCoordinates(p.longitude,p.latitude,t.longitude,t.latitude,n.longitude,n.latitude,d.longitude,d.latitude);if(e.x>=-1e-15&&e.y>=-1e-15&&e.z>=-1e-15){const i=e.x*t.height+e.y*n.height+e.z*d.height;p.height=i}const i=c.terrainProvider.getLevelMaximumGeometricError(u.tile.level),o=p.height,a=Math.max(u.tile.data.tileBoundingRegion.minimumHeight,o-i),s=Math.min(u.tile.data.tileBoundingRegion.maximumHeight,o+i),l=a-(this.geoidModel?this.geoidModel.minimumHeight:0),h=s+(this.geoidModel?this.geoidModel.maximumHeight:0);m=Math.max(Math.abs(o-l),Math.abs(h-o))}i.clone(p,this.lastHeightSamplePosition);const h=c.terrainProvider;this.cartographicToFields(p,m),h instanceof o||this.debounceSampleAccurateHeight(h,p)}else this.elevation="",this.utmZone="",this.latitude="",this.longitude="",this.north="",this.east=""}cartographicToFields(e,t){const{Math:i}=Cesium,n=i.toDegrees(e.latitude),o=i.toDegrees(e.longitude);if(this.useProjection){const e=function(e,t,i,n,o){const r=1+Math.floor((e+180)/6),a=L(n,i+" +zone="+r+(t<0?" +south":""),[e,t]);return{utmZone:r+(t<0?"S":"N"),north:a[1].toFixed(2)+o,east:a[0].toFixed(2)+o}}(o,n,this.proj4Projection,this.proj4longlat,this.projectionUnits);this.utmZone=e.utmZone,this.north=e.north,this.east=e.east}const r=function(e,t,i){const n={latitude:"",longitude:"",elevation:""},{defaultValue:o,defined:r}=Cesium,a=o(i,{}),s=o(a.decimal,5);return 0===a.rangeType?(n.latitude=Math.abs(t).toFixed(s)+"°"+(t<0?"S":"N"),n.longitude=Math.abs(e).toFixed(s)+"°"+(e<0?"W":"E")):1===a.rangeType?(n.latitude=t.toFixed(s)+"°",n.longitude=e.toFixed(s)+"°"):2===a.rangeType&&(n.latitude=t.toFixed(s)+"°",n.longitude=(e<0?360+e:e).toFixed(s)+"°"),r(a.height)?n.elevation=Math.round(a.height)+(r(a.errorBar)?"±"+Math.round(a.errorBar):"")+"m":n.elevation="",n}(o,n,{height:e.height,errorBar:t,decimal:this.decimal,rangeType:this.rangeType});this.latitude=r.latitude,this.longitude=r.longitude,this.elevation=r.elevation}sampleAccurateHeight(e,t){const{Cartographic:i,sampleTerrainMostDetailed:n}=Cesium;if(this.tileRequestInFlight)return this.debounceSampleAccurateHeight.cancel(),void this.debounceSampleAccurateHeight(e,t);const o=i.clone(t),r=this.geoidModel?this.geoidModel.getHeight(t.longitude,t.latitude):void 0,a=n(e,[o]);this.tileRequestInFlight=Promise.all([r,a]).then((e=>{const n=e[0]||0;this.tileRequestInFlight=void 0,i.equals(t,this.lastHeightSamplePosition)&&(t.height=o.height-n,this.cartographicToFields(t))})).catch((()=>{this.tileRequestInFlight=void 0}))}}const Fc=[],Gc={start:0,stop:0},Hc={},Uc={},Wc={};function $c(){const{Globe:e,GlobeSurfaceTile:t,BoundingSphere:i,defaultValue:n,Cartesian3:o,defined:r,DeveloperError:a,IntersectionTests:s,SceneMode:l}=Cesium;e.prototype.pickTriangle=e.prototype.pickTriangle||function(e,t,c,u){if(!r(e))throw new a("ray is required");if(!r(t))throw new a("scene is required");c=n(c,!0);const d=t.mode,p=t.mapProjection,m=Fc;m.length=0;const h=this._surface._tilesToRender;let v,g,f,y=h.length;for(g=0;g<y;++g){v=h[g];const t=v.data;if(!r(t))continue;const n=t.pickBoundingSphere;d!==l.SCENE3D?(i.fromRectangleWithHeights2D(v.rectangle,p,t.minimumHeight,t.maximumHeight,n),o.fromElements(n.center.z,n.center.x,n.center.y,n.center)):i.clone(t.boundingSphere3D,n);const a=s.raySphere(e,n,Gc);r(a)&&m.push(v)}for(m.sort(function(e){const{BoundingSphere:t}=Cesium;return function(i,n){return t.distanceSquaredTo(i.data.pickBoundingSphere,e)-t.distanceSquaredTo(n.data.pickBoundingSphere,e)}}(e.origin)),y=m.length,g=0;g<y;++g)if(f=m[g].data.pickTriangle(e,t.mode,t.mapProjection,c,u),r(f)){f.tile=m[g];break}return f},t.prototype.pickTriangle=t.prototype.pickTriangle||function(e,t,i,n){const a=this.renderedMesh;if(!r(a))return;const l=a.vertices,c=a.indices,u=a.encoding,d=c.length;for(let p=0;p<d;p+=3){const a=c[p],d=c[p+1],m=c[p+2],h=Zc(u,t,i,l,a,Hc),v=Zc(u,t,i,l,d,Uc),g=Zc(u,t,i,l,m,Wc),f=s.rayTriangle(e,h,v,g,n,new o);if(r(f))return{intersection:f,v0:h,v1:v,v2:g}}}}function Zc(e,t,i,n,o,r){e.decodePosition(n,o,r);const{Cartesian3:a,defined:s,SceneMode:l}=Cesium;if(s(t)&&t!==l.SCENE3D){const e=i.ellipsoid.cartesianToCartographic(r);i.project(e,r),a.fromElements(r.z,r.x,r.y,r)}return r}var qc={gridFileUrl:{type:String,default:"https://zouyaoji.top/vue-cesium/SampleData/WW15MGH.DAC"},proj4Projection:{type:String,default:"+proj=utm +ellps=GRS80 +units=m +no_defs"},projectionUnits:{type:String,default:"m"},proj4longlat:{type:String,default:"+proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees +no_defs"},position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>2===e.length},color:{type:String,default:"#fff"},decimal:{type:Number,default:6},rangeType:{type:Number,default:0},background:{type:String,default:"#3f4854"},showCameraInfo:{type:Boolean,default:!0},showMouseInfo:{type:Boolean,default:!0},showPerformanceInfo:{type:Boolean,default:!0},useProjection:{type:Boolean,default:!0},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}};const Yc={...Hl,statusBarEvt:e=>!0},Jc=qc;var Xc=E({name:"VcStatusBar",props:Jc,emits:Yc,setup(e,t){var r;const a=o();a.cesiumClass="VcStatusBar",a.cesiumEvents=[];const s=xo(e,t,a);if(void 0===s)return;const l=De(a),{$services:c}=s,u=n(null),d=n(null),{t:p}=yo();let m=-1,h=-1;const v=_({heading:"NaN",pitch:"NaN",roll:"NaN",height:"NaN",level:"NaN"}),g=_({fps:"NaN",ms:"NaN"}),f=n(),y=tc(e),C="VcNavigation"===(null==(r=l.proxy)?void 0:r.$options.name),w=n(C),O=_({});let S=!1;b((()=>e),(e=>{x((()=>{a.mounted&&E()}))}),{deep:!0}),a.createCesiumObject=async()=>{const{viewer:t}=c,i=t._element;return e.showMouseInfo&&(f.value=new zc({gridFileUrl:e.gridFileUrl,proj4Projection:e.proj4Projection,projectionUnits:e.projectionUnits,proj4longlat:e.proj4longlat,decimal:e.decimal,rangeType:e.rangeType}),i.addEventListener("wheel",j,!1),i.addEventListener("mousemove",j,!1),i.addEventListener("touchmove",j,!1),$c()),e.showCameraInfo&&(t.camera.changed.addEventListener(D),D()),e.showPerformanceInfo&&(S=t.scene.debugShowFramesPerSecond,t.scene.debugShowFramesPerSecond=!0,t.scene.postRender.addEventListener(T)),u},a.mount=async()=>{var e,t;w.value=!0,x((()=>{E()}));const{viewer:i}=c;return null==(t=i.viewerWidgetResized)||t.raiseEvent({type:a.cesiumClass,status:"mounted",target:null==(e=Me(u))?void 0:e.$el}),!0},a.unmount=async()=>{var t,i;w.value=!1;const{viewer:n}=c,o=n._element;return e.showMouseInfo&&(f.value=void 0,o.removeEventListener("wheel",j),o.removeEventListener("mousemove",j),o.removeEventListener("touchmove",j)),e.showCameraInfo&&n.camera.changed.removeEventListener(D),e.showPerformanceInfo&&(S?n.scene._performanceDisplay._container.style.display="block":n.scene.debugShowFramesPerSecond=!1,n.scene.postRender.removeEventListener(T)),null==(i=n.viewerWidgetResized)||i.raiseEvent({type:a.cesiumClass,status:"unmounted",target:null==(t=Me(u))?void 0:t.$el}),!0};const E=()=>{const t=y.style.value;if(O.left=t.left,O.top=t.top,O.transform=t.transform,t.background=e.background,t.color=e.color,void 0===e.teleportToViewer||e.teleportToViewer){const e=y.attach.value;!e.bottom&&!e.top||e.left||e.right||(t.left="50%",t.transform="translate(-50%, 0)"),!e.left&&!e.right||e.top||e.bottom||(t.top="50%",t.transform="translate(0, -50%)")}Object.assign(O,t)},T=Ho((e=>{var t,i;g.fps=null==(t=e._performanceDisplay)?void 0:t._fpsText.nodeValue,g.ms=null==(i=e._performanceDisplay)?void 0:i._msText.nodeValue,e._performanceDisplay._container.style.display="none"}),250),D=()=>{const{viewer:e}=c,i=e.scene,n=i.screenSpaceCameraController;if(i.mode===Cesium.SceneMode.MORPHING||!n.enableInputs)return;const{Math:o}=Cesium;v.heading=o.toDegrees(e.camera.heading).toFixed(1),v.pitch=o.toDegrees(e.camera.pitch).toFixed(1),v.roll=o.toDegrees(e.camera.roll).toFixed(1),v.height=e.camera.positionCartographic.height.toFixed(2),v.level=ct(Number(v.height)).toFixed(0);Ie(a,"statusBarEvt")&&t.emit("statusBarEvt",{type:"statusBar",mouseCoordsInfo:f.value,cameraInfo:v,performanceInfo:g})},j=i=>{var n;const{Cartesian2:o,SceneMode:r}=Cesium,{viewer:s}=c;if(s.scene.mode===r.MORPHING)return;const l="mousemove"===i.type||"wheel"===i.type?i.clientX:i.changedTouches[0].clientX,u="mousemove"===i.type||"wheel"===i.type?i.clientY:i.changedTouches[0].clientY;if(l===m&&u===h)return;m=l,h=u;const d=s._element;if(s){if(e.showMouseInfo){const e=d.getBoundingClientRect(),t=new o(l-e.left,u-e.top);null==(n=f.value)||n.updateCoordinatesFromCesium(s,t)}Ie(a,"statusBarEvt")&&t.emit("statusBarEvt",{type:"statusBar",mouseCoordsInfo:f.value,cameraInfo:v,performanceInfo:g})}},L=()=>{var t,i;e.useProjection&&(null==(t=Me(d))||t.hide(),e.showMouseInfo&&(null==(i=f.value)||i.toggleUseProjection()))};return Object.assign(a.proxy,{getMouseCoordsInfo:()=>f.value,getCameraInfo:()=>v,getPerformanceInfo:()=>g}),()=>{var n,o,r,a,s,l,m,h;if(w.value){const b=[];e.showMouseInfo?((null==(n=f.value)?void 0:n.useProjection)?b.push(P("div",{class:"vc-section-short ellipsis"},[P("span",{...t.attrs},p("vc.navigation.statusBar.zone")),P("span",null,null==(a=f.value)?void 0:a.utmZone)]),P("div",{class:"vc-section ellipsis"},[P("span",{...t.attrs},p("vc.navigation.statusBar.e")),P("span",null,null==(s=f.value)?void 0:s.east)]),P("div",{class:"vc-section ellipsis"},[P("span",{...t.attrs},p("vc.navigation.statusBar.n")),P("span",null,null==(l=f.value)?void 0:l.north)])):b.push(P("div",{class:"vc-section ellipsis"},[P("span",{...t.attrs},p("vc.navigation.statusBar.lng")),P("span",{},null==(o=f.value)?void 0:o.longitude)]),P("div",{class:"vc-section ellipsis"},[P("span",{},p("vc.navigation.statusBar.lat")),P("span",{},null==(r=f.value)?void 0:r.latitude)])),(null==(m=f.value)?void 0:m.elevation)?b.push(P("div",{class:"vc-section ellipsis"},[P("span",{...t.attrs},p("vc.navigation.statusBar.elev")),P("span",{},null==(h=f.value)?void 0:h.elevation)])):b.push(M("v-if"))):b.push(M("v-if")),e.showCameraInfo?b.push(P("div",{class:"vc-section-short-mini ellipsis"},[P("span",{...t.attrs},p("vc.navigation.statusBar.level")),P("span",null,v.level)]),P("div",{class:"vc-section-short ellipsis"},[P("span",{...t.attrs},p("vc.navigation.statusBar.heading")),P("span",null,`${v.heading}°`)]),P("div",{class:"vc-section-short ellipsis"},[P("span",{...t.attrs},p("vc.navigation.statusBar.pitch")),P("span",null,`${v.pitch}°`)]),P("div",{class:"vc-section-short ellipsis"},[P("span",{...t.attrs},p("vc.navigation.statusBar.roll")),P("span",null,`${v.roll}°`)]),P("div",{class:"vc-section ellipsis"},[P("span",{...t.attrs},p("vc.navigation.statusBar.cameraHeight")),P("span",null,`${v.height}m`)])):b.push(M("v-if")),e.showPerformanceInfo?b.push(P("div",{class:"vc-section-short-mini ellipsis"},[P("span",null,g.ms)]),P("div",{class:"vc-section-short-mini ellipsis"},[P("span",null,g.fps)])):b.push(M("v-if")),i(e.tooltip)&&e.showMouseInfo&&e.useProjection?b.push(P(Vl,{ref:d,...e.tooltip},(()=>P("strong",null,i(e.tooltip)&&e.tooltip.tip||p("vc.navigation.statusBar.tip"))))):b.push(M("v-if"));const w=P(Ol,{ref:u,class:`vc-status-bar ${y.classes.value} ${e.customClass}`,style:O,noCaps:!0,onClick:L},(()=>b));return!C&&e.teleportToViewer?P(I,{to:c.viewer._element},w):w}return M("v-if")}}}),Qc={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>2===e.length},color:{type:String,default:"#fff"},background:{type:String,default:"#3f4854"},width:{type:Number,default:100},barBackground:{type:String,default:"#fff"},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}};const Kc={...Hl,distanceLegendEvt:e=>!0},eu=Qc;var tu=E({name:"VcDistanceLegend",props:eu,emits:Kc,setup(e,t){var i;const r=o();r.cesiumClass="VcDistanceLegend",r.cesiumEvents=[];const s=xo(e,t,r);if(void 0===s)return;const l=De(r),{$services:c}=s,u=n(null),d=n(""),p=tc(e),m="VcNavigation"===(null==(i=l.proxy)?void 0:i.$options.name),h=n(m),v=_({});let g=0;const f=n(0);let y=0;b((()=>e),(e=>{x((()=>{r.mounted&&w()}))}),{deep:!0});const C=a((()=>({width:`${f.value}px`,left:5+(e.width+15-f.value)/2+"px",height:"2px",background:e.barBackground})));r.createCesiumObject=async()=>(d.value="",u),r.mount=async()=>{var e,t;h.value=!0,x((()=>{w()}));const{viewer:i}=c;return i.scene.postRender.addEventListener(O),null==(t=i.viewerWidgetResized)||t.raiseEvent({type:r.cesiumClass,status:"mounted",target:null==(e=Me(u))?void 0:e.$el}),!0},r.unmount=async()=>{var e,t;h.value=!1;const{viewer:i}=c;return i.scene.postRender.removeEventListener(O),null==(t=i.viewerWidgetResized)||t.raiseEvent({type:r.cesiumClass,status:"unmounted",target:null==(e=Me(u))?void 0:e.$el}),!0};const w=()=>{const t=p.style.value;if(v.left=t.left,v.top=t.top,v.transform=t.transform,t.background=e.background,t.color=e.color,void 0===e.teleportToViewer||e.teleportToViewer){const e=p.attach.value;!e.bottom&&!e.top||e.left||e.right||(t.left="50%",t.transform="translate(-50%, 0)"),!e.left&&!e.right||e.top||e.bottom||(t.top="50%",t.transform="translate(0, -50%)")}t.width=`${e.width}px`,Object.assign(v,t)},O=Ho((i=>{const{Cartesian2:n,defined:o,getTimestamp:a,EllipsoidGeodesic:s}=Cesium,l=a();if(l<g+250)return;g=l;const c=new s,u=i.canvas.clientWidth,p=i.canvas.clientHeight,m=i.camera.getPickRay(new n(u/2|0,p-1)),h=i.camera.getPickRay(new n(1+u/2|0,p-1)),v=i.globe,b=v.pick(m,i),C=v.pick(h,i);if(!o(b)||!o(C))return f.value=0,void(d.value="");const w=v.ellipsoid.cartesianToCartographic(b),_=v.ellipsoid.cartesianToCartographic(C);c.setEndPoints(w,_);const O=c.surfaceDistance,x=e.width-10;let P;for(let e=iu.length-1;!o(P)&&e>=0;--e)if(iu[e]/O<x&&(P=iu[e],y!==P)){y=P;Ie(r,"distanceLegendEvt")&&t.emit("distanceLegendEvt",{type:"distanceLegend",distance:y,status:"changed"})}if(o(P)){let e;e=y>=1e3?(P/1e3).toString()+" km":P.toString()+" m",f.value=P/O|0,d.value=e}else f.value=0,d.value=""}),500);return()=>{if(h.value&&void 0!==d.value){const t=P(Ol,{ref:u,class:`vc-distance-legend ${p.classes.value} ${e.customClass}`,style:v,stack:!0,noCaps:!0},(()=>[P("label",null,d.value),P("div",{style:C.value,class:"vc-bar"})]));return!m&&e.teleportToViewer?P(I,{to:c.viewer._element},t):t}return M("v-if")}}});const iu=[1,2,3,5,10,20,30,50,100,200,300,500,1e3,2e3,3e3,5e3,1e4,2e4,3e4,5e4,1e5,2e5,3e5,5e5,1e6,2e6,3e6,5e6,1e7,2e7,3e7,5e7],nu={...ec,compassOpts:{type:[Object,Boolean],default:()=>he(ic,["position","offset"])},zoomOpts:{type:[Object,Boolean],default:()=>he(_c,["position","offset"])},printOpts:{type:[Object,Boolean],default:()=>he(Tc,["position","offset"])},locationOpts:{type:[Object,Boolean],default:()=>he(jc,["position","offset"])},otherOpts:{type:[Object,Boolean],default:()=>({position:"bottom-right",offset:[2,3],statusBarOpts:he(qc,["position","offset"]),distancelegendOpts:he(Qc,["position","offset"])})},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}},ou=he(nu),ru=nu;var au=E({name:"VcNavigation",inheritAttrs:!1,props:ru,emits:{...Hl,zoomEvt:e=>!0,compassEvt:e=>!0,locationEvt:e=>!0,printEvt:e=>!0,statusBarEvt:e=>!0,distanceLegendEvt:e=>!0},setup(e,t){const i=o();i.cesiumClass="VcNavigation";const r=xo(e,t,i);if(void 0===r)return;const s=n(!1),{$services:l}=r,c=tc(e),u=tc(e.otherOpts||{position:"bottom-right"}),d=n(null),p=n(null),m=n(null),h=n(null),v=n(null),g=n(null),f=n(null),y=n(null),C=_({}),w=_({}),{emit:O}=t;b((()=>e),(()=>{x((()=>{var e,t,i,n,o,r;z(),null==(e=Me(m))||e.reload(),null==(t=Me(h))||t.reload(),null==(i=Me(g))||i.reload(),null==(n=Me(v))||n.reload(),null==(o=Me(f))||o.reload(),null==(r=Me(y))||r.reload()}))}),{deep:!0});const S=a((()=>Object.assign({},ou.compassOpts,e.compassOpts))),E=a((()=>Object.assign({},ou.zoomOpts,e.zoomOpts))),T=a((()=>Object.assign({},ou.printOpts,e.printOpts))),D=a((()=>Object.assign({},ou.locationOpts,e.locationOpts))),j=a((()=>Object.assign({},ou.otherOpts,e.otherOpts))),L=e=>{Ie(i,"compassEvt")&&O("compassEvt",e)},A=e=>{Ie(i,"zoomEvt")&&O("zoomEvt",e)},k=e=>{Ie(i,"printEvt")&&O("printEvt",e)},R=e=>{Ie(i,"locationEvt")&&O("locationEvt",e)},V=e=>{Ie(i,"statusBarEvt")&&O("statusBarEvt",e)},B=e=>{Ie(i,"distanceLegendEvt")&&O("distanceLegendEvt",e)};i.createCesiumObject=async()=>{var e;const{viewer:t}=l;return null==(e=t.viewerWidgetResized)||e.addEventListener(N),[d,p]},i.mount=async()=>{var e;s.value=!0,x((()=>{z()}));const{viewer:t}=l;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:i.cesiumClass,status:"mounted",target:Me(d)}),!0},i.unmount=async()=>{var e,t;s.value=!1;const{viewer:n}=l;return null==(e=n.viewerWidgetResized)||e.removeEventListener(N),null==(t=n.viewerWidgetResized)||t.raiseEvent({type:i.cesiumClass,status:"unmounted",target:Me(d)}),!0};const N=()=>{x((()=>{z()}))},z=()=>{var t,i,n,o,r;const a=null==(t=Me(m))?void 0:t.$el;let s=0,l=0;if(void 0!==a&&"#comment"!==a.nodeName){const e=getComputedStyle(a.parentNode).margin;l=parseInt(e),s+=a.getBoundingClientRect().height+2*l}const d=null==(i=Me(h))?void 0:i.$el;void 0!==d&&"#comment"!==d.nodeName&&(s+=d.getBoundingClientRect().height+2*l);const p=null==(n=Me(v))?void 0:n.$el;void 0!==p&&"#comment"!==p.nodeName&&(s+=p.getBoundingClientRect().height+2*l);const y=null==(o=Me(g))?void 0:o.$el;void 0!==y&&"#comment"!==y.nodeName&&(s+=y.getBoundingClientRect().height+2*l);const b=c.style.value,_=c.attach.value;C.left=b.left,C.top=b.top,C.transform=b.transform,(void 0===e.teleportToViewer||e.teleportToViewer)&&(!_.bottom&&!_.top||_.left||_.right||(b.left="50%",b.transform="translate(-50%, 0)"),!_.left&&!_.right||_.top||_.bottom||(b.top="50%",b.transform="translate(0, -50%)")),Object.assign(C,b,{height:`${s}px`});const O=u.style.value,x=u.attach.value;w.left=O.left,w.top=O.top,w.transform=O.transform,(void 0===e.teleportToViewer||e.teleportToViewer)&&(!x.bottom&&!x.top||x.left||x.right||(O.left="50%",O.transform="translate(-50%, 0)"),!x.left&&!x.right||x.top||x.bottom||(O.top="50%",O.transform="translate(0, -50%)"));let P=0;const S=null==(r=Me(f))?void 0:r.$el;void 0!==S&&"#comment"!==S.nodeName&&(P+=S.getBoundingClientRect().height),Object.assign(w,O,{height:`${P}px`})};return()=>{if(s.value){const i=[];S.value&&!1!==e.compassOpts?i.push(P("div",{class:"vc-navigation-control"},[P(wc,{ref:m,...S.value,onCompassEvt:L})])):i.push(M("v-if")),E.value&&!1!==e.zoomOpts?i.push(P("div",{class:"vc-navigation-control"},[P(Sc,{ref:h,...E.value,onZoomEvt:A})])):i.push(M("v-if")),T.value&&!1!==e.printOpts?i.push(P("div",{class:"vc-navigation-control"},[P(Dc,{ref:v,...T.value,onPrintEvt:k})])):i.push(M("v-if")),D.value&&!1!==e.locationOpts?i.push(P("div",{class:"vc-navigation-control"},[P(kc,{ref:g,...D.value,onLocationEvt:R})])):i.push(M("v-if"));let n=[P("div",{class:"vc-navigation-controls"},i)];n=La(t.slots.default,n);const o=[],r=P("div",{ref:d,class:`vc-navigation ${c.classes.value} ${e.customClass}`,style:C},n);if(e.teleportToViewer?o.push(P(I,{to:l.viewer._element},r)):o.push(r),!1!==e.otherOpts){const t=P("div",{ref:p,class:"vc-location-other-controls "+u.classes.value,style:w},[P(Xc,{ref:f,...j.value.statusBarOpts,onStatusBarEvt:V}),P(tu,{ref:y,...j.value.distancelegendOpts,onDistanceLegendEvt:B})]);e.teleportToViewer?o.push(P(I,{to:l.viewer._element},t)):o.push(t)}return o}return M("v-if")}}});function su(e,{emit:t},i){const o={},r={},a={},s={};let l,c,u,d;const p=n(0);let m,v,g,f,y,b=0,C={},w=0,_={},O=0;const x=n(56),P=n(3);let S;const E=n(null),T=()=>{const{defined:e}=Cesium;e(i.viewer)?(l&&(l(),l=void 0),l=i.viewer.scene.postRender.addEventListener((function(){p.value!==i.viewer.scene.camera.heading&&(p.value=i.viewer.scene.camera.heading)}))):l&&(l(),l=void 0)},I=(e,n)=>{const{defined:o,getTimestamp:r,SceneMode:a,Math:s,ScreenSpaceEventType:l}=Cesium,p=i.viewer.scene,m=p.screenSpaceCameraController;switch(p.mode){case a.COLUMBUS_VIEW:if(m.enableLook)break;if(!m.enableTranslate||!m.enableTilt)return;break;case a.SCENE3D:if(m.enableLook)break;if(!m.enableTilt||!m.enableRotate)return;break;case Cesium.SceneMode.SCENE2D:if(!m.enableTranslate)return}g.removeInputAction(l.LEFT_UP),o(d)&&i.viewer.clock.onTick.removeEventListener(d),u=void 0,d=void 0,r();let h=s.PI_OVER_TWO-Math.atan2(-n.y,n.x);const v=Math.PI/4;let f=0;const y=1,b=2,C=3,w=4;f=h>=-v&&v>=h?w:h>=v&&3*v>=h?b:h>=3*v&&5*v>=h?C:y;const _=Ie(i,"compassEvt");let O="rotateEast";switch(f){case y:O="rotateWest";break;case b:O="rotateEast";break;case C:O="rotateNorth";break;case w:O="rotateSouth"}_&&t("compassEvt",{type:O,camera:p.camera,status:"start",target:e}),d=function(n){const o=i.viewer.scene,a=o.camera;switch(r(),h=20*Math.abs(a.positionCartographic.height/6378317)*5e-4,f){case y:a.rotateLeft(h);break;case b:a.rotateRight(h);break;case C:a.rotate(a.right,-h);break;case w:a.rotate(a.right,h)}_&&t("compassEvt",{type:O,camera:o.camera,status:"changing",target:e})},u=function(n){g.removeInputAction(l.LEFT_UP),o(d)&&i.viewer.clock.onTick.removeEventListener(d),u=void 0,d=void 0,_&&t("compassEvt",{type:O,camera:p.camera,status:"end",target:e})},g.setInputAction(u,l.LEFT_UP),c=i.viewer.clock.onTick.addEventListener(d)},M=(n,l)=>{if(!e.enableCompassOuterRing)return;const c=i.viewer.scene;let u=c.camera;const d=c.screenSpaceCameraController;if(c.mode===Cesium.SceneMode.MORPHING||c.mode===Cesium.SceneMode.SCENE2D||!d.enableInputs)return;if(!d.enableLook&&(c.mode===Cesium.SceneMode.COLUMBUS_VIEW||c.mode===Cesium.SceneMode.SCENE3D&&!d.enableRotate))return;document.removeEventListener("mousemove",v,!1),document.removeEventListener("touchmove",v,!1),document.removeEventListener("mouseup",m,!1),document.removeEventListener("touchend",m,!1);const{Cartesian2:p,Cartesian3:h,defined:g,Math:f,Matrix4:y,Ray:_,Transforms:O}=Cesium;v=void 0,m=void 0;const x=Ie(i,"compassEvt");x&&t("compassEvt",{type:"rotate",camera:c.camera,status:"start",target:n}),b=Math.atan2(-l.y,l.x);const P=new p;P.x=c.canvas.clientWidth/2,P.y=c.canvas.clientHeight/2;const S=new _,E=u.getPickRay(P,S),T=c.globe.pick(E,c,s);C=g(T)?O.eastNorthUpToFixedFrame(T||new h,c.globe.ellipsoid,a):O.eastNorthUpToFixedFrame(u.positionWC,c.globe.ellipsoid,a);let I=y.clone(u.transform,r);u.lookAtTransform(C),w=Math.atan2(u.position.y,u.position.x),h.magnitude(new h(u.position.x,u.position.y,0)),u.lookAtTransform(I),v=function(e){const a=n.getBoundingClientRect(),s=new p((a.right-a.left)/2,(a.bottom-a.top)/2);let l;e instanceof MouseEvent?l=new p(e.clientX-a.left,e.clientY-a.top):e instanceof TouchEvent&&(l=new p(e.changedTouches[0].clientX-a.left,e.changedTouches[0].clientY-a.top));const d=p.subtract(l,s,o),m=Math.atan2(-d.y,d.x)-b,h=f.zeroToTwoPi(w-m);u=i.viewer.scene.camera,I=y.clone(u.transform,r),u.lookAtTransform(C);const v=Math.atan2(u.position.y,u.position.x);u.rotateRight(h-v),u.lookAtTransform(I),x&&t("compassEvt",{type:"rotate",camera:c.camera,status:"changing",target:n})},m=function(e){document.removeEventListener("mousemove",v,!1),document.removeEventListener("touchmove",v,!1),document.removeEventListener("mouseup",m,!1),document.removeEventListener("touchend",m,!1),v=void 0,m=void 0,x&&t("compassEvt",{type:"rotate",camera:c.camera,status:"end",target:n})},document.addEventListener("mousemove",v,!1),document.addEventListener("touchmove",v,!1),document.addEventListener("mouseup",m,!1),document.addEventListener("touchend",m,!1)},D=(e,n)=>{const{Cartesian2:a,defined:s,Math:l,Matrix4:c,ScreenSpaceEventType:u,Transforms:d}=Cesium;g.removeInputAction(u.MOUSE_MOVE),g.removeInputAction(u.LEFT_UP),f=void 0,y=void 0,O=l.PI_OVER_TWO-Math.atan2(-n.y,n.x),O=O<0?0:O,O=O>l.PI_OVER_TWO?l.PI_OVER_TWO:O;const p=i.viewer.scene,m=p.camera,v=new a;v.x=p.canvas.clientWidth/2,v.y=p.canvas.clientHeight/2;let b=m.pickEllipsoid(v,p.globe.ellipsoid);if(!s(b))for(;v.y<p.canvas.clientHeight;)v.y+=5,b=m.pickEllipsoid(v,p.globe.ellipsoid);const C=Ie(i,"compassEvt");C&&t("compassEvt",{type:"tilt",camera:p.camera,status:"start",target:e}),h(b)&&s(b)&&(_=d.eastNorthUpToFixedFrame(b,p.globe.ellipsoid)),f=n=>{const s=e.getBoundingClientRect(),u=new Cesium.Cartesian2((s.right-s.left)/2,(s.bottom-s.top)/2),d=a.clone(n.endPosition),m=a.subtract(d,u,o);let h=l.PI_OVER_TWO-Math.atan2(-m.y,m.x);h=h<0?0:h,h=h>l.PI_OVER_TWO?l.PI_OVER_TWO:h;const v=i.viewer.scene.camera,g=c.clone(v.transform,r);v.lookAtTransform(_);const f=h-O;v.rotateUp(f),O=h,v.lookAtTransform(g);let y=Math.ceil(h/(Math.PI/40));y=y>19?19:y;const b=[{x:56,y:3},{x:59,y:4},{x:64,y:5},{x:69,y:6},{x:74,y:7},{x:79,y:9},{x:84,y:12},{x:89,y:15},{x:92,y:19},{x:94,y:20},{x:99,y:25},{x:104,y:34},{x:106,y:40},{x:107,y:44},{x:107,y:46},{x:107,y:48},{x:107,y:50},{x:107,y:52},{x:107,y:54},{x:107,y:56}][y];x.value=b.x,P.value=b.y,C&&t("compassEvt",{type:"tilt",camera:p.camera,status:"changing",target:e})},y=function(i){g.removeInputAction(u.MOUSE_MOVE),g.removeInputAction(u.LEFT_UP),f=void 0,y=void 0,C&&t("compassEvt",{type:"tilt",camera:p.camera,status:"end",target:e})},g.setInputAction(f,u.MOUSE_MOVE),g.setInputAction(y,u.LEFT_UP)};return{heading:p,handleDoubleClick:n=>{const{Cartesian2:o,Cartesian3:r,defined:a,Matrix4:l,Ray:c,SceneMode:u,Transforms:d}=Cesium,{viewer:p}=i,m=p.scene,h=m.camera,v=m.screenSpaceCameraController;if(m.mode===u.MORPHING||!v.enableInputs)return!0;if(m.mode===u.COLUMBUS_VIEW&&!v.enableTranslate)return;if(m.mode===u.SCENE3D||m.mode===u.COLUMBUS_VIEW){if(!v.enableLook)return;if(m.mode===u.SCENE3D&&!v.enableRotate)return}const g=new o;g.x=m.canvas.clientWidth/2,g.y=m.canvas.clientHeight/2;const f=new c,y=h.getPickRay(g,f),b=m.globe.pick(y,m,s);if(!a(b))return void p.camera.flyHome();const C=Ie(i,"compassEvt");C&&t("compassEvt",{type:"reset",camera:p.camera,status:"start",target:n.currentTarget});const w=d.eastNorthUpToFixedFrame(b||new r,p.scene.globe.ellipsoid),_=r.subtract(b||new r,h.position,new r),O=oc.createTween(m,{destination:l.multiplyByPoint(w,new r(0,0,r.magnitude(_)),new r),direction:l.multiplyByPointAsVector(w,new r(0,0,-1),new r),up:l.multiplyByPointAsVector(w,new r(0,1,0),new r),duration:e.duration,complete:()=>{C&&t("compassEvt",{type:"reset",camera:p.camera,status:"end",target:n.currentTarget})},cancel:()=>{C&&t("compassEvt",{type:"reset",camera:p.camera,status:"cancel",target:n.currentTarget})}});m.tweens.add(O)},handleMouseDown:e=>{var t;e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),null==(t=Me(E))||t.hide();const{Cartesian2:n,SceneMode:r,Math:a}=Cesium;if(i.viewer.scene.mode===r.MORPHING)return!0;const s=e.currentTarget,l=e.currentTarget.getBoundingClientRect(),c=new n((l.right-l.left)/2,(l.bottom-l.top)/2);let u;e instanceof MouseEvent?(u=new n(e.clientX-l.left,e.clientY-l.top),S=new n(e.clientX,e.clientY)):e instanceof TouchEvent&&(u=new n(e.changedTouches[0].clientX-l.left,e.changedTouches[0].clientY-l.top),S=new n(e.changedTouches[0].clientX,e.changedTouches[0].clientY));const d=n.subtract(u,c,o),p=n.magnitude(d);if(p>30&&p<45)M(s,d);else if(p>50&&p<70){const e=a.PI_OVER_TWO-Math.atan2(-d.y,d.x);e>=0&&e<=a.PI_OVER_TWO&&D(s,d)}else I(s,d)},handleMouseUp:e=>{const{Cartesian2:t,Math:n}=Cesium,r=e.currentTarget.getBoundingClientRect(),a=new t((r.right-r.left)/2,(r.bottom-r.top)/2),s="mouseup"===e.type?new t(e.clientX-r.left,e.clientY-r.top):new t(e.changedTouches[0].clientX-r.left,e.changedTouches[0].clientY-r.top),l=t.subtract(s,a,o),c=t.magnitude(l);if(c>30&&c<45){const o=n.toDegrees(Math.atan2(-l.y,l.x)),r="mouseup"===e.type?new t(e.clientX,e.clientY):new t(e.changedTouches[0].clientX,e.changedTouches[0].clientY),a=r.x-S.x,s=r.y-S.y;if(Math.sqrt(a*a+s*s)>5)return;const c=n.toDegrees(p.value),u=Math.abs(o-c),d=i.viewer.scene;(o>0&&c>0&&c<90&&u>80&&u<100||u>260&&u<280)&&d.camera.flyTo({destination:d.camera.position,orientation:{heading:0,pitch:d.camera.pitch}})}},onTooltipBeforeShow:e=>{void 0!==v&&(e.cancel=!0)},viewerChange:T,load:async(e,t)=>(i.viewer=e,p.value=e.scene.camera.heading,T(),g=new Cesium.ScreenSpaceEventHandler(t),(()=>{const{Math:e}=Cesium,t=e.PI_OVER_TWO+i.viewer.scene.camera.pitch,n=Math.PI/2/20;let o=Math.floor(t/n);o=o>19?19:o,o=o<0?0:o,x.value=[{x:56,y:3},{x:59,y:4},{x:64,y:5},{x:69,y:6},{x:74,y:7},{x:79,y:9},{x:84,y:12},{x:89,y:15},{x:92,y:19},{x:94,y:20},{x:99,y:25},{x:104,y:34},{x:106,y:40},{x:107,y:44},{x:107,y:46},{x:107,y:48},{x:107,y:50},{x:107,y:52},{x:107,y:54},{x:107,y:56}][o].x,P.value=[{x:56,y:3},{x:59,y:4},{x:64,y:5},{x:69,y:6},{x:74,y:7},{x:79,y:9},{x:84,y:12},{x:89,y:15},{x:92,y:19},{x:94,y:20},{x:99,y:25},{x:104,y:34},{x:106,y:40},{x:107,y:44},{x:107,y:46},{x:107,y:48},{x:107,y:50},{x:107,y:52},{x:107,y:54},{x:107,y:56}][o].y})(),!0),unload:async()=>(document.removeEventListener("mousemove",v,!1),document.removeEventListener("touchmove",v,!1),document.removeEventListener("mouseup",m,!1),document.removeEventListener("touchend",m,!1),c&&c(),l&&l(),null==g||g.destroy(),!0),tiltbarLeft:x,tiltbarTop:P,tooltipRef:E}}const lu={enableCompassOuterRing:{type:Boolean,default:!0},duration:{type:Number,default:1.5},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},autoHidden:{type:Boolean,default:!0},...ec};var cu=E({name:"VcCompassSm",props:lu,emits:{...Hl,compassEvt:e=>!0},setup(e,t){var i;const r=o();r.cesiumClass="VcCompassSm";const s=xo(e,t,r);if(void 0===s)return;yo();const l=De(r),{$services:c}=s,u=su(e,t,r),d=tc(e),p=n(null),m=n(null),h="VcNavigationSm"===(null==(i=l.proxy)?void 0:i.$options.name),v=n(h),g=_({});b((()=>e),(e=>{x((()=>{r.mounted&&w()}))}),{deep:!0});const f=a((()=>({left:u.tiltbarLeft.value+"px",top:u.tiltbarTop.value+"px",visibility:e.autoHidden?"hidden":"visible"}))),y=a((()=>({visibility:e.autoHidden?"hidden":"visible"}))),C=a((()=>({transform:"rotate(-"+u.heading.value+"rad)",WebkitTransform:"rotate(-"+u.heading.value+"rad)"})));r.createCesiumObject=async()=>{v.value=!0;const{viewer:e}=c;return new Promise(((t,i)=>{x((()=>{if(h)t(Me(p));else{e._element.appendChild(Me(p)),t(Me(p))}}))}))},r.mount=async()=>{var e;w();const{viewer:t}=c;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:r.cesiumClass,status:"mounted",target:Me(p)}),u.load(c.viewer,Me(p))},r.unmount=async()=>{var e;const{viewer:t}=c,i=t._element;return h||i.contains(Me(p))&&i.removeChild(Me(p)),null==(e=t.viewerWidgetResized)||e.raiseEvent({type:r.cesiumClass,status:"unmounted",target:Me(p)}),u.unload()};const w=()=>{const e=d.style.value;g.left=e.left,g.top=e.top,g.transform=e.transform;const t=d.attach.value,i=Me(m);if(void 0!==i){const n=null==i?void 0:i.getBoundingClientRect();e.width=`${null==n?void 0:n.width}px`,e.height=`${null==n?void 0:n.height}px`,!t.bottom&&!t.top||t.left||t.right||(e.left="50%",e.transform="translate(-50%, 0)"),!t.left&&!t.right||t.top||t.bottom||(e.top="50%",e.transform="translate(0, -50%)")}Object.assign(g,e)};return()=>{if(v.value){let e=[];return e=La(t.slots.default,e),e.push(P("div",{class:"vc-compass-tilt-sm",style:y.value})),e.push(P("div",{class:"vc-compass-tiltbar-sm",style:f.value})),e.push(P("div",{class:"vc-compass-arrows-sm",style:y.value})),e.push(P("div",{ref:m,class:"vc-compass-outer-ring-sm",style:C.value})),e.push(P("div",{class:"vc-arrows-e-sm",style:y.value})),e.push(P("div",{class:"vc-arrows-n-sm",style:y.value})),e.push(P("div",{class:"vc-arrows-s-sm",style:y.value})),e.push(P("div",{class:"vc-arrows-w-sm",style:y.value})),P("div",{ref:p,class:"vc-compass-sm "+d.classes.value,style:g,onMousedown:u.handleMouseDown,onMouseup:u.handleMouseUp,onTouchend:u.handleMouseUp,onTouchstart:u.handleMouseDown},e)}return M("v-if")}}});const uu={...ec,autoHidden:{type:Boolean,default:!1},tooltip:{type:Object,default:()=>({delay:1e3,anchor:"bottom middle",offset:[0,20],zoomInTip:void 0,zoomOutTip:void 0,zoomBarTip:void 0})}};var du=E({name:"VcZoomControlSm",props:uu,emits:{...Hl,zoomEvt:e=>!0},setup(e,t){var i;const r=o();r.cesiumClass="VcZoomControlSm",r.cesiumEvents=[];const s=n(),l=n(),c=n(),u=n(),d="VcNavigationSm"===(null==(i=De(r).proxy)?void 0:i.$options.name),p=n(d),m=_({}),v=xo(e,t,r);if(void 0===v)return;const{t:g}=yo(),{$services:f}=v,y=tc(e),C=function(e,{emit:t},i,o){const r=n(65),a=n(null),s=n(null),l=n(null);let c,u,d,p,m,v,g,f,y,b,C,w;const _=e=>{const{Cartesian2:n,Cartesian3:r,defined:a,Ellipsoid:s,Math:l}=Cesium,{viewer:c}=o,u=c.scene,d=u.camera,p=u.canvas,m=new n;m.x=p.clientWidth/2,m.y=p.clientHeight/2;const v=O(m);if(a(v)){const n=r.distance(d.position,v);let o=.0618*e*.2;o=n>300?o:2*o;const s=n*o,u=new r;r.subtract(v,d.position,u);const p=r.clone(d.right),g=r.dot(u,p),f=new r;r.multiplyByScalar(p,g,f),r.subtract(u,f,u),r.normalize(u,u),d.move(u,s);const y=new r;r.normalize(v,y);const b=d.pickEllipsoid(m,c.scene.globe.ellipsoid);if(h(b)&&a(b)&&!isNaN(b.x)&&!isNaN(b.y)&&!isNaN(b.z)&&!(d.positionCartographic.height<0)){r.normalize(b,b);const n=r.angleBetween(y,b);if(!l.equalsEpsilon(n,0,l.EPSILON10)){const o=r.cross(y,b,new r);d.rotate(o,n),Ie(i,"zoomEvt")&&t("zoomEvt",{type:1===e?"zoomIn":"zoomOut",camera:c.camera,status:"end"})}}}},O=e=>{const{defined:t,Cartesian3:i}=Cesium,{viewer:n}=o,r=n.scene,a=r.globe,s=r.camera;if(t(a)){let n;r.pickPositionSupported&&(n=r.pickPositionWorldCoordinates(e));const o=s.getPickRay(e),l=a.pick(o,r),c=t(n)?i.distance(n,s.positionWC):Number.POSITIVE_INFINITY;return(h(l)&&t(l)?i.distance(l,s.positionWC):Number.POSITIVE_INFINITY)>c?n:l}};return{handleZoomInMouseDown:e=>{var t,i,n;const{defined:r,getTimestamp:m,SceneMode:h,ScreenSpaceEventType:v}=Cesium,{viewer:g}=o;null==(t=Me(a))||t.hide(),null==(i=Me(s))||i.hide(),null==(n=Me(l))||n.hide(),c.removeInputAction(v.LEFT_UP),r(u)&&g.clock.onTick.removeEventListener(u),d=void 0,u=void 0,m();const f=g.scene.camera;u=()=>{g.scene.mode===h.COLUMBUS_VIEW||g.scene.mode===h.SCENE2D?f.zoomIn():_(1)},d=()=>{c.removeInputAction(v.LEFT_UP),r(u)&&g.clock.onTick.removeEventListener(u),d=void 0,u=void 0},c.setInputAction(d,v.LEFT_UP),p=g.clock.onTick.addEventListener(u)},handleZoomOutMouseDown:e=>{var t,i,n;null==(t=Me(a))||t.hide(),null==(i=Me(s))||i.hide(),null==(n=Me(l))||n.hide();const{defined:r,getTimestamp:u,SceneMode:d,ScreenSpaceEventType:p}=Cesium,{viewer:h}=o;c.removeInputAction(p.LEFT_UP),r(m)&&h.clock.onTick.removeEventListener(m),v=void 0,m=void 0,u();const f=h.scene.camera;m=()=>{h.scene.mode===d.COLUMBUS_VIEW||h.scene.mode===d.SCENE2D?f.zoomOut():_(-1)},v=()=>{c.removeInputAction(p.LEFT_UP),r(m)&&h.clock.onTick.removeEventListener(m),v=void 0,m=void 0},c.setInputAction(v,p.LEFT_UP),g=h.clock.onTick.addEventListener(m)},handleZoomBarScrollMouseDown:e=>{var t,i,n;null==(t=Me(a))||t.hide(),null==(i=Me(s))||i.hide(),null==(n=Me(l))||n.hide();const{Cartesian2:c,defined:u,SceneMode:d}=Cesium,{viewer:p}=o;document.removeEventListener("mousemove",f,!1),document.removeEventListener("touchmove",f,!1),document.removeEventListener("mouseup",y,!1),document.removeEventListener("touchend",y,!1),u(b)&&p.clock.onTick.removeEventListener(b),y=void 0,b=void 0;const m=p.scene.camera;b=()=>{const e=r.value-65;e>0?p.scene.mode===d.COLUMBUS_VIEW||p.scene.mode===d.SCENE2D?m.zoomOut():_(-1):e<0&&(p.scene.mode===d.COLUMBUS_VIEW||p.scene.mode===d.SCENE2D?m.zoomIn():_(1))},f=e=>{const t=r.value,i=e.target.parentElement.getBoundingClientRect(),n=w.getBoundingClientRect(),o=new Cesium.Cartesian2;o.x="touchmove"===e.type?e.changedTouches[0].clientX-n.left:e.clientX-n.left,o.y="touchmove"===e.type?e.changedTouches[0].clientY-n.top:e.clientY-n.top;let a=new c(i.width-o.x,i.height-o.y).y-16;a=a<0?0:a,a=a>120?120:a,r.value=120-a,r.value-t>0?p.scene.mode===d.COLUMBUS_VIEW||p.scene.mode===d.SCENE2D?m.zoomOut():_(-1):p.scene.mode===d.COLUMBUS_VIEW||p.scene.mode===d.SCENE2D?m.zoomIn():_(1)},y=()=>{document.removeEventListener("mousemove",f,!1),document.removeEventListener("touchmove",f,!1),document.removeEventListener("mouseup",y,!1),document.removeEventListener("touchend",y,!1),u(b)&&p.clock.onTick.removeEventListener(b),y=void 0,f=void 0,b=void 0,r.value=65},document.addEventListener("mousemove",f,!1),document.addEventListener("touchmove",f,!1),document.addEventListener("mouseup",y,!1),document.addEventListener("touchend",y,!1),C=p.clock.onTick.addEventListener(b)},load:e=>(w=e,c=new Cesium.ScreenSpaceEventHandler(e),!0),unload:()=>(document.removeEventListener("mousemove",f,!1),document.removeEventListener("touchmove",f,!1),document.removeEventListener("mouseup",y,!1),document.removeEventListener("touchend",y,!1),null==p||p(),null==g||g(),null==C||C(),null==c||c.destroy(),!0),zoombarTop:r,zoomInTooltipRef:a,zoomOutTooltipRef:s,zoomBarTooltipRef:l,onTooltipBeforeShow:e=>{void 0===f&&void 0===u&&void 0===m||(e.cancel=!0)}}}(0,t,r,f);b((()=>e),(e=>{x((()=>{r.mounted&&O()}))}),{deep:!0});const w=a((()=>({top:C.zoombarTop.value+"px"})));r.createCesiumObject=async()=>new Promise(((e,t)=>{p.value=!0,x((()=>{const t=Me(s),{viewer:i}=f;if(d)e(t);else{const n=i._element;h(t)&&(null==n||n.appendChild(t)),e(t)}}))})),r.mount=async()=>{var e;O();const{viewer:t}=f;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:r.cesiumClass,status:"mounted",target:Me(s)}),C.load(Me(s))},r.unmount=async()=>{var e;const{viewer:t}=f;if(!d){const e=t._element,i=Me(s);h(i)&&(null==e?void 0:e.contains(i))&&e.removeChild(i)}return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:r.cesiumClass,status:"unmounted",target:Me(s)}),C.unload()};const O=()=>{const t=y.style.value;if(m.left=t.left,m.top=t.top,m.transform=t.transform,m.visibility=e.autoHidden?"hidden":"visible",!d){const e=y.attach.value;!e.bottom&&!e.top||e.left||e.right||(t.left="50%",t.transform="translate(-50%, 0)"),!e.left&&!e.right||e.top||e.bottom||(t.top="50%",t.transform="translate(0, -50%)")}Object.assign(m,t)};return()=>{if(p.value){let i=[];return i=La(t.slots.default,i),i.push(P("div",{ref:l,class:"vc-zoomin-sm",onMousedown:C.handleZoomInMouseDown,onTouchstart:C.handleZoomInMouseDown},e.tooltip?P(Vl,{ref:C.zoomInTooltipRef,...e.tooltip,onBeforeShow:C.onTooltipBeforeShow},(()=>P("strong",{},e.tooltip.zoomInTip||g("vc.navigationSm.zoomCotrol.zoomInTip")))):M("v-if"))),i.push(P("div",{ref:u,class:"vc-zoomout-sm",onMousedown:C.handleZoomOutMouseDown,onTouchstart:C.handleZoomOutMouseDown},e.tooltip?P(Vl,{ref:C.zoomInTooltipRef,...e.tooltip,onBeforeShow:C.onTooltipBeforeShow},(()=>P("strong",{},e.tooltip.zoomOutTip||g("vc.navigationSm.zoomCotrol.zoomOutTip")))):M("v-if"))),i.push(P("div",{ref:c,class:"vc-zoombar-sm",style:w.value,onMousedown:C.handleZoomBarScrollMouseDown,onTouchstart:C.handleZoomBarScrollMouseDown},e.tooltip?P(Vl,{ref:C.zoomInTooltipRef,...e.tooltip,onBeforeShow:C.onTooltipBeforeShow},(()=>P("strong",{},e.tooltip.zoomBarTip||g("vc.navigationSm.zoomCotrol.zoomBarTip")))):M("v-if"))),P("div",{ref:s,class:"vc-zoom-control-sm "+y.classes.value,style:m},i)}return M("v-if")}}});const pu={enableCompassOuterRing:!0,duration:1.5,autoHidden:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}},mu={autoHidden:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}},hu={...ec,compassOpts:{type:[Boolean,Object],default:()=>pu},zoomOpts:{type:[Boolean,Object],default:()=>mu}};var vu=E({name:"VcNavigationSm",inheritAttrs:!1,props:hu,emits:{...Hl,zoomEvt:e=>!0,compassEvt:e=>!0},setup(e,t){const i=o();i.cesiumClass="VcNavigationSm";const r=xo(e,t,i);if(void 0===r)return;const s=n(!1),{$services:l}=r,c=tc(e),u=n(null),d=n(null),p=n(null),m=_({}),{emit:h}=t;b((()=>e),(()=>{x((()=>{var e,t;w(),null==(e=Me(d))||e.reload(),null==(t=Me(p))||t.reload()}))}),{deep:!0});const v=a((()=>Object.assign({},pu,e.compassOpts))),g=a((()=>Object.assign({},mu,e.zoomOpts))),f=e=>{Ie(i,"compassEvt")&&h("compassEvt",e)},y=e=>{Ie(i,"zoomEvt")&&h("zoomEvt",e)};i.createCesiumObject=async()=>{var e;s.value=!0;const{viewer:t}=l;return null==(e=t.viewerWidgetResized)||e.addEventListener(C),new Promise(((e,i)=>{x((()=>{t._element.appendChild(Me(u)),e(Me(u))}))}))},i.mount=async()=>{var e;w();const{viewer:t}=l;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:i.cesiumClass,status:"mounted",target:Me(u)}),!0},i.unmount=async()=>{var e,t;const{viewer:n}=l,o=n._element;return o.contains(Me(u))&&o.removeChild(Me(u)),null==(e=n.viewerWidgetResized)||e.removeEventListener(C),null==(t=n.viewerWidgetResized)||t.raiseEvent({type:i.cesiumClass,status:"unmounted",target:Me(u)}),!0};const C=()=>{x((()=>{w()}))},w=()=>{const e=c.style.value,t=c.attach.value;m.left=e.left,m.top=e.top,m.transform=e.transform,!t.bottom&&!t.top||t.left||t.right||(e.left="50%",e.transform="translate(-50%, 0)"),!t.left&&!t.right||t.top||t.bottom||(e.top="50%",e.transform="translate(0, -50%)"),Object.assign(m,e)};return()=>{if(s.value){let i=[];return i=La(t.slots.default,i),v.value&&!1!==e.compassOpts&&i.push(P(cu,{ref:d,onCompassEvt:f,...v.value})),g.value&&!1!==e.zoomOpts&&i.push(P(du,{ref:p,onZoomEvt:y,...g.value})),P("div",{ref:u,class:"vc-navigation-sm "+c.classes.value,style:m},i)}return M("v-if")}}});const gu={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left"].includes(e)},offset:{type:Array,validator:e=>2===e.length},width:{type:String,default:"150px"},height:{type:String,default:"150px"},border:{type:String,default:"solid 4px rgb(255, 255, 255)"},borderRadius:{type:String},toggleOpts:{type:Object},viewerOpts:{type:Object},centerRectColor:{type:[Object,Array,String],default:"#ff000080"},widthFactor:{type:Number,default:2},heightFactor:{type:Number,default:2},modelValue:{type:Boolean,default:!0}};var fu=E({name:"VcOverviewMap",props:gu,emits:{...Hl,"update:modelValue":e=>!0},setup(e,t){const i=o();i.cesiumClass="VcOverviewMap",i.cesiumEvents=[];const r=xo(e,t,i);if(void 0===r)return;const{t:s}=yo(),{$services:l}=r,c=n(null),u=n(null),d=_({}),p=n(null),m=n(null),h=tc(e),v=n(e.modelValue);let g,y,b=[];const C=a((()=>Object.assign({},{color:"#fff",background:"#3f4854",icon:"vc-icons-overview-toggle",size:"15px",tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}},e.toggleOpts))),w=a((()=>Object.assign({},{removeCesiumScript:!1,showCredit:!1,sceneMode:2,containerId:"vc-overview-map"},e.viewerOpts)));i.createCesiumObject=async()=>{const{viewer:e}=l;return e._element.appendChild(Me(c)),[Me(c),Me(m)]},i.mount=async()=>{S();const{viewer:e}=l;return e.clock.onTick.addEventListener(O),!0},i.unmount=async()=>{const{viewer:e}=l,t=e._element;return e.clock.onTick.removeEventListener(O),t.contains(Me(c))&&t.removeChild(Me(c)),!0};const O=()=>{if(g){const{viewer:t}=l,i=t.camera.computeViewRectangle(),{defined:n}=Cesium;if(!n(i))return;const o=i.expand(e.widthFactor,e.heightFactor);g.camera.flyTo({destination:o.clone(),orientation:{heading:t.camera.heading,pitch:t.camera.pitch,roll:t.camera.roll},duration:0});const{Cartesian3:r,SceneTransforms:a}=Cesium,s=r.fromRadians(i.west,i.north),c=r.fromRadians(i.east,i.north),u=r.fromRadians(i.west,i.south),d=r.fromRadians(i.east,i.south),p=g.scene,m=a.wgs84ToWindowCoordinates(p,s),h=a.wgs84ToWindowCoordinates(p,c),v=a.wgs84ToWindowCoordinates(p,u),f=a.wgs84ToWindowCoordinates(p,d);if(!(n(m)&&n(h)&&n(v)&&n(f)))return;const b=h.x-m.x,C=v.y-m.y,w=(m.x+h.x)/2-b/2,_=(m.y+v.y)/2-C/2;if(b<=0||C<=0)return;const O=new Cesium.BoundingRectangle(w,_,b,C);y.rectangle=O,y.material.uniforms.color=$e(e.centerRectColor),y.show=!0}},x=e=>{const{viewer:t}=e;g=t;const i=t.scene.screenSpaceCameraController;i.enableRotate=!1,i.enableTranslate=!1,i.enableZoom=!1,i.enableTilt=!1,i.enableLook=!1,g.scene.highDynamicRange=!1,g.scene.globe.enableLighting=!1,g.scene.globe.showWaterEffect=!1,g.scene.globe.depthTestAgainstTerrain=!1,g.scene.skyAtmosphere.show=!1,g.scene.fog.enabled=!1,g.scene.skyBox.show=!1,g.scene.sun.show=!1,g.scene.moon.show=!1,g.scene.highDynamicRange=!1,g.scene.globe.showGroundAtmosphere=!1,y=new Cesium.ViewportQuad(new Cesium.BoundingRectangle(150,100,100,50)),y.show=!1,g.scene.primitives.add(y)},S=()=>{var t;const i=h.style.value;if(d.left=i.left,d.top=i.top,d.transform=i.transform,d["pointer-events"]="none",i.borderRadius=e.borderRadius,i.border=e.border,v.value)i.width=e.width,i.height=e.height;else{const n=/(\d+)/g.exec(e.border),o=(null==n?void 0:n.length)?parseFloat(n[0]):0,r=getComputedStyle(null==(t=Me(u))?void 0:t.$el);i.width=`${parseFloat(r.width)+parseFloat(r.padding)+o}px`,i.height=`${parseFloat(r.height)+parseFloat(r.padding)+o}px`}Object.assign(d,i)},E=()=>{v.value?T():I(),v.value=!v.value,t.emit("update:modelValue",v.value)},T=()=>{var t;const i=/(\d+)/g.exec(e.border),n=(null==i?void 0:i.length)?parseFloat(i[0]):0,o=getComputedStyle(null==(t=Me(u))?void 0:t.$el);d.width=`${parseFloat(o.width)+parseFloat(o.padding)+n}px`,d.height=`${parseFloat(o.height)+parseFloat(o.padding)+n}px`},I=()=>{d.width=e.width,d.height=e.height};return f((()=>{b.forEach((e=>e())),b=[]})),()=>{const i=[];return i.push(P(Ol,{ref:u,class:"toggle toggle-"+e.position+(v.value?"":" minimized "),flat:!0,dense:!0,icon:C.value.icon,size:C.value.size,style:{color:C.value.color,background:C.value.background,"pointer-events":"auto"},onClick:E},(()=>C.value.tooltip?P(Vl,{ref:p,...C.value.tooltip},(()=>P("strong",{},C.value.tooltip.tip||s("vc.overview."+(v.value?"hidden":"show"))))):M("v-if")))),i.push(P(Ql,{ref:m,...w.value,onReady:x},(()=>ja(t.slots.default)))),P("div",{ref:c,class:"vc-overview-map "+h.classes.value,style:d},i)}}});class yu{constructor(e){this.id=e.id||Cesium.createGuid()}static getBoundingSphere(e,t){var i,n,o,r;const{Primitive:a,ClassificationPrimitive:s,GroundPolylinePrimitive:l,GroundPrimitive:c,Polyline:u}=Cesium;let d;return e instanceof s||e instanceof l?d=null==(n=null==(i=e._primitive)?void 0:i._boundingSphereWC)?void 0:n[0]:e instanceof a?d=null==(o=e._boundingSphereWC)?void 0:o[0]:e instanceof c?d=null==(r=e._boundingVolumes)?void 0:r[0]:e instanceof u?d=e._boundingVolumeWC:e instanceof Cesium.Entity&&(d=new Cesium.BoundingSphere,t.dataSourceDisplay.getBoundingSphere(e,!0,d)),d}static fromPickedFeature(e,t,i,n){var o,r,a,s,l;const c=new yu({id:e.id});if(e.position)c.position=e.position;else if(e instanceof Cesium.Model)c.position=Cesium.Matrix4.getTranslation(e.modelMatrix,new Cesium.Cartesian3);else if(e instanceof Cesium.Cesium3DTileset){let e=t.content.tile.boundingSphere.center,i=null==(o=null==t?void 0:t.getProperty)?void 0:o.call(t,"position");Cesium.defined(i)&&("string"==typeof i&&(i=JSON.parse(i)),e=Ne(i)),c.position=e}else c.position=null==(r=yu.getBoundingSphere(e,i))?void 0:r.center;return c.cesiumObject=e,c.pickedFeature=t,c.windowPosition=n,c.description=(null==e?void 0:e.description)||(null==(a=null==e?void 0:e.description)?void 0:a.getValue()),c.properties=(null==e?void 0:e.properties)||(null==(s=null==e?void 0:e.properties)?void 0:s.getValue())||(null==(l=null==e?void 0:e.feature)?void 0:l.properties),c}static fromImageryLayerFeature(e,t){const i=new yu({id:e.name});return i.name=e.name,i.description=e.description,i.properties=e.properties,i.data=e.data,i.imageryLayer=e.imageryLayer,i.position=t.scene.globe.ellipsoid.cartographicToCartesian(e.position),i.coords=e.coords,i}}class bu{constructor(){const{knockout:e}=Cesium;this.allFeaturesAvailablePromise=void 0,this.isLoading=!0,this.pickPosition=void 0,this.features=[],this.error=void 0,this.providerCoords=void 0,e.track(this,["isLoading","features","error"])}}function Cu(e,t,i=[],n=[]){const{defined:o}=Cesium,r=t.globe.pick(e,t);if(!o(r))return;const a=t.globe.ellipsoid.cartesianToCartographic(r),s=[],l=[];return function(e,t,i,n){const{defined:o,Rectangle:r,Math:a}=Cesium,s=e.globe._surface._tilesToRender;let l;for(let u=0;!o(l)&&u<s.length;++u){const e=s[u];r.contains(e.rectangle,t)&&(l=e)}if(!o(l))return;const c=l.data.imagery;for(let u=c.length-1;u>=0;--u){const e=c[u],s=e.readyImagery;if(!o(s))continue;const d=s.imageryLayer.imageryProvider;if(i&&!o(d.pickFeatures))continue;if(!r.contains(s.rectangle,t))continue;const p=new r,m=1/1024;p.west=a.lerp(l.rectangle.west,l.rectangle.east,e.textureCoordinateRectangle.x-m),p.east=a.lerp(l.rectangle.west,l.rectangle.east,e.textureCoordinateRectangle.z+m),p.south=a.lerp(l.rectangle.south,l.rectangle.north,e.textureCoordinateRectangle.y-m),p.north=a.lerp(l.rectangle.south,l.rectangle.north,e.textureCoordinateRectangle.w+m),r.contains(p,t)&&n(s)}}(t,a,!0,(function(e){if(-1!==n.indexOf(e.imageryLayer.vcId))return;if(i.length&&-1===i.indexOf(e.imageryLayer.vcId))return;const t=e.imageryLayer.imageryProvider.pickFeatures(e.x,e.y,e.level,a.longitude,a.latitude);o(t)&&(s.push(t),l.push(e.imageryLayer))})),0!==s.length?Promise.all(s).then((function(e){const t=[];for(let i=0;i<e.length;++i){const n=e[i],r=l[i];if(o(n)&&n.length>0)for(let e=0;e<n.length;++e){const i=n[e];i.imageryLayer=r,o(i.position)||(i.position=a),t.push(i)}}return t})):void 0}const wu={show:{type:Boolean,default:!0},width:{type:Number,default:50},height:{type:Number,default:50},allowFeatureInfoRequests:{type:Boolean,default:!0},includeImageryIds:{type:Array,default:()=>[]},excludeImageryIds:{type:Array,default:()=>[]},limit:{type:Number,default:25}};var _u=E({name:"VcSelectionIndicator",props:wu,emits:{...Hl,pickEvt:e=>!0},setup(e,t){const i=o();i.cesiumClass="VcSelectionIndicator",i.cesiumEvents=[];const r=xo(e,t,i);if(void 0===r)return;const{$services:a}=r;let s;const l=function(e,t,i){const o="-1000px",r=n(o),a=n(o),s=n(),l=n();let c,u;const d=n(null),m=n(null);let h=[],v=!1;const g=_({top:a.value,left:r.value,transform:"",opacity:1});h.push(b(m,(t=>{var n,o,r;const a=t,{defined:l}=Cesium;if(l(a)&&l(null==a?void 0:a.position)){const{viewer:t}=i;s.value=(null==a?void 0:a.position)instanceof Cesium.Cartesian3?null==a?void 0:a.position:null==(n=null==a?void 0:a.position)?void 0:n.getValue(t.clock.currentTime),E(),null==(o=e.proxy)||o.$emit("pickEvt",a)}else T(),null==(r=e.proxy)||r.$emit("pickEvt",a);S()}))),h.push(b(d,(e=>{const{defined:t,Entity:i}=Cesium,n=e;if(t(n)){const e=new i({id:"__Vc__Pick__Location__"});e.position=n.pickPosition,m.value=e}else m.value=void 0;x((()=>{t(n.allFeaturesAvailablePromise)&&n.allFeaturesAvailablePromise.then((()=>{var e,i,o;const r=n.features.filter((e=>t(e)));m.value=r.filter(y)[0],!t(m.value)&&r.length>0&&(m.value=r[0],v&&m.value instanceof yu&&(null==(o=null==(i=null==(e=m.value)?void 0:e.pickedFeature)?void 0:i.primitive)?void 0:o.position)&&(m.value.position=m.value.pickedFeature.primitive.position))}))}))})));const y=e=>{const{defined:t}=Cesium;return t(e.properties)||t(e.description)},C=(e,t,i,n,o,r,a,s)=>{const{defined:l,defaultValue:c}=Cesium;a=c(a,!1);const u=new bu;return u.providerCoords=e,u.pickPosition=t,u.allFeaturesAvailablePromise=Promise.all(n).then((function(e){u.isLoading=!1,u.features=e.reduce(function(e,i,n){if(!l(i))return e;const a=i.map(function(e){return l(o)&&(e.imageryLayer=o[n]),l(e.position)||(e.position=s.scene.globe.ellipsoid.cartesianToCartographic(t)),l(e.position.height)&&0!==e.position.height||(e.position.height=r),yu.fromImageryLayerFeature(e,s)}.bind(this));return e.concat(a)}.bind(this),c(i,[]))})).catch((function(){u.isLoading=!1,u.error="An unknown error occurred while picking features."})),u},w=e=>{var n,o;const r=[],{defined:a}=Cesium,{viewer:s}=i,l=s.scene.drillPick(e,t.limit);for(let t=0;t<l.length;++t){const i=l[t];let c=i.id;!a(c)&&a(i.primitive)&&(c=i.primitive);const u=null!=(o=null==(n=null==i?void 0:i.primitive)?void 0:n._catalogItem)?o:null==c?void 0:c._catalogItem;if("function"==typeof(null==u?void 0:u.getFeaturesFromPickResult)){const t=u.getFeaturesFromPickResult.bind(u)(e,i);t&&(Array.isArray(t)?r.push(...t):r.push(t))}else{const t=i;if(t.id){if(p(t.id)&&t.id[0]instanceof Cesium.Entity){v=!0,t.id.forEach((i=>{const n=yu.fromPickedFeature(i,t,s,e);r.push(n)}));continue}if(t.id instanceof Cesium.Entity){const i=yu.fromPickedFeature(t.id,t,s,e);r.push(i),v=!1;continue}v=!1}if(t.primitive){const i=yu.fromPickedFeature(t.primitive,t,s,e);r.push(i)}else if(t.collection){const i=yu.fromPickedFeature(t.collection,t,s,e);r.push(i)}}}return r},O=()=>{const e={},{viewer:t}=i,n=t.scene,o=function(t,i,n,o,r,a,s){if(i){const l=i.call(t,n,o,r,a,s);return t.url&&(e[t.url]={x:n,y:o,level:r}),t.pickFeatures=i,l}return Promise.reject(!1)};for(let i=0;i<n.imageryLayers.length;i++){const e=n.imageryLayers.get(i).imageryProvider;e.pickFeatures=o.bind(void 0,e,e.pickFeatures)}return e},P=(e,t)=>{const{viewer:n}=i;return Cesium.SceneTransforms.wgs84ToWindowCoordinates(n.scene,e,t)},S=()=>{const{defined:e,Cartesian2:n}=Cesium;if(t.show&&e(s.value)){const o=P(s.value,new n);if(e(o)){const{viewer:e}=i,n=e.container,r=n.clientWidth,a=n.clientHeight,s=t.width,l=.5*s;o.x=Math.min(Math.max(o.x,-s),r+s)-l,o.y=Math.min(Math.max(o.y,-s),a+s)-l,g.left=Math.floor(o.x+.25)+"px",g.top=Math.floor(o.y+.25)+"px"}}},E=()=>{const{viewer:e}=i,{defined:t,EasingFunction:n}=Cesium;if(t(c)){if(u)return;c.cancelTween(),c=void 0}u=!0,c=e.scene.tweens.add({startObject:{scale:2,opacity:0,rotate:-180},stopObject:{scale:1,opacity:1,rotate:0},duration:.8,easingFunction:n.EXPONENTIAL_OUT,update:function(e){g.opacity=e.opacity,g.transform="scale("+e.scale+") rotate("+e.rotate+"deg)"},complete:function(){c=void 0},cancel:function(){c=void 0}})},T=()=>{const{viewer:e}=i,{defined:t,EasingFunction:n}=Cesium;if(t(c)){if(!u)return;c.cancelTween(),c=void 0}u=!1,c=e.scene.tweens.add({startObject:{scale:1,opacity:1},stopObject:{scale:1.5,opacity:0},duration:.8,easingFunction:n.EXPONENTIAL_OUT,update:function(e){g.opacity=e.opacity,g.transform="scale("+e.scale+") rotate(0deg)"},complete:function(){c=void 0},cancel:function(){c=void 0}})};return f((()=>{h.forEach((e=>e())),h=[]})),Object.assign(e.proxy,{selectedFeature:m,position:s,computeScreenSpacePosition:P,update:S,animateAppear:E,animateDepart:T,getPickedFeatures:()=>d}),{pickFromScreenPosition:e=>{const{defined:n}=Cesium,{viewer:o}=i,r=o.scene,a=r.camera.getPickRay(e);let s=r.globe.pick(a,r);if(!n(s)&&(s=r.pickPosition(e),!n(s)))return;const l=r.globe.ellipsoid.cartesianToCartographic(s||new Cesium.Cartesian3),c=w(e),u=O(),p=t.allowFeatureInfoRequests?Cu(a,r,t.includeImageryIds,t.excludeImageryIds):Promise.resolve(),m=C(u,s,c,[p],void 0,l.height,!1,o);d.value=m},rootRef:l,rootStyle:g,onPostRender:()=>{S()}}}(i,e,a);return i.createCesiumObject=async()=>{const{viewer:e}=a;return e._element.appendChild(Me(l.rootRef)),Me(l.rootRef)},i.mount=async()=>{const{viewer:e}=a,{ScreenSpaceEventHandler:t,ScreenSpaceEventType:i}=Cesium;return s=new t(e.canvas),s.setInputAction((e=>{l.pickFromScreenPosition(e.position)}),i.LEFT_CLICK),e.scene.postRender.addEventListener(l.onPostRender),!0},i.unmount=async()=>{const{viewer:e}=a,t=e._element;return t.contains(Me(l.rootRef))&&t.removeChild(Me(l.rootRef)),e.scene.postRender.removeEventListener(l.onPostRender),s.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK),s.destroy(),s=void 0,!0},()=>P("div",{ref:l.rootRef,class:"vc-selection-indicator",style:l.rootStyle},P("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DQo8c3ZnIHdpZHRoPSIxNzZweCIgaGVpZ2h0PSIxNzZweCIgdmlld0JveD0iMCAwIDE3NiAxNzYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sbnM6c2tldGNoPSJodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2gvbnMiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4xLjEgKDg3NjEpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPg0KICAgIDx0aXRsZT5Mb2NhdGlvblRhcmdldCArIFBhdGg8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxkZWZzPg0KICAgICAgICA8ZmlsdGVyIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0xIj4NCiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjAiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVPZmZzZXQ+DQogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIyIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+DQogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC41MjY0NDY0NDUgMCIgaW49InNoYWRvd0JsdXJPdXRlcjEiIHR5cGU9Im1hdHJpeCIgcmVzdWx0PSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVDb2xvck1hdHJpeD4NCiAgICAgICAgICAgIDxmZU1lcmdlPg0KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0ic2hhZG93TWF0cml4T3V0ZXIxIj48L2ZlTWVyZ2VOb2RlPg0KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0iU291cmNlR3JhcGhpYyI+PC9mZU1lcmdlTm9kZT4NCiAgICAgICAgICAgIDwvZmVNZXJnZT4NCiAgICAgICAgPC9maWx0ZXI+DQogICAgICAgIDxmaWx0ZXIgeD0iLTUwJSIgeT0iLTUwJSIgd2lkdGg9IjIwMCUiIGhlaWdodD0iMjAwJSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPg0KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMCIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4NCiAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjIiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4NCiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwICAgMCAwIDAgMCAwICAgMCAwIDAgMCAwICAwIDAgMCAwLjUyNjQ0NjQ0NSAwIiBpbj0ic2hhZG93Qmx1ck91dGVyMSIgdHlwZT0ibWF0cml4IiByZXN1bHQ9InNoYWRvd01hdHJpeE91dGVyMSI+PC9mZUNvbG9yTWF0cml4Pg0KICAgICAgICAgICAgPGZlTWVyZ2U+DQogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVNZXJnZU5vZGU+DQogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIj48L2ZlTWVyZ2VOb2RlPg0KICAgICAgICAgICAgPC9mZU1lcmdlPg0KICAgICAgICA8L2ZpbHRlcj4NCiAgICA8L2RlZnM+DQogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJBcnRib2FyZC0xIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNjkxLjAwMDAwMCwgLTQ5OC4wMDAwMDApIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZT0iI0ZGRkZGRiI+DQogICAgICAgICAgICA8ZyBpZD0iTG9jYXRpb25UYXJnZXQtKy1QYXRoIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2OTkuMDAwMDAwLCA1MDYuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPHBhdGggZD0iTTgwLDE0NCBDMTE1LjM0NjIyNCwxNDQgMTQ0LDExNS4zNDYyMjQgMTQ0LDgwIEMxNDQsNDQuNjUzNzc2IDExNS4zNDYyMjQsMTYgODAsMTYgQzQ0LjY1Mzc3NiwxNiAxNiw0NC42NTM3NzYgMTYsODAgQzE2LDExNS4zNDYyMjQgNDQuNjUzNzc2LDE0NCA4MCwxNDQgWiBNMTYwLDgwIEwxNDQsODAgTTE2LDgwIEwwLDgwIE03OS42LC0wLjQgTDc5LjYsMTUuNiBNNzguOCwxNDQgTDc4LjgsMTYwIiBpZD0iTG9jYXRpb25UYXJnZXQiIHN0cm9rZS13aWR0aD0iNyIgZmlsdGVyPSJ1cmwoI2ZpbHRlci0xKSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgIDxjaXJjbGUgaWQ9IlBhdGgiIHN0cm9rZS13aWR0aD0iMiIgb3BhY2l0eT0iMC4yNTIyMTU0ODUiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIGN4PSI4MCIgY3k9IjgwIiByPSI2Ij48L2NpcmNsZT4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg==",width:e.width,height:e.height}))}});[wc,Sc,Dc,kc,Xc,tu,au,cu,du,vu,fu,_u].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Ou=wc,xu=Sc,Pu=Dc,Su=kc,Eu=Xc,Tu=tu,Iu=au,Mu=cu,Du=du,ju=vu,Lu=fu,Au=_u,ku={externalLabel:!1,label:"",labelPosition:"right",hideLabel:!1,tabindex:void 0,disable:!1,outline:!1,push:!1,flat:!1,unelevated:!1,color:"primary",textColor:void 0,glossy:!1,labelClass:void 0,labelStyle:void 0,square:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}},Ru={show:!0,enableMouseEvent:!0,asynchronous:!1,classificationType:2,appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:"#51ff00"}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,0,0,127]}}}}}},Vu={show:!0,color:"rgb(255,229,0)",pixelSize:8,outlineColor:"black",outlineWidth:1,disableDepthTestDistance:Number.POSITIVE_INFINITY},Bu={show:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY,verticalOrigin:1,image:""},Nu={width:2,arcType:0,ellipsoid:void 0},zu={show:!0,font:"16px Arial Microsoft YaHei sans-serif",scale:1,fillColor:"white",showBackground:!0,backgroundColor:{x:.165,y:.165,z:.165,w:.8},backgroundPadding:[7,5],horizontalOrigin:0,verticalOrigin:1,pixelOffset:[0,-9],disableDepthTestDistance:Number.POSITIVE_INFINITY},Fu={icon:"vc-icons-move",size:"24px",color:"#1296db",background:"#fff",round:!0,flat:!1,label:void 0,stack:!1,dense:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20]}},Gu={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:Vu,editorOpts:{delay:1e3,hideDelay:1e3,pixelOffset:[16,-8],move:Object.assign({},Fu),remove:Object.assign({},Fu,{icon:"vc-icons-remove"})},heightReference:1,disableDepthTest:!1,showLabel:!1,labelOpts:Object.assign({},zu,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[10,0]})},Hu={show:!0,showComponentLines:!1,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:Vu,polylineOpts:Nu,primitiveOpts:Ru,editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},Fu),removeAll:Object.assign({},Fu,{icon:"vc-icons-delete"})},disableDepthTest:!1},Uu={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:Vu,polylineOpts:Nu,primitiveOpts:Ru,editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},Fu),insert:Object.assign({},Fu,{icon:"vc-icons-insert"}),remove:Object.assign({},Fu,{icon:"vc-icons-remove"}),removeAll:Object.assign({},Fu,{icon:"vc-icons-delete"})},loop:!1,disableDepthTest:!1,showLabel:!1,showAngleLabel:!1,showDistanceLabel:!1,labelOpts:zu,labelsOpts:Object.assign({},zu,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]})},Wu={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:Vu,polylineOpts:Nu,primitiveOpts:Object.assign({},Ru,{depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:"#51ff00"}}}}}}),polygonOpts:{show:!0,enableMouseEvent:!0,asynchronous:!1,classificationType:2,appearance:{type:"MaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:[255,165,0,125]}}},faceForward:!0,renderState:{cull:{enabled:!1},depthTest:{enabled:!1}}}}},editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},Fu),insert:Object.assign({},Fu,{icon:"vc-icons-insert"}),remove:Object.assign({},Fu,{icon:"vc-icons-remove"}),removeAll:Object.assign({},Fu,{icon:"vc-icons-delete"})},loop:!0,disableDepthTest:!1,showDistanceLabel:!1,showLabel:!1,showAngleLabel:!1,labelOpts:zu,labelsOpts:Object.assign({},zu,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]})},$u=Object.assign({},Wu,{pointOpts:Object.assign({},Vu,{show:!1}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},Fu),removeAll:Object.assign({},Fu,{icon:"vc-icons-delete"})},edge:4,loop:!1,disableDepthTest:!1,showLabel:!1,showAngleLabel:!1,showDistanceLabel:!1,labelOpts:zu,labelsOpts:Object.assign({},zu,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]})}),Zu=Object.assign({},$u,{edge:360}),qu=Object.assign({},$u,{edge:6,loop:!0}),Yu=Object.assign({},ku,{icon:"vc-icons-clear",color:"red"}),Ju=Object.assign({},ku,{icon:"vc-icons-drawing-regular"}),Xu=Object.assign({},ku,{icon:"vc-icons-drawing-circle"}),Qu={...po,show:Boolean,editable:Boolean,drawtip:Object,pointOpts:Object,editorOpts:Object,mode:Number,preRenderDatas:Array,disableDepthTest:Boolean,distanceFormatter:Function,angleFormatter:Function,areaFormatter:Function},Ku={...Mt,position:{type:String,default:"bottom-left",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>2===e.length},mode:{type:Number,default:1},activeColor:{type:String,default:"positive"},editable:{type:Boolean},clampToGround:{type:Boolean},clearActionOpts:{type:Object,default:()=>Yu}},ed=Object.assign({},ku,{icon:"vc-icons-measure-distance"}),td=Object.assign({},Hu,{labelOpts:Object.assign({},zu,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),measureUnits:new Ar,decimals:{distance:2,angle:2},locale:void 0,autoUpdateLabelPosition:!0}),id=Object.assign({},ku,{icon:"vc-icons-measure-component-distance"}),nd=Object.assign({},td,{showComponentLines:!0,xLabelOpts:zu,xAngleLabelOpts:Object.assign({},zu,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[9,0]}),yLabelOpts:Object.assign({},zu,{horizontalOrigin:-1,pixelOffset:[-9,0]}),yAngleLabelOpts:Object.assign({},zu,{verticalOrigin:-1,pixelOffset:[0,9]})}),od=Object.assign({},ku,{icon:"vc-icons-measure-polyline-distance"}),rd=Object.assign({},Uu,{measureUnits:new Ar,labelOpts:zu,labelsOpts:Object.assign({},zu,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),decimals:{distance:2,angle:2},showLabel:!0,showAngleLabel:!0,showDistanceLabel:!0,locale:void 0,loop:!1,autoUpdateLabelPosition:!0}),ad=Object.assign({},ku,{icon:"vc-icons-measure-horizontal-distance"}),sd=Object.assign({},rd,{dashLineOpts:{width:2},dashLinePrimitiveOpts:Object.assign({},Ru,{appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,255,0,255]}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,255,0,255]}}}}}}),labelOpts:Object.assign({},zu,{horizontalOrigin:1,verticalOrigin:1,pixelOffset:[10,-10]}),labelsOpts:Object.assign({},zu,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),showDashedLine:!0}),ld=Object.assign({},ku,{icon:"vc-icons-measure-vertical-distance"}),cd=Object.assign({},Hu,{labelOpts:Object.assign({},zu,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),measureUnits:new Ar,decimals:{distance:2,angle:2},locale:void 0,autoUpdateLabelPosition:!0}),ud=Object.assign({},ku,{icon:"vc-icons-measure-height-from-terrain"}),dd=Object.assign({},Gu,{polylineOpts:Nu,labelOpts:Object.assign({},zu,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},Fu),removeAll:Object.assign({},Fu,{icon:"vc-icons-delete"})},measureUnits:new Ar,decimals:{distance:2},locale:void 0,primitiveOpts:Ru}),pd=Object.assign({},ku,{icon:"vc-icons-measure-area"}),md=Object.assign({},Wu,{labelOpts:zu,labelsOpts:Object.assign({},zu,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),showDistanceLabel:!0,showAngleLabel:!0,showLabel:!0,measureUnits:new Ar,decimals:{area:2,distance:2,angle:2},loop:!0,locale:void 0,autoUpdateLabelPosition:!0}),hd=Object.assign({},ku,{icon:"vc-icons-measure-point-coordinates"}),vd=Object.assign({},Gu,{heightReference:1,measureUnits:new Ar,drawtip:{show:!0,pixelOffset:[32,48]},labelOpts:Object.assign({},zu,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[10,0]}),decimals:{lng:6,lat:6,height:2,slope:3},locale:void 0,showLabel:!0}),gd=Object.assign({},ku,{icon:"vc-icons-drawing-rectangle"}),fd=Object.assign({},md,{pointOpts:Object.assign({},Vu,{show:!1}),drawtip:{show:!0,pixelOffset:[32,32]},editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},Fu),removeAll:Object.assign({},Fu,{icon:"vc-icons-delete"})},edge:4,loop:!1,showAngleLabel:!1}),yd=Object.assign({},fd,{edge:6,loop:!0}),bd=Object.assign({},fd,{edge:360,loop:!0,showDistanceLabel:!1,showAngleLabel:!1}),Cd=Object.assign({},{}),wd=Object.assign({},ku,{direction:"right",icon:"vc-icons-measurement-button",activeIcon:"vc-icons-measurement-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),_d=["distance","component-distance","polyline","horizontal","vertical","height","area","point","rectangle","regular","circle"],Od={...Ku,measurements:{type:Array,default:()=>_d,validator:e=>{let t=!0;return e.forEach((e=>{_d.includes(e)||(t=!1)})),t}},mainFabOpts:{type:Object,default:()=>wd},fabActionOpts:{type:Object,default:()=>Cd},distanceActionOpts:{type:Object,default:()=>ed},distanceMeasurementOpts:{type:Object,default:()=>td},componentDistanceActionOpts:{type:Object,default:()=>id},componentDistanceMeasurementOpts:{type:Object,default:()=>nd},polylineActionOpts:{type:Object,default:()=>od},polylineMeasurementOpts:{type:Object,default:()=>rd},horizontalActionOpts:{type:Object,default:()=>ad},horizontalMeasurementOpts:{type:Object,default:()=>sd},verticalActionOpts:{type:Object,default:()=>ld},verticalMeasurementOpts:{type:Object,default:()=>cd},heightActionOpts:{type:Object,default:()=>ud},heightMeasurementOpts:{type:Object,default:()=>dd},areaActionOpts:{type:Object,default:()=>pd},areaMeasurementOpts:{type:Object,default:()=>md},pointActionOpts:{type:Object,default:()=>hd},pointMeasurementOpts:{type:Object,default:()=>vd},rectangleActionOpts:{type:Object,default:()=>gd},rectangleMeasurementOpts:{type:Object,default:()=>fd},regularActionOpts:{type:Object,default:()=>Ju},regularMeasurementOpts:{type:Object,default:()=>yd},circleActionOpts:{type:Object,default:()=>Xu},circleMeasurementOpts:{type:Object,default:()=>bd}},xd=he(Od),Pd={...dt,...Pt,...Mt,autoHidden:{type:Boolean,default:!0},customClass:String,teleport:Object};var Sd=E({name:"VcOverlayHtml",props:Pd,emits:{...Hl,mouseenter:e=>!0,mouseleave:e=>!0,click:e=>!0},setup(e,t){const i=o();i.cesiumClass="VcOverlayHtml",i.cesiumEvents=[];const r=xo(e,t,i);if(void 0===r)return;const{$services:a}=r,s=n(!1),l=n(null),c=_({}),u=n(null),d=n(null),p=n(null);let m=[];m.push(b((()=>e.position),(e=>{d.value=Ne(e,a.viewer.scene.globe.ellipsoid)}))),m.push(b((()=>e.pixelOffset),(e=>{u.value=Be(e)}))),m.push(b((()=>e.show),(e=>{c.display=e?"block":"none"}))),i.createCesiumObject=async()=>Me(l),i.mount=async()=>{const{viewer:t}=a;return s.value=!0,w(),u.value=Be(e.pixelOffset),d.value=Ne(e.position,t.scene.globe.ellipsoid),t.scene.preRender.addEventListener(h),!0},i.unmount=async()=>{const{viewer:e}=a;return e.scene.preRender.removeEventListener(h),s.value=!1,O(),!0};const h=()=>{const{viewer:t}=a;if(d.value){const i=t.scene.cartesianToCanvasCoordinates(d.value,{});if(Cesium.defined(i)&&!Cesium.Cartesian2.equals(p.value,i))if(c.left=i.x+u.value.x+"px",c.top=i.y+u.value.y+"px",e.autoHidden&&t.scene.mode!==Cesium.SceneMode.SCENE2D&&t.scene.mode!==Cesium.SceneMode.MORPHING){const i=t.camera.position,n=t.scene.globe.ellipsoid.cartesianToCartographic(i);if(Cesium.defined(n)){let o=n.height;o+=1*t.scene.globe.ellipsoid.maximumRadius,Cesium.Cartesian3.distance(i,d.value)>o||!e.show?c.display="none":c.display="block"}}else c.display="block";else Cesium.defined(i)||(c.display="none");p.value=i}};f((()=>{m.forEach((e=>e())),m=[]}));const v=()=>s.value?P("div",{ref:l,class:"vc-html-container"+(e.customClass?" "+e.customClass:""),style:c,onMouseenter:y,onMouseleave:C,onClick:g},ja(t.slots.default)):M("v-if"),g=e=>{t.emit("click",e)},y=e=>{t.emit("mouseenter",e)},C=e=>{t.emit("mouseleave",e)},{showPortal:w,hidePortal:O,renderPortal:x}=Is(i,l,(()=>v()));return e.teleport&&e.teleport.to&&!e.teleport.disabled?x:()=>v()}});const Ed={id:String,name:String,availability:Object,...Mt,description:[String,Object],...dt,orientation:Object,...pt,parent:Object,billboard:Object,box:Object,corridor:Object,cylinder:Object,ellipse:Object,ellipsoid:Object,label:Object,model:Object,tileset:Object,path:Object,plane:Object,point:Object,polygon:Object,polyline:Object,properties:Object,polylineVolume:Object,rectangle:Object,wall:Object,...po};var Td=E({name:"VcEntity",props:Ed,emits:{...Hl,...Ul,definitionChanged:e=>!0,"update:billboard":e=>!0,"update:box":e=>!0,"update:corridor":e=>!0,"update:cylinder":e=>!0,"update:ellipse":e=>!0,"update:ellipsoid":e=>!0,"update:label":e=>!0,"update:model":e=>!0,"update:path":e=>!0,"update:plane":e=>!0,"update:point":e=>!0,"update:polygon":e=>!0,"update:polyline":e=>!0,"update:polylineVolume":e=>!0,"update:rectangle":e=>!0,"update:tileset":e=>!0,"update:wall":e=>!0},setup(e,t){const i=o();i.cesiumClass="Entity",i.cesiumEvents=["definitionChanged"];const n=xo(e,t,i);if(void 0===n)return;const{$services:r}=n,{emit:a}=t;i.mount=async()=>{var e;const t=null==(e=null==r?void 0:r.entities)?void 0:e.add(i.cesiumObject);return null==r?void 0:r.entities.contains(t)},i.unmount=async()=>{var e;return null==(e=null==r?void 0:r.entities)?void 0:e.remove(i.cesiumObject)};return Object.assign(i.proxy,{__updateGraphics:(e,t)=>(Ie(i,t)?a(t,e):i.cesiumObject&&(i.cesiumObject[t.substring(7)]=e),e&&(e._vcParent=i.cesiumObject),!0)}),()=>{var e,n;return t.slots.default?P("i",{class:ue((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},ja(t.slots.default)):M(ue((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});Td.install=e=>{e.component(Td.name,Td)};const Id=Td,Md=Id;const Dd={imageryProvider:Object,...tn,alpha:{type:[Number,Function],default:1},nightAlpha:{type:[Number,Function],default:1},dayAlpha:{type:[Number,Function],default:1},brightness:{type:[Number,Function],default:1},contrast:{type:[Number,Function],default:1},hue:{type:[Number,Function],default:0},saturation:{type:[Number,Function],default:1},gamma:{type:[Number,Function],default:1},splitDirection:{type:[Number,Function],default:0},minificationFilter:Number,magnificationFilter:Number,...Mt,maximumAnisotropy:Number,minimumTerrainLevel:Number,maximumTerrainLevel:Number,...qi,...Yi,colorToAlphaThreshold:{type:Number,default:.004},sortOrder:Number,vcId:String};var jd=E({name:"VcLayerImagery",props:Dd,emits:{...Hl,"update:imageryProvider":e=>!0,readyEvent:e=>!0,errorEvent:e=>!0},setup(e,t){const i=o();i.cesiumClass="ImageryLayer",i.cesiumEvents=["readyEvent","errorEvent"];const n=xo(e,t,i);if(void 0===n)return;const{$services:r}=n,{emit:a}=t;i.createCesiumObject=async()=>{const t=n.transformProps(e);if(ut(Cesium.VERSION,"1.104")){const i=e.imageryProvider||Cesium.BingMapsImageryProvider.fromUrl(void 0,{key:""}),n=Cesium.ImageryLayer.fromProviderAsync(i,t);return n.errorEvent.addEventListener((e=>{})),n}{const i=e.imageryProvider||{};return new Cesium.ImageryLayer(i,t)}},i.mount=async()=>{const{viewer:t}=r,n=i.cesiumObject;return n.sortOrder=e.sortOrder,n.vcId=e.vcId||Cesium.createGuid(),t.imageryLayers.add(n),!t.isDestroyed()&&t.imageryLayers.contains(n)},i.unmount=async()=>{const{viewer:e}=r,t=i.cesiumObject;return!e.isDestroyed()&&e.imageryLayers.remove(t)};return Object.assign(i.proxy,{__updateProvider:e=>{var t;if(G(e))return null==(t=i.unmount)?void 0:t.call(i);i.cesiumObject._imageryProvider=e;Ie(i,"update:imageryProvider")&&a("update:imageryProvider",e);return!0}}),()=>{var e,n;return t.slots.default?P("i",{class:ue((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},ja(t.slots.default)):M(ue((null==(n=i.proxy)?void 0:n.$options.name)||"v-if"))}}});jd.install=e=>{e.component(jd.name,jd)};const Ld=jd,Ad=Ld,kd={...In,...En,...Mt,...Mn,...Sn,...Dn,...Pn,..._n,...On,...Zt,...Ln,...xn,...po};var Rd=E({name:"VcPrimitiveClassification",props:kd,emits:Zl,setup(e,t){var i;const n=o();n.cesiumClass="ClassificationPrimitive",dr(e,t,n);const r=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?P("i",{class:ue(r),style:{display:"none !important"}},ja(t.slots.default)):M(ue(r))}});const Vd={...In,...En,...Mt,...Mn,...Sn,...Dn,...Pn,..._n,...On,...Zt,...Ln,...xn,...po};var Bd=E({name:"VcPrimitiveGround",props:Vd,emits:Zl,setup(e,t){var i;const n=o();n.cesiumClass="GroundPrimitive",dr(e,t,n);const r=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?P("i",{class:ue(r),style:{display:"none !important"}},ja(t.slots.default)):M(ue(r))}});const Nd={...In,...En,...Mt,...Sn,...Dn,...Pn,..._n,...On,...Zt,...Ln,...xn,...po};var zd=E({name:"VcPrimitiveGroundPolyline",props:Nd,emits:Zl,setup(e,t){var i;const n=o();n.cesiumClass="GroundPolylinePrimitive",dr(e,t,n);const r=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?P("i",{class:ue(r),style:{display:"none !important"}},ja(t.slots.default)):M(ue(r))}});const Fd={...Ji,basePath:String,...Mt,...jn,...Tt,...Ci,...wi,...Rn,..._n,..._i,...On,...xi,...Ft,...Ln,...Bn,...wt,...An,...yt,...vt,...Ei,...Ti,...Pi,...Si,...Li,dequantizeInShader:{type:Boolean,default:!0},...Ii,...Mi,...Kn,...eo,...to,...rn,...no,showOutline:{type:Boolean,default:!0},...po};var Gd=E({name:"VcPrimitiveModel",props:Fd,emits:{...Zl,readyEvent:e=>!0,texturesReadyEvent:e=>!0,errorEvent:e=>!0},setup(e,t){const i=o();i.cesiumClass="Model",i.cesiumEvents=["readyEvent","texturesReadyEvent","errorEvent"];const n=dr(e,t,i);return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return ut(Cesium.VERSION,"1.104")?await Cesium.Model.fromGltfAsync(t):Cesium.Model.fromGltf(t)},()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Hd={...In,...En,...Tn,...Mt,...jn,...Mn,...Sn,...Dn,...Pn,..._n,cull:{type:Boolean,default:!0},...On,...Ln,...Ft,...po};var Ud=E({name:"VcPrimitive",props:Hd,emits:Zl,setup(e,t){var i;const n=o();n.cesiumClass="Primitive",dr(e,t,n);const r=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>{var e;return t.slots.default?P("i",{class:ue(r),style:{display:"none !important"}},ja(t.slots.default)):M(ue((null==(e=n.proxy)?void 0:e.$options.name)||""))}}});const Wd={...Zl,allTilesLoaded:()=>!0,initialTilesLoaded:()=>!0,loadProgress:(e,t)=>!0,tileFailed:(e,t)=>!0,tileLoad:e=>!0,tileUnload:e=>!0,tileVisible:e=>!0},$d={url:[String,Object],...Mt,...jn,modelUpAxis:{type:Number},modelForwardAxis:{type:Number},...Ft,...Wi,maximumMemoryUsage:{type:Number},cacheBytes:{type:Number,default:536870912},maximumCacheOverflowBytes:{type:Number,default:536870912},cullWithChildrenBounds:{type:Boolean,default:!0},cullRequestsWhileMoving:{type:Boolean,default:!0},cullRequestsWhileMovingMultiplier:{type:Number,default:60},preloadWhenHidden:{type:Boolean,default:!1},preloadFlightDestinations:{type:Boolean,default:!0},preferLeaves:{type:Boolean,default:!1},dynamicScreenSpaceError:{type:Boolean,default:!1},dynamicScreenSpaceErrorDensity:{type:Number,default:.00278},dynamicScreenSpaceErrorFactor:{type:Number,default:4},dynamicScreenSpaceErrorHeightFalloff:{type:Number,default:.25},progressiveResolutionHeightFraction:{type:Number,default:.3},foveatedScreenSpaceError:{type:Boolean,default:!0},foveatedConeSize:{type:Number,default:.1},foveatedMinimumScreenSpaceErrorRelaxation:{type:Number,default:0},foveatedInterpolationCallback:Function,foveatedTimeDelay:{type:Number,default:.2},skipLevelOfDetail:{type:Boolean,default:!1},baseScreenSpaceError:{type:Number,default:1024},skipScreenSpaceErrorFactor:{type:Number,default:16},skipLevels:{type:Number,default:1},immediatelyLoadDesiredLevelOfDetail:{type:Boolean,default:!1},loadSiblings:{type:Boolean,default:!1},...Li,...Zt,...on,pointCloudShading:Object,...Ii,...Qn,...Kn,...eo,...to,...io,...no,enableShowOutline:{type:Boolean,default:!0},showOutline:{type:Boolean,default:!0},...Nt,vectorClassificationOnly:{type:Boolean,default:!1},vectorKeepDecodedPositions:{type:Boolean,default:!1},featureIdIndex:{type:Number,default:0},instanceFeatureIdIndex:{type:Number,default:0},featureIdLabel:{type:[String,Number]},instanceFeatureIdLabel:{type:[String,Number]},splitDirection:{type:Number,default:0},projectTo2D:{type:Boolean,default:!1},showCreditsOnScreen:{type:Boolean,default:!1},debugHeatmapTilePropertyName:String,debugFreezeFrame:{type:Boolean,default:!1},debugColorizeTiles:{type:Boolean,default:!1},...Bn,...Ln,debugShowContentBoundingVolume:{type:Boolean,default:!1},debugShowViewerRequestVolume:{type:Boolean,default:!1},debugShowGeometricError:{type:Boolean,default:!1},debugShowRenderingStatistics:{type:Boolean,default:!1},debugShowMemoryUsage:{type:Boolean,default:!1},debugShowUrl:{type:Boolean,default:!1},...po,enableModelExperimental:{type:Boolean,default:!1},...yn,properties:{type:Array},fragmentShader:String,replaceFS:Boolean,assetId:Number};var Zd=E({name:"VcPrimitiveTileset",props:$d,emits:Wd,setup(e,t){const i=o();i.cesiumClass="Cesium3DTileset",i.cesiumEvents=["allTilesLoaded","initialTilesLoaded","loadProgress","tileFailed","tileLoad","tileUnload","tileVisible"];const n=dr(e,t,i);i.proxy.creatingPromise.then((e=>{const t=e.cesiumObject;i.removeCallbacks.push(t.tileVisible.addEventListener(r))}));const r=t=>{const i=t.content,o=i._model;for(let n=0;n<i.featuresLength;n++){const t=i.getFeature(n);e.properties&&e.properties.length&&e.properties.forEach((e=>{t.hasProperty(e.key)&&t.getProperty(e.key)===e.keyValue&&t.setProperty(e.propertyName,e.propertyValue)}))}e.fragmentShader&&o&&o._sourcePrograms&&o._rendererResources&&(Object.keys(o._sourcePrograms).forEach((t=>{var i;const r=o._sourcePrograms[t],a=o._rendererResources.sourceShaders;if(e.replaceFS)a[r.fragmentShader]=e.fragmentShader;else{const t=a[r.fragmentShader],o=null==(i=n.$services.viewer.scene.context)?void 0:i.webgl2;a[r.fragmentShader]=t.replace((o?"out_FragColor":"gl_FragColor")+" = vec4(color, 1.0);\n}",`${o?"out_FragColor":"gl_FragColor"}  = vec4(color, 1.0);\n             ${e.fragmentShader}\n}\n            `)}})),o._shouldRegenerateShaders=!0)};return()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const qd={...Cn,...wn,enableShowOutline:{type:Boolean,default:!0},showOutline:{type:Boolean,default:!0},...po};var Yd=E({name:"VcPrimitiveOsmBuildings",props:qd,emits:{...Zl},setup(e,t){const i=o();i.cesiumClass="VcPrimitiveOsmBuildings";const n=dr(e,t,i);return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return t.style=t.tileStyle,delete t.tileStyle,ut(Cesium.VERSION,"1.104")?await Cesium.createOsmBuildingsAsync(t):Cesium.createOsmBuildings(t)},()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Jd={...Zl,complete:e=>!0},Xd={...Mt,updateCallback:Function,emitter:Object,...jn,emitterModelMatrix:Object,emissionRate:{type:Number,default:5},bursts:Array,loop:{type:Boolean,default:!0},scale:{type:Number,default:1},startScale:Number,endScale:Number,...vt,...Wn,...$n,...Ot,...Yn,...Zn,...qn,...Dt,speed:{type:Number,default:1},minimumSpeed:Number,maximumSpeed:Number,lifetime:{type:Number,default:Number.MAX_VALUE},particleLife:{type:Number,default:5},minimumParticleLife:Number,maximumParticleLife:Number,mass:{type:Number,default:1},minimumMass:Number,maximumMass:Number,...po};var Qd=E({name:"VcPrimitiveParticle",props:Xd,emits:Jd,setup(e,t){const i=o();return i.cesiumClass="ParticleSystem",i.cesiumEvents=["complete"],dr(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Kd={...An,fovH:{type:Number,default:90},fovV:{type:Number,default:60},offsetHeight:{type:Number,default:1.8},visibleColor:{type:[Object,Array,String],default:"#00ff00"},invisibleColor:{type:[Object,Array,String],default:"#ff0000"},showGridLine:{type:Boolean,default:!0},lineColor:{type:[Object,Array,String],default:"rgba(255,255,255,0.4)"},faceColor:{type:[Object,Array,String],default:"rgba(255,255,255,0.1)"},show:{type:Boolean,default:!0},startPosition:{type:Object},endPosition:{type:Object},fragmentShader:{type:String},uniforms:Object};var ep=E({name:"VcViewshed",props:Kd,emits:Hl,setup(e,t){const i=o();i.cesiumClass="VcViewshed";const n=xo(e,t,i);if(void 0===n)return;const r=[];let a;r.push(b([()=>e.startPosition,()=>e.endPosition],(([e,t])=>{i.mounted&&s(e,t)}),{deep:!0})),r.push(b((()=>e.fovH),(e=>{if(!i.mounted)return;i.cesiumObject.fovH=e}))),r.push(b((()=>e.fovV),(e=>{if(!i.mounted)return;i.cesiumObject.fovV=e}))),r.push(b((()=>e.fovV),(e=>{if(!i.mounted)return;i.cesiumObject.fovV=e}))),r.push(b((()=>e.offsetHeight),(e=>{if(!i.mounted)return;i.cesiumObject.offsetHeight=e}))),r.push(b((()=>e.visibleColor),(e=>{if(!i.mounted)return;i.cesiumObject.visibleColor=$e(e)}))),r.push(b((()=>e.invisibleColor),(e=>{if(!i.mounted)return;i.cesiumObject.invisibleColor=$e(e)}))),r.push(b((()=>e.showGridLine),(e=>{if(!i.mounted)return;i.cesiumObject.showGridLine=e}))),r.push(b((()=>e.show),(e=>{if(!i.mounted)return;i.cesiumObject.enabled=e}))),f((()=>{r.forEach((e=>e())),r.length=0})),i.createCesiumObject=async()=>{const t=n.$services.viewer,i=new aa(t.scene,{fovH:120,fovV:60,offsetHeight:1.8,visibleColor:$e(e.visibleColor),invisibleColor:$e(e.invisibleColor),showGridLine:e.showGridLine});return i._viewshedShadowMap.cascadesEnabled=!1,i._viewshedShadowMap.softShadows=!1,i._viewshedShadowMap.normalOffset=!1,i._viewshedShadowMap.fromLightSource=!1,i._viewshedShadowMap.enabled=!1,i.fovH=Cesium.Math.toRadians(e.fovH),i.fovV=Cesium.Math.toRadians(e.fovV),i.offsetHeight=e.offsetHeight,i.showGridLine=e.showGridLine,i.enabled=e.show,i.lineColor=$e(e.lineColor),i.faceColor=$e(e.faceColor),i},i.mount=async()=>{var t;const o=n.$services.viewer,r=i.cesiumObject,{Cartesian4:l,PostProcessStage:c,Cartesian2:u}=Cesium;let d="\n  uniform sampler2D colorTexture;\n  uniform vec4 u_color1;\n  uniform vec4 u_color2;\n  uniform float u_isShed;\n  uniform sampler2D shadowMap_depthTexture;\n  uniform mat4 shadowMap_matrix;\n  uniform vec4 shadowMap_lightPositionEC;\n  uniform vec3 shadowMap_lightDirectionEC;\n  uniform float u_radius;\n  uniform vec4 shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness;\n  uniform vec4 shadowMap_texelSizeDepthBiasAndNormalShadingSmooth;\n  uniform float czzj;\n  uniform float dis;\n  uniform float spzj;\n  uniform float mixNum;\n  uniform vec3 shadowMap_lightUp;\n  uniform vec3 shadowMap_lightDir;\n  uniform vec3 shadowMap_lightRight;\n  in vec2 v_textureCoordinates;\n  vec4 toEye(in vec2 uv, in float depth){\n    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n    vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);\n    posInCamera =posInCamera / posInCamera.w;\n    return posInCamera;\n  }\n  float getDepth(in vec4 depth){\n    float z_window = czm_unpackDepth(depth);\n    z_window = czm_reverseLogDepth(z_window);\n    float n_range = czm_depthRange.near;\n    float f_range = czm_depthRange.far;\n    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n  }\n  float _czm_sampleShadowMap(sampler2D shadowMap, vec2 uv){\n    return texture(shadowMap, uv).r;\n  }\n  float _czm_shadowDepthCompare(sampler2D shadowMap, vec2 uv, float depth){\n    return step(depth, _czm_sampleShadowMap(shadowMap, uv));\n  }\n  float _czm_shadowVisibility(sampler2D shadowMap, czm_shadowParameters shadowParameters){\n    float depthBias = shadowParameters.depthBias;\n    float depth = shadowParameters.depth;\n    float nDotL = shadowParameters.nDotL;\n    float normalShadingSmooth = shadowParameters.normalShadingSmooth;\n    float darkness = shadowParameters.darkness;\n    vec2 uv = shadowParameters.texCoords;\n    depth -= depthBias;\n    vec2 texelStepSize = shadowParameters.texelStepSize;\n    float radius = 1.0;\n    float dx0 = -texelStepSize.x * radius;\n    float dy0 = -texelStepSize.y * radius;\n    float dx1 = texelStepSize.x * radius;\n    float dy1 = texelStepSize.y * radius;\n    float visibility =\n    (\n    _czm_shadowDepthCompare(shadowMap, uv, depth)\n    +_czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, 0.0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, 0.0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy1), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy1), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy1), depth)\n    ) * (1.0 / 9.0)\n    ;\n    return visibility;\n  }\n  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point){\n    vec3 v01 = point -planeOrigin;\n    float d = dot(planeNormal, v01) ;\n    return (point - planeNormal * d);\n  }\n  float ptm(vec3 pt){\n    return sqrt(pt.x*pt.x + pt.y*pt.y + pt.z*pt.z);\n  }\n  void main()\n  {\n    const float PI = 3.141592653589793;\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n    out_FragColor = color;\n    if ( u_isShed < 0.5 )\n        return;\n    vec4 currD = texture(czm_globeDepthTexture, v_textureCoordinates);\n    if( currD.r >= 1.0 )\n        return;\n\n    float depth = getDepth(currD);\n    vec4 positionEC = toEye(v_textureCoordinates, depth);\n    vec3 normalEC = vec3(1.0);\n    czm_shadowParameters shadowParameters;\n    shadowParameters.texelStepSize = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.xy;\n    shadowParameters.depthBias = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.z;\n    shadowParameters.normalShadingSmooth = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.w;\n    shadowParameters.darkness = shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.w;\n    shadowParameters.depthBias *= max(depth * 0.01, 1.0);\n    vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);\n    float nDotL = clamp(dot(normalEC, -directionEC), 0.0, 1.0);\n    vec4 shadowPosition = shadowMap_matrix * positionEC;\n    shadowPosition /= shadowPosition.w;\n    if (any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0))))\n      return;\n\n    vec4 lw = czm_inverseView* vec4(shadowMap_lightPositionEC.xyz, 1.0);\n    vec4 vw = czm_inverseView* vec4(positionEC.xyz, 1.0);\n    if(distance(lw.xyz,vw.xyz)> u_radius)\n        return;\n\n    shadowParameters.texCoords = shadowPosition.xy;\n    shadowParameters.depth = shadowPosition.z;\n    shadowParameters.nDotL = nDotL;\n    float visibility = _czm_shadowVisibility(shadowMap_depthTexture, shadowParameters);\n    if(visibility > 0.3 ){\n      out_FragColor = mix(color,vec4(u_color1.rgb, 1.0),mixNum);\n    }\n    else{\n      if(abs(shadowPosition.z-0.0)<0.01){\n        return;\n      }\n      out_FragColor = mix(color,vec4(u_color2.rgb, 1.0),mixNum);\n    }\n  }\n";(null==(t=n.$services.viewer.scene.context)?void 0:t.webgl2)||(d=d.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),d=d.replace(/texture\(/g,"texture2D("),d=d.replace(/out_FragColor/g,"gl_FragColor")),s(e.startPosition,e.endPosition),a=new c({fragmentShader:e.fragmentShader||d,uniforms:e.uniforms||{u_color1:function(){return r.visibleColor},u_color2:function(){return r.invisibleColor},u_isShed:function(){return r.shadowMap.enabled},u_radius:function(){return r.lightCamera.frustum.far},shadowMap_depthTexture:function(){return r.shadowMap.enabled?r.shadowMap._shadowMapTexture:o.scene.context.defaultTexture},shadowMap_matrix:function(){return r.shadowMap._shadowMapMatrix},shadowMap_cascadeSplits:function(){return r.shadowMap._cascadeSplits},shadowMap_cascadeMatrices:function(){return r.shadowMap._cascadeMatrices},shadowMap_lightDirectionEC:function(){return r.shadowMap._lightDirectionEC},shadowMap_lightPositionEC:function(){return r.shadowMap._lightPositionEC},shadowMap_cascadeDistances:function(){return r.shadowMap._cascadeDistances},shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness:function(){const e=r.shadowMap._pointBias;return l.fromElements(e.normalOffsetScale,r.shadowMap._distance,r.shadowMap.maximumDistance,0,new l)},shadowMap_texelSizeDepthBiasAndNormalShadingSmooth:function(){const e=r.shadowMap._pointBias,t=new u;return t.x=1/r.shadowMap._textureSize.x,t.y=1/r.shadowMap._textureSize.y,l.fromElements(t.x,t.y,e.depthBias,e.normalShadingSmooth,new l)},czzj:function(){return r.lightCamera.frustum.fov},spzj:function(){return r.lightCamera.frustum.fov},mixNum:function(){return.5},shadowMap_lightUp:function(){return r.lightCamera.up},shadowMap_lightDir:function(){return r.lightCamera.direction},shadowMap_lightRight:function(){return r.lightCamera.right}}}),o.scene.postProcessStages.add(a);const p=n.$services.primitives;return p&&p.add(r)},i.unmount=async()=>{const e=n.$services.viewer;a&&e.scene.postProcessStages.remove(a);const t=n.$services.primitives,o=i.cesiumObject;return t&&t.remove(o)};const s=(e,t)=>{const n=i.cesiumObject,{Cartesian3:o}=Cesium;let r=o.subtract(t,e,new o);const a=o.magnitudeSquared(r),s=o.distance(t,e);if(a<.01||n.frustum.near>s)n.enabled=!1;else{n.enabled=!0,r=o.normalize(r,r);const i=o.normalize(t,new o);n.setView({destination:e,orientation:{direction:r,up:i}}),n.frustum.far=Math.max(s,1.1)}};return()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const tp={...vn,intervals:Object,...Mt,...jn,...Ft,...bn,shading:Object,...wn,...Li,...po};var ip=E({name:"VcPrimitiveTimeDynamicPointCloud",props:tp,emits:{...Zl,frameChanged:e=>!0,frameFailed:e=>!0},setup(e,t){const i=o();i.cesiumClass="VcPrimitiveTimeDynamicPointCloud",i.cesiumEvents=["frameChanged","frameFailed"];const n=dr(e,t,i);return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return t.style=t.tileStyle,delete t.tileStyle,new Cesium.TimeDynamicPointCloud(t)},()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const np={...Ji,name:String,...Mt,geoidTiledTerrainProvider:{type:Object},traceFetches:{type:Boolean,default:!1},cesium3dTilesetOptions:{type:Object},...po};var op=E({name:"VcPrimitiveI3sDataProvider",props:np,emits:Zl,setup(e,t){const i=o();return i.cesiumClass="I3SDataProvider",dr(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const rp={provider:{type:Object},...jn,...yn,...vn,...po};var ap=E({name:"VcPrimitiveVoxel",props:rp,emits:Zl,setup(e,t){const i=o();return i.cesiumClass="VoxelPrimitive",dr(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const sp={...Mt,enabled:{type:Boolean,default:!0},pixelRange:{type:Number,default:80},minimumClusterSize:{type:Number,default:2},clusterBillboards:{type:Boolean,default:!0},clusterLabels:{type:Boolean,default:!0},clusterPoints:{type:Boolean,default:!0},billboards:{type:Array,default:()=>[]},labels:{type:Array,default:()=>[]},points:{type:Array,default:()=>[]},...po};var lp=E({name:"VcPrimitiveCluster",props:sp,emits:{...Zl,clusterEvent:(e,t)=>!0},setup(e,t){var i;const n=o();n.cesiumClass="VcPrimitiveCluster",n.cesiumEvents=["clusterEvent"];const r=dr(e,t,n),a=[];a.push(b((()=>e.show),(e=>{n.cesiumObject.show=e}))),a.push(b((()=>e.enabled),(e=>{n.cesiumObject.enabled=e}))),a.push(b((()=>e.minimumClusterSize),(e=>{n.cesiumObject.minimumClusterSize=e}))),a.push(b((()=>e.clusterBillboards),(e=>{n.cesiumObject.clusterBillboards=e,n.proxy.reload()}))),a.push(b((()=>e.clusterLabels),(e=>{n.cesiumObject.clusterLabels=e,n.proxy.reload()}))),a.push(b((()=>e.clusterBillboards),(e=>{n.cesiumObject.clusterPoints=e,n.proxy.reload()}))),a.push(b((()=>J(e.billboards)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject._billboardCollection;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],r=t[i];JSON.stringify(o)!==JSON.stringify(r)&&n.push({newOptions:o,oldOptions:r})}n.forEach((e=>{const t=i._billboards.find((t=>(null==t?void 0:t.id)===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=null==r?void 0:r.transformProp(i,e.newOptions[i]))}))}))}else{const n=Y(e,t,"id"),o=Y(t,e,"id"),a=[];for(let e=0;e<o.length;e++){const t=i._billboards.find((t=>t.id===o[e].id));t&&a.push(t)}a.forEach((e=>{i.remove(e)})),l(i,n),setTimeout((()=>{r.$services.viewer.scene.camera.changed.raiseEvent()}))}}),{deep:!0})),a.push(b((()=>J(e.labels)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject._labelCollection;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],r=t[i];JSON.stringify(o)!==JSON.stringify(r)&&n.push({newOptions:o,oldOptions:r})}n.forEach((e=>{const t=i._labels.find((t=>t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=r.transformProp(i,e.newOptions[i]))}))}))}else{const n=Y(e,t,"id"),o=Y(t,e,"id"),a=[];for(let e=0;e<o.length;e++){const t=i._labels.find((t=>t.id===o[e].id));t&&a.push(t)}a.forEach((e=>{i.remove(e)})),c(i,n),setTimeout((()=>{r.$services.viewer.scene.camera.changed.raiseEvent()}))}}),{deep:!0})),a.push(b((()=>J(e.points)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject._pointCollection;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],r=t[i];JSON.stringify(o)!==JSON.stringify(r)&&n.push({newOptions:o,oldOptions:r})}n.forEach((e=>{const t=i._pointPrimitives.find((t=>t&&t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=r.transformProp(i,e.newOptions[i]))}))}))}else{const n=Y(e,t,"id"),o=Y(t,e,"id"),a=[];for(let e=0;e<o.length;e++){const t=i._pointPrimitives.find((t=>t.id===o[e].id));t&&a.push(t)}a.forEach((e=>{i.remove(e)})),s(i,n),setTimeout((()=>{r.$services.viewer.scene.camera.changed.raiseEvent()}))}}),{deep:!0})),n.createCesiumObject=async()=>{const t=new Wr({show:e.show,enabled:e.enabled,pixelRange:e.pixelRange,minimumClusterSize:e.minimumClusterSize,clusterBillboards:e.clusterBillboards,clusterLabels:e.clusterLabels,clusterPoints:e.clusterPoints}),i=new Cesium.BillboardCollection;l(i,e.billboards);const n=new Cesium.LabelCollection;c(n,e.labels);const o=new Cesium.PointPrimitiveCollection;return s(o,e.points),t._billboardCollection=i,t._labelCollection=n,t._pointCollection=o,t._initialize(r.$services.viewer.scene),setTimeout((()=>{r.$services.viewer.scene.camera.changed.raiseEvent()})),t};const s=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const o=r.transformProps(n),a=e.add(o);ve(a,o)}},l=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const o=r.transformProps(n),a=e.add(o);ve(a,o)}},c=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const o=r.transformProps(n),a=e.add(o);ve(a,o)}};f((()=>{a.forEach((e=>e())),a.length=0}));const u=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?P("i",{class:ue(u),style:{display:"none !important"}},ja(t.slots.default)):M(ue(u))}});[Rd,Bd,zd,Gd,Ud,Zd,Yd,op,ap,ip,Qd,lp].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const cp=Rd,up=Bd,dp=zd,pp=Gd,mp=Ud,hp=Zd,vp=Yd,gp=Qd,fp=ep,yp=ip,bp=op,Cp=ap,wp=lp,_p={...Mt,...tn,min:{type:Number,default:0},max:{type:Number,default:100},data:Array,options:Object,type:{type:String,default:"primitive"},segments:{type:Array,default:()=>[]},projection:{type:String,default:"3857"}};var Op=E({name:"VcOverlayHeatmap",props:_p,emits:Hl,setup(e,t){var i;const r=o();r.cesiumClass="VcOverlayHeatmap",r.cesiumEvents=[];const s=xo(e,t,r);if(void 0===s)return;const l=n(null),c=n(null),u={minCanvasSize:700,maxCanvasSize:2e3,radiusFactor:60,spacingFactor:1.5,maxOpacity:.8,minOpacity:.1,blur:.85,gradient:{".3":"blue",".65":"yellow",".8":"orange",".95":"red"},xField:"x",yField:"y",valueField:"value",container:void 0},d=n(),p=n(),m=n(),h=n(),v=n(),g=n(!1),y=n();null==(i=De(r).proxy.creatingPromise)||i.then((()=>{g.value=!0}));const C=a((()=>Object.assign({},u,e.options)));let w=[];w.push(b((()=>m),(e=>{p.value.fabric.uniforms.image=e.value,v.value.options.material.fabric.uniforms.image=e.value}),{deep:!0})),w.push(b((()=>e.data),((e,t)=>{if(!r.mounted)return;const i=r.cesiumObject;Array.isArray(e)&&Array.isArray(t)?(x(e,i),m.value=i.getDataURL()):s.reload()}),{deep:!0})),w.push(b((()=>[e.max,e.min]),(e=>{const t=r.cesiumObject;t.setDataMax(e[0]||0),t.setDataMin(e[1]||0),m.value=t.getDataURL()}))),w.push(b((()=>[e.type,e.projection,e.rectangle]),(e=>{s.reload()}))),w.push(b((()=>e.options),(e=>{const t=r.cesiumObject;t.configure(e),m.value=t.getDataURL()}),{deep:!0})),r.createCesiumObject=async()=>{const{WebMercatorProjection:t,GeographicProjection:i}=Cesium;c.value="3857"===e.projection?new t:new i;const n=_();y.value=O(e.rectangle);const o=document.createElement("div");if(Cesium.defined(n)&&o.setAttribute("id",n),o.setAttribute("style","width: "+y.value.width+"px; height: "+y.value.height+"px; margin: 0px; display: none;"),document.body.appendChild(o),C.value.container=o,e.segments.length){C.value.gradient={};const t=e.max-e.min;for(let i=0;i<e.segments.length;i++)C.value.gradient[""+(e.segments[i][0]-e.min)/t]=$e(e.segments[i][1]).toCssColorString()}const r=A.create(C.value);return o.children[0].setAttribute("id",n+"-hm"),Array.isArray(e.data)&&(x(e.data,r),p.value={fabric:{type:"Image",uniforms:{image:m.value,transparent:!0}}},v.value={type:"MaterialAppearance",options:{material:{fabric:{type:"Image",uniforms:{image:m.value}}}}}),r},r.unmount=async()=>(document.body.removeChild(r.cesiumObject._config.container),!0);const _=e=>{let t="";const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<(e||8);n++)t+=i.charAt(Math.floor(62*Math.random()));return t},O=e=>{const t=Ye(e),i=c.value.project(new Cesium.Cartographic(t.west,t.south)),n=c.value.project(new Cesium.Cartographic(t.east,t.north)),o={north:n.y,east:n.x,south:i.y,west:i.x};let r=o.east>0&&o.west<0?o.east+Math.abs(o.west):Math.abs(o.east-o.west),a=o.north>0&&o.south<0?o.north+Math.abs(o.south):Math.abs(o.north-o.south),s=1;r>a&&r>C.value.maxCanvasSize?(s=r/C.value.maxCanvasSize,a/s<C.value.minCanvasSize&&(s=a/C.value.minCanvasSize)):a>r&&a>C.value.maxCanvasSize?(s=a/C.value.maxCanvasSize,a/s<C.value.minCanvasSize&&(s=r/C.value.minCanvasSize)):r<a&&r<C.value.minCanvasSize?(s=r/C.value.minCanvasSize,a/s>C.value.maxCanvasSize&&(s=a/C.value.maxCanvasSize)):a<r&&a<C.value.minCanvasSize&&(s=a/C.value.minCanvasSize,r/s>C.value.maxCanvasSize&&(s=r/C.value.maxCanvasSize)),r/=s,a/=s,Cesium.defined(C.value.radius)||(C.value.radius=r>a?r/C.value.radiusFactor:a/C.value.radiusFactor);const l=(C.value.radius||1)*C.value.spacingFactor,u=o.west,p=o.south;r=Math.round(r+2*l),a=Math.round(a+2*l),o.west-=l*s,o.east+=l*s,o.south-=l*s,o.north+=l*s;const m=c.value.unproject(new Cesium.Cartesian3(o.west,o.south)),h=c.value.unproject(new Cesium.Cartesian3(o.east,o.north)),v={north:Cesium.Math.toDegrees(h.latitude),east:Cesium.Math.toDegrees(h.longitude),south:Cesium.Math.toDegrees(m.latitude),west:Cesium.Math.toDegrees(m.longitude)};return d.value=v,{height:a,width:r,factor:s,xoffset:u,yoffset:p,spacing:l}},x=(t,i)=>{if(t){const{height:n,xoffset:o,yoffset:r,factor:a,spacing:s}=y.value,l=C.value.xField||"x",u=C.value.yField||"y",d=C.value.valueField||"value",p=[];for(let i=0;i<t.length;i++){const m=t[i];Cesium.defined(m.id)||(m.id=i);const h=c.value.project(Cesium.Cartographic.fromDegrees(m[l],m[u])),v={[l]:Math.round((h.x-o)/a+s),[u]:Math.round((h.y-r)/a+s),[d]:void 0};v[u]=n-v[u],(m[d]||0===m[d])&&(v[d]=m[d]),v[d]>e.max||v[d]<e.min||p.push(v)}i.setData({min:e.min,max:e.max,data:p}),m.value=i.getDataURL()}};return f((()=>{w.forEach((e=>e())),w=[]})),Object.assign(r.proxy,{rootRef:l,childRef:h}),()=>{if(g.value){const t=[];return"entity"===e.type&&m.value?t.push(P(Id,{ref:h,show:e.show,rectangle:{coordinates:d.value,material:p.value}})):"primitive"===e.type?t.push(P(up,{ref:h,show:e.show,appearance:v.value,releaseGeometryInstances:!1,geometryInstances:new Cesium.GeometryInstance({geometry:new Cesium.RectangleGeometry({rectangle:Ye(d.value)})})})):"imagery-layer"===e.type&&m.value&&t.push(P(Ld,{ref:h,show:e.show,imageryProvider:new Cesium.SingleTileImageryProvider({url:m.value,rectangle:Ye(d.value)})})),P("i",{ref:l,class:"vc-overlay-heatmap",style:"display: none !important"},t)}return M("v-if")}}});const xp={options:{type:Object,required:!0},autoHidden:{type:Boolean,default:!0},customClass:String,coordinateSystem:{type:String,default:"cesium"}};var Pp=E({name:"VcOverlayEcharts",props:xp,emits:["beforeLoad","ready","destroyed","mouseenter","mouseleave","click"],setup(e,t){const i=o();i.cesiumClass="VcOverlayEcharts",i.cesiumEvents=[];const r=xo(e,t,i);if(void 0===r)return;const{$services:a}=r,s=n(!1),l=n(),c=_({left:"0px",top:"0px",pointerEvents:"none",position:"absolute"});let u;const d=n(!0);let p=[];p.push(b((()=>e.options),(e=>{r.reload()}))),i.createCesiumObject=async()=>l.value,i.mount=async()=>{const{viewer:t}=a;return s.value=!0,x((()=>{ie(e.coordinateSystem,v(t)),l.value&&(u=ne(l.value),h(),t.scene.postRender.addEventListener(m))})),!0},i.unmount=async()=>{const{viewer:e}=a;return e.scene.postRender.removeEventListener(m),s.value=!1,!0};const m=()=>{if(d.value){const{viewer:e}=a;u.resize({width:e.canvas.width,height:e.canvas.height})}},h=()=>{d.value&&e.options&&u.setOption(e.options)},v=t=>{const i=function(e){this.viewer=e,this._mapOffset=[0,0]};return i.create=function(n){return n.eachSeries((function(n){n.get("coordinateSystem")===e.coordinateSystem&&(n.coordinateSystem=new i(t))})),[]},i.getDimensionsInfo=function(){return["x","y"]},i.dimensions=["x","y"],i.prototype.dimensions=["x","y"],i.prototype.setMapOffset=function(e){this._mapOffset=e},i.prototype.dataToPoint=function(t){const i=[],n=Cesium.Cartesian3.fromDegrees(t[0],t[1]);if(!n)return i;if(e.autoHidden){const e=Cesium.Ellipsoid.WGS84.geodeticSurfaceNormal(n,new Cesium.Cartesian3),t=this.viewer.camera.direction;if(Cesium.Cartesian3.dot(e,t)>=0)return i}const o=this.viewer.scene.cartesianToCanvasCoordinates(n);return o?[o.x-this._mapOffset[0],o.y-this._mapOffset[1]]:i},i.prototype.pointToData=function(e){const i=this._mapOffset,n=t.scene.globe.ellipsoid,o=new Cesium.Cartesian3(e[1]+i[1],e[2]+i[2],0),r=n.cartesianToCartographic(o);return r?[r.longitude,r.latitude]:[0,0]},i.prototype.getviewerRect=function(){const e=this.viewer.canvas;return new k(0,0,e.width,e.height)},i.prototype.getRoamTransform=function(){return R()},i},g=e=>{t.emit("click",e)},y=e=>{t.emit("mouseenter",e)},C=e=>{t.emit("mouseleave",e)};return f((()=>{p.forEach((e=>e())),p=[]})),()=>s.value?P("div",{ref:l,class:"vc-echart-container"+(e.customClass?" "+e.customClass:""),style:c,onMouseenter:y,onMouseleave:C,onClick:g},ja(t.slots.default)):M("v-if")}});function Sp(){const e=Cesium.GeometryAttributes;return new Cesium.Geometry({attributes:new e({position:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}),st:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:new Float32Array([0,0,1,0,1,1,0,1])})}),indices:new Uint32Array([3,2,0,0,2,1])})}function Ep(e,t){if(Cesium.defined(t)){const i={};i.arrayBufferView=t,e.source=i}return new Cesium.Texture(e)}function Tp(e,t,i){return new Cesium.Framebuffer({context:e,colorTextures:[t],depthTexture:i})}function Ip(e){const t={viewport:e.viewport,depthTest:e.depthTest,depthMask:e.depthMask,blending:e.blending};return Cesium.Appearance.getDefaultRenderState(!0,!1,t)}class Mp{constructor(e){this.commandType=e.commandType,this.geometry=e.geometry,this.attributeLocations=e.attributeLocations,this.primitiveType=e.primitiveType,this.uniformMap=e.uniformMap,this.vertexShaderSource=e.vertexShaderSource,this.fragmentShaderSource=e.fragmentShaderSource,this.rawRenderState=e.rawRenderState,this.framebuffer=e.framebuffer,this.outputTexture=e.outputTexture,this.autoClear=Cesium.defaultValue(e.autoClear,!1),this.preExecute=e.preExecute,this.show=!0,this.commandToExecute=void 0,this.clearCommand=void 0,this.autoClear&&(this.clearCommand=new Cesium.ClearCommand({color:new Cesium.Color(0,0,0,0),depth:1,framebuffer:this.framebuffer,pass:Cesium.Pass.OPAQUE}))}createCommand(e){switch(this.commandType){case"Draw":{const t=Cesium.VertexArray.fromGeometry({context:e,geometry:this.geometry,attributeLocations:this.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW}),i=Cesium.ShaderProgram.fromCache({context:e,attributeLocations:this.attributeLocations,vertexShaderSource:this.vertexShaderSource,fragmentShaderSource:this.fragmentShaderSource}),n=Cesium.RenderState.fromCache(this.rawRenderState);return new Cesium.DrawCommand({owner:this,vertexArray:t,primitiveType:this.primitiveType,uniformMap:this.uniformMap,modelMatrix:Cesium.Matrix4.IDENTITY,shaderProgram:i,framebuffer:this.framebuffer,renderState:n,pass:Cesium.Pass.OPAQUE})}case"Compute":return new Cesium.ComputeCommand({owner:this,fragmentShaderSource:this.fragmentShaderSource,uniformMap:this.uniformMap,outputTexture:this.outputTexture,persists:!0})}}setGeometry(e,t){this.geometry=t;const i=Cesium.VertexArray.fromGeometry({context:e,geometry:this.geometry,attributeLocations:this.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW});this.commandToExecute.vertexArray=i}update(e){this.show&&(Cesium.defined(this.commandToExecute)||(this.commandToExecute=this.createCommand(e.context)),Cesium.defined(this.preExecute)&&this.preExecute(),Cesium.defined(this.clearCommand)&&e.commandList.push(this.clearCommand),e.commandList.push(this.commandToExecute))}isDestroyed(){return!1}destroy(){return Cesium.defined(this.commandToExecute)&&(this.commandToExecute.shaderProgram=this.commandToExecute.shaderProgram&&this.commandToExecute.shaderProgram.destroy()),Cesium.destroyObject(this)}}class Dp{constructor(e,t,i,n){this.data=t,this.createWindTextures(e,t),this.createParticlesTextures(e,i,n),this.createComputingPrimitives(t,i,n,e)}createWindTextures(e,t){const i={context:e,width:t.dimensions.lon,height:t.dimensions.lat*t.dimensions.lev,pixelFormat:(null==e?void 0:e.webgl2)?Cesium.PixelFormat.RED:Cesium.PixelFormat.LUMINANCE,pixelDatatype:Cesium.PixelDatatype.FLOAT,flipY:!1,sampler:new Cesium.Sampler({minificationFilter:Cesium.TextureMinificationFilter.NEAREST,magnificationFilter:Cesium.TextureMagnificationFilter.NEAREST})};this.windTextures={U:Ep(i,t.U.array),V:Ep(i,t.V.array)}}createParticlesTextures(e,t,i){const n={context:e,width:t.particlesTextureSize,height:t.particlesTextureSize,pixelFormat:Cesium.PixelFormat.RGBA,pixelDatatype:Cesium.PixelDatatype.FLOAT,flipY:!1,sampler:new Cesium.Sampler({minificationFilter:Cesium.TextureMinificationFilter.NEAREST,magnificationFilter:Cesium.TextureMagnificationFilter.NEAREST})},o=this.randomizeParticles(t.maxParticles,i),r=new Float32Array(4*t.maxParticles).fill(0);this.particlesTextures={previousParticlesPosition:Ep(n,o),currentParticlesPosition:Ep(n,o),nextParticlesPosition:Ep(n,o),postProcessingPosition:Ep(n,o),particlesSpeed:Ep(n,r)}}randomizeParticles(e,t){const i=new Float32Array(4*e);for(let n=0;n<e;n++)i[4*n]=Cesium.Math.randomBetween(t.lonRange.x,t.lonRange.y),i[4*n+1]=Cesium.Math.randomBetween(t.latRange.x,t.latRange.y),i[4*n+2]=Cesium.Math.randomBetween(this.data.lev.min,this.data.lev.max),i[4*n+3]=0;return i}destroyParticlesTextures(){Object.keys(this.particlesTextures).forEach((e=>{this.particlesTextures[e].destroy()}))}createComputingPrimitives(e,t,i,n){const o=null==n?void 0:n.webgl2;let r="\n\nprecision highp float;\n\n// the size of UV textures: width = lon, height = lat*lev\nuniform sampler2D U; // eastward wind\nuniform sampler2D V; // northward wind\nuniform sampler2D currentParticlesPosition; // (lon, lat, lev)\n\nuniform vec3 dimension; // (lon, lat, lev)\nuniform vec3 minimum; // minimum of each dimension\nuniform vec3 maximum; // maximum of each dimension\nuniform vec3 interval; // interval of each dimension\n\n// used to calculate the wind norm\nuniform vec2 uSpeedRange; // (min, max);\nuniform vec2 vSpeedRange;\nuniform float pixelSize;\nuniform float speedFactor;\n\nin vec2 v_textureCoordinates;\n\nvec2 mapPositionToNormalizedIndex2D(vec3 lonLatLev) {\n  // ensure the range of longitude and latitude\n  lonLatLev.x = mod(lonLatLev.x, 360.0);\n  lonLatLev.y = clamp(lonLatLev.y, -90.0, 90.0);\n\n  vec3 index3D = vec3(0.0);\n  index3D.x = (lonLatLev.x - minimum.x) / interval.x;\n  index3D.y = (lonLatLev.y - minimum.y) / interval.y;\n  index3D.z = (lonLatLev.z - minimum.z) / interval.z;\n\n  // the st texture coordinate corresponding to (col, row) index\n  // example\n  // data array is [0, 1, 2, 3, 4, 5], width = 3, height = 2\n  // the content of texture will be\n  // t 1.0\n  //    |  3 4 5\n  //    |\n  //    |  0 1 2\n  //   0.0------1.0 s\n\n  vec2 index2D = vec2(index3D.x, index3D.z * dimension.y + index3D.y);\n  vec2 normalizedIndex2D = vec2(index2D.x / dimension.x, index2D.y / (dimension.y * dimension.z));\n  return normalizedIndex2D;\n}\n\nfloat getWindComponent(sampler2D componentTexture, vec3 lonLatLev) {\n  vec2 normalizedIndex2D = mapPositionToNormalizedIndex2D(lonLatLev);\n  float result = texture(componentTexture, normalizedIndex2D).r;\n  return result;\n}\n\nfloat interpolateTexture(sampler2D componentTexture, vec3 lonLatLev) {\n  float lon = lonLatLev.x;\n  float lat = lonLatLev.y;\n  float lev = lonLatLev.z;\n\n  float lon0 = floor(lon / interval.x) * interval.x;\n  float lon1 = lon0 + 1.0 * interval.x;\n  float lat0 = floor(lat / interval.y) * interval.y;\n  float lat1 = lat0 + 1.0 * interval.y;\n\n  float lon0_lat0 = getWindComponent(componentTexture, vec3(lon0, lat0, lev));\n  float lon1_lat0 = getWindComponent(componentTexture, vec3(lon1, lat0, lev));\n  float lon0_lat1 = getWindComponent(componentTexture, vec3(lon0, lat1, lev));\n  float lon1_lat1 = getWindComponent(componentTexture, vec3(lon1, lat1, lev));\n\n  float lon_lat0 = mix(lon0_lat0, lon1_lat0, lon - lon0);\n  float lon_lat1 = mix(lon0_lat1, lon1_lat1, lon - lon0);\n  float lon_lat = mix(lon_lat0, lon_lat1, lat - lat0);\n  return lon_lat;\n}\n\nvec3 linearInterpolation(vec3 lonLatLev) {\n  // https://en.wikipedia.org/wiki/Bilinear_interpolation\n  float u = interpolateTexture(U, lonLatLev);\n  float v = interpolateTexture(V, lonLatLev);\n  float w = 0.0;\n  return vec3(u, v, w);\n}\n\nvec2 lengthOfLonLat(vec3 lonLatLev) {\n  // unit conversion: meters -> longitude latitude degrees\n  // see https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree for detail\n\n  // Calculate the length of a degree of latitude and longitude in meters\n  float latitude = radians(lonLatLev.y);\n\n  float term1 = 111132.92;\n  float term2 = 559.82 * cos(2.0 * latitude);\n  float term3 = 1.175 * cos(4.0 * latitude);\n  float term4 = 0.0023 * cos(6.0 * latitude);\n  float latLength = term1 - term2 + term3 - term4;\n\n  float term5 = 111412.84 * cos(latitude);\n  float term6 = 93.5 * cos(3.0 * latitude);\n  float term7 = 0.118 * cos(5.0 * latitude);\n  float longLength = term5 - term6 + term7;\n\n  return vec2(longLength, latLength);\n}\n\nvec3 convertSpeedUnitToLonLat(vec3 lonLatLev, vec3 speed) {\n  vec2 lonLatLength = lengthOfLonLat(lonLatLev);\n  float u = speed.x / lonLatLength.x;\n  float v = speed.y / lonLatLength.y;\n  float w = 0.0;\n  vec3 windVectorInLonLatLev = vec3(u, v, w);\n\n  return windVectorInLonLatLev;\n}\n\nvec3 calculateSpeedByRungeKutta2(vec3 lonLatLev) {\n  // see https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages for detail\n  const float h = 0.5;\n  float speedScaleFactor = speedFactor * pixelSize;\n\n  vec3 y_n = lonLatLev;\n  vec3 f_n = linearInterpolation(lonLatLev);\n  vec3 midpoint = y_n + 0.5 * h * convertSpeedUnitToLonLat(y_n, f_n) * speedScaleFactor;\n  vec3 speed = h * linearInterpolation(midpoint) * speedScaleFactor;\n\n  return speed;\n}\n\nfloat calculateWindNorm(vec3 speed) {\n  vec3 percent = vec3(0.0);\n  percent.x = (speed.x - uSpeedRange.x) / (uSpeedRange.y - uSpeedRange.x);\n  percent.y = (speed.y - vSpeedRange.x) / (vSpeedRange.y - vSpeedRange.x);\n  float norm = length(percent);\n\n  return norm;\n}\n\nvoid main() {\n  // texture coordinate must be normalized\n  vec3 lonLatLev = texture(currentParticlesPosition, v_textureCoordinates).rgb;\n  float speedScaleFactor = speedFactor * pixelSize;\n  vec3 speed = calculateSpeedByRungeKutta2(lonLatLev);\n  vec3 speedInLonLat = convertSpeedUnitToLonLat(lonLatLev, speed);\n\n  vec4 particleSpeed = vec4(speedInLonLat, calculateWindNorm(speed / speedScaleFactor));\n  out_FragColor = particleSpeed;\n}\n";o||(r=r.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),r=r.replace(/texture\(/g,"texture2D("),r=r.replace(/out_FragColor/g,"gl_FragColor"));let a="\nuniform sampler2D currentParticlesPosition; // (lon, lat, lev)\nuniform sampler2D particlesSpeed; // (u, v, w, norm) Unit converted to degrees of longitude and latitude\n\nin vec2 v_textureCoordinates;\n\nvoid main() {\n  // texture coordinate must be normalized\n  vec3 lonLatLev = texture(currentParticlesPosition, v_textureCoordinates).rgb;\n  vec3 speed = texture(particlesSpeed, v_textureCoordinates).rgb;\n  vec3 nextParticle = lonLatLev + speed;\n\n  out_FragColor = vec4(nextParticle, 0.0);\n}\n";o||(a=a.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),a=a.replace(/texture\(/g,"texture2D("),a=a.replace(/out_FragColor/g,"gl_FragColor"));let s="\n\nuniform sampler2D nextParticlesPosition;\nuniform sampler2D particlesSpeed; // (u, v, w, norm)\n\n// range (min, max)\nuniform vec2 lonRange;\nuniform vec2 latRange;\n\nuniform float randomCoefficient; // use to improve the pseudo-random generator\nuniform float dropRate; // drop rate is a chance a particle will restart at random position to avoid degeneration\nuniform float dropRateBump;\n\nin vec2 v_textureCoordinates;\n\n// pseudo-random generator\nconst vec3 randomConstants = vec3(12.9898, 78.233, 4375.85453);\nconst vec2 normalRange = vec2(0.0, 1.0);\nfloat rand(vec2 seed, vec2 range) {\n  vec2 randomSeed = randomCoefficient * seed;\n  float temp = dot(randomConstants.xy, randomSeed);\n  temp = fract(sin(temp) * (randomConstants.z + temp));\n  return temp * (range.y - range.x) + range.x;\n}\n\nvec3 generateRandomParticle(vec2 seed, float lev) {\n  // ensure the longitude is in [0, 360]\n  float randomLon = mod(rand(seed, lonRange), 360.0);\n  float randomLat = rand(-seed, latRange);\n\n  return vec3(randomLon, randomLat, lev);\n}\n\nbool particleOutbound(vec3 particle) {\n  return particle.y < -90.0 || particle.y > 90.0;\n}\n\nvoid main() {\n  vec3 nextParticle = texture(nextParticlesPosition, v_textureCoordinates).rgb;\n  vec4 nextSpeed = texture(particlesSpeed, v_textureCoordinates);\n  float speedNorm = nextSpeed.a;\n  float particleDropRate = dropRate + dropRateBump * speedNorm;\n\n  vec2 seed1 = nextParticle.xy + v_textureCoordinates;\n  vec2 seed2 = nextSpeed.xy + v_textureCoordinates;\n  vec3 randomParticle = generateRandomParticle(seed1, nextParticle.z);\n  float randomNumber = rand(seed2, normalRange);\n\n  if (randomNumber < particleDropRate || particleOutbound(nextParticle)) {\n    out_FragColor = vec4(randomParticle, 1.0); // 1.0 means this is a random particle\n  } else {\n    out_FragColor = vec4(nextParticle, 0.0);\n  }\n}\n";o||(s=s.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),s=s.replace(/texture\(/g,"texture2D("),s=s.replace(/out_FragColor/g,"gl_FragColor"));const l=new Cesium.Cartesian3(e.dimensions.lon,e.dimensions.lat,e.dimensions.lev),c=new Cesium.Cartesian3(e.lon.min,e.lat.min,e.lev.min),u=new Cesium.Cartesian3(e.lon.max,e.lat.max,e.lev.max),d=new Cesium.Cartesian3((u.x-c.x)/(l.x-1),(u.y-c.y)/(l.y-1),l.z>1?(u.z-c.z)/(l.z-1):1),p=new Cesium.Cartesian2(e.U.min,e.U.max),m=new Cesium.Cartesian2(e.V.min,e.V.max),h=this;this.primitives={calculateSpeed:new Mp({commandType:"Compute",uniformMap:{U:function(){return h.windTextures.U},V:function(){return h.windTextures.V},currentParticlesPosition:function(){return h.particlesTextures.currentParticlesPosition},dimension:function(){return l},minimum:function(){return c},maximum:function(){return u},interval:function(){return d},uSpeedRange:function(){return p},vSpeedRange:function(){return m},pixelSize:function(){return i.pixelSize},speedFactor:function(){return t.speedFactor}},fragmentShaderSource:new Cesium.ShaderSource({sources:[r]}),outputTexture:this.particlesTextures.particlesSpeed,preExecute:function(){const e=h.particlesTextures.previousParticlesPosition;h.particlesTextures.previousParticlesPosition=h.particlesTextures.currentParticlesPosition,h.particlesTextures.currentParticlesPosition=h.particlesTextures.postProcessingPosition,h.particlesTextures.postProcessingPosition=e,h.primitives.calculateSpeed.commandToExecute.outputTexture=h.particlesTextures.particlesSpeed}}),updatePosition:new Mp({commandType:"Compute",uniformMap:{currentParticlesPosition:function(){return h.particlesTextures.currentParticlesPosition},particlesSpeed:function(){return h.particlesTextures.particlesSpeed}},fragmentShaderSource:new Cesium.ShaderSource({sources:[a]}),outputTexture:this.particlesTextures.nextParticlesPosition,preExecute:function(){h.primitives.updatePosition.commandToExecute.outputTexture=h.particlesTextures.nextParticlesPosition}}),postProcessingPosition:new Mp({commandType:"Compute",uniformMap:{nextParticlesPosition:function(){return h.particlesTextures.nextParticlesPosition},particlesSpeed:function(){return h.particlesTextures.particlesSpeed},lonRange:function(){return i.lonRange},latRange:function(){return i.latRange},randomCoefficient:function(){return Math.random()},dropRate:function(){return t.dropRate},dropRateBump:function(){return t.dropRateBump}},fragmentShaderSource:new Cesium.ShaderSource({sources:[s]}),outputTexture:this.particlesTextures.postProcessingPosition,preExecute:function(){h.primitives.postProcessingPosition.commandToExecute.outputTexture=h.particlesTextures.postProcessingPosition}})}}}class jp{constructor(e,t,i,n,o){this.createRenderingTextures(e,t),this.createRenderingFramebuffers(e),this.createRenderingPrimitives(e,i,n,o)}createRenderingTextures(e,t){const i={context:e,width:e.drawingBufferWidth,height:e.drawingBufferHeight,pixelFormat:Cesium.PixelFormat.RGBA,pixelDatatype:Cesium.PixelDatatype.UNSIGNED_BYTE},n={context:e,width:e.drawingBufferWidth,height:e.drawingBufferHeight,pixelFormat:Cesium.PixelFormat.DEPTH_COMPONENT,pixelDatatype:Cesium.PixelDatatype.UNSIGNED_INT};this.textures={segmentsColor:Ep(i),segmentsDepth:Ep(n),currentTrailsColor:Ep(i),currentTrailsDepth:Ep(n),nextTrailsColor:Ep(i),nextTrailsDepth:Ep(n)}}createRenderingFramebuffers(e){this.framebuffers={segments:Tp(e,this.textures.segmentsColor,this.textures.segmentsDepth),currentTrails:Tp(e,this.textures.currentTrailsColor,this.textures.currentTrailsDepth),nextTrails:Tp(e,this.textures.nextTrailsColor,this.textures.nextTrailsDepth)}}createSegmentsGeometry(e){const t=[];for(let u=0;u<e.particlesTextureSize;u++)for(let i=0;i<e.particlesTextureSize;i++)for(let n=0;n<6;n++)t.push(u/e.particlesTextureSize),t.push(i/e.particlesTextureSize);const i=new Float32Array(t),n=[],o=[-1,0,1],r=[-1,1];for(let u=0;u<e.maxParticles;u++)for(let e=0;e<o.length;e++)for(let t=0;t<r.length;t++)n.push(o[e]),n.push(r[t]),n.push(0);const a=new Float32Array(n),s=12*e.maxParticles,l=new Uint32Array(s);for(let u=0,d=0,p=0;u<e.maxParticles;u++)l[d++]=p+0,l[d++]=p+1,l[d++]=p+2,l[d++]=p+2,l[d++]=p+1,l[d++]=p+3,l[d++]=p+2,l[d++]=p+4,l[d++]=p+3,l[d++]=p+4,l[d++]=p+3,l[d++]=p+5,p+=6;const c=Cesium.GeometryAttributes;return new Cesium.Geometry({attributes:new c({st:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:i}),normal:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:a})}),indices:l})}createRenderingPrimitives(e,t,i,n){const o=this,r=null==e?void 0:e.webgl2;let a="\nin vec2 st;\n// it is not normal itself, but used to control lines drawing\nin vec3 normal; // (point to use, offset sign, not used component)\n\nuniform sampler2D previousParticlesPosition;\nuniform sampler2D currentParticlesPosition;\nuniform sampler2D postProcessingPosition;\n\nuniform float particleHeight;\n\nuniform float aspect;\nuniform float pixelSize;\nuniform float lineWidth;\n\nstruct adjacentPoints {\n  vec4 previous;\n  vec4 current;\n  vec4 next;\n};\n\nvec3 convertCoordinate(vec3 lonLatLev) {\n  // WGS84 (lon, lat, lev) -> ECEF (x, y, z)\n  // read https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates for detail\n\n  // WGS 84 geometric constants\n  float a = 6378137.0; // Semi-major axis\n  float b = 6356752.3142; // Semi-minor axis\n  float e2 = 6.69437999014e-3; // First eccentricity squared\n\n  float latitude = radians(lonLatLev.y);\n  float longitude = radians(lonLatLev.x);\n\n  float cosLat = cos(latitude);\n  float sinLat = sin(latitude);\n  float cosLon = cos(longitude);\n  float sinLon = sin(longitude);\n\n  float N_Phi = a / sqrt(1.0 - e2 * sinLat * sinLat);\n  float h = particleHeight; // it should be high enough otherwise the particle may not pass the terrain depth test\n\n  vec3 cartesian = vec3(0.0);\n  cartesian.x = (N_Phi + h) * cosLat * cosLon;\n  cartesian.y = (N_Phi + h) * cosLat * sinLon;\n  cartesian.z = ((b * b) / (a * a) * N_Phi + h) * sinLat;\n  return cartesian;\n}\n\nvec4 calculateProjectedCoordinate(vec3 lonLatLev) {\n  // the range of longitude in Cesium is [-180, 180] but the range of longitude in the NetCDF file is [0, 360]\n  // [0, 180] is corresponding to [0, 180] and [180, 360] is corresponding to [-180, 0]\n  lonLatLev.x = mod(lonLatLev.x + 180.0, 360.0) - 180.0;\n  vec3 particlePosition = convertCoordinate(lonLatLev);\n  vec4 projectedCoordinate = czm_modelViewProjection * vec4(particlePosition, 1.0);\n  return projectedCoordinate;\n}\n\nvec4 calculateOffsetOnNormalDirection(vec4 pointA, vec4 pointB, float offsetSign) {\n  vec2 aspectVec2 = vec2(aspect, 1.0);\n  vec2 pointA_XY = (pointA.xy / pointA.w) * aspectVec2;\n  vec2 pointB_XY = (pointB.xy / pointB.w) * aspectVec2;\n\n  float offsetLength = lineWidth / 2.0;\n  vec2 direction = normalize(pointB_XY - pointA_XY);\n  vec2 normalVector = vec2(-direction.y, direction.x);\n  normalVector.x = normalVector.x / aspect;\n  normalVector = offsetLength * normalVector;\n\n  vec4 offset = vec4(offsetSign * normalVector, 0.0, 0.0);\n  return offset;\n}\n\nvec4 calculateOffsetOnMiterDirection(adjacentPoints projectedCoordinates, float offsetSign) {\n  vec2 aspectVec2 = vec2(aspect, 1.0);\n\n  vec4 PointA = projectedCoordinates.previous;\n  vec4 PointB = projectedCoordinates.current;\n  vec4 PointC = projectedCoordinates.next;\n\n  vec2 pointA_XY = (PointA.xy / PointA.w) * aspectVec2;\n  vec2 pointB_XY = (PointB.xy / PointB.w) * aspectVec2;\n  vec2 pointC_XY = (PointC.xy / PointC.w) * aspectVec2;\n\n  vec2 AB = normalize(pointB_XY - pointA_XY);\n  vec2 BC = normalize(pointC_XY - pointB_XY);\n\n  vec2 normalA = vec2(-AB.y, AB.x);\n  vec2 tangent = normalize(AB + BC);\n  vec2 miter = vec2(-tangent.y, tangent.x);\n\n  float offsetLength = lineWidth / 2.0;\n  float projection = dot(miter, normalA);\n  vec4 offset = vec4(0.0);\n  // avoid to use values that are too small\n  if (projection > 0.1) {\n      float miterLength = offsetLength / projection;\n      offset = vec4(offsetSign * miter * miterLength, 0.0, 0.0);\n      offset.x = offset.x / aspect;\n  } else {\n      offset = calculateOffsetOnNormalDirection(PointB, PointC, offsetSign);\n  }\n\n  return offset;\n}\n\nvoid main() {\n  vec2 particleIndex = st;\n\n  vec3 previousPosition = texture(previousParticlesPosition, particleIndex).rgb;\n  vec3 currentPosition = texture(currentParticlesPosition, particleIndex).rgb;\n  vec3 nextPosition = texture(postProcessingPosition, particleIndex).rgb;\n\n  float isAnyRandomPointUsed = texture(postProcessingPosition, particleIndex).a +\n    texture(currentParticlesPosition, particleIndex).a +\n    texture(previousParticlesPosition, particleIndex).a;\n\n  adjacentPoints projectedCoordinates;\n  if (isAnyRandomPointUsed > 0.0) {\n    projectedCoordinates.previous = calculateProjectedCoordinate(previousPosition);\n    projectedCoordinates.current = projectedCoordinates.previous;\n    projectedCoordinates.next = projectedCoordinates.previous;\n  } else {\n    projectedCoordinates.previous = calculateProjectedCoordinate(previousPosition);\n    projectedCoordinates.current = calculateProjectedCoordinate(currentPosition);\n    projectedCoordinates.next = calculateProjectedCoordinate(nextPosition);\n  }\n\n  int pointToUse = int(normal.x);\n  float offsetSign = normal.y;\n  vec4 offset = vec4(0.0);\n  // render lines with triangles and miter joint\n  // read https://blog.scottlogic.com/2019/11/18/drawing-lines-with-webgl.html for detail\n  if (pointToUse == -1) {\n    offset = pixelSize * calculateOffsetOnNormalDirection(projectedCoordinates.previous, projectedCoordinates.current, offsetSign);\n    gl_Position = projectedCoordinates.previous + offset;\n  } else {\n    if (pointToUse == 0) {\n      offset = pixelSize * calculateOffsetOnMiterDirection(projectedCoordinates, offsetSign);\n      gl_Position = projectedCoordinates.current + offset;\n    } else {\n      if (pointToUse == 1) {\n        offset = pixelSize * calculateOffsetOnNormalDirection(projectedCoordinates.current, projectedCoordinates.next, offsetSign);\n        gl_Position = projectedCoordinates.next + offset;\n      } else {\n\n      }\n    }\n  }\n}\n";r||(a=a.replace("in vec2 st;","attribute vec2 st;"),a=a.replace("in vec3 normal;","attribute vec3 normal;"),a=a.replace(/texture\(/g,"texture2D("));let s="\nvoid main() {\n  const vec4 white = vec4(1.0);\n  out_FragColor = white;\n}\n";r||(s=s.replace(/out_FragColor/g,"gl_FragColor"));let l="\nin vec3 position;\nin vec2 st;\n\nout vec2 textureCoordinate;\n\nvoid main() {\n  textureCoordinate = st;\n  gl_Position = vec4(position, 1.0);\n}\n";r||(l=l.replace("out vec2 textureCoordinate;","varying vec2 textureCoordinate;"),l=l.replace("in vec3 position;","attribute vec3 position;"),l=l.replace("in vec2 st;","attribute vec2 st;"));let c="\n\nuniform sampler2D segmentsColorTexture;\nuniform sampler2D segmentsDepthTexture;\n\nuniform sampler2D currentTrailsColor;\nuniform sampler2D trailsDepthTexture;\n\nuniform float fadeOpacity;\n\nin vec2 textureCoordinate;\n\nvoid main() {\n  vec4 pointsColor = texture(segmentsColorTexture, textureCoordinate);\n  vec4 trailsColor = texture(currentTrailsColor, textureCoordinate);\n\n  trailsColor = floor(fadeOpacity * 255.0 * trailsColor) / 255.0; // make sure the trailsColor will be strictly decreased\n\n  float pointsDepth = texture(segmentsDepthTexture, textureCoordinate).r;\n  float trailsDepth = texture(trailsDepthTexture, textureCoordinate).r;\n  float globeDepth = czm_unpackDepth(texture(czm_globeDepthTexture, textureCoordinate));\n\n  out_FragColor = vec4(0.0);\n  if (pointsDepth < globeDepth) {\n    out_FragColor = out_FragColor + pointsColor;\n  }\n  if (trailsDepth < globeDepth) {\n    out_FragColor = out_FragColor + trailsColor;\n  }\n  gl_FragDepth = min(pointsDepth, trailsDepth);\n}\n";r||(c=c.replace("in vec2 textureCoordinate;","varying vec2 textureCoordinate;"),c=c.replace(/out_FragColor/g,"gl_FragColor"),c=c.replace(/gl_FragDepth/g,"gl_FragDepthEXT"),c=c.replace(/texture\(/g,"texture2D("));let u="\nuniform sampler2D trailsColorTexture;\nuniform sampler2D trailsDepthTexture;\n\nin vec2 textureCoordinate;\n\nvoid main() {\n  vec4 trailsColor = texture(trailsColorTexture, textureCoordinate);\n  float trailsDepth = texture(trailsDepthTexture, textureCoordinate).r;\n  float globeDepth = czm_unpackDepth(texture(czm_globeDepthTexture, textureCoordinate));\n\n  if (trailsDepth < globeDepth) {\n    out_FragColor = trailsColor;\n  } else {\n    out_FragColor = vec4(0.0);\n  }\n}\n";r||(u=u.replace("in vec2 textureCoordinate;","varying vec2 textureCoordinate;"),u=u.replace(/out_FragColor/g,"gl_FragColor"),u=u.replace(/texture\(/g,"texture2D(")),this.primitives={segments:new Mp({commandType:"Draw",attributeLocations:{st:0,normal:1},geometry:this.createSegmentsGeometry(t),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{previousParticlesPosition:function(){return n.particlesTextures.previousParticlesPosition},currentParticlesPosition:function(){return n.particlesTextures.currentParticlesPosition},postProcessingPosition:function(){return n.particlesTextures.postProcessingPosition},aspect:function(){return e.drawingBufferWidth/e.drawingBufferHeight},pixelSize:function(){return i.pixelSize},lineWidth:function(){return t.lineWidth},particleHeight:function(){return t.particleHeight}},vertexShaderSource:new Cesium.ShaderSource({sources:[a]}),fragmentShaderSource:new Cesium.ShaderSource({sources:[s]}),rawRenderState:Ip({viewport:void 0,depthTest:{enabled:!0},depthMask:!0}),framebuffer:this.framebuffers.segments,autoClear:!0}),trails:new Mp({commandType:"Draw",attributeLocations:{position:0,st:1},geometry:Sp(),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{segmentsColorTexture:function(){return o.textures.segmentsColor},segmentsDepthTexture:function(){return o.textures.segmentsDepth},currentTrailsColor:function(){return o.framebuffers.currentTrails.getColorTexture(0)},trailsDepthTexture:function(){return o.framebuffers.currentTrails.depthTexture},fadeOpacity:function(){return t.fadeOpacity}},vertexShaderSource:new Cesium.ShaderSource({defines:["DISABLE_GL_POSITION_LOG_DEPTH"],sources:[l]}),fragmentShaderSource:new Cesium.ShaderSource({defines:["DISABLE_LOG_DEPTH_FRAGMENT_WRITE"],sources:[c]}),rawRenderState:Ip({viewport:void 0,depthTest:{enabled:!0,func:Cesium.DepthFunction.ALWAYS},depthMask:!0}),framebuffer:this.framebuffers.nextTrails,autoClear:!0,preExecute:function(){const e=o.framebuffers.currentTrails;o.framebuffers.currentTrails=o.framebuffers.nextTrails,o.framebuffers.nextTrails=e,o.primitives.trails.commandToExecute.framebuffer=o.framebuffers.nextTrails,o.primitives.trails.clearCommand.framebuffer=o.framebuffers.nextTrails}}),screen:new Mp({commandType:"Draw",attributeLocations:{position:0,st:1},geometry:Sp(),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{trailsColorTexture:function(){return o.framebuffers.nextTrails.getColorTexture(0)},trailsDepthTexture:function(){return o.framebuffers.nextTrails.depthTexture}},vertexShaderSource:new Cesium.ShaderSource({defines:["DISABLE_GL_POSITION_LOG_DEPTH"],sources:[l]}),fragmentShaderSource:new Cesium.ShaderSource({defines:["DISABLE_LOG_DEPTH_FRAGMENT_WRITE"],sources:[u]}),rawRenderState:Ip({viewport:void 0,depthTest:{enabled:!1},depthMask:!0,blending:{enabled:!0}}),framebuffer:void 0})}}}class Lp{constructor(e,t,i,n){this.context=e,this.data=t,this.particleSystemOptions=i,this.viewerParameters=n,this.particlesComputing=new Dp(this.context,this.data,this.particleSystemOptions,this.viewerParameters),this.particlesRendering=new jp(this.context,this.data,this.particleSystemOptions,this.viewerParameters,this.particlesComputing)}canvasResize(e){this.particlesComputing.destroyParticlesTextures(),Object.keys(this.particlesComputing.windTextures).forEach((e=>{this.particlesComputing.windTextures[e].destroy()})),Object.keys(this.particlesRendering.framebuffers).forEach((e=>{this.particlesRendering.framebuffers[e].destroy()})),this.context=e,this.particlesComputing=new Dp(this.context,this.data,this.particleSystemOptions,this.viewerParameters),this.particlesRendering=new jp(this.context,this.data,this.particleSystemOptions,this.viewerParameters,this.particlesComputing)}clearFramebuffers(){const e=new Cesium.ClearCommand({color:new Cesium.Color(0,0,0,0),depth:1,framebuffer:void 0,pass:Cesium.Pass.OPAQUE});Object.keys(this.particlesRendering.framebuffers).forEach((t=>{e.framebuffer=this.particlesRendering.framebuffers[t],e.execute(this.context)}))}refreshParticles(e){if(this.clearFramebuffers(),this.particlesComputing.destroyParticlesTextures(),this.particlesComputing.createParticlesTextures(this.context,this.particleSystemOptions,this.viewerParameters),e){const e=this.particlesRendering.createSegmentsGeometry(this.particleSystemOptions);this.particlesRendering.primitives.segments.geometry=e;const t=Cesium.VertexArray.fromGeometry({context:this.context,geometry:e,attributeLocations:this.particlesRendering.primitives.segments.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW});this.particlesRendering.primitives.segments.commandToExecute.vertexArray=t}}applyParticleSystemOptions(e){let t=!1;this.particleSystemOptions.maxParticles!==e.maxParticles&&(t=!0),Object.keys(e).forEach((t=>{this.particleSystemOptions[t]=e[t]})),this.refreshParticles(t)}applyViewerParameters(e){Object.keys(e).forEach((t=>{this.viewerParameters[t]=e[t]})),this.refreshParticles(!1)}}function Ap(e,t){const i=e-t*Math.floor(e/t);return i===t?0:i}function kp(e){return"string"==typeof e&&e.indexOf("/")>=0&&(e=e.split("/")),function(e){if(Array.isArray(e))return!0;if("object"!=typeof e||!e)return!1;const t=e.length;return"number"==typeof t&&t>=0}(e)&&2===e.length?e[0]/e[1]:+e}const Rp={show:{type:Boolean,default:!0},data:{type:Object,required:!0},options:{type:Object,default:()=>({maxParticles:4096,particleHeight:100,fadeOpacity:.996,dropRate:.003,dropRateBump:.01,speedFactor:1,lineWidth:4})},viewerParameters:Object};var Vp=E({name:"VcOverlayWindmap",props:Rp,emits:Hl,setup(e,t){const i=o();i.cesiumClass="VcOverlayHtml",i.cesiumEvents=[];const n=xo(e,t,i);if(void 0===n)return;const{$services:r}=n;let s,l,c,u;const d=a((()=>{const t=Math.ceil(Math.sqrt(e.options.maxParticles));return{particlesTextureSize:t,maxParticles:t*t,particleHeight:e.options.particleHeight,fadeOpacity:e.options.fadeOpacity,dropRate:e.options.dropRate,dropRateBump:e.options.dropRateBump,speedFactor:e.options.speedFactor,lineWidth:e.options.lineWidth}}));let p=[];p.push(b((()=>e.show),(e=>{c.show=e}))),p.push(b((()=>e.data),(e=>{i.proxy.reload()}))),p.push(b((()=>d.value),(e=>{const t=i.cesiumObject;t&&t.applyParticleSystemOptions(e)}),{deep:!0})),p.push(b((()=>e.viewerParameters),(e=>{_();i.cesiumObject.applyViewerParameters(s)}),{deep:!0})),i.createCesiumObject=async()=>{const{viewer:t}=r;c=new Cesium.PrimitiveCollection,l=new Cesium.BoundingSphere(Cesium.Cartesian3.ZERO,6314355.63),s={lonRange:new Cesium.Cartesian2,latRange:new Cesium.Cartesian2,pixelSize:0};const i={start:e.data.lon.array[0],delta:e.data.lon.delta,size:e.data.lon.array.length},n={start:e.data.lat.array[0],delta:e.data.lat.delta,size:e.data.lat.array.length};return u=function(e,t){const i=Math.floor(e.size),n=Math.floor(t.size),o=i*n,r=kp(e.delta),a=kp(t.delta),s=kp(e.start),l=kp(t.start),c=Math.floor(i*r)>=360;return{dimensions:function(){return{width:i,height:n}},isCylindrical:function(){return c},forEach:function(e,t){for(let n=t||0;n<o;n++){const t=n%i,o=Math.floor(n/i);if(e(s+t*r,l+o*a,n))return n+1}return NaN},closest:function(e,t){if(e==e&&t==t){const o=Ap(e-s,360)/r,u=(t-l)/a,d=Math.round(o),p=Math.round(u);if(0<=p&&p<n&&0<=d&&(d<i||d===i&&c)){const e=p*i+d;return d===i?e-i:e}}return NaN},closest4:function(e,t){if(e==e&&t==t){const o=Ap(e-s,360)/r,u=(t-l)/a,d=Math.floor(o),p=Math.floor(u),m=d+1;if(0<=p&&p+1<n&&0<=d&&(m<i||m===i&&c)){const e=p*i+d;let t=e+1;const n=e+i;let r=n+1;return m===i&&(t-=i,r-=i),[e,t,n,r,o-d,u-p]}}return[NaN,NaN,NaN,NaN,NaN,NaN]}}}(i,n),_(),new Lp(t.scene.context,e.data,d.value,s)},i.mount=async()=>{const{viewer:e}=r;e.scene.primitives.add(c);const t=e.scene,i=t.camera;return m(),i.moveStart.addEventListener(v),i.moveEnd.addEventListener(g),window.addEventListener("resize",C),t.preRender.addEventListener(w),!0},i.unmount=async()=>{h();const{viewer:e}=r,t=e.scene,i=t.camera;return h(),e.scene.primitives.remove(c),i.moveStart.removeEventListener(v),i.moveEnd.removeEventListener(g),window.removeEventListener("resize",C),t.preRender.removeEventListener(w),!0};const m=()=>{const e=i.cesiumObject;c.add(e.particlesComputing.primitives.calculateSpeed),c.add(e.particlesComputing.primitives.updatePosition),c.add(e.particlesComputing.primitives.postProcessingPosition),c.add(e.particlesRendering.primitives.segments),c.add(e.particlesRendering.primitives.trails),c.add(e.particlesRendering.primitives.screen)},h=()=>{const e=i.cesiumObject;c.remove(e.particlesComputing.primitives.calculateSpeed),c.remove(e.particlesComputing.primitives.updatePosition),c.remove(e.particlesComputing.primitives.postProcessingPosition),c.remove(e.particlesRendering.primitives.segments),c.remove(e.particlesRendering.primitives.trails),c.remove(e.particlesRendering.primitives.screen)},v=()=>{c.show=!1},g=()=>{_();i.cesiumObject.applyViewerParameters(s),c.show=!0};let y=!1;const C=()=>{y=!0,c.show=!1,c.removeAll()},w=()=>{if(y){const{viewer:e}=r,t=e.scene;i.cesiumObject.canvasResize(t.context),y=!1,m(),c.show=!0}},_=()=>{const{viewer:t}=r,i=t.scene,n=i.camera;if(Cesium.defined(e.viewerParameters)&&Cesium.defined(e.viewerParameters.latRange)&&Cesium.defined(e.viewerParameters.lonRange))s.lonRange=Be(e.viewerParameters.lonRange),s.latRange=Be(e.viewerParameters.latRange);else{const e=function(e){const t={},i=Cesium.Math.mod(e.west,Cesium.Math.TWO_PI),n=Cesium.Math.mod(e.east,Cesium.Math.TWO_PI),o=e.width;let r,a;o>Cesium.Math.THREE_PI_OVER_TWO?(r=0,a=Cesium.Math.TWO_PI):n-i<o?(r=i,a=i+o):(r=i,a=n),t.lon={min:Cesium.Math.toDegrees(r),max:Cesium.Math.toDegrees(a)};const s=e.south,l=e.north,c=e.height,u=c>Cesium.Math.PI/12?c/2:0;let d=Cesium.Math.clampToLatitudeRange(s-u),p=Cesium.Math.clampToLatitudeRange(l+u);return d<-Cesium.Math.PI_OVER_THREE&&(d=-Cesium.Math.PI_OVER_TWO),p>Cesium.Math.PI_OVER_THREE&&(p=Cesium.Math.PI_OVER_TWO),t.lat={min:Cesium.Math.toDegrees(d),max:Cesium.Math.toDegrees(p)},t}(n.computeViewRectangle(i.globe.ellipsoid));s.lonRange.x=e.lon.min,s.lonRange.y=e.lon.max,s.latRange.x=e.lat.min,s.latRange.y=e.lat.max}const o=Cesium.defined(e.viewerParameters)&&Cesium.defined(e.viewerParameters.pixelSize)?e.viewerParameters.pixelSize:n.getPixelSize(l,i.drawingBufferWidth,i.drawingBufferHeight);o>0&&(s.pixelSize=o)};return f((()=>{p.forEach((e=>e())),p=[]})),Object.assign(i.proxy,{getNearestUV:(t,i)=>{const n=u.closest(t,i);if(Cesium.defined(n))return[e.data.U.array[n],e.data.V.array[n]]}}),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Bp={...Mt,name:{type:String,default:"__vc__overlay__dynamic__"},startTime:{type:[Object,String,Date]},stopTime:{type:[Object,String,Date]},currentTime:{type:[Object,String,Date]},clockRange:{type:Number,default:0},clockStep:{type:Number,default:1},shouldAnimate:{type:Boolean,default:!0},canAnimate:{type:Boolean,default:!0},multiplier:{type:Number,default:1},dynamicOverlays:{type:Array,default:()=>[]},defaultInterval:{type:Number,default:3},stopArrivedFlag:{type:String,default:"time"},positionPrecision:{type:Number,default:1e-7},timePrecision:{type:Number,default:.01}};var Np=E({name:"VcOverlayDynamic",props:Bp,emits:{...Hl,"update:currentTime":e=>!0,"update:shouldAnimate":e=>!0,"update:canAnimate":e=>!0,"update:clockRange":e=>!0,"update:clockStep":e=>!0,"update:multiplier":e=>!0,"update:startTime":e=>!0,"update:stopTime":e=>!0,onStop:e=>!0,stopArrived:e=>!0},setup(e,t){const i=o();i.cesiumClass="VcOverlayDynamic",i.cesiumEvents=[];const r=xo(e,t,i);if(void 0===r)return;const{$services:a}=r,s=n([]),l=n({}),{emit:c}=t,u=n(null),d=n(null);let p,m=[];m.push(b((()=>e.show),(e=>{const t=i.cesiumObject;t&&(t.show=e)}))),m.push(b((()=>e.name),(e=>{const t=i.cesiumObject;t&&(t.name=e)}))),m.push(b((()=>e.startTime),(e=>{const{viewer:t}=a;Cesium.defined(t)&&e&&(t.clock.startTime=ot(e))}))),m.push(b((()=>e.stopTime),(e=>{const{viewer:t}=a;Cesium.defined(t)&&e&&(t.clock.stopTime=ot(e))}))),m.push(b((()=>e.currentTime),(e=>{const{viewer:t}=a;Cesium.defined(t)&&e&&(t.clock.currentTime=ot(e))}))),m.push(b((()=>e.multiplier),(e=>{const{viewer:t}=a;Cesium.defined(t)&&(t.clock.multiplier=e)}))),m.push(b((()=>e.clockStep),(e=>{const{viewer:t}=a;Cesium.defined(t)&&(t.clock.clockStep=e)}))),m.push(b((()=>e.clockRange),(e=>{const{viewer:t}=a;Cesium.defined(t)&&(t.clock.clockRange=e)}))),m.push(b((()=>e.canAnimate),(e=>{const{viewer:t}=a;Cesium.defined(t)&&(t.clock.canAnimate=e)}))),m.push(b((()=>e.shouldAnimate),(e=>{const{viewer:t}=a;Cesium.defined(t)&&(t.clock.shouldAnimate=e)}))),m.push(b((()=>J(e.dynamicOverlays)),((t,n)=>{if(!i.mounted)return;const o=i.cesiumObject;if(t.length===n.length){const i=[];for(let e=0;e<t.length;e++){const o=t[e],r=n[e],a=(e,t)=>{if("nodeTransformations"!==e&&"_definitionChanged"!==e)return t};JSON.stringify(o,a)!==JSON.stringify(r,a)&&i.push({newOptions:o,oldOptions:r})}i.forEach((t=>{const i=o.entities.getById(t.oldOptions.id);if(Cesium.defined(i)){if(t.oldOptions.id===t.newOptions.id)i&&Object.keys(t.newOptions).forEach((e=>{t.oldOptions[e]!==t.newOptions[e]&&(i[e]=r.transformProp(e,t.newOptions[e]))}));else if(i){o.entities.remove(i),Q(s.value,(e=>e.id===i.id));const e=t.newOptions;v(o,[e])}const n=K(s.value,(e=>e.id===i.id));if(Cesium.defined(n)){const i=t.oldOptions.sampledPositions,o=t.newOptions.sampledPositions,r=Y(o,i,"id");Y(i,o,"id").forEach((e=>{e.time&&n._sampledPosition.removeSample(e.time)})),r.forEach((t=>{t.time?n.addPosition(t.position,t.time):t.interval&&n.addPosition(t.position,t.interval||e.defaultInterval)}))}}}))}else{const e=Y(t,n,"id"),i=Y(n,t,"id"),r=[];for(let t=0;t<i.length;t++){const e=o.entities.getById(i[t].id);r.push(e)}r.forEach((e=>{o.entities.remove(e),Q(s.value,(t=>t.id===e.id))})),v(o,e)}}),{deep:!0})),i.createCesiumObject=async()=>new Cesium.CustomDataSource(e.name);const h=t=>{let n=Ie(i,"update:currentTime");!ot(e.currentTime).equalsEpsilon(t.currentTime,.001)&&n&&c("update:currentTime",t.currentTime),n=Ie(i,"update:shouldAnimate"),e.shouldAnimate!==t.shouldAnimate&&n&&c("update:shouldAnimate",t.shouldAnimate),n=Ie(i,"update:canAnimate"),e.canAnimate!==t.canAnimate&&n&&c("update:canAnimate",t.canAnimate),n=Ie(i,"update:clockRange"),e.clockRange!==t.clockRange&&n&&c("update:clockRange",t.clockRange),n=Ie(i,"update:clockStep"),e.clockStep!==t.clockStep&&n&&c("update:clockStep",t.clockStep),n=Ie(i,"update:multiplier"),e.multiplier!==t.multiplier&&n&&c("update:multiplier",t.multiplier),n=Ie(i,"update:startTime"),!ot(e.startTime).equalsEpsilon(t.startTime,.001)&&n&&c("update:startTime",t.startTime),n=Ie(i,"update:stopTime"),!ot(e.stopTime).equalsEpsilon(t.stopTime,.001)&&n&&c("update:stopTime",t.stopTime),g(t);const{JulianDate:o,Cartesian3:r}=Cesium;if(n=Ie(i,"stopArrived"),n&&e.shouldAnimate)for(let i=0;i<s.value.length;i++){const n=s.value[i],a=n._sampledPosition.getValue(t.currentTime),l=e.dynamicOverlays[i];for(let s=0;s<l.sampledPositions.length;s++){const u=l.sampledPositions[s],d=Ne(u.position),m=ot(u.time),h=r.equalsEpsilon(a,d,e.positionPrecision),v=o.equalsEpsilon(t.currentTime,m,e.timePrecision);let g=!1;switch(e.stopArrivedFlag){case"time":g=v;break;case"position":g=h;break;case"both":g=v&&h;break;case"or":g=v||h}if(g){c("stopArrived",{overlay:n,position:u,offset:p,clock:t,indexOverlay:i,indexPosition:s});break}}}},v=(t,i)=>{for(let n=0;n<i.length;n++){const o=i[n],a=r.transformProps(o),l=new Fr(a);s.value.push(l);const c=t.entities.add(l._entity);a.sampledPositions.forEach((t=>{t.time?l.addPosition(t.position,t.time):t.interval&&(t.time=l.addPosition(t.position,t.interval||e.defaultInterval))})),o.id!==c.id&&(o.id=c.id),ve(c,a,["id"])}};i.mount=async()=>{const{viewer:t}=a,n=i.cesiumObject;return n.show=e.show,v(n,e.dynamicOverlays),t.dataSources.add(n).then((()=>{l.value.startTime=t.clock.startTime,l.value.stopTime=t.clock.stopTime,l.value.currentTime=t.clock.currentTime,l.value.multiplier=t.clock.multiplier,l.value.clockStep=t.clock.clockStep,l.value.clockRange=t.clock.clockRange,l.value.canAnimate=t.clock.canAnimate,l.value.shouldAnimate=t.clock.shouldAnimate,e.startTime&&(t.clock.startTime=ot(e.startTime)),e.stopTime&&(t.clock.stopTime=ot(e.stopTime)),e.currentTime&&(t.clock.currentTime=ot(e.currentTime)),t.clock.multiplier=e.multiplier,t.clock.clockStep=e.clockStep,t.clock.clockRange=e.clockRange,t.clock.canAnimate=!1,t.clock.shouldAnimate=e.shouldAnimate,t.clock.onTick.addEventListener(h);const n=Ie(i,"onStop");return n&&t.clock.onStop.addEventListener(n),!0}))},i.unmount=async()=>{const{viewer:e}=a,t=i.cesiumObject;e.dataSources.remove(t,!0),e.clock.startTime=l.value.startTime,e.clock.stopTime=l.value.stopTime,e.clock.multiplier=l.value.multiplier,e.clock.clockStep=l.value.clockStep,e.clock.clockRange=l.value.clockRange,e.clock.canAnimate=l.value.canAnimate,e.clock.shouldAnimate=l.value.shouldAnimate,s.value.length=0,e.clock.onTick.removeEventListener(h);const n=Ie(i,"onStop");return n&&e.clock.onStop.removeEventListener(n),u.value&&(e.trackedEntity=void 0),!0};const g=e=>{var t,i,n,o,r,s,l,c;if(d.value&&u.value){const{viewer:m}=a;if(Cesium.JulianDate.greaterThan(e.currentTime,e.stopTime))return void(u.value=null);const h=u.value._sampledPosition.getValue(e.currentTime);let v=new Cesium.HeadingPitchRange;switch(d.value.mode){case"TP":v.heading=0,v.pitch=(null==(i=null==(t=d.value)?void 0:t.offset)?void 0:i.pitch)||Cesium.Math.toRadians(-90),v.range=(null==(o=null==(n=d.value)?void 0:n.offset)?void 0:o.range)||1e3;break;case"FP":{const t=Cesium.JulianDate.addSeconds(e.currentTime,1/60,new Cesium.JulianDate),i=u.value._sampledPosition.getValue(t)||h;h.equals(i)&&p?v=p:(v.heading=Cesium.Math.toRadians(at(h,i)),v.pitch=((null==(s=null==(r=d.value)?void 0:r.offset)?void 0:s.pitch)||Cesium.Math.toRadians(-45))+st(h,i),v.range=(null==(c=null==(l=d.value)?void 0:l.offset)?void 0:c.range)||500);break}case"CUSTOM":v=rt(d.value.offset)}p=v,m.camera.lookAt(h,v)}},y=e=>e instanceof Fr?e:"string"==typeof e?K(s.value,(t=>t.id===e)):"number"==typeof e?s.value[e]:s.value[0];return f((()=>{m.forEach((e=>e())),m=[]})),Object.assign(i.proxy,{getOverlays:()=>s.value,getOverlay:y,trackOverlay:(e,t)=>{var i;const{viewer:n}=a;if("FREE"===(t=t||{mode:null===d.value?"FP":"FREE"}).mode)return n.camera.lookAtTransform(Cesium.Matrix4.IDENTITY),void(u.value&&(n.trackedEntity=void 0,u.value=null,d.value=null));u.value=y(e),n.trackedEntity=V(u.value._entity),"TRACKED"===t.mode?((null==(i=null==t?void 0:t.viewFrom)?void 0:i.length)&&(n.trackedEntity.viewFrom=new Cesium.Cartesian3(t.viewFrom[0],t.viewFrom[1],t.viewFrom[2])),d.value=null):d.value=t},zoomToOverlay:(e,t)=>{const{viewer:n}=a;let o;if(u.value&&(n.trackedEntity=void 0,u.value=null),Cesium.defined(e))if(Array.isArray(e))if(e.length){const t=[];e.forEach((e=>{const i=V(y(e)._entity);t.push(i)})),o=t}else o=i.cesiumObject;else o=V(y(e)._entity);else o=i.cesiumObject;return n.zoomTo(o,Cesium.defined(t)?rt(t):void 0)},flyToOverlay:(e,t)=>{const{viewer:n}=a;let o;if(u.value&&(n.trackedEntity=void 0,u.value=null),Cesium.defined(e))if(Array.isArray(e))if(e.length){const t=[];e.forEach((e=>{const i=V(y(e)._entity);t.push(i)})),o=t}else o=i.cesiumObject;else o=V(y(e)._entity);else o=i.cesiumObject;return t=t||{duration:3},Cesium.defined(t.offset)&&(t.offset=rt(t.offset)),n.flyTo(o,t)}}),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const zp={...An,...kn,...Mt,...po,...jn,...Ln,billboards:{type:Array,default:()=>[]}};var Fp=E({name:"VcCollectionBillboard",props:zp,emits:ql,setup(e,t){const i=o();i.cesiumClass="BillboardCollection";const n=ur(e,t,i);let r=[];r.push(b((()=>J(e.billboards)),((e,t)=>{if(!i.mounted)return;const o=i.cesiumObject;if(e.length===t.length){const i=[];for(let n=0;n<e.length;n++){const o=e[n],r=t[n];JSON.stringify(o)!==JSON.stringify(r)&&i.push({newOptions:o,oldOptions:r})}i.forEach((e=>{const t=o._billboards.find((t=>(null==t?void 0:t.id)===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=null==n?void 0:n.transformProp(i,e.newOptions[i]))}))}))}else{const i=Y(e,t,"id"),n=Y(t,e,"id"),r=[];for(let e=0;e<n.length;e++){const t=o._billboards.find((t=>t.id===n[e].id));t&&r.push(t)}r.forEach((e=>{o.remove(e)})),a(o,i)}}),{deep:!0})),i.alreadyListening.push("billboards");const a=(e,t)=>{for(let i=0;i<t.length;i++){const o=t[i];o.id=Cesium.defined(o.id)?o.id:Cesium.createGuid();const r=null==n?void 0:n.transformProps(o),a=e.add(r);ve(a,r)}};return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e),i=new Cesium.BillboardCollection(t);return a(i,e.billboards),i},f((()=>{r.forEach((e=>e())),r=[]})),()=>{var e,n;return t.slots.default?P("i",{class:ue((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},ja(t.slots.default)):M(ue((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});const Gp={...ht,...vt,...ft,...yt,...bt,...Ct,...wt,..._t,...Rn,...Ot,...Pt,...St,...dt,...Et,...Tt,...It,...Mt,...Dt,...jt,...Lt,...At,...po};var Hp=E({name:"VcBillboard",props:Gp,emits:ql,setup(e,t){const i=o();return i.cesiumClass="Billboard",cr(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Up={brightness:{type:Number,default:1},...vt,maximumSize:{type:Object,watcherOptions:{cesiumObjectBuilder:Ne}},...dt,scale:{type:Object,watcherOptions:{cesiumObjectBuilder:Be}},...Mt,slice:{type:Number,default:-1}};var Wp=E({name:"VcCumulusCloud",props:Up,emits:ql,setup(e,t){const i=o();return i.cesiumClass="CumulusCloud",cr(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const $p={...Mt,noiseDetail:{type:Number,default:16},noiseOffset:{type:Object},debugBillboards:{type:Boolean,default:!1},debugEllipsoids:{type:Boolean,default:!1},clouds:{type:Array,default:()=>[]}};var Zp=E({name:"VcCollectionCloud",props:$p,emits:Hl,setup(e,t){var i;const n=o();n.cesiumClass="CloudCollection";const r=ur(e,t,n);if(void 0===r)return;n.alreadyListening.push("clouds");let a=[];a.push(b((()=>J(e.clouds)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],r=t[i];JSON.stringify(o)!==JSON.stringify(r)&&n.push({newOptions:o,oldOptions:r})}n.forEach((e=>{const t=i._clouds.find((t=>t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=r.transformProp(i,e.newOptions[i]))}))}))}else{const n=Y(e,t,"id"),o=Y(t,e,"id"),r=[];for(let e=0;e<o.length;e++){const t=i._clouds.find((t=>t.id===o[e].id));t&&r.push(t)}r.forEach((e=>{i.remove(e)})),s(i,n)}}),{deep:!0}));const s=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const o=r.transformProps(n,Wp.props),a=e.add(o);ve(a,o)}};n.createCesiumObject=async()=>{const t=r.transformProps(e,Wp.props),i=new Cesium.CloudCollection(t);return s(i,e.clouds),i},f((()=>{a.forEach((e=>e())),a=[]}));const l=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?P("i",{class:ue(l),style:{display:"none !important"}},ja(t.slots.default)):M(ue(l))}});const qp={...jn,...Ln,...An,...kn,...Mt,...po,labels:{type:Array,default:()=>[]}};var Yp=E({name:"VcCollectionLabel",props:qp,emits:ql,setup(e,t){var i;const n=o();n.cesiumClass="LabelCollection";const r=ur(e,t,n);if(void 0===r)return;n.alreadyListening.push("labels");let a=[];a.push(b((()=>J(e.labels)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],r=t[i];JSON.stringify(o)!==JSON.stringify(r)&&n.push({newOptions:o,oldOptions:r})}n.forEach((e=>{const t=i._labels.find((t=>t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=r.transformProp(i,e.newOptions[i]))}))}))}else{const n=Y(e,t,"id"),o=Y(t,e,"id"),r=[];for(let e=0;e<o.length;e++){const t=i._labels.find((t=>t.id===o[e].id));t&&r.push(t)}r.forEach((e=>{i.remove(e)})),s(i,n)}}),{deep:!0}));const s=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const o=r.transformProps(n),a=e.add(o);ve(a,o)}};n.createCesiumObject=async()=>{const t=r.transformProps(e),i=new Cesium.LabelCollection(t);return s(i,e.labels),i},f((()=>{a.forEach((e=>e())),a=[]}));const l=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?P("i",{class:ue(l),style:{display:"none !important"}},ja(t.slots.default)):M(ue(l))}});const Jp={...gi,...fi,...ft,...yt,...bt,...yi,...mi,...wt,..._t,...Rn,...Nt,...zt,...Pt,...St,...dt,...Tt,...It,...Mt,...vi,...hi,...pi,totalScale:{type:Number,default:1},...jt,...Lt,...po};var Xp=E({name:"VcLabel",props:Jp,emits:ql,setup(e,t){const i=o();return i.cesiumClass="Label",cr(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Qp={...jn,...Ln,...kn,...Mt,...po,points:{type:Array,default:()=>[]}};var Kp=E({name:"VcCollectionPoint",props:Qp,emits:ql,setup(e,t){const i=o();i.cesiumClass="PointPrimitiveCollection";const n=ur(e,t,i);if(void 0===n)return;i.alreadyListening.push("points");let r=[];r.push(b((()=>J(e.points)),((e,t)=>{if(!i.mounted)return;const o=i.cesiumObject;if(e.length===t.length){const i=[];for(let n=0;n<e.length;n++){const o=e[n],r=t[n];JSON.stringify(o)!==JSON.stringify(r)&&i.push({newOptions:o,oldOptions:r})}i.forEach((e=>{const t=o._pointPrimitives.find((t=>t&&t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=n.transformProp(i,e.newOptions[i]))}))}))}else{const i=Y(e,t,"id"),n=Y(t,e,"id"),r=[];for(let e=0;e<n.length;e++){const t=o._pointPrimitives.find((t=>t.id===n[e].id));t&&r.push(t)}r.forEach((e=>{o.remove(e)})),a(o,i)}}),{deep:!0}));const a=(e,t)=>{for(let i=0;i<t.length;i++){const o=t[i];o.id=Cesium.defined(o.id)?o.id:Cesium.createGuid();const r=n.transformProps(o),a=e.add(r);ve(a,r)}};return i.createCesiumObject=async()=>{const t=n.transformProps(e),i=new Cesium.PointPrimitiveCollection(t);return a(i,e.points),i},f((()=>{r.forEach((e=>e())),r=[]})),()=>{var e,n;return t.slots.default?P("i",{class:ue((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},ja(t.slots.default)):M(ue((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});const em={...vt,...ft,...yt,...Rn,...Nt,...zt,...ki,...dt,...It,...Mt,...jt,...po};var tm=E({name:"VcPoint",props:em,emits:ql,setup(e,t){const i=o();return i.cesiumClass="PointPrimitive",cr(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var im=E({name:"VcCollectionPolyline",props:{...jn,...Ln,...Mt,...po,polylines:{type:Array,default:()=>[]}},emits:ql,setup(e,t){var i;const n=o();n.cesiumClass="PolylineCollection";const r=ur(e,t,n);if(void 0===r)return;n.alreadyListening.push("polylines");let a=[];a.push(b((()=>J(e.polylines)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],r=t[i];JSON.stringify(o)!==JSON.stringify(r)&&n.push({newOptions:o,oldOptions:r})}n.forEach((e=>{const t=i._polylines.find((t=>t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=r.transformProp(i,e.newOptions[i]))}))}))}else{const n=Y(e,t,"id"),o=Y(t,e,"id"),r=[];for(let e=0;e<o.length;e++){const t=i._polylines.find((t=>t.id===o[e].id));t&&r.push(t)}r.forEach((e=>{i.remove(e)})),s(i,n)}}),{deep:!0}));const s=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const o=r.transformProps(n),a=e.add(o);ve(a,o)}};n.createCesiumObject=async()=>{const t=r.transformProps(e),i=new Cesium.PolylineCollection(t);return s(i,e.polylines),i},f((()=>{a.forEach((e=>e())),a=[]}));const l=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?P("i",{class:ue(l),style:{display:"none !important"}},ja(t.slots.default)):M(ue(l))}});const nm={...yt,...Rn,...Vn,...Vt,...Gt,...Mt,...At,...po};var om=E({name:"VcPolyline",props:nm,emits:ql,setup(e,t){const i=o();return i.cesiumClass="Polyline",cr(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const rm={...Mt,destroyPrimitives:{type:Boolean,default:!0},...po,polygons:{type:Array,default:()=>[]}};var am=E({name:"VcCollectionPrimitive",props:rm,emits:ql,setup(e,t){var i;const n=o();n.cesiumClass="PrimitiveCollection";const r=ur(e,t,n);if(void 0===r)return;n.alreadyListening.push("polygons");let a=[];a.push(b((()=>J(e.polygons)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],r=t[i];JSON.stringify(o)!==JSON.stringify(r)&&n.push({newOptions:o,oldOptions:r})}n.forEach((e=>{const t=i._primitives.find((t=>t._id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=r.transformProp(i,e.newOptions[i]))}))}))}else{const n=Y(e,t,"id"),o=Y(t,e,"id"),r=[];for(let e=0;e<o.length;e++){const t=i._primitives.find((t=>t.id===o[e].id));t&&r.push(t)}r.forEach((e=>{i.remove(e)})),s(i,n)}}),{deep:!0}));const s=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const o=r.transformProps(n),a=new zr(o);a._vcParent=e,ve(a,o),e.add(a)}};n.createCesiumObject=async()=>{const t=r.transformProps(e),i=new Cesium.PrimitiveCollection(t);return s(i,e.polygons),i},f((()=>{a.forEach((e=>e())),a=[]}));const l=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?P("i",{class:ue(l),style:{display:"none !important"}},ja(t.slots.default)):M(ue(l))}});const sm={...Gt,...Un,...En,...Tn,...Mt,...Rn,...zi,...Zt,...Gi,...on,..._n,...On,...po};var lm=E({name:"VcPolygon",props:sm,emits:ql,setup(e,t){const i=o();i.cesiumClass="PolygonPrimitive";const n=cr(e,t,i);if(void 0===n)return;let r=[];return r.push(b((()=>e.clampToGround),(e=>{const t=i.cesiumObject;t&&(t.clampToGround=e)}))),r.push(b((()=>e.positions),(e=>{const t=i.cesiumObject;t&&(t.positions=ze(e))}))),r.push(b((()=>e.polygonHierarchy),(e=>{const t=i.cesiumObject;t&&(t.polygonHierarchy=Ue(e))}))),r.push(b((()=>e.appearance),(e=>{const t=i.cesiumObject;t&&(t.appearance=qe.call(i,e))}))),r.push(b((()=>e.depthFailAppearance),(e=>{const t=i.cesiumObject;t&&(t.depthFailAppearance=qe.call(i,e))}))),r.push(b((()=>e.show),(e=>{const t=i.cesiumObject;t&&(t.show=e)}))),r.push(b((()=>e.classificationType),(e=>{const t=i.cesiumObject;t&&(t.classificationType=e)}))),i.createCesiumObject=async()=>{const t=n.transformProps(e);return new zr(t)},i.mount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return t._vcParent=e,e&&e.add(t)},i.unmount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return e&&!e.isDestroyed()&&e.remove(t)},f((()=>{r.forEach((e=>e())),r=[]})),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});[Fp,Zp,Yp,Kp,im,am,Wp,Hp,Xp,tm,om,lm].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const cm=Fp,um=Zp,dm=Yp,pm=Kp,mm=im,hm=am,vm=Hp,gm=Wp,fm=Xp,ym=tm,bm=om,Cm=lm,wm={geometry:Object,...jn,...Rn,attributes:Object};var _m=E({name:"VcGeometryInstance",props:wm,emits:{...Hl,"update:geometry":e=>!0},setup(e,t){const i=o();i.renderByParent=!0,i.cesiumClass="GeometryInstance",i.cesiumEvents=[];const r=xo(e,t,i);if(void 0===r)return;const{emit:a}=t,l=n(0);i.createCesiumObject=async()=>{const t=r.transformProps(e);return t.geometry||(t.geometry=new Cesium.Geometry({attributes:new Cesium.GeometryAttributes})),new Cesium.GeometryInstance(t)},i.mount=async()=>{var e;const t=De(i).proxy;void 0!==t.__childCount&&(l.value=t.__childCount.value||0,t.__childCount.value+=1);const n=i.cesiumObject;return null==(e=t.__updateGeometryInstances)||e.call(t,n,l.value),!0},i.unmount=async()=>{var e;const t=i.cesiumObject,n=De(i).proxy;return null==(e=n.__removeGeometryInstances)||e.call(n,t),!0};return s(re,Ee(r.getServices(),{get geometryInstance(){return i.cesiumObject}})),Object.assign(i.proxy,{__updateGeometry:e=>{if(Ie(i,"update:geometry"))a("update:geometry",e);else{i.cesiumObject.geometry=e}return!0}}),()=>{var e,n;return t.slots.default?P("i",{class:ue((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},ja(t.slots.default)):M(ue((null==(n=i.proxy)?void 0:n.$options.name)||"v-if"))}}});_m.install=e=>{e.component(_m.name,_m)};const Om=_m,xm=Om,Pm={...kt,...Nn};var Sm=E({name:"VcGeometryBox",props:Pm,emits:Hl,setup(e,t){const i=o();i.cesiumClass="BoxGeometry";const n=So(e,t,i);return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return Cesium.BoxGeometry.fromDimensions(t)},()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Em={...kt};var Tm=E({name:"VcGeometryBoxOutline",props:Em,emits:Hl,setup(e,t){const i=o();i.cesiumClass="BoxOutlineGeometry";const n=So(e,t,i);return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return Cesium.BoxOutlineGeometry.fromDimensions(t)},()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Im={...zn,...Fn,...on,...Ct,...$t,...Nn,...Ht,...ii};var Mm=E({name:"VcGeometryCircle",props:Im,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="CircleGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Dm={...zn,...Fn,...on,...Ct,...$t,...Ht,...Qt};var jm=E({name:"VcGeometryCircleOutline",props:Dm,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="CircleOutlineGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Lm={...Un,...on,...Nn,...ii};var Am=E({name:"VcGeometryPolygonCoplanar",props:Lm,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="CoplanarPolygonGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const km={...Un};var Rm=E({name:"VcGeometryPolygonCoplanarOutline",props:km,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="CoplanarPolygonOutlineGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Vm={...Gt,...At,...on,...$t,...Ct,...Ht,...Nn,...Wt};var Bm=E({name:"VcGeometryCorridor",props:Vm,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="CorridorGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Nm={...Gt,...At,...on,...$t,...Ct,...Ht,...Wt};var zm=E({name:"VcGeometryCorridorOutline",props:Nm,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="CorridorOutlineGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Fm={...Yt,...Jt,...Xt,...Kt,...Nn};var Gm=E({name:"VcGeometryCylinder",props:Fm,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="CylinderGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Hm={...Yt,...Jt,...Xt,...Kt,...Qt};var Um=E({name:"VcGeometryCylinderOutline",props:Hm,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="CylinderOutlineGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Wm={...zn,...ei,...ti,...on,...Ct,...Ht,...Et,...ii,...$t,...Nn};var $m=E({name:"VcGeometryEllipse",props:Wm,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="EllipseGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Zm={...zn,...ei,...ti,...on,...Ct,...Ht,...Et,...ii,...$t,...Qt};var qm=E({name:"VcGeometryEllipseOutline",props:Zm,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="EllipseOutlineGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Ym={...ni,...oi,...ri,...ai,...si,...li,...ci,...ui,...Nn};var Jm=E({name:"VcGeometryEllipsoid",props:Ym,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="EllipsoidGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Xm=E({name:"VcGeometryEllipsoidOutline",props:{...ni,...oi,...ri,...ai,...si,...li,...ci,...ui,...di},emits:Hl,setup(e,t){const i=o();return i.cesiumClass="EllipsoidOutlineGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Qm={...Gn,...Hn,...mt,...Nn};var Km=E({name:"VcGeometryFrustum",props:Qm,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="FrustumGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const eh={...Gn,...Hn,...mt};var th=E({name:"VcGeometryFrustumOutline",props:eh,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="FrustumOutlineGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const ih={...Gt,...At,...$t,...Vn,...zi};var nh=E({name:"VcGeometryGroundPolyline",props:ih,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="GroundPolylineGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const oh={...Nn};var rh=E({name:"VcGeometryPlane",props:oh,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="PlaneGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}}),ah=E({name:"VcGeometryPlaneOutline",emits:Hl,setup(e,t){const i=o();return i.cesiumClass="PlaneOutlineGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const sh={...Un,...Ct,...Ht,...Nn,...ii,...on,...$t,...Vi,...Bi,...Ni,...zi};var lh=E({name:"VcGeometryPolygon",props:sh,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="PolygonGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const ch={...Un,...Ct,...Ht,...Nn,...on,...$t,...Vi,...zi};var uh=E({name:"VcGeometryPolygonOutline",props:ch,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="PolygonOutlineGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const dh={...Gt,...At,...oo,colorsPerVertex:{type:Boolean,default:!1},...zi,...$t,...Nn,...on};var ph=E({name:"VcGeometryPolyline",props:dh,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="PolylineGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const mh={...Xn,...Jn,...on,...$t,...Nn,...Wt};var hh=E({name:"VcGeometryPolylineVolume",props:mh,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="PolylineVolumeGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const vh={...Xn,...Jn,...on,...$t,...Wt};var gh=E({name:"VcGeometryPolylineVolumeOutline",props:vh,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="PolylineVolumeOutlineGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const fh={...tn,...Nn,...on,...$t,...Ct,...Et,...ii,...Ht};var yh=E({name:"VcGeometryRectangle",props:fh,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="RectangleGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const bh={...tn,...on,...$t,...Ct,...Et,...Ht};var Ch=E({name:"VcGeometryRectangleOutline",props:bh,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="RectangleOutlineGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const wh={...Gt,...oo,colorsPerVertex:{type:Boolean,default:!1},...zi,...$t,...on};var _h=E({name:"VcGeometrySimplePolyline",props:wh,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="SimplePolylineGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Oh={...Fn,...ci,...ui,...Nn};var xh=E({name:"VcGeometrySphere",props:Oh,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="SphereGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Ph={...Fn,...ci,...ui,...di};var Sh=E({name:"VcGeometrySphereOutline",props:Ph,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="SphereOutlineGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Eh={...Gt,...$t,...Zi,...$i,...on,...Nn};var Th=E({name:"VcGeometryWall",props:Eh,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="WallGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Ih={...Gt,...$t,...Zi,...$i,...on};var Mh=E({name:"VcGeometryWallOutline",props:Ih,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="WallOutlineGeometry",So(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});[Sm,Tm,Mm,jm,Am,Rm,Bm,zm,Gm,Um,$m,qm,Jm,Xm,Km,th,nh,rh,ah,lh,uh,ph,hh,gh,yh,Ch,_h,xh,Sh,Th,Mh].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Dh=Sm,jh=Tm,Lh=Mm,Ah=jm,kh=Am,Rh=Rm,Vh=Bm,Bh=zm,Nh=Gm,zh=Um,Fh=$m,Gh=qm,Hh=Jm,Uh=Xm,Wh=Km,$h=th,Zh=nh,qh=rh,Yh=ah,Jh=lh,Xh=uh,Qh=ph,Kh=hh,ev=gh,tv=yh,iv=Ch,nv=_h,ov=xh,rv=Sh,av=Th,sv=Mh,lv={color:"#409eff",pixelSize:8,outlineColor:"rgba(0,0,0,0.6)",outlineWidth:1,disableDepthTestDistance:Number.POSITIVE_INFINITY},cv={enableMouseEvent:!1,asynchronous:!1,allowPicking:!0},uv={width:2,show:!0},dv={pixelOffset:[20,0],showBackground:!0,backgroundColor:"rgba(0,0,0,1)",enableMouseEvent:!1},pv={typhoonRoutes:{type:Array},clampToGround:{type:Boolean,default:!1},radius7Color:{type:String,default:"rgba(68, 255, 230, 0.3)"},radius10Color:{type:String,default:"rgba(32, 237, 39, 0.3)"},radius12Color:{type:String,default:"rgba(255, 247, 16, 0.3)"},pointProps:{type:[Object,Function],default:()=>lv},linePrimitiveProps:{type:[Object,Function],default:()=>cv},lineGeometryProps:{type:[Object,Function],default:()=>uv},labelProps:{type:[Object,Function],default:()=>dv},circleOverlayPosition:{type:[String,Function],default:"-175px"},setsArray:{type:Array,default:()=>["中央台","日本","美国","韩国","中国香港"]}};var mv=E({name:"VcOverlayTyphoon",props:pv,emits:{...Hl,mouseover:e=>!0,mouseout:e=>!0,click:e=>!0,clickout:e=>!0,forecastRouteAdded:e=>!0},setup(e,t){const i=o();i.cesiumClass="VcOverlayTyphoon",i.cesiumEvents=[];const r=xo(e,t,i);if(void 0===r)return;const{$services:a}=r,s=Oe(i),{t:l}=yo(),c=n(null),u=_([]);i.createCesiumObject=async()=>c;const d=(i,n)=>{n.playIndex=i;const o=n.typhoonRoute.points[i];o.type="live",o.index=i,o.tfbh=n.name;const r=[o.lng,o.lat];n.positions.push(r);const a="function"==typeof e.pointProps?ee(J(lv),e.pointProps(o)):e.pointProps;n.points.push({id:o.id||Cesium.createGuid(),position:r,onMouseover(e){t.emit("mouseover",e)},onMouseout(e){t.emit("mouseout",e)},onClick(e){m(o,n,i,!0),n.playIndex=o.index,t.emit("click",e)},onClickout(e){t.emit("clickout",e)},...a,...o});const s=n.points[i];s&&n.colors.push(s.color),i===n.typhoonRoute.points.length-1&&m(o,n,i)},p=e=>{const t=u.findIndex((t=>t.name===e));if(t>=0){let e=0;const i=u[t];i.points.length=0,i.positions.length=0;const n=i.typhoonRoute;d(e,i),cancelAnimationFrame(i.playInterval);const o=()=>{e++,e>=n.points.length?cancelAnimationFrame(i.playInterval):d(e,i),i.playInterval=requestAnimationFrame(o)};i.playInterval=requestAnimationFrame(o)}else s.warn(l("vc.typhoon.warn")||"播放台风失败，原因：未找到对应编号的台风数据。")},m=(i,n,o,r=!1)=>{n.children.length=0;let a=r&&i.forecast||[];if(!r)for(let t=0;t<e.setsArray.length;t++){const s=(i,o)=>{const l=(null==i?void 0:i.forecast)||[];if(a.push(...l),r)return;a=te(a,((e,t)=>e.sets===t.sets));const c=e.setsArray[t],u=a.findIndex((e=>e.sets===c));if(u>-1)a[u].unshifted||(a[u].points.unshift({lat:i.lat,lng:i.lng}),a[u].unshifted=!0);else if(o>0){const e=n.typhoonRoute.points[o-1];s(e,o-1)}};s(i,o)}if(a&&!(a.length<=0)){for(let o=0;o<a.length;o++){const s=a[o],l=[],c=[],u={name:n.name+"_"+s.sets,typhoonRoute:s,show:!0,positions:c,points:l,type:"forc"};n.children.push(u),s.points.forEach(((n,o)=>{const a=[n.lng,n.lat];u.positions.push(a),0===o&&r&&u.positions.unshift([i.lng,i.lat]),n.sets=s.sets,n.type="forc",n.index=o;const l="function"==typeof e.pointProps?e.pointProps(n):e.pointProps;0!==o&&u.points.push({id:n.id||Cesium.createGuid(),position:a,onMouseover(e){t.emit("mouseover",e)},onMouseout(e){t.emit("mouseout",e)},onClick(e){t.emit("click",e)},...l,...n})}))}t.emit("forecastRouteAdded",{livePoint:i,datasource:n,addedByClick:r})}},h=e=>{const t={name:e.tfbh,typhoonRoute:e,show:!0,positions:[],points:[],children:[],colors:[],type:"live"};return u.push(t),p(e.tfbh),t},v=(e,t)=>{let i=[];if("number"==typeof t)i=B(e,1e3*t,{units:"meters"}).geometry.coordinates;else if(t.ne){const n=6,o=360/(4*n),r={0:"ne",1:"nw",2:"sw",3:"se"};for(let a=0;a<4;a++){let s=1e3*parseFloat(t[r[a]]);s||(s=0);for(let t=a*o;t<=(a+1)*o;t++){const o=n*t,r=e[0]+s*Math.cos(o*Math.PI/180)/111e3,a=e[1]+s*Math.sin(o*Math.PI/180)/111e3;i.push([r,a])}}}return i},g=(i,n)=>{const o=[];return i.forEach((i=>{if(i.positions.length>1){const n="function"==typeof e.linePrimitiveProps?ee(J(cv),e.linePrimitiveProps(i)):e.linePrimitiveProps,r="function"==typeof e.lineGeometryProps?ee(J(uv),e.lineGeometryProps(i)):e.lineGeometryProps;o.push(P(mp,{show:i.show,appearance:{type:"live"===i.type?"PolylineColorAppearance":"PolylineMaterialAppearance",options:{material:"live"===i.type?void 0:{fabric:{type:"PolylineDash",uniforms:{color:"#000000"}}},translucent:!0}},onMouseover:e=>{t.emit("mouseover",e)},onMouseout:e=>{t.emit("mouseout",e)},onClick:e=>{t.emit("click",e)},onClickout:e=>{t.emit("clickout",e)},...n},(()=>P(xm,{id:i.name||Cesium.createGuid()},(()=>P(Qh,{positions:ze(i.positions),colors:i.colors,...r}))))))}if(i.points.length&&o.push(P(pm,{show:i.show,points:i.points,onReady:e=>{const{cesiumObject:t}=e,i=t.update;t.update=function(e){const t=e.commandList.length;i.call(this,e);const n=e.commandList.length;for(let i=t;i<n;++i)e.commandList[i].pass=Cesium.Pass.TRANSLUCENT,e.commandList[i].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1})}}})),"live"===i.type){const t="function"==typeof e.labelProps?ee(J(dv),e.labelProps(i)):e.labelProps;o.push(P(dm,{show:i.show,enableMouseEvent:!1,labels:[{text:i.typhoonRoute.name,position:i.positions[0],...t}]}));const r=i.points[i.playIndex];n.length=n.push(P(Sd,{show:i.show,position:r.position,autoHidden:!0},(()=>P("div",{class:"vc-typhoon-circle",style:{backgroundPosition:"function"==typeof e.circleOverlayPosition?e.circleOverlayPosition(r):e.circleOverlayPosition}})))),(null==r?void 0:r.radius7)>0&&o.push(P(Cm,{show:i.show,positions:v(r.position,r.radius7_quad),clampToGround:e.clampToGround,asynchronous:!1,allowPicking:!1,enableMouseEvent:!1,classificationType:2,appearance:{type:"MaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:e.radius7Color}}}}},onReady:f})),(null==r?void 0:r.radius10)>0&&o.push(P(Cm,{show:i.show,positions:v(r.position,r.radius10_quad),clampToGround:e.clampToGround,asynchronous:!1,allowPicking:!1,enableMouseEvent:!1,classificationType:2,appearance:{type:"MaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:e.radius10Color}}}}},onReady:f})),(null==r?void 0:r.radius12)>0&&o.push(P(Cm,{show:i.show,positions:v(r.position,r.radius12_quad),clampToGround:e.clampToGround,asynchronous:!1,allowPicking:!1,enableMouseEvent:!1,classificationType:2,appearance:{type:"MaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:e.radius12Color}}}}},onReady:f}))}i.children&&o.push(...g(i.children,n))})),o},f=e=>{const t=e.cesiumObject,i=t.update;t.update=function(e){const t=e.commandList.length;i.call(this,e);const n=e.commandList.length;for(let i=t;i<n;++i)e.commandList[i].pass===Cesium.Pass.TRANSLUCENT&&(e.commandList[i].pass=Cesium.Pass.OPAQUE,e.commandList[i].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1,blending:Cesium.BlendingState.ALPHA_BLEND}))}};return Object.assign(i.proxy,{addTyphoonRoute:h,playTyphoonRoute:p,flyToTyphoonRoute:(e,t)=>{const i=[];"string"==typeof e?i.push(e):i.push(...e);let n=null;i.forEach((e=>{var t;const i=[],o=u.find((t=>t.name===e));o&&o.typhoonRoute.points&&o.typhoonRoute.points.forEach((e=>{i.push([e.lng,e.lat])})),(null==(t=null==o?void 0:o.children)?void 0:t.length)&&o.children.forEach((e=>{e.typhoonRoute.points.forEach((e=>{i.push([e.lng,e.lat])}))}));const r=ze(i),a=Cesium.BoundingSphere.fromPoints(r);n=null===n?a:Cesium.BoundingSphere.union(n,a)})),a.viewer.camera.flyToBoundingSphere(new Cesium.BoundingSphere(n.center,n.radius),{...t})},showForecast:m,removeTyphoonData:e=>{const t=u.indexOf(e);t>=0&&(clearInterval(e.playInterval),u.splice(t,1))},removeAllTyphoonData:()=>{u.forEach((e=>{clearInterval(e.playInterval)})),u.length=0},getTyphoonDatasources:()=>u}),e.typhoonRoutes.forEach((e=>{h(e)})),()=>{const e=[],t=g(u,e);return[P(hm,{ref:c,show:!0},(()=>t)),...e]}}});[Sd,Op,Pp,Vp,Np,mv].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const hv=Sd,vv=Op,gv=Pp,fv=Vp,yv=Np,bv=mv;function Cv(e,t,i,o,r){i.cesiumClass=o,i.cesiumEvents=[];const{t:s}=yo(),{emit:l}=t,c=ue(o).split("-");"VcMeasurementDistance"===o&&e.showComponentLines&&(c[2]="component-distance"),"VcDrawingRegular"!==o&&"VcMeasurementRegular"!==o||(4===e.edge&&(c[2]="rectangle"),360===e.edge&&(c[2]="circle"));let u=c[2];c[3]&&(u=`${c[2]}-${c[3]}`);const d=n(""),p=a((()=>({drawingTipStart:e.drawtip.drawingTipStart||s(`${c[0]}.${c[1]}.${c[2]}.drawingTipStart`),drawingTipEnd:e.drawtip.drawingTipEnd||s(`${c[0]}.${c[1]}.${c[2]}.drawingTipEnd`),drawingTipEditing:e.drawtip.drawingTipEditing||s(`${c[0]}.${c[1]}.${c[2]}.drawingTipEditing`)}))),m=n(Tr.BeforeDraw),h=n(!1),v=n([0,0,0]),g=n(!1),f=n([0,0,0]),y=n(null),b=n(null),C=n(null),w=n(""),{registerTimeout:_,removeTimeout:O}=_o();i.createCesiumObject=async()=>C;return{drawingType:u,drawTip:d,drawTipOpts:p,drawStatus:m,canShowDrawTip:h,drawTipPosition:v,showEditor:g,editorPosition:f,mouseoverPoint:y,editingPoint:b,primitiveCollectionRef:C,editorType:w,onMouseoverPoints:t=>{var i,n;const{drawingHandlerActive:o,viewer:a}=r;e.editable&&m.value!==Tr.Drawing&&o&&(t.pickedFeature.primitive.pixelSize=1.5*(null==(i=e.pointOpts)?void 0:i.pixelSize),O(),_((()=>{y.value=t.pickedFeature.primitive,f.value=t.pickedFeature.primitive.position,g.value=!0,h.value=!1,v.value=[0,0,0]}),null==(n=e.editorOpts)?void 0:n.delay)),l("mouseEvt",{type:t.type,name:u,target:t},a)},onMouseoutPoints:t=>{var i,n;const{viewer:o,selectedDrawingActionInstance:a}=r;e.editable&&(t.pickedFeature.primitive.pixelSize=1*(null==(i=e.pointOpts)?void 0:i.pixelSize),O(),_((()=>{f.value=[0,0,0],y.value=void 0,g.value=!1}),null==(n=e.editorOpts)?void 0:n.hideDelay),a&&(h.value=!0)),l("mouseEvt",{type:t.type,name:u,target:t},o)},onMouseenterEditor:e=>{O()},onMouseleaveEditor:t=>{var i;O(),_((()=>{var t;f.value=[0,0,0],y.value.pixelSize=1*(null==(t=e.pointOpts)?void 0:t.pixelSize),y.value=void 0,g.value=!1}),null==(i=e.editorOpts)?void 0:i.hideDelay)},onPrimitiveCollectionReady:e=>{e.cesiumObject._vcId=o},onVcCollectionPointReady:function(e){const{cesiumObject:t}=e,i=t.update;t.update=function(e){const t=e.commandList.length;i.call(this,e);const n=e.commandList.length;for(let i=t;i<n;++i)e.commandList[i].pass=Cesium.Pass.TRANSLUCENT,e.commandList[i].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1})}},onVcPrimitiveReady:t=>{if(e.disableDepthTest)return;const i=t.cesiumObject,n=i.update;i.update=function(e){const t=e.commandList.length;n.call(this,e);const i=e.commandList.length;for(let n=t;n<i;++n)e.commandList[n].pass===Cesium.Pass.TRANSLUCENT&&(e.commandList[n].pass=Cesium.Pass.OPAQUE,e.commandList[n].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1,blending:Cesium.BlendingState.ALPHA_BLEND}))}},onVcCollectionLabelReady:t=>{if(e.disableDepthTest)return;const i=t.cesiumObject,n=i.update;i.update=function(e){const t=e.commandList.length;n.call(this,e);const i=e.commandList.length;for(let n=t;n<i;++n)e.commandList[n].pass=Cesium.Pass.OVERLAY,e.commandList[n].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1,blending:Cesium.BlendingState.ALPHA_BLEND})}}}}function wv(e,t,i){const r=o(),s=xo(e,t,r);if(void 0===s)return;const{t:l}=yo(),c=s.$services,{emit:u}=t,{drawingType:d,drawTip:p,drawTipOpts:m,drawStatus:h,canShowDrawTip:v,drawTipPosition:g,showEditor:f,editorPosition:y,mouseoverPoint:b,editingPoint:C,primitiveCollectionRef:w,editorType:O,onMouseoverPoints:S,onMouseoutPoints:E,onMouseenterEditor:T,onMouseleaveEditor:I,onPrimitiveCollectionReady:M,onVcCollectionPointReady:D,onVcCollectionLabelReady:j,onVcPrimitiveReady:L}=Cv(e,t,r,i,c),A=n([]);let k;e.preRenderDatas&&e.preRenderDatas.length&&e.preRenderDatas.forEach((e=>{const t={positions:ze(e),show:!0,drawStatus:Tr.AfterDraw,distance:0,labels:[],pointOpts:{},labelOpts:{},labelsOpts:{},polylineOpts:{},primitiveOpts:{},polygonOpts:{}};"VcMeasurementVertical"===i&&Object.assign(t,{draggingPlane:new Cesium.Plane(Cesium.Cartesian3.UNIT_X,0),surfaceNormal:new Cesium.Cartesian3}),A.value.push(t)}));const R=a((()=>{const t=[],{Cartesian3:n,Cartographic:o,Rectangle:r,createGuid:a,defined:s,Math:l,Ray:u}=Cesium,{viewer:d}=c,p=e.angleFormatter||Ar.angleToString,m=e.distanceFormatter||Ar.distanceToString,h=e.areaFormatter||Ar.areaToString;return A.value.forEach((u=>{var v,g,f,y,b,C,O,x,P,S,E,T,I,M,D,j,L,A,k;const R=u.positions[0],B=u.positions[1];if(n.equals(R,B))return;const N=_([]),z=0===(null==(v=e.polylineOpts)?void 0:v.arcType)?n.distance(R,B):et(R,B,c.viewer.scene.globe.ellipsoid),F=n.midpoint(R,B,{}),H=at(R,B),U=st(R,B);u.points=u.positions.map((e=>({position:e})));const W={...u,distance:z,heading:H,pitch:U},$=Object.assign({},e.labelOpts,W.labelOpts);if("VcDrawingRectangle"===i||"VcMeasurementRectangle"===i){const t=o.fromCartesian(R,d.scene.globe.ellipsoid),i=o.fromCartesian(B,d.scene.globe.ellipsoid),a=t.height;!e.clampToGround&&(i.height=a);const s=r.fromCartesianArray(u.positions,d.scene.globe.ellipsoid),l=[s.west,s.north,a,s.east,s.north,a,s.east,s.south,a,s.west,s.south,a,s.west,s.north,a],c=n.fromRadiansArrayHeights(l,d.scene.globe.ellipsoid);Object.assign(W,{polygonPositions:c,height:a})}else if("VcDrawingRegular"===i||"VcMeasurementRegular"===i){const t=u.positions[0],i=u.positions[1],n=function(e,t,i){const{Cartesian3:n}=Cesium;if(n.equals(e,t))return;const o=Cesium.Cartesian3.subtract(t,e,new Cesium.Cartesian3),r=Cesium.Cartesian3.normalize(o,new Cesium.Cartesian3),a=Cesium.Transforms.rotationMatrixFromPositionVelocity(e,r,i.globe.ellipsoid),s=Cesium.Matrix4.fromRotationTranslation(a,e),l=Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Matrix4.getTranslation(s,new Cesium.Cartesian3),Cesium.Ellipsoid.WGS84,new Cesium.Matrix4),c=Cesium.Matrix4.multiply(Cesium.Matrix4.inverse(l,new Cesium.Matrix4),s,new Cesium.Matrix4),u=Cesium.Matrix4.getMatrix3(c,new Cesium.Matrix3),d=Cesium.Quaternion.fromRotationMatrix(u);return Cesium.HeadingPitchRoll.fromQuaternion(d)}(t,i,d.scene);if(!G(n)&&s(n)){const r=[],a=o.fromCartesian(t,d.scene.globe.ellipsoid),s=o.fromCartesian(i,d.scene.globe.ellipsoid);!e.clampToGround&&(s.height=a.height),r.push(o.toCartesian(s,d.scene.globe.ellipsoid));for(let i=0;i<(e.edge||4)-1;i++){const i=tt(t,n.heading+=2*Math.PI/(e.edge||4),z,d.scene.globe.ellipsoid);r.push(i)}Object.assign(W,{polygonPositions:r,height:a.height})}}else if("VcAnalysisViewshed"===i)Object.assign(W.viewshedOpts,{startPosition:R,endPosition:B});else if("VcAnalysisSightline"===i)if("segment"===e.sightlineType){const e=[];e.push(R);const t=[];w.value.cesiumObject._primitives.forEach((e=>{e instanceof Cesium.PointPrimitiveCollection&&t.push(...e._pointPrimitives),e instanceof Cesium.Primitive&&t.push(e)}));const i=lt(R,B,c.viewer,t);s(i)&&e.push(i),e.push(B);let o=0;for(let r=0;r<e.length-1;r++){o+=n.distance(e[r],e[r+1])}Object.assign(W,{positions:e,distance:o})}else e.sightlineType;else N.push({position:F,id:a(),text:m(z,null==(g=e.measureUnits)?void 0:g.distanceUnits,e.locale,null==(f=e.decimals)?void 0:f.distance),...$});if(W.polygonPositions&&W.polygonPositions.length){const t=Object.assign({},e.labelsOpts,W.labelsOpts),i=W.polygonPositions.slice();e.loop&&i.length>2&&i.push(i[0]);for(let r=0;r<i.length-1;r++){let o=0;if(o=0===(null==(y=e.polylineOpts)?void 0:y.arcType)?et(i[r],i[r+1],c.viewer.scene.globe.ellipsoid):n.distance(i[r],i[r+1]),o>0&&i.length>2&&e.showDistanceLabel&&N.push({text:m(o,null==(b=e.measureUnits)?void 0:b.distanceUnits,e.locale,null==(C=e.decimals)?void 0:C.distance),position:n.midpoint(i[r],i[r+1],{}),id:a(),...t}),i.length>2&&e.showAngleLabel&&(r>0||e.loop)){const o=i[0===r?i.length-2:r-1],s=i[r],l=i[r+1],c=n.subtract(o,s,{}),u=n.subtract(l,s,{});let d=0;n.ZERO.equals(c)||n.ZERO.equals(u)||(d=n.angleBetween(c,u)),N.push({text:p(d,null==(O=e.measureUnits)?void 0:O.angleUnits,e.locale,null==(x=e.decimals)?void 0:x.angle),position:s,id:a(),...t})}}const o=it(i);e.showLabel&&N.push({text:h(o,null==(P=e.measureUnits)?void 0:P.areaUnits,e.locale,null==(S=e.decimals)?void 0:S.area),position:u.positions[0],id:a(),...$})}e.showComponentLines&&(Object.assign(W,{xyPolylinePositions:[new n,new n,new n],xyBoxPositions:[new n,new n,new n],xDistance:0,yDistance:0,xAngle:0,yAngle:0}),V(W),N.push({position:W.xLabelPosition,id:a(),text:m(W.xDistance||0,null==(E=e.measureUnits)?void 0:E.distanceUnits,e.locale,null==(T=e.decimals)?void 0:T.distance),...e.xLabelOpts}),N.push({position:W.yLabelPosition,id:a(),text:m(W.yDistance||0,null==(I=e.measureUnits)?void 0:I.distanceUnits,e.locale,null==(M=e.decimals)?void 0:M.distance),...e.yLabelOpts}),N.push({position:W.xAnglePosition,id:a(),text:p(W.xAngle||0,null==(D=e.measureUnits)?void 0:D.angleUnits,e.locale,null==(j=e.decimals)?void 0:j.angle),...e.xAngleLabelOpts}),N.push({position:W.yAnglePosition,id:a(),text:p(W.yAngle||0,null==(L=e.measureUnits)?void 0:L.angleUnits,e.locale,null==(A=e.decimals)?void 0:A.angle),...e.yAngleLabelOpts})),Object.assign(W,{labels:N}),W.positionsDegreesArray=W.positions.map((e=>{const t=Cesium.Cartographic.fromCartesian(e,d.scene.globe.ellipsoid);return[l.toDegrees(t.longitude),l.toDegrees(t.latitude),t.height]})),(null==(k=null==W?void 0:W.polygonPositions)?void 0:k.length)&&(W.polygonPositionsDegreesArray=W.polygonPositions.map((e=>{const t=Cesium.Cartographic.fromCartesian(e,d.scene.globe.ellipsoid);return[l.toDegrees(t.longitude),l.toDegrees(t.latitude),t.height]}))),t.push(W)})),t}));r.createCesiumObject=async()=>w,r.mount=async()=>{const{viewer:t}=c;return e.autoUpdateLabelPosition&&("VcMeasurementDistance"===i&&t.scene.preRender.addEventListener(N),("VcMeasurementRegular"===i||"VcMeasurementRectangle"===i||"VcDrawingRegular"===i||"VcDrawingRectangle"===i)&&t.scene.preRender.addEventListener(B)),!0},r.unmount=async()=>{const{viewer:t}=c;return e.autoUpdateLabelPosition&&("VcMeasurementDistance"===i&&t.scene.preRender.removeEventListener(N),("VcMeasurementRegular"===i||"VcMeasurementRectangle"===i||"VcDrawingRegular"===i||"VcDrawingRectangle"===i)&&t.scene.preRender.removeEventListener(B)),!0};const V=e=>{const{Cartesian3:t,Math:i,defined:n}=Cesium,{viewer:o}=c,r=o.scene.frameState.mapProjection.ellipsoid,a=e.positions[0],s=e.positions[1],l=r.cartesianToCartographic(a,{});if(!n(l))return;const u=r.cartesianToCartographic(s,{}),d=l.height,p=u.height;let m,h,v,g;d<p?(m=a,h=s,g=p,v=d):(m=s,h=a,g=d,v=p);const f=e.xyPolylinePositions;if(void 0===f)return;f[0]=m,f[2]=h;let y=r.geodeticSurfaceNormal(m,{});y=t.multiplyByScalar(y,g-v,y);const b=t.add(m,y,f[1]);if(!t.equalsEpsilon(b,h,i.EPSILON10)||!t.equalsEpsilon(b,m,i.EPSILON10)){let i=t.subtract(h,b,{}),n=t.subtract(m,b,{});const o=Math.min(t.magnitude(i),t.magnitude(n)),r=15<o?.15*o:.25*o;i=t.normalize(i,i),n=t.normalize(n,n),i=t.multiplyByScalar(i,r,i),n=t.multiplyByScalar(n,r,n);const a=e.xyBoxPositions;if(void 0===a)return;t.add(b,i,a[0]),t.add(a[0],n,a[1]),t.add(b,n,a[2]),e.xLabelPosition=t.midpoint(b,h,{}),e.yLabelPosition=t.midpoint(m,b,{}),e.xAnglePosition=h,e.yAnglePosition=m;const s=t.subtract(b,h,{}),l=t.subtract(b,m,{});let c=t.subtract(h,m,{});e.yAngle=t.angleBetween(l,c),c=t.negate(c,c),e.xAngle=t.angleBetween(s,c),e.xDistance=t.magnitude(s),e.yDistance=t.magnitude(l)}},B=()=>{R.value.forEach(((e,t)=>{var i;const n=e.polygonPositions;if(!(n.length<2)){const{defined:o,SceneTransforms:r,Cartesian2:a,HorizontalOrigin:s}=Cesium,{viewer:l}=c,u=l.scene;let d=e.positions[0];const p=r.wgs84ToWindowCoordinates(u,d,{});let m=o(p)?a.clone(p,{}):a.fromElements(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,{}),h=m.y;const v=(null==(i=w.value)?void 0:i.cesiumObject)._primitives.filter((e=>e instanceof Cesium.LabelCollection))[t]._labels,g=v[v.length-1];if(!g)return;for(let t=1;t<n.length;t++){const i=r.wgs84ToWindowCoordinates(u,n[t],{});if(o(i)){const e=(m.y-i.y)/(i.x-m.x),r=v[t-1];r&&r!==g&&o(null==r?void 0:r.horizontalOrigin)&&(r.horizontalOrigin=0<e?s.LEFT:s.RIGHT),i.y<h&&(h=i.y,d=n[t]),m=a.clone(i,m)}e.drawStatus===Tr.AfterDraw&&(g.position=d)}}}))},N=()=>{R.value.forEach(((t,i)=>{var n,o,r;const{defined:a,SceneTransforms:s,HorizontalOrigin:l}=Cesium,{viewer:u}=c,d=u.scene,p=null==(n=w.value)?void 0:n.cesiumObject,m=t.positions,h=m[0],v=m[1],g=s.wgs84ToWindowCoordinates(d,h,{}),f=s.wgs84ToWindowCoordinates(d,v,{});if(a(g)&&a(f)){const t=p._primitives.filter((e=>e instanceof Cesium.LabelCollection));if(t.length){const n=t[i].get(0);let a,s,c,u;e.showComponentLines&&(a=t[i].get(2),s=t[i].get(3),c=Be(null==(o=e.yLabelOpts)?void 0:o.pixelOffset),u=Be(null==(r=e.xAngleLabelOpts)?void 0:r.pixelOffset)),(g.y-f.y)/(f.x-g.x)>0?(G(a)||G(c)||(c.x=-9,a.pixelOffset=c,a.horizontalOrigin=l.RIGHT),G(s)||G(u)||(u.x=12,s.pixelOffset=u,s.horizontalOrigin=l.LEFT),n.horizontalOrigin=l.LEFT):(G(a)||G(c)||(c.x=9,a.pixelOffset=c,a.horizontalOrigin=l.LEFT),G(s)||G(u)||(u.x=-12,s.pixelOffset=u,s.horizontalOrigin=l.RIGHT),n.horizontalOrigin=l.RIGHT)}}}))},z=(e,t)=>{const{defined:i,defaultValue:n,Cartesian3:o}=Cesium,{viewer:r}=c,a=r.scene,s=e.positions;s[0]=t;const l=a.frameState.mapProjection.ellipsoid,u=l.cartesianToCartographic(t,{}),d=a.globe;u.height=i(d)?n(d.getHeight(u),0):0,s[1]=l.cartographicToCartesian(u,{}),e.distance=o.distance(s[0],s[1]),e.labelPosition=o.midpoint(s[0],s[1],{})},F=()=>{const{Cartesian3:e,Plane:t}=Cesium,n={positions:[new e,new e],show:!1,drawStatus:Tr.BeforeDraw,distance:0,labels:[],pointOpts:{},labelOpts:{},labelsOpts:{},polylineOpts:{},primitiveOpts:{},polygonOpts:{}};"VcMeasurementVertical"===i&&Object.assign(n,{draggingPlane:new t(e.UNIT_X,0),surfaceNormal:new e}),A.value.push(n),h.value=Tr.BeforeDraw,v.value=!0,p.value=m.value.drawingTipStart},H=(e=!0)=>{e&&h.value===Tr.Drawing&&A.value.pop();const t=C.value?C.value._vcPolylineIndx:A.value.length-1,i=A.value[t];i&&(i.drawStatus=Tr.AfterDraw),h.value=Tr.AfterDraw,v.value=!1,g.value=[0,0,0]},U=t=>{var i,n,o;if(y.value=[0,0,0],f.value=!1,!e.editable)return;O.value=t;const{viewer:r,drawingFabInstance:a}=c;if("move"===t){p.value=m.value.drawingTipEditing,h.value=Tr.Drawing,C.value=b.value,k=A.value[C.value._vcPolylineIndx].positions[C.value._index],v.value=!0;(null==a?void 0:a.proxy).editingActionName=d}else if("remove"===t){const e=b.value._vcPolylineIndx;A.value[e].positions.splice(b.value._index,1)}else if("removeAll"===t){const e=b.value._vcPolylineIndx;A.value.splice(e,1)}else{const r=b.value._vcPolylineIndx,a=A.value[r];null==(o=null==(n=null==(i=e.editorOpts)?void 0:i[t])?void 0:n.callback)||o.call(n,r,a)}u("editorEvt",{type:t,renderDatas:A,name:d,index:b.value._vcPolylineIndx,pointIndex:b.value._index,point:b.value},r)},W={computedRenderDatas:R,renderDatas:A,startNew:F,stop:H,clear:()=>{A.value=[],H()},handleMouseClick:(t,n)=>{var o;const{viewer:r,drawingFabInstance:a,selectedDrawingActionInstance:s,getWorldPosition:l}=c,f=null==a?void 0:a.proxy;if(2===n.button&&n.ctrl){const e=f.getDrawingActionInstance(d);return f.toggleAction(e),void x((()=>{u("drawEvt",{name:d,finished:!0,windowPoistion:t,type:"cancel"},r)}))}h.value===Tr.AfterDraw&&F();const y=C.value?C.value._vcPolylineIndx:A.value.length-1,b=A.value[y],w=b.positions,_=C.value?C.value._index:b.positions.length-1;if(2===n.button&&C.value)return f.editingActionName=void 0,b.positions[C.value._index]=k,h.value=Tr.AfterDraw,b.drawStatus=Tr.AfterDraw,C.value=void 0,p.value=m.value.drawingTipStart,"VcMeasurementHeight"===i&&z(b,k),void x((()=>{u("drawEvt",Object.assign({name:d,index:y,pointIndex:_,renderDatas:A,finished:!0,windowPoistion:t,type:"cancel"},R.value[y]),r)}));if(0!==n.button)return;const{defined:P}=Cesium;let S,E="new",T=!1;const I=r.scene;if(h.value===Tr.BeforeDraw){const n=l(I,t,{});if(!P(n))return;if(w[0]=n,w[1]=n,b.show=!0,h.value=Tr.Drawing,b.drawStatus=Tr.Drawing,p.value=m.value.drawingTipEnd,S=n,T=!1,"VcMeasurementVertical"===i){const e=I.frameState.mapProjection.ellipsoid;b.surfaceNormal=e.geodeticSurfaceNormal(n,b.surfaceNormal)}"VcMeasurementHeight"===i&&(z(b,n),T=!0,b.drawStatus=Tr.AfterDraw,h.value=Tr.AfterDraw,p.value=m.value.drawingTipStart,1===e.mode&&f.toggleAction(s)),"VcAnalysisViewshed"===i&&(b.viewshedOpts={...e.viewshedOpts})}else{if(b.drawStatus=Tr.AfterDraw,h.value=Tr.AfterDraw,C.value){if(!0===Zo().hasTouch){const i=l(I,t,{});if(P(i)){b.positions.splice(C.value._index,1,i),C.value.pixelSize=1*(null==(o=e.pointOpts)?void 0:o.pixelSize)}}C.value=void 0,f.editingActionName=void 0,v.value=!1,g.value=[0,0,0],E=O.value,s&&(p.value=m.value.drawingTipStart,v.value=!0)}else{if("VcMeasurementVertical"!==i&&!0===Zo().hasTouch){const e=l(I,t,{});if(P(e)){b.positions[1]=e}}1===e.mode&&f.toggleAction(s)}T=!0,S=b.positions[1]}x((()=>{u("drawEvt",Object.assign({index:y,pointIndex:_,renderDatas:A,name:d,finished:T,position:S,windowPoistion:t,type:E},R.value[y]),r)}))},handleMouseMove:t=>{const{viewer:n,getWorldPosition:o}=c,r=n.scene,a=o(r,t,{}),{defined:s,Cartographic:l}=Cesium;if(!s(a))return;if(g.value=a,h.value!==Tr.Drawing)return;if("VcMeasurementVertical"===i&&r.mode===Cesium.SceneMode.SCENE2D)return;const p=C.value?C.value._vcPolylineIndx:A.value.length-1,m=A.value[p],v=C.value?C.value._index:m.positions.length-1;if("VcMeasurementVertical"===i){const e=((e,t)=>{const{defined:i,SceneMode:n,Cartesian3:o,IntersectionTests:r,Plane:a,SceneTransforms:s,Ray:l}=Cesium,{viewer:u}=c,d=u.scene,p=d.camera,m=p.direction,h=d.frameState.mapProjection.ellipsoid,v=e.positions,g=v[0];let f=g,y=v[1],b=e.draggingPlane,C=e.surfaceNormal,w=C;if(d.mode===n.COLUMBUS_VIEW){w=o.UNIT_X;const e=h.cartesianToCartographic(g,{});f=d.mapProjection.project(e,{}),o.fromElements(f.z,f.x,f.y,f)}let _=o.cross(w,m,{});_=o.cross(w,_,_),_=o.normalize(_,_),b=a.fromPointNormal(f,_,b);const O=p.getPickRay(t,new l);if(y=r.rayPlane(O,b,{}),i(y)){if(d.mode===n.COLUMBUS_VIEW){y=o.fromElements(y.y,y.z,y.x,y);const e=d.mapProjection.unproject(y,{});y=h.cartographicToCartesian(e,y)}s.wgs84ToWindowCoordinates(d,v[0],{}).y<t.y&&(C=o.negate(C,{}));let e=o.subtract(y,g,{});return e=o.projectVector(e,C,e),y=o.add(g,e,y),y}})(m,t);if(!G(e)){const t=m.positions.slice();t[C.value?C.value._index:1]=e,m.positions=t}}else if("VcMeasurementHeight"===i)z(m,a);else if("VcDrawingRectangle"===i||"VcDrawingRegular"===i||"VcMeasurementRegular"===i||"VcMeasurementRectangle"===i){const t=m.positions,i=t[0],o=l.fromCartesian(i,n.scene.globe.ellipsoid),r=l.fromCartesian(a,n.scene.globe.ellipsoid);!e.clampToGround&&(r.height=o.height),t[C.value?C.value._index:1]=l.toCartesian(r,n.scene.globe.ellipsoid)}else if("VcAnalysisSightline"===i){const e=m.positions;if(C.value){e[C.value._index>0?1:0]=a}else e[1]=a}else{const e=m.positions.slice();e[C.value?C.value._index:1]=a,m.positions=e}x((()=>{u("drawEvt",Object.assign({index:p,pointIndex:v,renderDatas:A,name:d,finished:!1,position:m.positions[1],windowPoistion:t,type:C.value?O:"new"},R.value[p]),n)}))}};return Object.assign(r.proxy,W),()=>{var t,n,o;const{createGuid:r}=Cesium,a=[];if(R.value.forEach(((t,n)=>{var o;const s="VcDrawingRectangle"===i||"VcDrawingRegular"===i||"VcMeasurementRegular"===i||"VcMeasurementRectangle"===i,l=s?null==(o=t.polygonPositions)?void 0:o.slice():t.positions;s&&(null==l||l.push(l[0]));const c=Object.assign({},e.polylineOpts,t.polylineOpts);e.clampToGround&&delete c.arcType;const u=Object.assign({},e.primitiveOpts,t.primitiveOpts);if((null==l?void 0:l.length)&&(null==l?void 0:l.length)>1&&(a.push(P(e.clampToGround?dp:mp,{...u,show:t.show&&u.show||e.editable||t.drawStatus===Tr.Drawing,onReady:e=>{var t;null==(t=null==u?void 0:u.onReady)||t.call(u,e),e.cesiumObject._vcPolylineIndex=n}},(()=>P(xm,{id:r()},(()=>P(e.clampToGround?Zh:Qh,{positions:l,...c})))))),"VcAnalysisViewshed"===i&&a.push(P(fp,{...t.viewshedOpts}))),t.polygonPositions&&t.polygonPositions.length>2){const i=Object.assign({},null==e?void 0:e.polygonOpts,null==t?void 0:t.polygonOpts);i.clampToGround=e.clampToGround,a.push(P(Cm,{positions:l,show:t.show&&(null==i?void 0:i.show),...i,onReady:e=>{var t;L(e),null==(t=null==i?void 0:i.onReady)||t.call(i,e),e.cesiumObject._vcPolylineIndex=n}}))}t.xyPolylinePositions&&t.xyPolylinePositions.length>1&&a.push(P(mp,{show:t.show&&u||e.editable||t.drawStatus===Tr.Drawing,...u,onReady:e=>{var t;null==(t=null==u?void 0:u.onReady)||t.call(u,e),e.cesiumObject._vcPolylineIndex=n}},(()=>P(xm,{id:r()},(()=>P(Qh,{positions:t.xyPolylinePositions,...c})))))),t.xyBoxPositions&&t.xyBoxPositions.length>1&&a.push(P(mp,{show:t.show&&u||e.editable||t.drawStatus===Tr.Drawing,...u},(()=>P(xm,{id:r()},(()=>P(Qh,{positions:t.xyBoxPositions,...c}))))));const d=Object.assign({},e.pointOpts,t.pointOpts);a.push(P(pm,{enableMouseEvent:e.enableMouseEvent,show:t.show,points:t.points.map(((o,a)=>{const s=o.position,l=Object.assign({},d,o);return{position:s,id:r(),_vcPolylineIndx:n,...l,show:((null==l?void 0:l.show)||e.editable||t.drawStatus===Tr.Drawing)&&("VcAnalysisSightline"!==i||3!==t.positions.length||1!==a)}})),onMouseover:S,onMouseout:E,onReady:D})),a.push(P(dm,{enableMouseEvent:e.enableMouseEvent,show:t.show,labels:t.labels,onReady:j}))})),(null==(t=e.drawtip)?void 0:t.show)&&v.value){const{viewer:t}=c;a.push(P(hv,{position:g.value,pixelOffset:null==(n=e.drawtip)?void 0:n.pixelOffset,teleport:{to:t.container}},(()=>P("div",{class:"vc-drawtip vc-tooltip--style"},p.value))))}if(f.value){const t=[];if(b.value){const i=e.editorOpts;for(const e in i)if(!Array.isArray(i[e])&&"number"!=typeof i[e]){const n={...i[e]};delete n.color,t.push(P(Ol,{style:{color:i[e].color,background:i[e].background},...n,onclick:U.bind(void 0,e)},(()=>P(Vl,{...i[e].tooltip},(()=>{var t;return P("strong",null,(null==(t=i[e].tooltip)?void 0:t.tip)||l(`vc.measurement.editor.${e}`))})))))}}const{viewer:i}=c;a.push(P(hv,{position:y.value,pixelOffset:null==(o=e.editorOpts)?void 0:o.pixelOffset,teleport:{to:i.container},onMouseenter:T,onMouseleave:I},(()=>P("div",{class:"vc-editor"},t))))}return P(hm,{ref:w,show:e.show,onReady:M},(()=>a))}}var _v=E({name:"VcMeasurementDistance",props:{...Qu,showComponentLines:{type:Boolean,default:!1},measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,xLabelOpts:Object,xAngleLabelOpts:Object,yLabelOpts:Object,yAngleLabelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean},emits:Jl,setup:(e,t)=>wv(e,t,"VcMeasurementDistance")});function Ov(e,t,i){const r=o(),s=xo(e,t,r);if(void 0===s)return;const{t:l}=yo(),c=s.$services,{emit:u}=t,{drawingType:d,drawTip:p,drawTipOpts:m,drawStatus:h,canShowDrawTip:v,drawTipPosition:g,showEditor:f,editorPosition:y,mouseoverPoint:b,editingPoint:C,primitiveCollectionRef:w,editorType:O,onMouseoverPoints:S,onMouseoutPoints:E,onMouseenterEditor:T,onMouseleaveEditor:I,onPrimitiveCollectionReady:M,onVcCollectionPointReady:D,onVcCollectionLabelReady:j,onVcPrimitiveReady:L}=Cv(e,t,r,i,c);let A,k;const R=n([]);e.preRenderDatas&&e.preRenderDatas.length&&e.preRenderDatas.forEach((t=>{const i={show:!0,positions:ze(t),tempPositions:[],drawStatus:Tr.AfterDraw,loop:e.loop,distance:0,area:0,distances:[],labels:[],angles:[],polylineOpts:{},pointOpts:{},labelOpts:{},labelsOpts:{},primitiveOpts:{},polygonOpts:{}};R.value.push(i)}));const V=a((()=>{const{Cartesian3:t,createGuid:n,defined:o,Math:r}=Cesium,a=[],{viewer:s}=c,l=e.angleFormatter||Ar.angleToString,u=e.distanceFormatter||Ar.distanceToString,d=e.areaFormatter||Ar.areaToString;return R.value.forEach(((p,m)=>{var h,v,g,f,y,b,C,O,x;const P=_([]),S=[],E=[];let T=0;const I=[];p.points=p.positions.map((e=>({position:e})));const M=p.positions.slice();if("VcAnalysisSightline"===i){const e=M.shift();e&&M.forEach((i=>{const n=[];n.push(e);const r=[];w.value.cesiumObject._primitives.forEach((e=>{e instanceof Cesium.PointPrimitiveCollection&&r.push(...e._pointPrimitives),e instanceof Cesium.Primitive&&r.push(e)}));const s=lt(e,i,c.viewer,r);o(s)&&n.push(s),n.push(i);let l=0;const u=[];for(let e=0;e<n.length-1;e++){const i=t.distance(n[e],n[e+1]);u.push(i),l+=i}a.push({...p,positions:n,distance:l,distances:u})}))}else{e.loop&&M.length>2&&M.push(M[0]);for(let i=0;i<M.length-1;i++){let o=0;o=0===(null==(h=e.polylineOpts)?void 0:h.arcType)?et(M[i],M[i+1],c.viewer.scene.globe.ellipsoid):t.distance(M[i],M[i+1]),S.push(o),T+=o;const r=Object.assign({},e.labelsOpts,p.labelsOpts);if(o>0&&M.length>2&&e.showDistanceLabel&&P.push({text:u(o,null==(v=e.measureUnits)?void 0:v.distanceUnits,e.locale,null==(g=e.decimals)?void 0:g.distance),position:t.midpoint(M[i],M[i+1],{}),id:n(),...r}),M.length>2&&e.showAngleLabel&&(i>0||e.loop)){const o=M[0===i?M.length-2:i-1],a=M[i],s=M[i+1],c=t.subtract(o,a,{}),u=t.subtract(s,a,{});let d=0;t.ZERO.equals(c)||t.ZERO.equals(u)||(d=t.angleBetween(c,u)),E.push(d),P.push({text:l(d,null==(f=e.measureUnits)?void 0:f.angleUnits,e.locale,null==(y=e.decimals)?void 0:y.angle),position:a,id:n(),...r})}e.showDashedLine&&(I.push({positions:[M[i],B(M[i])]}),i===M.length-2&&I.push({positions:[M[i+1],B(M[i+1])]}))}const o=it(M),m=Object.assign({},e.labelOpts,p.labelOpts);e.showLabel&&M.length&&(i.includes("Area")?P.push({text:d(o,null==(b=e.measureUnits)?void 0:b.areaUnits,e.locale,null==(C=e.decimals)?void 0:C.area),position:M[M.length-1],id:n(),...m}):P.push({text:u(T,null==(O=e.measureUnits)?void 0:O.distanceUnits,e.locale,null==(x=e.decimals)?void 0:x.distance),position:M[M.length-1],id:n(),...m})),p.positionsDegreesArray=p.positions.map((e=>{const t=Cesium.Cartographic.fromCartesian(e,s.scene.globe.ellipsoid);return[r.toDegrees(t.longitude),r.toDegrees(t.latitude),t.height]})),a.push({...p,labels:P,distance:T,distances:S,area:o,angles:E,dashedLines:I})}})),a}));r.mount=async()=>{const{viewer:t}=c;return e.autoUpdateLabelPosition&&t.scene.preRender.addEventListener(N),!0},r.unmount=async()=>{const{viewer:t}=c;return e.autoUpdateLabelPosition&&t.scene.preRender.removeEventListener(N),!0};const B=e=>{const{defined:t,defaultValue:i}=Cesium,{viewer:n}=c,o=n.scene,r=o.globe,a=o.frameState.mapProjection.ellipsoid,s=a.cartesianToCartographic(e);return s.height=t(r)?i(r.getHeight(s),0):0,a.cartographicToCartesian(s)},N=()=>{V.value.forEach(((e,t)=>{var i,n;const o=e.positions;if(!(o.length<2)){const{defined:r,SceneTransforms:a,Cartesian2:s,HorizontalOrigin:l}=Cesium,{viewer:u}=c,d=u.scene;let p=o[0];const m=a.wgs84ToWindowCoordinates(d,p,{});let h=r(m)?s.clone(m,{}):s.fromElements(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,{}),v=h.y;const g=(null==(i=w.value)?void 0:i.cesiumObject)._primitives.filter((e=>e instanceof Cesium.LabelCollection))[t]._labels,f=g[g.length-1];for(let t=1;t<o.length;t++){const i=a.wgs84ToWindowCoordinates(d,o[t],{});if(r(i)){const e=(h.y-i.y)/(i.x-h.x);g[t-1]!==f&&r(null==(n=g[t-1])?void 0:n.horizontalOrigin)&&(g[t-1].horizontalOrigin=0<e?l.LEFT:l.RIGHT),i.y<v&&(v=i.y,p=o[t]),h=s.clone(i,h)}e.drawStatus===Tr.AfterDraw&&(f.position=p)}}}))},z=()=>{const t={show:!1,positions:[],tempPositions:[],drawStatus:Tr.BeforeDraw,loop:e.loop,distance:0,area:0,distances:[],labels:[],angles:[],polylineOpts:{},pointOpts:{},labelOpts:{},labelsOpts:{},primitiveOpts:{},polygonOpts:{}};if("VcMeasurementHorizontal"===i){const{Cartesian3:e,Plane:i}=Cesium;Object.assign(t,{dashedLines:[],heightPlane:new i(e.UNIT_X,0),heightPlaneCV:new i(e.UNIT_X,0),height:0,firstMove:!1,tempNextPos:new e})}h.value=Tr.BeforeDraw,R.value.push(t),v.value=!0,p.value=m.value.drawingTipStart},F=(e=!0)=>{e&&h.value===Tr.Drawing&&R.value.pop();const t=C.value?C.value._vcPolylineIndex:R.value.length-1,i=R.value[t];i&&(i.positions=i.tempPositions,i.drawStatus=Tr.AfterDraw),h.value=Tr.AfterDraw,v.value=!1,g.value=[0,0,0]},G=(e,t)=>{const{viewer:n,getWorldPosition:o}=c,r=n.scene,a=o(r,e,{}),{defined:s}=Cesium;if(!s(a))return;if(g.value=a,h.value!==Tr.Drawing)return;const l=C.value?C.value._vcPolylineIndex:R.value.length-1,v=R.value[l],f=C.value?C.value._index:v.positions.length-1;let y="new";if("VcMeasurementHorizontal"===i){const{SceneMode:i,IntersectionTests:n,Cartesian3:o}=Cesium,a=r.frameState.mapProjection.ellipsoid,l=v.positions,c=r.camera.getPickRay(e);let u,d;if(r.mode===i.SCENE3D&&v.heightPlane)u=n.rayPlane(c,v.heightPlane);else if(r.mode===i.COLUMBUS_VIEW&&v.heightPlaneCV)u=n.rayPlane(c,v.heightPlaneCV),u=o.fromElements(u.y,u.z,u.x,u),d=r.mapProjection.unproject(u),u=a.cartographicToCartesian(d);else if(u=r.camera.pickEllipsoid(e,a),s(u)){const e=a.cartesianToCartographic(u);e.height=v.height||0,u=a.cartographicToCartesian(e,u)}if(!s(u))return;if(!v.firstMove&&(null==t?void 0:t.shift)){const e=l[l.length-2],t=v.tempNextPos,i=o.subtract(t,e,{});let n=o.subtract(u,e,{});n=o.projectVector(n,i,n),u=o.add(e,n,u)}if(C.value){v.positions.splice(C.value._index,1,u),y=O.value}else{const e=v.tempPositions.slice();e.push(u),v.positions=e,v.firstMove=!1,v.tempNextPos=Object.assign(u),p.value=m.value.drawingTipEnd}}else if(C.value){v.positions.splice(C.value._index,1,a),y=O.value}else{const e=v.tempPositions.slice();e.push(a),v.positions=e}x((()=>{u("drawEvt",Object.assign({index:l,pointIndex:f,name:d,renderDatas:R,finished:!1,position:"VcMeasurementHorizontal"===i?v.positions[v.positions.length-1]:a,windowPoistion:e,type:y},V.value[l]),n)}))},H=t=>{var n,o,r;if(y.value=[0,0,0],f.value=!1,!e.editable)return;const{viewer:a,drawingFabInstance:s}=c,l=null==s?void 0:s.proxy;if(O.value=t,"move"===t){p.value=m.value.drawingTipEditing,h.value=Tr.Drawing,C.value=b.value,v.value=!0;const e=(()=>{let e=C.value._vcPolylineIndex,t=C.value._index;if("VcAnalysisSightline"===i)for(let i=0;i<R.value.length;i++){const n=R.value[i];for(let o=0;o<n.positions.length;o++){const r=n.positions[o];C.value.position.equals(r)&&(e=i,t=o)}}return[e,t]})();C.value._vcPolylineIndex=e[0],C.value._index=e[1],k=R.value[e[0]].positions[e[1]],l.editingActionName=d}else if("insert"===t){const e=b.value._vcPolylineIndex;R.value[e].positions.splice(b.value._index,0,b.value.position),C.value=b.value,v.value=!0,h.value=Tr.Drawing,p.value=m.value.drawingTipEditing,l.editingActionName=d}else if("remove"===t){const e=b.value._vcPolylineIndex,t=R.value[e];t.positions.length>2&&t.positions.splice(b.value._index,1)}else if("removeAll"===t){const e=b.value._vcPolylineIndex;R.value.splice(e,1)}else{const i=b.value._vcPolylineIndex,a=R.value[i];null==(r=null==(o=null==(n=e.editorOpts)?void 0:n[t])?void 0:o.callback)||r.call(o,i,a)}u("editorEvt",{type:t,renderDatas:R,name:d,polylineIndex:b.value._vcPolylineIndex,pointIndex:b.value._index,point:b.value},a)},U={computedRenderDatas:V,renderDatas:R,startNew:z,stop:F,clear:()=>{R.value=[],F()},handleMouseClick:(t,n)=>{var o;const{viewer:r,drawingFabInstance:a,getWorldPosition:s,selectedDrawingActionInstance:l}=c,g=null==a?void 0:a.proxy;if(2===n.button&&n.ctrl){const e=g.getDrawingActionInstance(d);return g.toggleAction(e),void x((()=>{u("drawEvt",{name:d,finished:!0,windowPoistion:t,type:"cancel"},r)}))}h.value===Tr.AfterDraw&&z();const{defined:f,Cartesian2:y,Plane:b,Cartesian3:w}=Cesium,_=C.value?C.value._vcPolylineIndex:R.value.length-1,P=R.value[_],S=P.tempPositions,E=C.value?C.value._index:P.positions.length-1;if(2===n.button&&C.value)return"insert"===O.value?P.positions.splice(C.value._index,1):P.positions[C.value._index]=k,h.value=Tr.AfterDraw,P.drawStatus=Tr.AfterDraw,C.value=void 0,p.value=m.value.drawingTipStart,g.editingActionName=void 0,v.value=f(l),void x((()=>{u("drawEvt",Object.assign({index:_,pointIndex:E,name:d,renderDatas:R,finished:!0,windowPoistion:t,type:"cancel"},V.value[_]),r)}));if(A=A||new Cesium.Cartesian2(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),y.magnitude(y.subtract(A,t,{}))<10)return;if(2===n.button&&h.value===Tr.Drawing&&S.length>1&&(S.pop(),G(t)),0!==n.button)return;const T=r.scene,I=s(T,t,{});if(!f(I))return;let M=!1,D="new";if("VcMeasurementHorizontal"===i){if(C.value)h.value=Tr.AfterDraw,C.value=void 0,M=!0,D=O.value,p.value=m.value.drawingTipStart;else if(0===S.length){const e=T.frameState.mapProjection.ellipsoid;S.push(I),P.positions=S,P.heightPlane=b.fromPointNormal(I,e.geodeticSurfaceNormal(I,{}),P.heightPlane);const t=e.cartesianToCartographic(I,{}),i=T.mapProjection.project(t,{}),n=w.fromElements(i.z,i.x,i.y,i);P.heightPlaneCV=b.fromPointNormal(n,w.UNIT_X,P.heightPlaneCV),P.height=t.height,P.firstMove=!0,P.drawStatus=Tr.Drawing,P.show=!0,h.value=Tr.Drawing}else S.push(P.tempNextPos),P.positions=S,P.firstMove=!0;p.value=m.value.drawingTipEnd}else{if(C.value){if(!0===Zo().hasTouch){const i=s(T,t,{});if(f(i)){P.positions.splice(C.value._index,1,i),C.value.pixelSize=1*(null==(o=e.pointOpts)?void 0:o.pixelSize)}}h.value=Tr.AfterDraw,C.value=void 0,M=!0,D=O.value,p.value=m.value.drawingTipStart}else S.push(I),P.positions=S,P.show=!0,P.drawStatus=Tr.Drawing,h.value=Tr.Drawing,v.value=!0,p.value=m.value.drawingTipEnd;"new"!==D&&(g.editingActionName=void 0,v.value=f(l))}y.clone(t,A),x((()=>{u("drawEvt",Object.assign({index:_,pointIndex:E,name:d,renderDatas:R,finished:M,position:"VcMeasurementHorizontal"===i?P.positions[P.positions.length-1]:I,windowPoistion:t,type:D},V.value[_]),r)}))},handleMouseMove:G,handleDoubleClick:t=>{const{drawingFabInstance:i,selectedDrawingActionInstance:n,viewer:o}=c;if(h.value===Tr.Drawing){const r=C.value?C.value._vcPolylineIndex:R.value.length-1,a=R.value[r],s=C.value?C.value._index:a.positions.length-1;F(!1),p.value=m.value.drawingTipStart,x((()=>{if(u("drawEvt",Object.assign({index:r,pointIndex:s,name:d,renderDatas:R,finished:!0,position:a.positions[a.positions.length-1],windowPoistion:t,type:"new"},V.value[r]),o),1===e.mode){(null==i?void 0:i.proxy).toggleAction(n)}}))}}};return Object.assign(r.proxy,U),()=>{var t,n;const{createGuid:o,Cartesian3:r}=Cesium,a=[],s=[];if(V.value.forEach(((t,n)=>{var l,c;const u=t.positions.slice();if(u.length>1){t.loop&&u.push(u[0]);const i=Object.assign({},e.polylineOpts,t.polylineOpts);e.clampToGround&&delete i.arcType;const r=Object.assign({},e.primitiveOpts,t.primitiveOpts);a.push(P(e.clampToGround?dp:mp,{show:t.show&&r.show||e.editable||t.drawStatus===Tr.Drawing,...r,onReady:e=>{var t;null==(t=null==r?void 0:r.onReady)||t.call(r,e),e.cesiumObject._vcPolylineIndex=n}},(()=>P(xm,{id:o()},(()=>P(e.clampToGround?Zh:Qh,{positions:u,...i}))))))}const d=Object.assign({},e.dashLineOpts,t.dashLineOpts),p=Object.assign({},e.dashLinePrimitiveOpts,t.dashLinePrimitiveOpts);null==(l=t.dashedLines)||l.forEach((i=>{a.push(P(mp,{show:t.show&&e.dashLinePrimitiveOpts.show||e.editable||t.drawStatus===Tr.Drawing,...p},(()=>P(xm,{id:o()},(()=>P(Qh,{positions:i.positions,...d}))))))}));const m=Object.assign({},e.pointOpts,t.pointOpts);if(a.push(P(pm,{enableMouseEvent:e.enableMouseEvent,show:t.show,points:t.points.map(((a,l)=>{var c;const u=a.position;let d=!1;for(let e=0;e<s.length;e++)r.equals(u,s[e])&&(d=!0);const p=((null==(c=e.pointOpts)?void 0:c.show)||e.editable||t.drawStatus===Tr.Drawing)&&("VcAnalysisSightline"!==i||3!==t.positions.length||1!==l)&&!d;"VcAnalysisSightline"===i&&s.push(u);const h=Object.assign({},m,a);return{position:u,id:o(),_vcPolylineIndex:n,show:p,...h}})),onMouseover:S,onMouseout:E,onReady:D})),a.push(P(dm,{enableMouseEvent:e.enableMouseEvent,show:t.show,labels:t.labels,onReady:j})),u.length>2&&(i.includes("Polygon")||i.includes("Area"))){const i=Object.assign({},e.polygonOpts,t.polygonOpts);a.push(P(Cm,{positions:u,clampToGround:e.clampToGround,show:t.show&&(null==(c=e.polygonOpts)?void 0:c.show),...i,onReady:e=>{var t;L(e),null==(t=null==i?void 0:i.onReady)||t.call(i,e),e.cesiumObject._vcPolylineIndex=n}}))}})),(null==(t=e.drawtip)?void 0:t.show)&&v.value){const{viewer:t}=c;a.push(P(hv,{position:g.value,pixelOffset:e.drawtip.pixelOffset,teleport:{to:t.container}},(()=>P("div",{class:"vc-drawtip vc-tooltip--style"},p.value))))}if(f.value){const t=[];if(b.value){const i=e.editorOpts;for(const e in i)if(!Array.isArray(i[e])&&"number"!=typeof i[e]){const n={...i[e]};delete n.color,t.push(P(Ol,{style:{color:i[e].color,background:i[e].background},...n,onclick:H.bind("polyline",e)},(()=>P(Vl,{...i[e].tooltip},(()=>{var t;return P("strong",null,(null==(t=i[e].tooltip)?void 0:t.tip)||l(`vc.drawing.editor.${e}`))})))))}}const{viewer:i}=c;a.push(P(hv,{position:y.value,pixelOffset:null==(n=e.editorOpts)?void 0:n.pixelOffset,teleport:{to:i.container},onMouseenter:T,onMouseleave:I},(()=>P("div",{class:"vc-editor"},t))))}return P(hm,{ref:w,show:e.show,onReady:M},(()=>a))}}var xv=E({name:"VcMeasurementPolyline",props:{...Qu,polylineOpts:Object,primitiveOpts:Object,loop:Boolean,clampToGround:Boolean,measureUnits:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showLabel:Boolean,showAngleLabel:Boolean,showDistanceLabel:Boolean,autoUpdateLabelPosition:Boolean},emits:Jl,setup:(e,t)=>Ov(e,t,"VcMeasurementPolyline")}),Pv=E({name:"VcMeasurementHorizontal",props:{...Qu,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,dashLineOpts:Object,dashLinePrimitiveOpts:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showLabel:Boolean,showAngleLabel:Boolean,showDashedLine:Boolean,showDistanceLabel:Boolean,autoUpdateLabelPosition:Boolean},emits:Jl,setup:(e,t)=>Ov(e,t,"VcMeasurementHorizontal")}),Sv=E({name:"VcMeasurementVertical",props:{...Qu,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean},emits:Jl,setup:(e,t)=>wv(e,t,"VcMeasurementVertical")}),Ev=E({name:"VcMeasurementHeight",props:{...Qu,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean},emits:Jl,setup:(e,t)=>wv(e,t,"VcMeasurementHeight")});function Tv(e,t,i){const r=o(),a=xo(e,t,r);if(void 0===a)return;const{t:s}=yo(),l=a.$services,{emit:c}=t,{drawingType:u,drawTip:d,drawTipOpts:p,drawStatus:m,canShowDrawTip:h,drawTipPosition:v,showEditor:g,editorPosition:y,mouseoverPoint:C,editingPoint:w,primitiveCollectionRef:_,editorType:O,onMouseoverPoints:S,onMouseoutPoints:E,onMouseenterEditor:T,onMouseleaveEditor:I,onPrimitiveCollectionReady:M,onVcCollectionPointReady:D,onVcCollectionLabelReady:j}=Cv(e,t,r,i,l),L=n([]);let A,k=[];"VcDrawingPin"===i&&""===e.billboardOpts.image&&(e.billboardOpts.image=Cesium.buildModuleUrl("Assets/Textures/pin.svg")),k.push(b((()=>e.editable),(e=>{const{drawingFabInstance:t,selectedDrawingActionInstance:i}=l;if(e&&(null==i?void 0:i.name)===u){(null==t?void 0:t.proxy).toggleAction(i)}})));const R=(e,t,i)=>{const n=Cesium.Cartographic.fromCartesian(e,i.globe.ellipsoid),o=[Cesium.Math.toDegrees(n.longitude),Cesium.Math.toDegrees(n.latitude),n.height];t.positionDegrees=o},V=()=>{const{Cartesian3:e}=Cesium,t={drawStatus:Tr.Drawing,show:!1,position:new e,lng:0,lat:0,height:0,slope:0,pointOpts:{},labelOpts:{},billboardOpts:{}};L.value.push(t),m.value=Tr.Drawing,h.value=!0,d.value=p.value.drawingTipStart},B=(e=!0)=>{e&&m.value===Tr.Drawing&&L.value.pop();const t=w.value?w.value._vcPolylineIndx:L.value.length-1,i=L.value[t];i&&(i.drawStatus=Tr.AfterDraw),m.value=Tr.AfterDraw,h.value=!1,v.value=[0,0,0]},N=(t,i)=>{const{viewer:n}=l,o=n.scene,{defined:r,defaultValue:a,Math:s,SceneMode:c}=Cesium,u=o.frameState.mapProjection.ellipsoid.cartesianToCartographic(t.position,{}),d=o.globe;let p=r(d)?a(d.getHeight(u),0):0;p=0===e.heightReference?u.height:u.height-p,s.equalsEpsilon(p,0,s.EPSILON3)&&(p=0);let m=0;o.mode!==c.SCENE2D&&(i||(i=o.cartesianToCanvasCoordinates(t.position,{})),m=z(o,i)),t.show=!0,t.lng=u.longitude,t.lat=u.latitude,t.height=p,t.slope=m},z=(e,t)=>{const{getWorldPosition:i}=l,{defined:n,Cartesian2:o,Cartesian3:r,Math:a}=Cesium,s=i(e,t,{});if(n(s)){const l=e.camera.position,c=r.distance(s,l),u=[new r,new r,new r,new r,new r],d=new r,p=new r;if(!(1e4<c)){const l=u[0],m=u[1],h=u[2],v=u[3];let g=e.frameState.mapProjection.ellipsoid.geodeticSurfaceNormal(s,d);g=r.negate(g,g);const f=o.clone(t,u[0]);f.x-=2,f.y-=2;const y=o.clone(t,u[1]);y.x-=2,y.y+=2;const b=o.clone(t,u[2]);b.x+=2,b.y+=2;const C=o.clone(t,u[3]);C.x+=2,C.y-=2;const w=i(e,f,l),_=i(e,y,m),O=i(e,b,h),x=i(e,C,v);let P,S,E,T,I,M,D,j;n(w)&&(P=r.subtract(w,s,l),S=r.magnitude(P)/c<=.05?r.normalize(P,l):void 0),n(_)&&(E=r.subtract(_,s,m),T=r.magnitude(E)/c<=.05?r.normalize(E,m):void 0),n(O)&&(I=r.subtract(O,s,h),M=r.magnitude(I)/c<=.05?r.normalize(I,h):void 0),n(x)&&(D=r.subtract(x,s,v),j=r.magnitude(D)/c<=.05?r.normalize(D,v):void 0);let L=r.clone(r.ZERO,p),A=u[4];if(n(S)&&n(T)&&(A=r.normalize(r.cross(S,T,A),A),L=r.add(L,A,L)),n(T)&&n(M)&&(A=r.normalize(r.cross(T,M,A),A),L=r.add(L,A,L)),n(M)&&n(j)&&(A=r.normalize(r.cross(M,j,A),A),L=r.add(L,A,L)),n(j)&&n(S)&&(A=r.normalize(r.cross(j,S,A),A),L=r.add(L,A,L)),!L.equals(r.ZERO))return L=r.normalize(L,L),a.asinClamped(Math.abs(Math.sin(r.angleBetween(L,g))))}}return 0},F=t=>{var i,n,o;if(y.value=[0,0,0],g.value=!1,!e.editable)return;O.value=t;const{viewer:r,drawingFabInstance:a}=l,s=null==a?void 0:a.proxy;if("move"===t)d.value=p.value.drawingTipEditing,m.value=Tr.Drawing,w.value=C.value,h.value=!0,A=Object.assign({},L.value[w.value._vcPolylineIndx]),s.editingActionName=u;else if("remove"===t){const e=C.value._vcPolylineIndx;L.value.splice(e,1)}else{const r=C.value._vcPolylineIndx,a=L.value[r];null==(o=null==(n=null==(i=e.editorOpts)?void 0:i[t])?void 0:n.callback)||o.call(n,r,a)}c("editorEvt",{type:t,name:u,renderDatas:L,index:C.value._vcPolylineIndx,pointIndex:C.value._index,point:C.value},r)},G=t=>{var i,n,o,r,a,c,u,d;const{viewer:p}=l,m=p.scene.frameState.mapProjection.ellipsoid.cartesianToCartographic(t.position,{});if(!Cesium.defined(m))return"";const h=e.angleFormatter||Ar.angleToString,v=e.distanceFormatter||Ar.distanceToString;return`${s("vc.measurement.point.lng")}${h(m.longitude,null==(i=e.measureUnits)?void 0:i.angleUnits,e.locale,null==(n=e.decimals)?void 0:n.lng)}\n${s("vc.measurement.point.lat")}${h(m.latitude,null==(o=e.measureUnits)?void 0:o.angleUnits,e.locale,null==(r=e.decimals)?void 0:r.lat)}\n${s("vc.measurement.point.height")}${v(t.height,null==(a=e.measureUnits)?void 0:a.distanceUnits,e.locale,null==(c=e.decimals)?void 0:c.height)}\n${s("vc.measurement.point.slope")}${h(t.slope,null==(u=e.measureUnits)?void 0:u.slopeUnits,e.locale,null==(d=e.decimals)?void 0:d.slope)}`};if(e.preRenderDatas&&e.preRenderDatas.length){const{viewer:t}=l;e.preRenderDatas.forEach((e=>{const i={drawStatus:Tr.AfterDraw,show:!0,position:Ne(e),lng:0,lat:0,height:0,slope:0,pointOpts:{},labelOpts:{},billboardOpts:{}},n=Cesium.Cartographic.fromCartesian(i.position,t.scene.globe.ellipsoid);i.positionDegrees=[Cesium.Math.toDegrees(n.longitude),Cesium.Math.toDegrees(n.latitude),n.height],N(i),L.value.push(i)}))}f((()=>{k.forEach((e=>e())),k=[]}));const H={renderDatas:L,startNew:V,stop:B,clear:()=>{L.value=[],B()},handleMouseClick:(t,i)=>{const{viewer:n,drawingFabInstance:o,getWorldPosition:r,selectedDrawingActionInstance:a}=l,s=null==o?void 0:o.proxy;if(2===i.button&&i.ctrl){const e=null==s?void 0:s.getDrawingActionInstance(u);return null==s||s.toggleAction(e),void x((()=>{c("drawEvt",{name:u,finished:!0,windowPoistion:t,type:"cancel"},n)}))}const v=w.value?w.value._vcPolylineIndx:L.value.length-1,g=L.value[v];if(2===i.button&&w.value)return s.editingActionName=void 0,L.value[v]=A,m.value=Tr.AfterDraw,L.value[v].drawStatus=Tr.AfterDraw,w.value=void 0,d.value=p.value.drawingTipStart,void x((()=>{c("drawEvt",{name:u,index:v,renderDatas:L,finished:!0,windowPoistion:t,type:"cancel"},n)}));if(0!==i.button)return;const{defined:f}=Cesium;let y="new";if(m.value===Tr.BeforeDraw){const e=r(n.scene,t,{});if(!f(e))return;g.position=e,g.show=!0,g.drawStatus=Tr.AfterDraw,m.value=Tr.AfterDraw,d.value=p.value.drawingTipStart,x((()=>{c("drawEvt",{index:v,renderDatas:L,name:u,finished:!0,position:e,windowPoistion:t,type:y},n)}))}else{m.value=Tr.AfterDraw,g.drawStatus=Tr.AfterDraw;const i=n.scene;if(!0===Zo().hasTouch){const e=r(i,t,{});R(e,g,i),f(e)&&(g.position=e,g.show=!0)}w.value?(w.value=void 0,s.editingActionName=void 0,h.value=!1,y=O.value):1===e.mode&&x((()=>{s.toggleAction(a)})),a&&(d.value=p.value.drawingTipStart,h.value=!0),x((()=>{c("drawEvt",{index:v,renderDatas:L,name:u,finished:!0,position:L.value[v].position,positionDegrees:L.value[v].positionDegrees,windowPoistion:t,type:y},n)}))}},handleMouseMove:e=>{const{viewer:t,getWorldPosition:i}=l,n=t.scene,{defined:o,SceneMode:r}=Cesium;if(n.mode!==r.MORPHING){const r=i(n,e,{});if(!o(r))return;if(v.value=r,m.value===Tr.AfterDraw&&V(),m.value!==Tr.Drawing)return;const a=w.value?w.value._vcPolylineIndx:L.value.length-1,s=L.value[a];s.position=r,R(r,s,n),N(s,e);const l=w.value?O.value:"new";x((()=>{c("drawEvt",{index:a,renderDatas:L,name:u,finished:!1,position:r,positionDegrees:s.positionDegrees,windowPoistion:e,type:l},t)}))}}};return Object.assign(r.proxy,H),()=>{var t,n,o;const{createGuid:r}=Cesium,a=[],c=[],u=[],p=[];if(L.value.forEach(((t,n)=>{var o;const a=Object.assign({},e.pointOpts,t.pointOpts);c.push({position:t.position,id:r(),_vcPolylineIndx:n,...a,show:t.show&&(null==(o=e.pointOpts)?void 0:o.show)||e.editable||t.drawStatus===Tr.Drawing});const s=Object.assign({},e.labelOpts,t.labelOpts);if(e.showLabel)if("VcDrawingPin"===i){const i=Object.assign({},e.billboardOpts,t.billboardOpts);p.push({position:t.position,id:r(),_vcPolylineIndx:n,...i}),s.text&&u.push({position:t.position,id:r(),...s})}else u.push({position:t.position,id:r(),text:G(t),...s})})),a.push(P(pm,{enableMouseEvent:e.enableMouseEvent,points:c,onMouseover:S,onMouseout:E,onReady:D})),a.push(P(dm,{enableMouseEvent:e.enableMouseEvent,labels:u,onReady:j})),"VcDrawingPin"===i&&a.push(P(cm,{enableMouseEvent:e.enableMouseEvent,billboards:p})),(null==(t=e.drawtip)?void 0:t.show)&&h.value){const{viewer:t}=l;a.push(P(hv,{position:v.value,pixelOffset:null==(n=e.drawtip)?void 0:n.pixelOffset,teleport:{to:t.container}},(()=>P("div",{class:"vc-drawtip vc-tooltip--style"},d.value))))}if(g.value){const t=[];if(C.value){const i=e.editorOpts;for(const e in i)if(!Array.isArray(i[e])&&"number"!=typeof i[e]){const n={...i[e]};delete n.color,t.push(P(Ol,{style:{color:i[e].color,background:i[e].background},...n,onclick:F.bind(void 0,e)},(()=>P(Vl,{...i[e].tooltip},(()=>{var t;return P("strong",null,(null==(t=i[e].tooltip)?void 0:t.tip)||s(`vc.drawing.editor.${e}`))})))))}}const{viewer:i}=l;a.push(P(hv,{position:y.value,pixelOffset:null==(o=e.editorOpts)?void 0:o.pixelOffset,teleport:{to:i.container},onMouseenter:T,onMouseleave:I},(()=>P("div",{class:"vc-editor"},t))))}return P(hm,{ref:_,show:e.show,onReady:M},(()=>a))}}var Iv=E({name:"VcMeasurementPoint",props:{...Qu,measureUnits:Object,labelOpts:Object,locale:String,decimals:Object,heightReference:Number,showLabel:Boolean},emits:Jl,setup:(e,t)=>Tv(e,t,"VcMeasurementPoint")}),Mv=E({name:"VcMeasurementArea",props:{...Qu,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showDistanceLabel:Boolean,showAngleLabel:Boolean,showLabel:Boolean,loop:Boolean,clampToGround:Boolean,autoUpdateLabelPosition:Boolean},emits:Jl,setup:(e,t)=>Ov(e,t,"VcMeasurementArea")}),Dv=E({name:"VcMeasurementRectangle",props:{...Qu,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,clampToGround:Boolean,edge:Number,locale:String,decimals:Object,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:Jl,setup:(e,t)=>wv(e,t,"VcMeasurementRectangle")}),jv=E({name:"VcMeasurementRegular",props:{...Qu,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,clampToGround:Boolean,edge:Number,measureUnits:Object,locale:String,decimals:Object,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:Jl,setup:(e,t)=>wv(e,t,"VcMeasurementRegular")});function Lv(e,t,i,o,r,a,l){i.cesiumEvents=[];const u=xo(e,t,i);if(void 0===u)return;const{t:d}=yo(),{$services:p}=u,{emit:m}=t,h=n(!1),v=_({}),g=tc(e),f=n(null),y=n(null),b=n(!1),C=n(null);let w,O;const{activate:S,deactivate:E,destroy:T,isActive:I}=lr(p,{handleMouseClick:(e,t)=>{var n,o;const r=null==O?void 0:O.cmpRef.value;let a;null==(n=null==r?void 0:r.handleMouseClick)||n.call(r,e.position,t);const s=i.proxy;if(s.editingActionName&&(a=k(s.editingActionName)),a&&a!==O){const i=a.cmpRef.value;null==(o=null==i?void 0:i.handleMouseClick)||o.call(i,e.position,t)}},handleMouseMove:(e,t)=>{var n,o;const r=null==O?void 0:O.cmpRef.value;let a;null==(n=null==r?void 0:r.handleMouseMove)||n.call(r,e.endPosition,t);const s=i.proxy;if(s.editingActionName&&(a=k(s.editingActionName)),a&&a!==O){const i=a.cmpRef.value;null==(o=null==i?void 0:i.handleMouseMove)||o.call(i,e.endPosition,t)}},handleDoubleClick:(e,t)=>{var n,o;const r=null==O?void 0:O.cmpRef.value;let a;null==(n=null==r?void 0:r.handleDoubleClick)||n.call(r,e.position,t);const s=i.proxy;if(s.editingActionName&&(a=k(s.editingActionName)),a&&a!==O){const i=a.cmpRef.value;null==(o=null==i?void 0:i.handleDoubleClick)||o.call(i,e.position,t)}}});i.createCesiumObject=async()=>(h.value=!0,w=new Er,o.value),i.mount=async()=>(j(),b.value=!0,S(),!0),i.unmount=async()=>(O&&(A(O),O=void 0),E(),T(),b.value=!1,!0);const D=(e,t,i)=>{const{Cesium3DTileFeature:n,Cesium3DTileset:o,Cartesian3:r,defined:a,Model:s,Ray:l}=Cesium;if(Cesium.SuperMapVersion)return e.pickPosition(t);let c;const u={},d=new l;if(e.pickPositionSupported){w.hide(e);const l=e.pick(t,1,1);if(w.restore(e),a(l)&&(l instanceof n||l.primitive instanceof o||l.primitive instanceof s||Cesium.S3MTilesLayer&&l.primitive instanceof Cesium.S3MTilesLayer)&&(c=e.pickPosition(t,u),a(c)))return r.clone(c,i)}if(a(e.globe)){const n=e.camera.getPickRay(t,d);return c=e.globe.pick(n,e,u),a(c)?r.clone(c,i):void 0}},j=()=>{var e;const t=g.style.value;v.left=t.left,v.top=t.top,v.transform=t.transform;const i=g.attach.value,n=null==(e=Me(y))?void 0:e.$el;if(void 0!==n){const e=n.getBoundingClientRect();t.width=`${e.width}px`,t.height=`${e.height}px`,!i.bottom&&!i.top||i.left||i.right||(t.left="50%",t.transform="translate(-50%, 0)"),!i.left&&!i.right||i.top||i.bottom||(t.top="50%",t.transform="translate(0, -50%)")}Object.assign(v,t)},L=n(null),A=t=>{var i;const{viewer:n}=p;if(c(t)&&(t=k(t)),!t)return void u.logger.error("Invalid drawingActionOption or drawingActionOption name");const r=R(t.name);if(-1!==r){if(void 0!==O){O.actionOpts.color=L.value||"";const e=O.cmpRef.value;null==(i=e.stop)||i.call(e),O.isActive=!1,m("activeEvt",{type:O.name,option:O,isActive:!1},n)}(null==O?void 0:O.name)===(null==t?void 0:t.name)?(O=void 0,o.value[r].actionOpts.color=L.value||"red"):x((()=>{o.value[r].cmpRef.value.startNew(),L.value=o.value[r].actionOpts.color,o.value[r].actionOpts.color=e.activeColor,o.value[r].isActive=!0,O=o.value[r],m("activeEvt",{type:O.name,option:O,isActive:!0},n)}))}},k=e=>o.value.find((t=>t.name===e)),R=e=>o.value.findIndex((t=>t.name===e)),V=e=>{e?S():(O&&A(O),E()),r.modelValue=e,m("fabUpdated",e)},B=()=>{o.value.forEach((e=>{var t;null==(t=e.cmpRef.value)||t.clear()})),O&&A(O);const{viewer:e}=p;m("clearEvt",{type:"clear",option:a},e)},N=({cesiumObject:e})=>{e._vcId=l};s(re,Ee(u.getServices(),{get drawingFabInstance(){return i},get selectedDrawingActionInstance(){return O},get getWorldPosition(){return D},get drawingHandlerActive(){return I}})),Object.assign(i.proxy,{clearAll:B,deactivate:E,activate:S,toggleAction:A,getFabRef:()=>y.value,getDrawingActionInstance:k,getDrawingActionInstances:()=>o.value,getSelectedDrawingActionInstance:()=>O});return{renderContent:()=>{if(h.value){const i=[],n=[];o.value.forEach((t=>{i.push(P(Fl,{ref:t.actionRef,style:t.actionStyle,class:t.actionClass,...t.actionOpts,onClick:()=>{A(t)}},(()=>P(Vl,{...t.actionOpts.tooltip},(()=>P("strong",null,t.tip)))))),t.cmp&&n.push(P(t.cmp,{ref:t.cmpRef,editable:e.editable,clampToGround:e.clampToGround,mode:e.mode,onDrawEvt:(e,t)=>{m("drawEvt",e,t)},onEditorEvt:(e,t)=>{m("editorEvt",e,t)},onMouseEvt:(e,t)=>{m("mouseEvt",e,t)},...t.cmpOpts}))})),o.value.length&&i.push(P(Fl,{style:{background:a.color,color:a.textColor},class:"vc-draw-button vc-draw-clear",...a,onClick:B},(()=>P(Vl,{...a.tooltip},(()=>P("strong",null,a.tooltip.tip||d(`vc.${l}.clear.tip`)))))));const s=[];return b.value&&s.push(P("div",{ref:f,class:"vc-drawings-container "+g.classes.value,style:v},void 0!==t.slots.body?t.slots.body(o.value):P(zl,{ref:y,class:"vc-draw-button",style:{background:r.color,color:r.textColor},...r,"onUpdate:modelValue":V},{default:()=>i,tooltip:()=>P(Vl,{...r.tooltip},(()=>P("strong",null,r.tooltip.tip||(r.modelValue?d("vc.drawing.collapse"):d("vc.drawing.expand")))))}))),s.push(P(hm,{ref:C,show:e.show,onReady:N},(()=>n))),s}return M("v-if")}}}var Av=E({name:"VcMeasurements",props:Od,emits:{...Jl,fabUpdated:e=>!0,clearEvt:(e,t)=>!0},setup(e,t){var i;const r=o();r.cesiumClass="VcMeasurements";const{t:s}=yo(),l=_(Object.assign({},xd.clearActionOpts,e.clearActionOpts)),c=_(Object.assign({},xd.mainFabOpts,e.mainFabOpts)),u=_(Object.assign({},xd.fabActionOpts,e.fabActionOpts)),d=_(Object.assign({},xd.distanceActionOpts,V("distanceActionOpts"))),p=_(ee(J(xd.distanceMeasurementOpts),e.distanceMeasurementOpts)),m=_(Object.assign({},xd.componentDistanceActionOpts,V("componentDistanceActionOpts"))),h=_(ee(J(xd.componentDistanceMeasurementOpts),e.componentDistanceMeasurementOpts)),v=_(Object.assign({},xd.polylineActionOpts,V("polylineActionOpts"))),g=_(ee(J(xd.polylineMeasurementOpts),e.polylineMeasurementOpts)),f=_(Object.assign({},xd.horizontalActionOpts,V("horizontalActionOpts"))),y=_(ee(J(xd.horizontalMeasurementOpts),e.horizontalMeasurementOpts)),b=_(Object.assign({},xd.verticalActionOpts,V("verticalActionOpts"))),C=_(ee(J(xd.verticalMeasurementOpts),e.verticalMeasurementOpts)),w=_(Object.assign({},xd.heightActionOpts,V("heightActionOpts"))),O=_(ee(J(xd.heightMeasurementOpts),e.heightMeasurementOpts)),x=_(Object.assign({},xd.areaActionOpts,V("areaActionOpts"))),P=_(ee(J(xd.areaMeasurementOpts),e.areaMeasurementOpts)),S=_(Object.assign({},xd.pointActionOpts,V("pointActionOpts"))),E=_(ee(J(xd.pointMeasurementOpts),e.pointMeasurementOpts)),T=_(Object.assign({},xd.rectangleActionOpts,V("rectangleActionOpts"))),I=_(ee(J(xd.rectangleMeasurementOpts),e.rectangleMeasurementOpts)),M=_(Object.assign({},xd.regularActionOpts,V("regularActionOpts"))),D=_(ee(J(xd.regularMeasurementOpts),e.regularMeasurementOpts)),j=_(Object.assign({},xd.circleActionOpts,V("circleActionOpts"))),L=_(ee(J(xd.circleMeasurementOpts),e.circleMeasurementOpts)),A={};A.distanceActionOpts=d,A.distanceMeasurementOpts=p,A.componentDistanceActionOpts=m,A.componentDistanceMeasurementOpts=h,A.polylineActionOpts=v,A.polylineMeasurementOpts=g,A.horizontalActionOpts=f,A.horizontalMeasurementOpts=y,A.verticalActionOpts=b,A.verticalMeasurementOpts=C,A.heightActionOpts=w,A.heightMeasurementOpts=O,A.areaActionOpts=x,A.areaMeasurementOpts=P,A.pointActionOpts=S,A.pointMeasurementOpts=E,A.rectangleActionOpts=T,A.rectangleMeasurementOpts=I,A.regularActionOpts=M,A.regularMeasurementOpts=D,A.circleActionOpts=j,A.circleMeasurementOpts=L,A.clearActionOpts=l;const k=a((()=>e.measurements.map((e=>({name:e,type:"measurement",actionStyle:{background:A[`${N(e)}ActionOpts`].color,color:A[`${N(e)}ActionOpts`].textColor},actionClass:`vc-measure-${e} vc-measure-button`,actionRef:n(null),actionOpts:A[`${N(e)}ActionOpts`],cmp:R(e),cmpRef:n(null),cmpOpts:A[`${N(e)}MeasurementOpts`],tip:A[`${N(e)}ActionOpts`].tooltip.tip||s(`vc.measurement.${e}.tip`),isActive:!1})))));function R(e){switch(e){case"distance":case"component-distance":return _v;case"polyline":return xv;case"horizontal":return Pv;case"vertical":return Sv;case"height":return Ev;case"point":return Iv;case"area":return Mv;case"rectangle":return Dv;case"regular":case"circle":return jv;default:return}}function V(t){return q(xd[t],e[t])?u:Object.assign({},u,e[t])}return null==(i=Lv(e,t,r,k,c,l,"measurement"))?void 0:i.renderContent}});Av.install=e=>{e.component(Av.name,Av)};const kv=Av,Rv=kv,Vv=Object.assign({},ku,{icon:"vc-icons-drawing-point"}),Bv=Object.assign({},ku,{icon:"vc-icons-drawing-polyline"}),Nv=Object.assign({},ku,{icon:"vc-icons-drawing-polygon"}),zv=Object.assign({},ku,{icon:"vc-icons-drawing-rectangle"}),Fv=Object.assign({},ku,{icon:"vc-icons-drawing-pin"}),Gv=Object.assign({},Gu,{pointOpts:Object.assign({},Vu,{show:!1}),billboardOpts:Bu,labelOpts:Object.assign({},zu,{pixelOffset:[0,-30],verticalOrigin:1}),showLabel:!0}),Hv=Object.assign({},{}),Uv=Object.assign({},ku,{direction:"right",icon:"vc-icons-drawing-button",activeIcon:"vc-icons-drawing-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),Wv=["pin","point","polyline","polygon","rectangle","regular","circle"],$v={...Ku,drawings:{type:Array,default:()=>Wv,validator:e=>{let t=!0;return e.forEach((e=>{Wv.includes(e)||(t=!1)})),t}},mainFabOpts:{type:Object,default:()=>Uv},fabActionOpts:{type:Object,default:()=>Hv},pinActionOpts:{type:Object,default:()=>Fv},pinDrawingOpts:{type:Object,default:()=>Gv},pointActionOpts:{type:Object,default:()=>Vv},pointDrawingOpts:{type:Object,default:()=>Gu},polylineActionOpts:{type:Object,default:()=>Bv},polylineDrawingOpts:{type:Object,default:()=>Uu},polygonActionOpts:{type:Object,default:()=>Nv},polygonDrawingOpts:{type:Object,default:()=>Wu},rectangleActionOpts:{type:Object,default:()=>zv},rectangleDrawingOpts:{type:Object,default:()=>$u},circleActionOpts:{type:Object,default:()=>Xu},circleDrawingOpts:{type:Object,default:()=>Zu},regularActionOpts:{type:Object,default:()=>Ju},regularDrawingOpts:{type:Object,default:()=>qu}},Zv=he($v);var qv=E({name:"VcDrawingPin",props:{...Qu,billboardOpts:Object,labelOpts:Object,heightReference:Number,showLabel:Boolean},emits:Jl,setup:(e,t)=>Tv(e,t,"VcDrawingPin")}),Yv=E({name:"VcDrawingPoint",props:{...Qu,heightReference:Number,labelOpts:Object,showLabel:Boolean},emits:Jl,setup:(e,t)=>Tv(e,t,"VcDrawingPoint")}),Jv=E({name:"VcDrawingPolyline",props:{...Qu,polylineOpts:Object,primitiveOpts:Object,loop:Boolean,clampToGround:Boolean,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,autoUpdateLabelPosition:Boolean},emits:Jl,setup:(e,t)=>Ov(e,t,"VcDrawingPolyline")}),Xv=E({name:"VcDrawingPolygon",props:{...Qu,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,loop:Boolean,clampToGround:Boolean,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,autoUpdateLabelPosition:Boolean},emits:Jl,setup:(e,t)=>Ov(e,t,"VcDrawingPolygon")}),Qv=E({name:"VcDrawingRegular",props:{...Qu,polylineOpts:Object,polygonOpts:Object,primitiveOpts:Object,clampToGround:Boolean,edge:Number,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:Jl,setup:(e,t)=>wv(e,t,"VcDrawingRegular")}),Kv=E({name:"VcDrawingRectangle",props:{...Qu,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,clampToGround:Boolean,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:Jl,setup:(e,t)=>wv(e,t,"VcDrawingRectangle")});var eg=E({name:"VcDrawings",props:$v,emits:{...Jl,fabUpdated:e=>!0,clearEvt:(e,t)=>!0},setup(e,t){var i;const r=o();r.cesiumClass="VcDrawings";const{t:s}=yo(),l={},c=_(Object.assign({},Zv.clearActionOpts,e.clearActionOpts)),u=_(Object.assign({},Zv.mainFabOpts,e.mainFabOpts)),d=_(Object.assign({},Zv.fabActionOpts,e.fabActionOpts)),p=_(Object.assign({},Zv.pointActionOpts,I("pointActionOpts"))),m=_(ee(J(Zv.pointDrawingOpts),e.pointDrawingOpts)),h=_(Object.assign({},Zv.polylineActionOpts,I("polylineActionOpts"))),v=_(ee(J(Zv.polylineDrawingOpts),e.polylineDrawingOpts)),g=_(Object.assign({},Zv.polygonActionOpts,I("polygonActionOpts"))),f=_(ee(J(Zv.polygonDrawingOpts),e.polygonDrawingOpts)),y=_(Object.assign({},Zv.rectangleActionOpts,I("rectangleActionOpts"))),b=_(ee(J(Zv.rectangleDrawingOpts),e.rectangleDrawingOpts)),C=_(Object.assign({},Zv.circleActionOpts,I("circleActionOpts"))),w=_(ee(J(Zv.circleDrawingOpts),e.circleDrawingOpts)),O=_(Object.assign({},Zv.regularActionOpts,I("regularActionOpts"))),x=_(ee(J(Zv.regularDrawingOpts),e.regularDrawingOpts)),P=_(Object.assign({},Zv.pinActionOpts,I("pinActionOpts"))),S=_(ee(J(Zv.pinDrawingOpts),e.pinDrawingOpts));l.pointActionOpts=p,l.pointDrawingOpts=m,l.polylineActionOpts=h,l.polylineDrawingOpts=v,l.polygonActionOpts=g,l.polygonDrawingOpts=f,l.rectangleActionOpts=y,l.rectangleDrawingOpts=b,l.circleActionOpts=C,l.circleDrawingOpts=w,l.regularActionOpts=O,l.regularDrawingOpts=x,l.pinActionOpts=P,l.pinDrawingOpts=S,l.clearActionOpts=c;const E=a((()=>e.drawings.map((e=>({name:e,type:"drawing",actionStyle:{background:l[`${N(e)}ActionOpts`].color,color:l[`${N(e)}ActionOpts`].textColor},actionClass:`vc-draw-${e} vc-draw-button`,actionRef:n(null),actionOpts:l[`${N(e)}ActionOpts`],cmp:T(e),cmpRef:n(null),cmpOpts:l[`${N(e)}DrawingOpts`],tip:l[`${N(e)}ActionOpts`].tooltip.tip||s(`vc.drawing.${N(e)}.tip`),isActive:!1})))));function T(e){switch(e){case"pin":return qv;case"point":return Yv;case"polyline":return Jv;case"polygon":return Xv;case"rectangle":return b.regular?Qv:Kv;case"circle":case"regular":return Qv;default:return}}function I(t){return q(Zv[t],e[t])?d:Object.assign({},d,e[t])}return null==(i=Lv(e,t,r,E,u,c,"drawing"))?void 0:i.renderContent}});eg.install=e=>{e.component(eg.name,eg)};const tg=eg,ig=tg;class ng{constructor(e){const{Resource:t,defaultValue:i,Credit:n,Event:o}=Cesium;this._url=e.url;const r=t.createIfNeeded(this._url);r.appendForwardSlash(),this._ready=!1,this._resource=r,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=e.minimumLevel||0,this._maximumLevel=e.maximumLevel||20,this._tilingScheme=e.tilingScheme||new Cesium.WebMercatorTilingScheme,this._rectangle=e.rectangle||this._tilingScheme.rectangle;let a=e.credit;"string"==typeof a&&(a=new n(a)),this._credit=a,this.enablePickFeatures=i(e.enablePickFeatures,!1),this._hasAlphaChannel=i(e.hasAlphaChannel,!0),this._errorEvent=new o,this._readyPromise=sr(),this._ready=!0,this._readyPromise.resolve(!0),this._subdomains=e.subdomains||["01","02","03","04"],this._domain=e.domain||"webst",this._style=e.mapStyle||"6",this._lang=e.lang||"zh_cn",this._scl=e.scl||"1",this._ltype=e.ltype||"0"}get url(){return this._resource._url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get readyPromise(){return this._readyPromise.promise}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(e,t,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(e,t,i,n){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,og.call(this,e,t,i,n))}pickFeatures(e,t,i,n,o){}}function og(e,t,i,n){let o=this._url;const r=this._subdomains;o=o.replace("{domain}",this._domain).replace("{s}",r[(e+t+i)%r.length]).replace("{lang}",this._lang).replace("{style}",this._style).replace("{scl}",this._scl).replace("{ltype}",this._ltype).replace("{x}",e).replace("{y}",t).replace("{z}",i);return this._resource.getDerivedResource({url:o,request:n})}const rg={url:{type:String,default:"https://{domain}{s}.is.autonavi.com/appmaptile?lang={lang}&size=1&style={style}&scl={scl}&ltype={ltype}&x={x}&y={y}&z={z}"},subdomains:{type:Array,default:()=>["01","02","03","04"]},domain:{type:String,default:"webst"},lang:{type:String,default:"zh_cn"},mapStyle:{type:String,default:"6"},scl:{type:String,default:"1"},ltype:{type:String,default:"0"},...rn,...cn,...ln,...tn,...nn,...fn};var ag=E({name:"VcImageryProviderAmap",props:rg,emits:$l,setup(e,t){const i=o();i.cesiumClass="AMapImageryProvider";const n=xr(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.AMapImageryProvider=Cesium.AMapImageryProvider||ng,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.AMapImageryProvider(t)},()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const sg={url:{type:[String,Object],default:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},...Xi,...Qi,usePreCachedTilesIfAvailable:{type:Boolean,default:!0},...Ki,...en,...tn,...nn,...on,...rn,...an,...sn,...ln};var lg=E({name:"VcImageryProviderArcgis",props:sg,emits:$l,setup(e,t){const i=o();return i.cesiumClass="ArcGisMapServerImageryProvider",xr(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});class cg{constructor(e,t){isNaN(e)&&(e=isNaN(e)?0:e),c(e)&&(e=parseFloat(e)),isNaN(t)&&(t=isNaN(t)?0:t),c(t)&&(t=parseFloat(t)),this.lng=e,this.lat=t}equals(e){return e&&this.lat===e.lat&&this.lng===e.lng}}cg.isInRange=function(e){return e&&e.lng<=180&&e.lng>=-180&&e.lat<=74&&e.lat>=-74};class ug{constructor(e,t){this.x=e||0,this.y=t||0}equals(e){return e&&e.x===this.x&&e.y===this.y}}const dg=[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0],pg=[75,60,45,30,15,0],mg=[[1.410526172116255e-8,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,17337981.2],[-7.435856389565537e-9,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3.030883460898826e-8,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,6856817.37],[-1.981981304930552e-8,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],[3.09191371068437e-9,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,2555164.4],[2.890871144776878e-9,8983055095805407e-21,-3.068298e-8,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],hg=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,647795574.6671607,-4082003173.641316,10774905663.51142,-15171875531.51559,12053065338.62167,-5124939663.577472,913311935.9512032,67.5],[.00337398766765,111320.7020202162,4481351.045890365,-23393751.19931662,79682215.47186455,-115964993.2797253,97236711.15602145,-43661946.33752821,8477230.501135234,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]];class vg{getDistanceByMC(e,t){if(!e||!t)return 0;if(!(e=this.inverse(e)))return 0;const i=Cg(e.lng),n=Cg(e.lat);if(!(t=this.inverse(t)))return 0;return bg(i,Cg(t.lng),n,Cg(t.lat))}getDistanceByLL(e,t){if(!e||!t)return 0;e.lng=fg(e.lng,-180,180),e.lat=yg(e.lat,-74,74),t.lng=fg(t.lng,-180,180),t.lat=yg(t.lat,-74,74);const i=Cg(e.lng),n=Cg(e.lat);return bg(i,Cg(t.lng),n,Cg(t.lat))}inverse(e){let t;const i=new cg(Math.abs(e.lng),Math.abs(e.lat));for(let o=0;o<dg.length;o++)if(i.lat>=dg[o]){t=mg[o];break}const n=gg(e,t);return new cg(null==n?void 0:n.lng,null==n?void 0:n.lat)}forward(e){let t;e.lng=fg(e.lng,-180,180),e.lat=yg(e.lat,-74,74);const i=new cg(e.lng,e.lat);for(let o=0;o<pg.length;o++)if(i.lat>=pg[o]){t=hg[o];break}if(!t)for(let o=pg.length-1;o>=0;o--)if(i.lat<=-pg[o]){t=hg[o];break}const n=gg(e,t);return new cg(null==n?void 0:n.lng,null==n?void 0:n.lat)}lngLatToMercator(e,t){return this.forward(e)}lngLatToPoint(e){const t=this.forward(e);return new ug(t.lng,t.lat)}mercatorToLngLat(e,t){return this.inverse(e)}pointToLngLat(e){const t=new cg(e.x,e.y);return this.inverse(t)}pointToPixel(e,t,i,n,o){if(!e)return;e=this.lngLatToMercator(e,o),i=this.lngLatToMercator(i);const r=this.getZoomUnits(t),a=Math.round((e.lng-i.lng)/r+n.width/2),s=Math.round((i.lat-e.lat)/r+n.height/2);return new ug(a,s)}pixelToPoint(e,t,i,n,o){if(!e)return;const r=this.getZoomUnits(t),a=i.lng+r*(e.x-n.width/2),s=i.lat-r*(e.y-n.height/2),l=new cg(a,s);return this.mercatorToLngLat(l,o)}getZoomUnits(e){return Math.pow(2,18-e)}}function gg(e,t){if(!e||!t)return;let i=t[0]+t[1]*Math.abs(e.lng);const n=Math.abs(e.lat)/t[9];let o=t[2]+t[3]*n+t[4]*n*n+t[5]*n*n*n+t[6]*n*n*n*n+t[7]*n*n*n*n*n+t[8]*n*n*n*n*n*n;return i*=e.lng<0?-1:1,o*=e.lat<0?-1:1,new cg(i,o)}function fg(e,t,i){for(;e>i;)e-=i-t;for(;e<t;)e+=i-t;return e}function yg(e,t,i){return null!=t&&(e=Math.max(e,t)),null!=i&&(e=Math.min(e,i)),e}function bg(e,t,i,n){return 6378137*Math.acos(Math.sin(i)*Math.sin(n)+Math.cos(i)*Math.cos(n)*Math.cos(t-e))}function Cg(e){return Math.PI*e/180}class wg{constructor(e){const{defaultValue:t,Ellipsoid:i,WebMercatorProjection:n,Cartesian2:o,Cartographic:r,Math:a,Rectangle:s}=Cesium;e=e||{},this._ellipsoid=t(e.ellipsoid,i.WGS84),this._projection=new n(this._ellipsoid);const l=new vg;this._projection.project=function(t,i){return i=i||{},e.projectionTransforms&&e.projectionTransforms.from!==e.projectionTransforms.to&&("WGS84"===e.projectionTransforms.to.toUpperCase()?(i=yr(a.toDegrees(t.longitude),a.toDegrees(t.latitude)),i=fr(i[0],i[1])):i=fr(a.toDegrees(t.longitude),a.toDegrees(t.latitude))),i[0]=Math.min(i[0],180),i[0]=Math.max(i[0],-180),i[1]=Math.min(i[1],74),i[1]=Math.max(i[1],-74),i=l.lngLatToPoint(new cg(i[0],i[1])),new o(i.x,i.y)},this._projection.unproject=function(t,i){return i=i||{},(i=l.mercatorToLngLat(new cg(t.x,t.y)))[0]=(i[0]+180)%360-180,e.projectionTransforms&&e.projectionTransforms.from!==e.projectionTransforms.to&&("WGS84"===e.projectionTransforms.to.toUpperCase()?(i=gr(i.lng,i.lat),i=br(i[0],i[1])):i=gr(i.lng,i.lat)),new r(Cesium.Math.toRadians(i[0]),Cesium.Math.toRadians(i[1]))},this._rectangleSouthwestInMeters=new o(-20037726.37,-12474104.17),this._rectangleNortheastInMeters=new o(20037726.37,12474104.17);const c=this._projection.unproject(this._rectangleSouthwestInMeters),u=this._projection.unproject(this._rectangleNortheastInMeters);this._rectangle=new s(c.longitude,c.latitude,u.longitude,u.latitude),this.resolutions=[];for(let d=0;d<19;d++)this.resolutions[d]=256*Math.pow(2,18-d)}getNumberOfXTilesAtLevel(e){return 1<<e}getNumberOfYTilesAtLevel(e){return 1<<e}rectangleToNativeRectangle(e,t){const{defined:i,Rectangle:n}=Cesium,o=this._projection,r=o.project(n.southwest(e)),a=o.project(n.northeast(e));return i(t)?(t.west=r.x,t.south=r.y,t.east=a.x,t.north=a.y,t):new n(r.x,r.y,a.x,a.y)}tileXYToNativeRectangle(e,t,i,n){const{defined:o,Rectangle:r}=Cesium,a=this.resolutions[i],s=e*a,l=(e+1)*a,c=(1+(t=-t))*a,u=t*a;return o(n)?(n.west=s,n.south=u,n.east=l,n.north=c,n):new r(s,u,l,c)}tileXYToRectangle(e,t,i,n){const{Cartesian2:o}=Cesium,r=this.tileXYToNativeRectangle(e,t,i,n),a=this._projection,s=a.unproject(new o(r.west,r.south)),l=a.unproject(new o(r.east,r.north));return r.west=s.longitude,r.south=s.latitude,r.east=l.longitude,r.north=l.latitude,r}positionToTileXY(e,t,i){const{Rectangle:n,defined:o,Cartesian2:r}=Cesium,a=this._rectangle;if(!n.contains(a,e))return;const s=this._projection.project(e);if(!o(s))return;const l=this.resolutions[t],c=Math.floor(s.x/l),u=-Math.floor(s.y/l);return o(i)?(i.x=c,i.y=u,i):new r(c,u)}get ellipsoid(){return this._ellipsoid}get rectangle(){return this._rectangle}get projection(){return this._projection}}class _g{constructor(e){const{Resource:t,defaultValue:i,Credit:n,Event:o}=Cesium;this._subdomains=i(e.subdomains,["0","1","2","3"]),e.url?this._url=e.url:"img"===e.mapStyle?this._url="//maponline{s}.bdimg.com/starpic/u=x={x};y={y};z={z};v=009;type=sate&qt=satepc&app=webearth2&udt={udt}&fm=46&v=009":"vec"===e.mapStyle?this._url="//maponline{s}.bdimg.com/tile/?qt={qt}&x={x}&y={y}&z={z}&styles={styles}&scaler={scale}&udt={udt}&from=jsapi3_0&showtext={showtext}":"traffic"===e.mapStyle?this._url="https://its.map.baidu.com/traffic/TrafficTileService?time={time}&label={labelStyle}&v=016&level={z}&x={x}&y={y}&scaler={scale}":this._url="//api.map.baidu.com/customimage/tile?&x={x}&y={y}&z={z}&udt={udt}&scale={scale}&ak={ak}&customid={mapStyle}";const r=t.createIfNeeded(this._url);r.appendForwardSlash(),this._ready=!1,this._resource=r,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=e.minimumLevel||0,this._maximumLevel=e.maximumLevel||18,this._tilingScheme=new wg(e),this._rectangle=i(e.rectangle,this._tilingScheme.rectangle);let a=e.credit;"string"==typeof a&&(a=new n(a)),this._credit=a,this.enablePickFeatures=i(e.enablePickFeatures,!1),this._hasAlphaChannel=i(e.hasAlphaChannel,!0),this._errorEvent=new o,this._ready=!0,this._labelStyle=e.labelStyle||"web2D",this._showtext=e.showtext||"1",this._qt=e.qt,this._styles=e.styles,this._scale=e.scale,this._ak=e.ak,this._mapStyle=e.mapStyle}get url(){return this._resource.url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(e,t,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(e,t,i,n){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,Og.call(this,e,t,i,n))}pickFeatures(e,t,i,n,o){}}function Og(e,t,i,n){let o=this._url;const r=this._subdomains;o=o.replace("{s}",r[(e+t+i)%r.length]).replace("{qt}",this._qt).replace("{x}",e).replace("{y}",-t).replace("{z}",i).replace("{styles}",this._styles).replace("{scale}",this._scale).replace("{mapStyle}",this._mapStyle).replace("{labelStyle}",this._labelStyle).replace("{ak}",this._ak).replace("{time}",String((new Date).getTime())).replace("{udt}",String((new Date).getTime())).replace("{showtext}",this._showtext);return this._resource.getDerivedResource({url:o,request:n})}const xg={...Ji,...tn,...on,...Qi,...rn,...cn,...ln,projectionTransforms:{type:[Boolean,Object],default:()=>({from:"BD09",to:"WGS84"})},scale:{type:String,default:"2"},ak:{type:String,default:"5ieMMexWmzB9jivTq6oCRX9j"},subdomains:{type:Array,default:()=>["0","1","2","3"]},mapStyle:{type:String,default:"vec"},qt:{type:String,default:"vtile"},styles:{type:String,default:"pl"},showtext:{type:String,default:"1"}};var Pg=E({name:"VcImageryProviderBaidu",props:xg,emits:$l,setup(e,t){const i=o();i.cesiumClass="BaiduMapImageryProvider";const n=xr(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.BaiduMapImageryProvider=Cesium.BaiduMapImageryProvider||_g,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.BaiduMapImageryProvider(t)},()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Sg={url:{type:[String,Object],default:"https://dev.virtualearth.net"},bmKey:String,tileProtocol:String,mapStyle:{type:String,default:"Aerial"},culture:{type:String,default:""},...on,...Qi};var Eg=E({name:"VcImageryProviderBing",props:Sg,emits:$l,setup(e,t){const i=o();return i.cesiumClass="BingMapsImageryProvider",xr(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Tg={...Ji,...on,...Qi,...rn,metadata:Object};var Ig=E({name:"VcImageryProviderGoogle",props:Tg,emits:$l,setup(e,t){const i=o();return i.cesiumClass="GoogleEarthEnterpriseImageryProvider",xr(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Mg={...nn,...on,cells:{type:Number,default:8},color:{type:[String,Object,Array],default:()=>[1,1,1,.4],watcherOptions:{cesiumObjectBuilder:$e}},...lo,glowWidth:{type:Number,default:6},backgroundColor:{type:[String,Array,Object],default:()=>[0,.5,0,.2],watcherOptions:{cesiumObjectBuilder:$e}},...an,...sn,canvasSize:{type:Number,default:256}};var Dg=E({name:"VcImageryProviderGrid",props:Mg,emits:$l,setup(e,t){const i=o();return i.cesiumClass="GridImageryProvider",xr(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var jg=E({name:"VcImageryProviderIon",props:{assetId:Number,...dn,server:[String,Object]},emits:$l,setup(e,t){const i=o();i.cesiumClass="IonImageryProvider";const n=xr(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{const t=n.transformProps(e);return ut(Cesium.VERSION,"1.104")&&"function"==typeof Cesium[i.cesiumClass].fromAssetId?await Cesium.IonImageryProvider.fromAssetId(t.assetId,t):new Cesium.IonImageryProvider(t)},()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Lg={url:{type:[String,Object],default:"https://api.mapbox.com/styles/v1/"},username:{type:String,default:"mapbox"},styleId:String,...dn,tilesize:{type:Number,default:512},scaleFactor:Boolean,...on,...cn,...ln,...tn,...rn};var Ag=E({name:"VcImageryProviderMapbox",props:Lg,emits:$l,setup(e,t){const i=o();return i.cesiumClass="MapboxStyleImageryProvider",xr(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const kg={url:{type:String,default:"https://a.tile.openstreetmap.org"},...un,...tn,...cn,...ln,...on,credit:{type:[String,Object],default:"MapQuest, Open Street Map and contributors, CC-BY-SA"}};var Rg=E({name:"VcImageryProviderOsm",props:kg,emits:$l,setup(e,t){const i=o();return i.cesiumClass="OpenStreetMapImageryProvider",xr(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Vg={...Ji,...tn,...rn,...on,...an,...sn};var Bg=E({name:"VcImageryProviderSingletile",props:Vg,emits:$l,setup(e,t){const i=o();return i.cesiumClass="SingleTileImageryProvider",xr(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Ng=1,zg=2,Fg=3;class Gg{constructor(e){if(!Cesium.defined(e.name))throw new Cesium.DeveloperError("options.name is required.");const t=window.indexedDB.open(this.dbname);this.layer=e.layer||null,this.storageType=e.storageType||"arrayBuffer",this.creatingTable=!1,this.cachestatus={},this.dbname=e.name;const i=this;return new Promise(((e,n)=>{t.onsuccess=t=>{i.db=t.target.result,i.version=i.db.version,i.cachestatus=i.cachestatus||{},e(i)},t.onupgradeneeded=t=>{i.db=t.target.result,i.version=i.db.version,e(i)},t.onerror=e=>{i.db=null,n("create database fail, error code : "+e.target.errorcode)}}))}checkObjectStoreExist(e){return!!Cesium.defined(this.db)&&this.db.objectStoreNames.contains(e)}createObjectStore(e){return new Promise(((t,i)=>{if(this.creatingTable)i(!1);else{if(this.db.objectStoreNames.contains(e))return void i(!1);this.creatingTable=!0;const n=parseInt(this.db.version);this.db.close();const o=this,r=window.indexedDB.open(this.dbname,n+1);r.onupgradeneeded=i=>{const n=i.target.result;o.db=n;const r=n.createObjectStore(e,{keyPath:"id"});if(Cesium.defined(r)){r.createIndex("value","value",{unique:!1}),o.creatingTable=!1,o.cachestatus=o.cachestatus||{},o.cachestatus[e]={},o.db.close();window.indexedDB.open(o.dbname).onsuccess=e=>{o.db=e.target.result,t(!0)}}else o.creatingTable=!1,t(!1)},r.onsuccess=e=>{e.target.result.close(),t(!0)},r.onerror=e=>{o.creatingTable=!1,i(!1)}}}))}putElementInDB(e,t,i){return new Promise(((n,o)=>{if(!Cesium.defined(this.db))return void o(!1);const{cachestatus:r,db:a}=this;if(Cesium.defined(r[e])&&Cesium.defined(r[e][t]&&(r[e][t]===Ng||r[e][t]===zg)))n(!1);else if(a.objectStoreNames.contains(e)){r[e]=r[e]||{};try{const o=a.transaction([e],"readwrite").objectStore(e).add({id:t,value:i});r[e][t]=Ng,o.onsuccess=i=>{r[e][t]=zg,n(!0)},o.onerror=i=>{r[e][t]=Fg,n(!1)}}catch(s){return void o(null)}}else this.createObjectStore(e).then((()=>{const r=a.transaction([e],"readwrite").objectStore(e).add({id:t,value:i});r.onsuccess=function(e){n(!0)},r.onerror=function(e){o(!1)}}),(()=>{o(!1)}))}))}getElementFromDB(e,t){return new Promise(((i,n)=>{const{db:o}=this;if(!Cesium.defined(o))return null;if(!o.objectStoreNames.contains(e))return null;try{const r=o.transaction([e]),a=r.objectStore(e).get(t);a.onsuccess=e=>Cesium.defined(e.target.result)?i(e.target.result.value):n(null),a.onerror=e=>{n(null)}}catch(r){n(null)}}))}updateElementInDB(e,t,i){return new Promise(((n,o)=>{const{db:r}=this;if(Cesium.defined(r))if(r.objectStoreNames.contains(e))try{const o=r.transaction([e],"readwrite").objectStore(e).put({id:t,value:i});o.onsuccess=()=>{n(!0)},o.onerror=()=>{n(!1)}}catch(Qb){n(!1)}else n(!1);else n(!1)}))}removeElementFromDB(e,t){return new Promise(((i,n)=>{const{db:o}=this;if(Cesium.defined(o))if(o.objectStoreNames.contains(e))try{const n=o.transaction([e],"readwrite").objectStore(e).delete(t);n.onsuccess=()=>{i(!0)},n.onerror=()=>{i(!1)}}catch(Qb){i(!1)}else i(!1);else i(!1)}))}clear(e){return new Promise(((t,i)=>{const{db:n}=this;if(Cesium.defined(n))if(n.objectStoreNames.contains(e))try{const i=n.transaction([e],"readwrite").objectStore(e).clear();i.onsuccess=()=>{t(!0)},i.onerror=()=>{t(!1)}}catch(Qb){t(!1)}else t(!1);else t(!1)}))}}class Hg{constructor(e){const{appendForwardSlash:t,Credit:i,defaultValue:n,defined:o,DeveloperError:r,Event:a,Resource:s,Math:l}=Cesium;e=n(e,{});const{url:c}=e;if(!o(c))throw new r("options.url is required.");const u=c.substring(0,c.indexOf("datas"));this.tablename=c.substring(0,c.indexOf("datas/")+6,c.length);const d=this;new Gg({name:u+this.tablename}).then((e=>{d._indexedDBScheduler=e})),this._indexedDBSetting={isOpen:!1,clear:()=>{d._indexedDBScheduler.clear(d.tablename)}},this.isSci=!1,this.isTileMap=!1;const p=t(c);if(p.indexOf("rest/maps")>-1)this.isTileMap=!0,this.layersID=e.layersID;else{if(!(p.indexOf("rest/realspace")>-1))throw new r("The url type is not supported!");this.isSci=!0,this.layersID=void 0}this._url=p,this._resource=s.createIfNeeded(p),this._transparent=n(e.transparent,!0),this._name=e.name||"",this._urlTemplate=void 0,this._errorEvent=new a,this._fileExtension="png",this._tileWidth=256,this._tileHeight=256,this._minimumLevel=n(e.minimumLevel,0),this._maximumLevel=e.maximumLevel,this._rectangle=void 0,this._tilingScheme=void 0,this._tileDiscardPolicy=e.tileDiscardPolicy,this._fRatio=n(e.ratio,l.DEGREES_PER_RADIAN/6378137),this._scales=[],this._coordUnit="DEGREE";let m=n(e.credit,new i("MapQuest, SuperMap iServer Imagery"));"string"==typeof m&&(m=new i(m)),this._credit=m,this._ready=!1,this._readyPromise=sr(),this._options=e}get url(){return this._url}get name(){return this._name}set name(e){this._name=e}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this._ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this._ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get credit(){return this._credit}get hasAlphaChannel(){return!0}get readyPromise(){return this._readyPromise.promise}get ratio(){return this._fRatio}set ratio(e){this._fRatio=e}get tileDiscardPolicy(){return this._tileDiscardPolicy}getTileCredits(e,t,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(e,t,i,n){const{defined:o,DeveloperError:r,ImageryProvider:a}=Cesium;if(!this.ready)throw new r("requestImage must not be called before the imagery provider is ready.");const s=Zg.call(this,e,t,i),l=this._resource.getDerivedResource({url:s,request:n}),c=this;if(!this._indexedDBSetting.isOpen)return a.loadImage(this,l);if(o(this._indexedDBScheduler)){const e=this._indexedDBScheduler.getElementFromDB(this.tablename,s);try{return e.then((e=>{if(o(e)){const t=new Image;return t.src=e,t}return a.loadImage(c,l)}))}catch(Qb){return a.loadImage(c,l)}}}pickFeatures(e,t,i,n,o){}async init(){await qg.call(this)}}let Ug={};const Wg=["1.690163571602655E-9","3.3803271432053056E-9","6.760654286410611E-9","1.3521308572821242E-8","2.7042617145642484E-8","5.408523429128511E-8","1.0817046858256998E-7","2.1634093716513974E-7","4.3268187433028044E-7","8.653637486605571E-7","1.7307274973211203E-6","3.4614549946422405E-6","6.9229099892844565E-6","1.3845819978568952E-5","2.7691639957137904E-5","5.53832799142758E-5","1.107665598285516E-4","2.215331196571032E-4","4.430662393142064E-4","8.861324786284128E-4","1.772264957256826E-3","3.544529914513652E-3"],$g=[1.690163571602655e-9,3.3803271432053056e-9,6.760654286410611e-9,1.3521308572821242e-8,2.7042617145642484e-8,5.408523429128511e-8,1.0817046858256998e-7,2.1634093716513974e-7,4.3268187433028044e-7,8.653637486605571e-7,17307274973211203e-22,34614549946422405e-22,69229099892844565e-22,13845819978568952e-21,27691639957137904e-21,553832799142758e-19,.0001107665598285516,.0002215331196571032,.0004430662393142064,.0008861324786284128,.001772264957256826,.003544529914513652];function Zg(e,t,i){let n;if(this.isTileMap){if("DEGREE"===this._coordUnit){const o=Wg[i+1]||Wg[i];n=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{scale}",o)}else if("METER"===this._coordUnit){const o=Wg[i];n=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{scale}",o)}}else n=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{level}",i).replace("{fileExtension}",this._fileExtension);return n}async function qg(){const{Resource:e}=Cesium;if(this.isTileMap)try{const t=await e.fetchJsonp({url:this._options.url+".jsonp",queryParameters:{f:"json"}});ef.call(this,t)}catch(Qb){tf.call(this)}else try{const t=await e.fetchText({url:this.url+"config"});Yg.call(this,t)}catch(Qb){tf.call(this)}}function Yg(e){const t=Jg.call(this,e),{defaultValue:i,defined:n,GeographicTilingScheme:o,Math:r,Rectangle:a}=Cesium;this._fileExtension=i(t.fileExtentName,"png"),this._tileWidth=i(t.imageSizeWidth,256),this._tileHeight=i(t.imageSizeHeight,256);const s=t.levels,l=s.length;if(this._minimumLevel=i(s[0],0),this._maximumLevel=i(s[l-1],l-1),n(this._tilingScheme)||(this._tilingScheme=new o({ellipsoid:this._options.ellipsoid})),!n(this._rectangle)&&t.left&&t.right&&t.top&&t.bottom){const e=r.toRadians(t.left),i=r.toRadians(t.right),n=r.toRadians(t.bottom),o=r.toRadians(t.top);this._rectangle=new a(e,n,i,o)}const c=this._tilingScheme;this._rectangle.west<c.rectangle.west&&(this._rectangle.west=c.rectangle.west),this._rectangle.east>c.rectangle.east&&(this._rectangle.east=c.rectangle.east),this._rectangle.south<c.rectangle.south&&(this._rectangle.south=c.rectangle.south),this._rectangle.north>c.rectangle.north&&(this._rectangle.north=c.rectangle.north);const u=c.positionToTileXY(a.southwest(this._rectangle),this._minimumLevel),d=c.positionToTileXY(a.northeast(this._rectangle),this._minimumLevel);(window.Math.abs(d.x-u.x)+1)*(window.Math.abs(d.y-u.y)+1)>4&&(this._minimumLevel=0),this._tilingScheme=c,this._urlTemplate=this._url+"data/index/{y}/{x}.{fileExtension}?level={level}",this._ready=!0,this._readyPromise.resolve(!0)}function Jg(e){const t="http://www.supermap.com/SuperMapCache/sci3d",i=(e=(new DOMParser).parseFromString(e,"application/xml")).childNodes[0],n=function(e,t,i){if(Cesium.defined(e)){const n=[],o=e.getElementsByTagNameNS("*",t),r=o.length;for(let e=0;e<r;e++){const r=o[e];r.localName===t&&-1!==i.indexOf(r.namespaceURI)&&n.push(r)}return n}}(Kg(i,"Levels",t),"Level",t)||[],o=[];for(let h=0;h<n.length;h++)o.push(parseInt(n[h].textContent,10));const r=Kg(i,"Bounds",t),a=Qg(r,"Left",t),s=Qg(r,"Right",t),l=Qg(r,"Top",t),c=Qg(r,"Bottom",t),u=Xg(i,"FileExtentName",t),d=Qg(i,"CellWidth",t),p=Qg(i,"CellHeight",t),m=Xg(i,"CacheName",t);return this._name=m||"",{left:a,right:s,top:l,bottom:c,fileExtentName:u,levels:o,imageSizeWidth:d,imageSizeHeight:p}}function Xg(e,t,i){const n=Kg(e,t,i);return Cesium.defined(n)?n.textContent.trim():void 0}function Qg(e,t,i){const n=Kg(e,t,i);if(Cesium.defined(n)){const e=parseFloat(n.textContent);return isNaN(e)?void 0:e}}function Kg(e,t,i){if(Cesium.defined(e)){const n=e.childNodes,o=n.length;for(let e=0;e<o;e++){const o=n[e];if(o.localName===t&&-1!==i.indexOf(o.namespaceURI))return o}}}function ef(e){const{Cartesian3:t,defaultValue:i,defined:n,GeographicTilingScheme:o,Math:r,Rectangle:a,WebMercatorTilingScheme:s}=Cesium,l=e.prjCoordSys.coordUnit;this._coordUnit=l;const c=e.bounds,u=e.visibleScales;if(n(u)&&u.length>1&&n(this._maximumLevel)){const e=u[u.length-1];this._maximumLevel=function(e){for(let t=$g.length;t--;)if(e[t]<=e)return t}(e)}if("DEGREE"===l)this._tilingScheme=new o,c.left=r.clamp(c.left,-180,180),c.bottom=r.clamp(c.bottom,-90,90),c.right=r.clamp(c.right,-180,180),c.top=r.clamp(c.top,-90,90),this._rectangle=a.fromDegrees(c.left,c.bottom,c.right,c.top),this._urlTemplate=this._url+'tileImage.png?transparent={transparent}&cacheEnabled=true&width=256&height=256&x={x}&y={y}&scale={scale}&redirect=false&overlapDisplayed=false&origin={"x":-180,"y":90}';else{const e=new t(c.left,c.bottom,0);e.x=Math.max(-20037508.342789244,e.x),e.y=Math.max(-20037508.342789244,e.y);const i=new t(c.right,c.top,0);i.x=Math.min(20037508.342789244,i.x),i.y=Math.min(20037508.342789244,i.y),this._tilingScheme=new s;const n=this._tilingScheme.projection.unproject(e),o=this._tilingScheme.projection.unproject(i);this._rectangle=new a(n.longitude,n.latitude,o.longitude,o.latitude),this._urlTemplate=this._url+'tileImage.png?transparent={transparent}&cacheEnabled=true&width=256&height=256&x={x}&y={y}&scale={scale}&redirect=false&overlapDisplayed=false&origin={"x":-20037508.342789248 ,"y":20037508.342789095}'}this._urlTemplate=this._urlTemplate.replace("{transparent}",this._transparent),this.layersID&&(this._urlTemplate=this._urlTemplate+"&layersID="+this.layersID),this._rectangle||(this._rectangle=i(this._options.rectangle,this._tilingScheme.rectangle)),this._ready=!0,this._readyPromise.resolve(!0)}function tf(){const{TileProviderError:e,RuntimeError:t}=Cesium,i="An error occurred while accessing "+this._url+".";Ug=e.reportError(Ug,this,this._errorEvent,i,0,0,0,new Error(i)),this._readyPromise.reject(new t(i))}const nf={url:String,...cn,...ln,name:String,transparent:{type:Boolean,default:!0},credit:{type:[String,Object],default:"MapQuest, SuperMap iServer Imagery"},...fn};var of=E({name:"VcImageryProviderSupermap",props:nf,emits:$l,setup(e,t){const i=o();i.cesiumClass="SuperMapImageryProvider";const n=xr(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.SuperMapImageryProvider=Cesium.SuperMapImageryProvider||Hg,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e),i=new Cesium.SuperMapImageryProvider(t);return Cesium.SuperMapVersion||await i.init(),i},()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const rf={img:"//p{s}.map.gtimg.com/sateTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg&scene=0",terrain:"//p{s}.map.gtimg.com/demTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg&scene=0",vector:"//rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&type=vector&styleid={style}&scene=0"};class af{constructor(e){const{Resource:t,defaultValue:i,Credit:n,Event:o}=Cesium;this._subdomains=e.subdomains||["1","2","3"],this._url=e.url||[e.protocol||"",rf[e.mapStyle]||rf.vector].join("");const r=t.createIfNeeded(this._url);r.appendForwardSlash(),this._ready=!1,this._resource=r,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=e.minimumLevel||0,this._maximumLevel=e.maximumLevel||20,this._tilingScheme=new Cesium.WebMercatorTilingScheme,this._rectangle=i(e.rectangle,this._tilingScheme.rectangle);let a=e.credit;"string"==typeof a&&(a=new n(a)),this._credit=a,this.enablePickFeatures=i(e.enablePickFeatures,!1),this._hasAlphaChannel=i(e.hasAlphaChannel,!0),this._errorEvent=new o,this._readyPromise=sr(),this._ready=!0,this._readyPromise.resolve(!0),this._style=e.styleId}get url(){return this._resource._url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get readyPromise(){return this._readyPromise.promise}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(e,t,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(e,t,i,n){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,sf.call(this,e,t,i,n))}pickFeatures(e,t,i,n,o){}}function sf(e,t,i,n){let o=this._url;const r=this._subdomains,a=this.tilingScheme.getNumberOfYTilesAtLevel(i)-t-1;o=o.replace("{s}",r[(e+t+i)%r.length]).replace("{style}",this._style).replace("{x}",e).replace("{y}",-t).replace("{z}",i).replace("{sx}",e>>4).replace("{sy}",(1<<i)-t>>4).replace("{reverseY}",a);return this._resource.getDerivedResource({url:o,request:n})}const lf={...Ji,subdomains:{type:Array,default:()=>["1","2","3"]},mapStyle:{type:String,default:"vector"},styleId:{type:String,default:"1"},protocol:String,...rn,...cn,...ln,...tn,...nn,...fn};var cf=E({name:"VcImageryProviderTencent",props:lf,emits:$l,setup(e,t){const i=o();i.cesiumClass="TencentImageryProvider";const n=xr(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.TencentImageryProvider=Cesium.TencentImageryProvider||af,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.TencentImageryProvider(t)},()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const uf={IMG_W:"img_w",IMG_C:"img_c",CIA_W:"cia_w",CIA_C:"cia_c",VEC_W:"vec_w",VEC_C:"vec_c",TER_W:"ter_w",TER_C:"ter_c",CVA_W:"cva_w",CVA_C:"cva_c",CTA_W:"cta_w",CTA_C:"cta_c",EIA_W:"eia_w",EIA_C:"eia_c",EVA_W:"eva_w",EVA_C:"eva_c",IBO_C:"ibo_c",IBO_W:"ibo_w"},df={},pf={},mf={},hf={},vf={},gf={};class ff{constructor(e){Object.keys(uf).forEach((t=>{switch(df[uf[t]]=e.protocol+"://{s}.tianditu.gov.cn/"+uf[t]+"/wmts",pf[uf[t]]=uf[t].slice(0,3),mf[uf[t]]=uf[t].slice(4),hf[uf[t]]="tiles","w"===mf[uf[t]]?vf[uf[t]]="900913":vf[uf[t]]="4490",uf[t]){case"img_w":case"img_c":case"cia_w":case"cia_c":case"cta_w":case"cta_c":gf[uf[t]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18"];break;case"vec_w":case"vec_c":case"cva_w":case"cva_c":gf[uf[t]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"];break;case"ter_w":case"ter_c":gf[uf[t]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14"];break;case"eia_w":case"eia_c":case"eva_w":case"eva_c":case"ibo_c":case"ibo_w":gf[uf[t]]=["1","2","3","4","5","6","7","8","9","10"]}}));const{Credit:t,Resource:i,defaultValue:n,Event:o,GeographicTilingScheme:r,WebMercatorTilingScheme:a}=Cesium;e=n(e,{}),this._mapStyle=n(e.mapStyle,uf.IMG_W),this._url=e.url||n(e.url,df[this._mapStyle]);const s=i.createIfNeeded(this._url);s.appendForwardSlash(),this._ready=!1,this._resource=s,this._token=e.token,this._layer=n(e.layer,pf[this._mapStyle]),this._style=n(e.style,"default"),this._tileMatrixSetID=n(e.tileMatrixSetID,mf[this._mapStyle]),this._tileMatrixLabels=n(e.tileMatrixLabels,gf[this._mapStyle]),this._format=n(e.format,hf[this._mapStyle]),this._epsgCode=vf[this._mapStyle],this._tilingScheme="900913"===this._epsgCode?new a:new r,this._tileWidth=n(e.tileWidth,256),this._tileHeight=n(e.tileHeight,256),this._minimumLevel=n(e.minimumLevel,0),this._maximumLevel=n(e.maximumLevel,gf[this._mapStyle].length),this._rectangle=n(e.rectangle,this._tilingScheme.rectangle),this._errorEvent=new o;const l=n(e.credit,"天地图全球影像服务");this._credit="string"==typeof l?new t(l):l,this._subdomains=n(e.subdomains,["t0","t1","t2","t3","t4","t5","t6","t7"]),this._tileDiscardPolicy=e.tileDiscardPolicy,this._ready=!0}getTileCredits(e,t,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(e,t,i,n){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");const o=yf.call(this,e,t,i,n);return Cesium.ImageryProvider.loadImage(this,o)}pickFeatures(e,t,i,n,o){}get url(){return this._resource.url}get proxy(){return this._resource.proxy}get mapStyle(){return this._mapStyle}get tileWidth(){return this._tileWidth}get tileHeight(){return this._tileHeight}get maximumLevel(){return this._maximumLevel}get minimumLevel(){return this._minimumLevel}get tilingScheme(){return this._tilingScheme}get rectangle(){return this._rectangle}get errorEvent(){return this._errorEvent}get ready(){return!0}get credit(){return this._credit}get hasAlphaChannel(){return!0}get tileDiscardPolicy(){return this._tileDiscardPolicy}}function yf(e,t,i,n){var o;const{combine:r,defined:a,defaultValue:s,queryToObject:l,objectToQuery:c}=Cesium,u=(0,Object.freeze)({service:"WMTS",version:"1.0.0",request:"GetTile"});"900913"===this._epsgCode&&(i-=1);const d=this._tileMatrixLabels,p=a(d)?d[i]:i.toString(),m=this._subdomains;let h=this._url.replace("{s}",m[(e+t+i)%m.length]);const v=new z(h);let g=l(s(null==(o=v.query)?void 0:o.call(v),""));g=r(u,g),g.tilematrix=p,g.layer=this._layer,g.style=this._style,g.tilerow=t,g.tilecol=e,g.tilematrixset=this._tileMatrixSetID,g.format=this._format;const f=c(g);h=v.toString()+"?"+f,a(this._proxy)&&(h=this._proxy.getURL(h)),a(this._token)&&(h+="&tk="+this._token);return this._resource.getDerivedResource({url:h,request:n})}const bf={...Ji,...cn,...ln,...tn,mapStyle:{type:String,default:"img_w",validator:e=>["cia_c","cia_w","cta_c","cta_w","cva_c","cva_w","eia_c","eia_w","eva_c","eva_w","img_c","img_w","ter_c","ter_w","vec_c","vec_w","ibo_c","ibo_w"].includes(e)},token:String,protocol:{type:String,default:"https"},credit:{type:[String,Object],default:"天地图全球影像服务"},...fn};var Cf=E({name:"VcImageryProviderTianditu",props:bf,emits:$l,setup(e,t){const i=o();i.cesiumClass="TiandituImageryProvider";const n=xr(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.TiandituImageryProvider=Cesium.TiandituImageryProvider||ff,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.TiandituImageryProvider(t)},()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const wf={...nn,...on,color:{type:[Object,String,Array],default:"YELLOW"},...an,...sn};var _f=E({name:"VcImageryProviderTileCoordinates",props:wf,emits:$l,setup(e,t){const i=o();return i.cesiumClass="TileCoordinatesImageryProvider",xr(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Of={url:[String,Object],...un,...rn,...cn,...ln,...tn,...nn,...on,...an,...sn,flipXY:Boolean,...fn};var xf=E({name:"VcImageryProviderTms",props:Of,emits:$l,setup(e,t){const i=o();return i.cesiumClass="TileMapServiceImageryProvider",xr(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Pf={...Ji,...pn,...rn,...cn,...ln,...tn,...nn,...on,...an,...sn,dir:{type:String,reqiured:!0},scales:{type:Array,default:()=>[1/295829355,1/147914678,1/73957339,1/36978669,1/18489335,1/9244667,1/4622334,1/2311167,1/1155583,1/577792,1/288896,1/144448,1/72224,1/36112,1/18056,1/9026,1/4514]}};var Sf=E({name:"VcImageryProviderTiledcache",props:Pf,emits:$l,setup(e,t){const i=o();i.cesiumClass="UrlTemplateImageryProvider";const n=xr(e,t,i);if(void 0===n)return;i.createCesiumObject=async()=>{const t=n.transformProps(e),{Credit:i,defined:o,defaultValue:a,DeveloperError:s,Ellipsoid:l,GeographicTilingScheme:c,Rectangle:u,Resource:d,UrlTemplateImageryProvider:p}=Cesium,{url:m,dir:h,format:v}=t;if(!o(m))throw new s("options.url is required.");if(!o(h))throw new s("options.dir is required.");const g=d.createIfNeeded(m);g.url+=`?dir=${h}&scale={scale}&col={x}&row={y}&format=${v}`;const f=a(t.tilingScheme,new c({ellipsoid:a(t.ellipsoid,l.WGS84),numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:1})),y=a(t.tileWidth,256),b=a(t.tileHeight,256),C=t.maximumLevel,w=a(t.minimumLevel,0),_=a(t.rectangle,f.rectangle),O=f.positionToTileXY(u.southwest(_),w),x=f.positionToTileXY(u.northeast(_),w),P=(Math.abs(x.x-O.x)+1)*(Math.abs(x.y-O.y)+1);if(P>4)throw new s("The rectangle and minimumLevel indicate that there are "+P+" tiles at the minimum level. Imagery providers with more than four tiles at the minimum level are not supported.");let S=a(t.credit,"");return"string"==typeof S&&(S=new i(S)),new p({url:g,credit:S,tilingScheme:f,tileWidth:y,tileHeight:b,minimumLevel:w,maximumLevel:C,rectangle:_,customTags:{scale:(t,i,n,o)=>{const a=1/e.scales[o];return r(t,"{scale}",a)}}})};const r=(e,t,i)=>{if(e&&e.urlSchemeZeroPadding&&Object.prototype.hasOwnProperty.call(e.urlSchemeZeroPadding,t)){const n=e.urlSchemeZeroPadding[t];if("string"==typeof n){const e=n.length;e>1&&(i=i.length>=e?i:new Array(e-i.toString().length+1).join("0")+i)}}return i};return()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Ef={...Ji,pickFeaturesUrl:[String,Object],urlSchemeZeroPadding:Object,...mn,...rn,...cn,...ln,...tn,...nn,...on,...an,...sn,hasAlphaChannel:{type:Boolean,default:!0},...hn,...en,customTags:Object,...fn};var Tf=E({name:"VcImageryProviderUrltemplate",props:Ef,emits:$l,setup(e,t){const i=o();return i.cesiumClass="UrlTemplateImageryProvider",xr(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const If={...Ji,...Ki,parameters:Object,getFeatureInfoParameters:Object,...en,...hn,...tn,...nn,...on,...an,...sn,...cn,...ln,crs:String,srs:String,...rn,...mn,...vn,...gn,getFeatureInfoUrl:[String,Object]};var Mf=E({name:"VcImageryProviderWms",props:If,emits:$l,setup(e,t){const i=o();return i.cesiumClass="WebMapServiceImageryProvider",xr(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Df={...Ji,...pn,layer:{type:String,required:!0},wmtsStyle:{type:String,required:!0},tileMatrixSetID:{type:String,required:!0},tileMatrixLabels:Array,...vn,...gn,dimensions:Object,...an,...sn,...nn,...tn,...cn,...ln,...on,...rn,...mn};var jf=E({name:"VcImageryProviderWmts",props:Df,emits:$l,setup(e,t){const i=o();return i.cesiumClass="WebMapTileServiceImageryProvider",xr(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Lf={url:[String,Object],requestVertexNormals:{type:Boolean,default:!1},requestWaterMask:{type:Boolean,default:!1},requestMetadata:{type:Boolean,default:!0},assetId:Number,...on,...rn};var Af=E({name:"VcTerrainProviderCesium",props:Lf,emits:$l,setup(e,t){const i=o();i.cesiumClass="CesiumTerrainProvider";const n=xr(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return Cesium.defined(e.assetId)&&"function"==typeof Cesium[i.cesiumClass].fromIonAssetId?await Cesium.CesiumTerrainProvider.fromIonAssetId(e.assetId,t):"function"==typeof Cesium[i.cesiumClass].fromUrl?Cesium.defined(t.url)?await Cesium.CesiumTerrainProvider.fromUrl(t.url,t):await Cesium.createWorldTerrainAsync({requestVertexNormals:t.requestVertexNormals,requestWaterMask:t.requestWaterMask}):Cesium.defined(t.url)?new Cesium.CesiumTerrainProvider(t):Cesium.createWorldTerrain({requestVertexNormals:t.requestVertexNormals,requestWaterMask:t.requestWaterMask})},()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const kf={url:{type:[String,Object],default:"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"},...on,...Xi};var Rf=E({name:"VcTerrainProviderArcgis",props:kf,emits:$l,setup(e,t){const i=o();return i.cesiumClass="ArcGISTiledElevationTerrainProvider",xr(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Vf={url:{type:[String,Object],default:"https://www.vr-theworld.com/vr-theworld/tiles1.0.0/73/"},...on,...rn};var Bf=E({name:"VcTerrainProviderVrTheworld",props:Vf,emits:$l,setup(e,t){const i=o();return i.cesiumClass="VRTheWorldTerrainProvider",xr(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Nf={url:{type:String,default:"https://{s}.tianditu.gov.cn/"},subdomains:{type:Array,default:()=>["t0","t1","t2","t3","t4","t5","t6","t7"]},pluginPath:{type:String,default:"https://api.tianditu.gov.cn/cdn/plugins/cesium/cesiumTdt.js"},dataType:{type:String,default:"int",validator:e=>["int","float"].includes(e)},tileType:{type:String,default:"heightmap",validator:e=>["heightmap","quantized-mesh"].includes(e)},token:String};var zf=E({name:"VcTerrainProviderTianditu",props:Nf,emits:$l,setup(e,t){const i=o();i.cesiumClass="GeoTerrainProvider";const n=xr(e,t,i);if(void 0===n)return;const{emit:r}=t,a=Pr();let s;return i.createCesiumObject=async()=>new Promise(((t,i)=>{s=document.createElement("script"),document.body.appendChild(s),s.src=e.pluginPath,s.onload=()=>{0===n.unwatchFns.length&&n.setPropsWatcher(!0);const i=[];for(let t=0;t<e.subdomains.length;t++){const n=e.url.replace("{s}",e.subdomains[t])+"mapservice/swdx?tk="+e.token;i.push(n)}t(new Cesium.GeoTerrainProvider({urls:i}))}})),i.unmount=async()=>{var e;const t=new Cesium.EllipsoidTerrainProvider;return null==(e=null==t?void 0:t.readyPromise)||e.then((()=>{Ie(i,"readyPromise")&&r("readyPromise",t,null==a?void 0:a.viewer,i.proxy)})),a&&(a.viewer.terrainProvider=t),null==s||s.parentNode.removeChild(s),!0},()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});[ag,lg,Pg,Eg,Ig,Dg,jg,Ag,Rg,Bg,of,cf,Cf,_f,xf,Sf,Tf,Mf,jf,Af,Rf,Bf,zf].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Ff=ag,Gf=lg,Hf=Pg,Uf=Eg,Wf=Ig,$f=Dg,Zf=jg,qf=Ag,Yf=Rg,Jf=Bg,Xf=of,Qf=cf,Kf=Cf,ey=_f,ty=xf,iy=Sf,ny=Tf,oy=Mf,ry=jf,ay=Af,sy=Rf,ly=Bf,cy=zf,uy={...Mt,...po,entities:{type:Array,default:()=>[]},name:String,destroy:{type:Boolean,default:!1}};var dy=E({name:"VcDatasourceCustom",props:uy,emits:Yl,setup(e,t){const i=o();return i.cesiumClass="CustomDataSource",Po(e,t,i),i.createCesiumObject=async()=>new Cesium.CustomDataSource(e.name),()=>{var e,n;return t.slots.default?P("i",{class:ue((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},ja(t.slots.default)):M(ue((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});const py={...Mt,...po,entities:{type:Array,default:()=>[]},czml:{type:[String,Object,Array],required:!0},...ao,...rn,destroy:{type:Boolean,default:!1}};var my=E({name:"VcDatasourceCzml",props:py,emits:Yl,setup(e,t){const i=o();i.cesiumClass="CzmlDataSource";const n=Po(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{const t=n.transformProps(e);return Cesium.CzmlDataSource.load(e.czml,t)},()=>{var e,n;return t.slots.default?P("i",{class:ue((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},ja(t.slots.default)):M(ue((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});const hy={...Mt,...po,entities:{type:Array,default:()=>[]},...ro,...ao,describe:[Function,Object],markerSize:{type:Number,default:48},markerSymbol:String,markerColor:{type:[Object,String,Array],default:()=>({x:.2549019607843137,y:.4117647058823529,z:.8823529411764706}),watcherOptions:{cesiumObjectBuilder:$e}},stroke:{type:[Object,String,Array],default:()=>({x:1,y:1,z:0}),watcherOptions:{cesiumObjectBuilder:$e}},strokeWidth:{type:Number,default:2},fill:{type:[Object,String,Array],default:()=>({x:1,y:1,z:0,w:.39215686274509803}),watcherOptions:{cesiumObjectBuilder:$e}},...Gi,...rn,destroy:{type:Boolean,default:!1}};var vy=E({name:"VcDatasourceGeojson",props:hy,emits:Yl,setup(e,t){const i=o();i.cesiumClass="GeoJsonDataSource";const n=Po(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{const t=n.transformProps(e);return Cesium.GeoJsonDataSource.load(e.data,t)},()=>{var e,n;return t.slots.default?P("i",{class:ue((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},ja(t.slots.default)):M(ue((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});const gy={...Mt,...po,entities:{type:Array,default:()=>[]},...ro,camera:Object,canvas:HTMLCanvasElement,...ao,...Gi,...on,...rn,destroy:{type:Boolean,default:!1},screenOverlayContainer:[Element,String]};var fy=E({name:"VcDatasourceKml",props:gy,emits:Yl,setup(e,t){const i=o();i.cesiumClass="KmlDataSource";const n=Po(e,t,i),r=Pr();return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return t.camera||(t.camera=null==r?void 0:r.viewer.camera),t.canvas||(t.canvas=null==r?void 0:r.viewer.canvas),Cesium.KmlDataSource.load(e.data||"",t)},()=>{var e,n;return t.slots.default?P("i",{class:ue((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},ja(t.slots.default)):M(ue((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});[dy,my,vy,fy].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const yy=dy,by=my,Cy=vy,wy=fy,_y={...Ot,...Tt,...Pt,...bt,..._t,...Lt,...wt,...vt,...Et,...ht,...Dt,...At,...Ct,...It,...jt,...St,...ft,...Mt,...yt,...xt};var Oy=E({name:"VcGraphicsBillboard",props:_y,emits:Wl,setup(e,t){const i=o();return i.cesiumClass="BillboardGraphics",Eo(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const xy={...Mt,...kt,...wt,...Rt,...Vt,...Bt,...Nt,...zt,...Ft,...yt};var Py=E({name:"VcGraphicsBox",props:xy,emits:Wl,setup(e,t){const i=o();return i.cesiumClass="BoxGraphics",Eo(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Sy=E({name:"VcGraphicsCorridor",props:{...Mt,...Gt,...At,...Ct,...wt,...Ht,...Ut,...Wt,...$t,...Rt,...Vt,...Bt,...Nt,...zt,...Ft,...yt,...Zt,...qt},emits:Wl,setup(e,t){const i=o();return i.cesiumClass="CorridorGraphics",Eo(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Ey={...Mt,...Yt,...Jt,...Xt,...wt,...Rt,...Vt,...Bt,...Nt,...zt,...Qt,...Kt,...Ft,...yt};var Ty=E({name:"VcGraphicsCylinder",props:Ey,emits:Wl,setup(e,t){const i=o();return i.cesiumClass="CylinderGraphics",Eo(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Iy={...Mt,...ei,...ti,...Ct,...wt,...Ht,...Ut,...Et,...ii,...$t,...Rt,...Vt,...Bt,...Nt,...zt,...Qt,...Ft,...yt,...Zt,...qt};var My=E({name:"VcGraphicsEllipse",props:Iy,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="EllipseGraphics",Eo(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Dy={...Mt,...ni,...oi,...ri,...ai,...si,...li,...wt,...Rt,...Vt,...Bt,...Nt,...zt,...ci,...ui,...di,...Ft,...yt};var jy=E({name:"VcGraphicsEllipsoid",props:Dy,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="EllipsoidGraphics",Eo(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Ly={...Mt,...pi,...mi,...hi,...Tt,...vi,...gi,...fi,...Pt,...bt,..._t,...Lt,...wt,...yi,...Nt,...zt,...jt,...St,...It,...yt,...ft};var Ay=E({name:"VcGraphicsLabel",props:Ly,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="LabelGraphics",Eo(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const ky={...Mt,...bi,...Tt,...Ci,...wi,..._i,...Oi,...xi,...Ft,...wt,...Pi,...Si,...vt,...Ei,...Ti,...Ii,...Mi,...yt,...Di,...ji,...Li};var Ry=E({name:"VcGraphicsModel",props:ky,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="ModelGraphics",Eo(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Vy={...Mt,leadTime:[Number,Object,Function],trailTime:[Number,Object,Function],...At,resolution:{type:[Number,Object,Function],default:60},...Vt,...yt};var By=E({name:"VcGraphicsPath",props:Vy,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="PathGraphics",Eo(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Ny={...Mt,...Ai,dimensions:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Be}},...Rt,...Vt,...Bt,...Nt,...zt,...Ft,...yt};var zy=E({name:"VcGraphicsPlane",props:Ny,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="PlaneGraphics",Eo(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Fy={...Mt,...ki,...wt,...vt,...Nt,...zt,...It,...jt,...yt,...ft};var Gy=E({name:"VcGraphicsPoint",props:Fy,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="PointGraphics",Eo(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Hy={...Mt,...Ri,...Ct,...wt,...Ht,...Ut,...ii,...$t,...Rt,...Vt,...Bt,...Nt,...zt,...Vi,...Bi,...Ni,...zi,...Ft,...yt,...Zt,...qt};var Uy=E({name:"VcGraphicsPolygon",props:Hy,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="PolygonGraphics",Eo(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Wy={...Mt,...Gt,...At,...$t,...Vt,...Fi,...zi,...Gi,...Ft,...yt,...Zt,...qt};var $y=E({name:"VcGraphicsPolyline",props:Wy,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="PolylineGraphics",Eo(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Zy={...Mt,...Gt,...Hi,...Wt,...$t,...Rt,...Vt,...Bt,...Nt,...zt,...Ft,...yt};var qy=E({name:"VcGraphicsPolylineVolume",props:Zy,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="PolylineVolumeGraphics",Eo(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Yy={...Mt,...Ui,...Ct,...wt,...Ht,...Ut,...Et,...ii,...$t,...Rt,...Vt,...Bt,...Nt,...zt,...Ft,...yt,...Zt,...qt};var Jy=E({name:"VcGraphicsRectangle",props:Yy,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="RectangleGraphics",Eo(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Xy={...Mt,...bi,...Wi};var Qy=E({name:"VcGraphicsTileset",props:Xy,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="Cesium3DTilesetGraphics",Eo(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});const Ky={...Mt,...Gt,...$i,...Zi,...$t,...Rt,...Vt,...Bt,...Nt,...zt,...Ft,...yt};var eb=E({name:"VcGraphicsWall",props:Ky,emits:Hl,setup(e,t){const i=o();return i.cesiumClass="WallGraphics",Eo(e,t,i),()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});[Oy,Py,Sy,Ty,My,jy,Ay,Ry,By,zy,Gy,Uy,$y,qy,Jy,Qy,eb].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const tb=Oy,ib=Py,nb=Sy,ob=Ty,rb=My,ab=jy,sb=Ay,lb=Ry,cb=By,ub=zy,db=Gy,pb=Uy,mb=$y,hb=qy,vb=Jy,gb=Qy,fb=eb,yb={fragmentShader:String,uniforms:Object,textureScale:{type:Number,default:1},forcePowerOfTwo:{type:Boolean,default:!1},sampleMode:Number,pixelFormat:Number,pixelDatatype:Number,...co,...uo,name:String};var bb=E({name:"VcPostProcessStage",props:yb,emits:Hl,setup(e,t){const i=o();i.cesiumClass="PostProcessStage",i.cesiumEvents=[];const n=xo(e,t,i);if(void 0===n)return;const{$services:r}=n;return i.mount=async()=>{const{postProcessStages:e}=r,t=e.add(i.cesiumObject);return e.contains(t)},i.unmount=async()=>{const{postProcessStages:e}=r;return null==e?void 0:e.remove(i.cesiumObject)},()=>{var e;return M(ue((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Cb={position:[0,0],radius:1500,interval:3500,color:[0,0,0,255]},wb={type:{type:String,default:"radar"},options:Object};var _b=E({name:"VcPostProcessStageScan",props:wb,emits:Hl,setup(e,t){const i=o();i.cesiumClass="VcPostProcessStageScan",i.cesiumEvents=[];const r=xo(e,t,i);if(void 0===r)return;const s=n(""),l=n(null),{$services:c}=r,u=function(e){return{webgl:t=>{var i;const{viewer:n}=e;let o="\n  uniform sampler2D colorTexture;\n  uniform sampler2D depthTexture;\n  in vec2 v_textureCoordinates;\n  uniform vec4 u_scanCenterEC;\n  uniform vec3 u_scanPlaneNormalEC;\n  uniform vec3 u_scanLineNormalEC;\n  uniform float u_radius;\n  uniform vec4 u_scanColor;\n  vec4 toEye(in vec2 uv, in float depth)\n  {\n    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n    vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);\n    posInCamera =posInCamera / posInCamera.w;\n    return posInCamera;\n  }\n  bool isPointOnLineRight(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)\n  {\n    vec3 v01 = testPt - ptOnLine;\n    normalize(v01);\n    vec3 temp = cross(v01, lineNormal);\n    float d = dot(temp, u_scanPlaneNormalEC);\n    return d > 0.5;\n  }\n  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)\n  {\n    vec3 v01 = point -planeOrigin;\n    float d = dot(planeNormal, v01) ;\n    return (point - planeNormal * d);\n  }\n  float distancePointToLine(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)\n  {\n    vec3 tempPt = pointProjectOnPlane(lineNormal, ptOnLine, testPt);\n    return length(tempPt - ptOnLine);\n  }\n  float getDepth(in vec4 depth)\n  {\n    float z_window = czm_unpackDepth(depth);\n    z_window = czm_reverseLogDepth(z_window);\n    float n_range = czm_depthRange.near;\n    float f_range = czm_depthRange.far;\n    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n  }\n  void main()\n  {\n    out_FragColor = texture(colorTexture, v_textureCoordinates);\n    float depth = getDepth( texture(depthTexture, v_textureCoordinates));\n    vec4 viewPos = toEye(v_textureCoordinates, depth);\n    vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);\n    float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);\n    float twou_radius = u_radius * 2.0;\n    if(dis < u_radius)\n    {\n      float f0 = 1.0 -abs(u_radius - dis) / u_radius;\n      f0 = pow(f0, 64.0);\n      vec3 lineEndPt = vec3(u_scanCenterEC.xyz) + u_scanLineNormalEC * u_radius;\n      float f = 0.0;\n      if(isPointOnLineRight(u_scanCenterEC.xyz, u_scanLineNormalEC.xyz, prjOnPlane.xyz))\n      {\n        float dis1= length(prjOnPlane.xyz - lineEndPt);\n        f = abs(twou_radius -dis1) / twou_radius;\n        f = pow(f, 3.0);\n      }\n      out_FragColor = mix(out_FragColor, u_scanColor, f + f0);\n    }\n  }\n";(null==(i=e.viewer.scene.context)?void 0:i.webgl2)||(o=o.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),o=o.replace(/texture\(/g,"texture2D("),o=o.replace(/out_FragColor/g,"gl_FragColor"));const r=Cesium.Cartographic.fromCartesian(t.position,n.scene.globe.ellipsoid),a=Cesium.Cartographic.toCartesian(r,n.scene.globe.ellipsoid),s=new Cesium.Cartesian4(a.x,a.y,a.z,1),l=new Cesium.Cartographic(r.longitude,r.latitude,r.height+500),c=Cesium.Cartographic.toCartesian(l,n.scene.globe.ellipsoid),u=new Cesium.Cartesian4(c.x,c.y,c.z,1),d=new Cesium.Cartographic(r.longitude+Cesium.Math.toRadians(.001),r.latitude,r.height),p=Cesium.Cartographic.toCartesian(d,n.scene.globe.ellipsoid),m=new Cesium.Cartesian4(p.x,p.y,p.z,1),h=new Cesium.Quaternion,v=new Cesium.Matrix3,g=(new Date).getTime(),f=new Cesium.Cartesian4,y=new Cesium.Cartesian4,b=new Cesium.Cartesian4,C=new Cesium.Cartesian3,w=new Cesium.Cartesian3;return{shaderSource:o,uniforms:{u_scanCenterEC:function(){return Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,s,f)},u_scanPlaneNormalEC:function(){const e=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,s,f),t=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,u,y);return C.x=t.x-e.x,C.y=t.y-e.y,C.z=t.z-e.z,Cesium.Cartesian3.normalize(C,C),C},u_radius:t.radius,u_scanLineNormalEC:function(){const e=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,s,f),i=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,u,y),o=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,m,b);C.x=i.x-e.x,C.y=i.y-e.y,C.z=i.z-e.z,Cesium.Cartesian3.normalize(C,C),w.x=o.x-e.x,w.y=o.y-e.y,w.z=o.z-e.z;const r=((new Date).getTime()-g)%t.interval/t.interval;return Cesium.Quaternion.fromAxisAngle(C,r*Cesium.Math.PI*2,h),Cesium.Matrix3.fromQuaternion(h,v),Cesium.Matrix3.multiplyByVector(v,w,w),Cesium.Cartesian3.normalize(w,w),w},u_scanColor:t.color}}}}}(c),d=function(e){return{webgl:t=>{var i;const{viewer:n}=e;let o="\n  uniform sampler2D colorTexture;\n  uniform sampler2D depthTexture;\n  in vec2 v_textureCoordinates;\n  uniform vec4 u_scanCenterEC;\n  uniform vec3 u_scanPlaneNormalEC;\n  uniform float u_radius;\n  uniform vec4 u_scanColor;\n  vec4 toEye(in vec2 uv, in float depth)\n  {\n    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n    vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);\n    posInCamera =posInCamera / posInCamera.w;\n    return posInCamera;\n  }\n  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)\n  {\n    vec3 v01 = point -planeOrigin;\n    float d = dot(planeNormal, v01) ;\n    return (point - planeNormal * d);\n  }\n  float getDepth(in vec4 depth)\n  {\n    float z_window = czm_unpackDepth(depth);\n    z_window = czm_reverseLogDepth(z_window);\n    float n_range = czm_depthRange.near;\n    float f_range = czm_depthRange.far;\n    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n  }\n  void main()\n  {\n    out_FragColor = texture(colorTexture, v_textureCoordinates);\n    float depth = getDepth( texture(depthTexture, v_textureCoordinates));\n    vec4 viewPos = toEye(v_textureCoordinates, depth);\n    vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);\n    float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);\n    if(dis < u_radius)\n    {\n      float f = 1.0 -abs(u_radius - dis) / u_radius;\n      f = pow(f, 4.0);\n      out_FragColor = mix(out_FragColor, u_scanColor, f);\n    }\n  }\n";(null==(i=n.scene.context)?void 0:i.webgl2)||(o=o.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),o=o.replace(/texture\(/g,"texture2D("),o=o.replace(/out_FragColor/g,"gl_FragColor"));const r=Cesium.Cartographic.fromCartesian(t.position,n.scene.globe.ellipsoid),a=Cesium.Cartographic.toCartesian(r,n.scene.globe.ellipsoid),s=new Cesium.Cartesian4(a.x,a.y,a.z,1),l=new Cesium.Cartographic(r.longitude,r.latitude,r.height+500),c=Cesium.Cartographic.toCartesian(l,n.scene.globe.ellipsoid),u=new Cesium.Cartesian4(c.x,c.y,c.z,1),d=(new Date).getTime(),p=new Cesium.Cartesian4,m=new Cesium.Cartesian4,h=new Cesium.Cartesian3;return{shaderSource:o,uniforms:{u_scanCenterEC:function(){return Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,s,p)},u_scanPlaneNormalEC:function(){const e=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,s,p),t=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,u,m);return h.x=t.x-e.x,h.y=t.y-e.y,h.z=t.z-e.z,Cesium.Cartesian3.normalize(h,h),h},u_radius:function(){return t.radius*(((new Date).getTime()-d)%t.interval)/t.interval},u_scanColor:t.color}}}}}(c);let p=[];const m=a((()=>Object.assign({},Cb,e.options)));return p.push(b((()=>m),(e=>{i.mounted&&i.proxy.reload()}),{deep:!0})),i.createCesiumObject=async()=>{const t=r.transformProps(m.value);let i;return"radar"===e.type?i=u.webgl(t):"circle"===e.type&&(i=d.webgl(t)),s.value=i.shaderSource,l.value=i.uniforms,!0},f((()=>{p.forEach((e=>e())),p=[]})),()=>P(bb,{fragmentShader:s.value,uniforms:l.value})}});const Ob={postProcesses:{type:Array,default:()=>[]}};var xb=E({name:"VcPostProcessStageCollection",props:Ob,emits:Hl,setup(e,t){const i=o();i.cesiumClass="PostProcessStageCollection",i.cesiumEvents=[];const n=xo(e,t,i);if(void 0===n)return;const{$services:r}=n,a=[];let s=[];return s.push(b((()=>e.postProcesses),(e=>{var t,n;i.mounted&&(null==(n=(t=i.proxy).reload)||n.call(t))}),{deep:!0})),i.createCesiumObject=async()=>a,i.mount=async()=>{const{postProcessStages:t}=r;return e.postProcesses.forEach((e=>{const i=n.transformProps(e);a.push(t.add(new Cesium.PostProcessStage(i)))})),!0},i.unmount=async()=>{const{postProcessStages:e}=r;return a.forEach((t=>{e.remove(t)})),a.length=0,!0},f((()=>{s.forEach((e=>e())),s=[]})),()=>{var e,n;return t.slots.default?P("i",{class:ue((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},ja(t.slots.default)):M(ue((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});[bb,_b,xb].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Pb=bb,Sb=_b,Eb=xb;var Tb=E({name:"VcConfigProvider",props:{locale:{type:Object,default:()=>ho},cesiumPath:{type:String,default:"https://unpkg.com/cesium@latest/Build/Cesium/Cesium.js"},accessToken:{type:String,default:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2OGE2MjZlOC1mMzhiLTRkZjQtOWEwZi1jZTE0MWY0YzhlMTAiLCJpZCI6MjU5LCJpYXQiOjE2NDM3MjU1NzZ9.ptZ5tVXvMmuWRC0WhjtYTg-17nQh14fgxBsx0HJiVXQ"},reloadMode:{type:String,default:"all"}},setup(e,{slots:t}){const i=we(e);return()=>F(t,"default",{config:null==i?void 0:i.value})}});Tb.install=e=>{e.component(Tb.name,Tb)};const Ib=Tb,Mb=Ib,Db={...Hl,stop:e=>!0};var jb=E({name:"VcAnalysisFlood",props:{minHeight:{type:Number,default:-1},maxHeight:{type:Number,default:8888},speed:{type:Number,default:10},loop:{type:Boolean,default:!1},color:{type:[Object,Array,String],default:"rgba(40,150,200,0.6)"},...Un},emits:Db,setup(e,t){var i;const r=o();r.cesiumClass="VcAnalysisFlood",r.cesiumEvents=[];const a=xo(e,t,r);if(void 0===a)return;const{emit:s}=t,l=n(!1);null==(i=De(r).proxy.creatingPromise)||i.then((()=>{l.value=!0}));const c=n(!1),u=n(null),d=n(-1),p=n(null);let m=!1,h=[];h.push(b((()=>e.minHeight),(e=>{d.value=e}))),r.createCesiumObject=async()=>{const{ColorGeometryInstanceAttribute:t}=Cesium;return u.value={color:t.fromColor($e(e.color))},p.value},r.mount=async()=>{const{viewer:e}=a.$services;return e.clock.onTick.addEventListener(v),!0},r.unmount=async()=>{const{viewer:e}=a.$services;return e.clock.onTick.removeEventListener(v),d.value=-1,c.value=!1,!0};const v=()=>{if(c.value)if(d.value<=e.maxHeight)d.value+=e.speed,m=!1;else{Ie(r,"stop")&&s("stop",p.value),m=!0,e.loop?d.value=e.minHeight:c.value=!1}};return f((()=>{h.forEach((e=>e())),h=[]})),Object.assign(r.proxy,{start:t=>{d.value=Cesium.defined(t)?t:e.minHeight,c.value=!0},pause:()=>{c.value=!c.value,m&&(d.value=e.minHeight)},stop:()=>{d.value=-1,c.value=!1},getCurrentHeight:()=>d.value}),()=>{if(l.value){const{createGuid:t}=Cesium;return P(cp,{asynchronous:!1,ref:p},(()=>P(xm,{id:t(),attributes:u.value},(()=>P(Jh,{extrudedHeight:d.value,polygonHierarchy:e.polygonHierarchy})))))}return M("v-if")}}});const Lb=Object.assign({},ku,{icon:"vc-icons-analysis-sightline"}),Ab=Object.assign({},Hu,{polylineOpts:Object.assign({},Nu,{colors:["#51ff00","red"]}),primitiveOpts:Object.assign({},Ru,{appearance:{type:"PolylineColorAppearance"},depthFailAppearance:{type:"PolylineColorAppearance"}}),sightlineType:"polyline"}),kb=Object.assign({},ku,{icon:"vc-icons-analysis-viewshed"}),Rb=Object.assign({},Wu,{pointOpts:Object.assign({},Vu,{show:!1}),polylineOpts:Object.assign({},Nu,{width:15}),primitiveOpts:Object.assign({},Ru,{show:!1,appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineArrow",uniforms:{color:[255,255,0,255]}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineArrow",uniforms:{color:[255,255,0,255]}}}}}}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},Fu),removeAll:Object.assign({},Fu,{icon:"vc-icons-delete"})},viewshedOpts:{fovH:90,fovV:60,offsetHeight:1.8,visibleColor:"#00ff00",invisibleColor:"#ff0000",showGridLine:!0,faceColor:"rgba(255,255,255,0.1)",lineColor:"rgba(255,255,255,0.4)"}}),Vb=Object.assign({},{}),Bb=Object.assign({},ku,{direction:"right",icon:"vc-icons-analysis-button",activeIcon:"vc-icons-analysis-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),Nb=["sightline","viewshed"],zb={...Ku,analyses:{type:Array,default:()=>Nb,validator:e=>{let t=!0;return e.forEach((e=>{Nb.includes(e)||(t=!1)})),t}},mainFabOpts:{type:Object,default:()=>Bb},fabActionOpts:{type:Object,default:()=>Vb},sightlineActionOpts:{type:Object,default:()=>Lb},sightlineAnalysisOpts:{type:Object,default:()=>Ab},viewshedActionOpts:{type:Object,default:()=>kb},viewshedAnalysisOpts:{type:Object,default:()=>Rb}},Fb=he(zb);var Gb=E({name:"VcAnalysisSightline",props:{...Qu,polylineOpts:Object,polygonOpts:Object,primitiveOpts:Object,sightlineType:{type:String,default:"polyline"}},emits:Jl,setup:(e,t)=>"segment"===e.sightlineType||"circle"===e.sightlineType?wv(e,t,"VcAnalysisSightline"):"polyline"===e.sightlineType?Ov(e,t,"VcAnalysisSightline"):void 0}),Hb=E({name:"VcAnalysisViewshed",props:{...Qu,polylineOpts:Object,primitiveOpts:Object,viewshedOpts:Object},emits:Jl,setup:(e,t)=>wv(e,t,"VcAnalysisViewshed")});var Ub=E({name:"VcAnalyses",props:zb,emits:{...Jl,fabUpdated:e=>!0,clearEvt:(e,t)=>!0},setup(e,t){var i;const r=o();r.cesiumClass="VcAnalyses";const{t:s}=yo(),l={},c=_(Object.assign({},Fb.clearActionOpts,e.clearActionOpts)),u=_(Object.assign({},Fb.mainFabOpts,e.mainFabOpts)),d=_(Object.assign({},Fb.fabActionOpts,e.fabActionOpts)),p=_(Object.assign({},Fb.sightlineActionOpts,y("sightlineActionOpts"))),m=_(ee(J(Fb.sightlineAnalysisOpts),e.sightlineAnalysisOpts)),h=_(Object.assign({},Fb.viewshedActionOpts,y("viewshedActionOpts"))),v=_(ee(J(Fb.viewshedAnalysisOpts),e.viewshedAnalysisOpts));l.sightlineActionOpts=p,l.sightlineAnalysisOpts=m,l.viewshedActionOpts=h,l.viewshedAnalysisOpts=v,l.clearActionOpts=c;const g=a((()=>e.analyses.map((e=>({name:e,type:"analysis",actionStyle:{background:l[`${N(e)}ActionOpts`].color,color:l[`${N(e)}ActionOpts`].textColor},actionClass:`vc-analysis-${e} vc-analysis-button`,actionRef:n(null),actionOpts:l[`${N(e)}ActionOpts`],cmp:f(e),cmpRef:n(null),cmpOpts:l[`${N(e)}AnalysisOpts`],tip:l[`${N(e)}ActionOpts`].tooltip.tip||s(`vc.analysis.${N(e)}.tip`),isActive:!1})))));function f(e){switch(e){case"sightline":return Gb;case"viewshed":return Hb;default:return}}function y(t){return q(Fb[t],e[t])?d:Object.assign({},d,e[t])}return null==(i=Lv(e,t,r,g,u,c,"analysis"))?void 0:i.renderContent}});[jb,Ub].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Wb=jb,$b=Ub;var Zb=Pe([...[Kl,Ou,xu,Pu,Su,Eu,Tu,Iu,Mu,Du,ju,Lu,Au,kv,tg,Ld,Ff,Gf,Hf,Uf,Wf,$f,Zf,qf,Yf,Jf,Xf,Qf,Kf,ey,ty,iy,ny,oy,ry,ay,sy,ly,cy,yy,by,Cy,wy,Id,tb,ib,nb,ob,rb,ab,sb,lb,cb,ub,db,pb,mb,hb,vb,gb,fb,cp,up,dp,pp,mp,hp,vp,yp,bp,Cp,gp,wp,cm,um,dm,pm,mm,hm,vm,gm,fm,ym,bm,Cm,Om,Dh,jh,Lh,Ah,kh,Rh,Vh,Bh,Nh,zh,Fh,Gh,Hh,Uh,Wh,$h,Zh,qh,Yh,Jh,Xh,Qh,Kh,ev,tv,iv,nv,ov,rv,av,sv,hv,vv,fv,yv,gv,bv,Pb,Sb,Eb,Ol,xl,Vl,Bl,Nl,Pl,Sl,El,Tl,Il,Ml,Dl,jl,Ll,Al,kl,Rl,zl,Fl,Gl,Ib,Wb,$b]]);const qb=Zb.install,Yb=Zb.version,Jb=Object.freeze(Object.defineProperty({__proto__:null,AngleUnits:jr,AreaUnits:Mr,DebugCameraPrimitive:Hr,DistanceUnits:Ir,DrawStatus:Tr,DynamicOverlay:Fr,MaterialExtend:Le,MeasureUnits:Ar,PolygonPrimitive:zr,PrimitiveCluster:Wr,RectangleExtend:ia,Ripple:$o,ShadowMapShaderExtend:ra,Spinner:ss,SpinnerBall:za,SpinnerBars:Ga,SpinnerDots:Ua,SpinnerGears:$a,SpinnerHourglass:qa,SpinnerIos:Ja,SpinnerOrbit:Qa,SpinnerOval:es,SpinnerPuff:is,SpinnerRings:os,SpinnerTail:as,TouchHold:Yo,TouchPan:ar,TouchRepeat:Qo,VcAjaxBar:Bl,VcAnalyses:$b,VcAnalysisFlood:Wb,VcAnalysisSightline:Gb,VcAnalysisViewshed:Hb,VcBillboard:vm,VcBtn:Ol,VcCircleWaveMaterialProperty:ke,VcCollectionBillboard:cm,VcCollectionCloud:um,VcCollectionLabel:dm,VcCollectionPoint:pm,VcCollectionPolyline:mm,VcCollectionPrimitive:hm,VcCompass:Ou,VcCompassSm:Mu,VcConfigProvider:Mb,VcCumulusCloud:gm,VcDatasourceCustom:yy,VcDatasourceCzml:by,VcDatasourceGeojson:Cy,VcDatasourceKml:wy,VcDistanceLegend:Tu,VcDrawingPin:qv,VcDrawingPoint:Yv,VcDrawingPolygon:Xv,VcDrawingPolyline:Jv,VcDrawingRectangle:Kv,VcDrawingRegular:Qv,VcDrawings:ig,VcEntity:Md,VcFab:zl,VcFabAction:Fl,VcGeometryBox:Dh,VcGeometryBoxOutline:jh,VcGeometryCircle:Lh,VcGeometryCircleOutline:Ah,VcGeometryCorridor:Vh,VcGeometryCorridorOutline:Bh,VcGeometryCylinder:Nh,VcGeometryCylinderOutline:zh,VcGeometryEllipse:Fh,VcGeometryEllipseOutline:Gh,VcGeometryEllipsoid:Hh,VcGeometryEllipsoidOutline:Uh,VcGeometryFrustum:Wh,VcGeometryFrustumOutline:$h,VcGeometryGroundPolyline:Zh,VcGeometryInstance:xm,VcGeometryPlane:qh,VcGeometryPlaneOutline:Yh,VcGeometryPolygon:Jh,VcGeometryPolygonCoplanar:kh,VcGeometryPolygonCoplanarOutline:Rh,VcGeometryPolygonOutline:Xh,VcGeometryPolyline:Qh,VcGeometryPolylineVolume:Kh,VcGeometryPolylineVolumeOutline:ev,VcGeometryRectangle:tv,VcGeometryRectangleOutline:iv,VcGeometrySimplePolyline:nv,VcGeometrySphere:ov,VcGeometrySphereOutline:rv,VcGeometryWall:av,VcGeometryWallOutline:sv,VcGraphicsBillboard:tb,VcGraphicsBox:ib,VcGraphicsCorridor:nb,VcGraphicsCylinder:ob,VcGraphicsEllipse:rb,VcGraphicsEllipsoid:ab,VcGraphicsLabel:sb,VcGraphicsModel:lb,VcGraphicsPath:cb,VcGraphicsPlane:ub,VcGraphicsPoint:db,VcGraphicsPolygon:pb,VcGraphicsPolyline:mb,VcGraphicsPolylineVolume:hb,VcGraphicsRectangle:vb,VcGraphicsTileset:gb,VcGraphicsWall:fb,VcIcon:xl,VcImageryProviderAmap:Ff,VcImageryProviderArcgis:Gf,VcImageryProviderBaidu:Hf,VcImageryProviderBing:Uf,VcImageryProviderGoogle:Wf,VcImageryProviderGrid:$f,VcImageryProviderIon:Zf,VcImageryProviderMapbox:qf,VcImageryProviderOsm:Yf,VcImageryProviderSingletile:Jf,VcImageryProviderSupermap:Xf,VcImageryProviderTencent:Qf,VcImageryProviderTianditu:Kf,VcImageryProviderTileCoordinates:ey,VcImageryProviderTiledcache:iy,VcImageryProviderTms:ty,VcImageryProviderUrltemplate:ny,VcImageryProviderWms:oy,VcImageryProviderWmts:ry,VcLabel:fm,VcLayerImagery:Ad,VcLineFlowMaterialProperty:Re,VcLineTrailMaterialProperty:Ve,VcMeasurementArea:Mv,VcMeasurementDistance:_v,VcMeasurementHeight:Ev,VcMeasurementHorizontal:Pv,VcMeasurementPoint:Iv,VcMeasurementPolyline:xv,VcMeasurementRectangle:Dv,VcMeasurementRegular:jv,VcMeasurementVertical:Sv,VcMeasurements:Rv,VcMyLocation:Su,VcNavigation:Iu,VcNavigationSm:ju,VcOverlayDynamic:yv,VcOverlayEcharts:gv,VcOverlayHeatmap:vv,VcOverlayHtml:hv,VcOverlayTyphoon:bv,VcOverlayWind:fv,VcOverviewMap:Lu,VcPoint:ym,VcPolygon:Cm,VcPolyline:bm,VcPostProcessStage:Pb,VcPostProcessStageCollection:Eb,VcPostProcessStageScan:Sb,VcPrimitive:mp,VcPrimitiveClassification:cp,VcPrimitiveCluster:wp,VcPrimitiveGround:up,VcPrimitiveGroundPolyline:dp,VcPrimitiveI3sDataProvider:bp,VcPrimitiveModel:pp,VcPrimitiveOsmBuildings:vp,VcPrimitiveParticle:gp,VcPrimitiveTileset:hp,VcPrimitiveTimeDynamicPointCloud:yp,VcPrimitiveVoxel:Cp,VcPrint:Pu,VcSelectionIndicator:Au,VcSkeleton:Nl,VcSlider:Gl,VcSpinner:Rl,VcSpinnerBall:Pl,VcSpinnerBars:Sl,VcSpinnerDots:El,VcSpinnerGears:Tl,VcSpinnerHourglass:Il,VcSpinnerIos:Ml,VcSpinnerOrbit:Dl,VcSpinnerOval:jl,VcSpinnerPuff:Ll,VcSpinnerRings:Al,VcSpinnerTail:kl,VcStatusBar:Eu,VcTerrainProviderArcgis:sy,VcTerrainProviderCesium:ay,VcTerrainProviderTianditu:cy,VcTerrainProviderVrTheworld:ly,VcTimeline:class{constructor(e,t){this.smallestTicInPixels=7;const{defined:i,DeveloperError:n}=Cesium;if(!i(e))throw new n("container is required.");if(!i(t))throw new n("clock is required.");const o=(e=Mo(e)).ownerDocument;this.container=e;const r=o.createElement("div");var a;r.className="cesium-timeline-main",e.appendChild(r),this._topDiv=r,this._endJulian=void 0,this._epochJulian=void 0,this._lastXPos=void 0,this._scrubElement=void 0,this._startJulian=void 0,this._timeBarSecondsSpan=void 0,this._clock=t,this._scrubJulian=t.currentTime,this._mainTicSpan=-1,this._mouseMode=ua,this._touchMode=va,this._touchState={centerX:0,spanX:0},this._mouseX=0,this._timelineDrag=0,this._timelineDragLocation=void 0,this._lastHeight=void 0,this._lastWidth=void 0,this._topDiv.innerHTML='<div class="cesium-timeline-bar"></div><div class="cesium-timeline-trackContainer"><canvas class="cesium-timeline-tracks" width="10" height="1"></canvas></div><div class="cesium-timeline-needle"></div><span class="cesium-timeline-ruler"></span>',this._timeBarEle=this._topDiv.childNodes[0],this._trackContainer=this._topDiv.childNodes[1],this._trackListEle=this._topDiv.childNodes[1].childNodes[0],this._needleEle=this._topDiv.childNodes[2],this._rulerEle=this._topDiv.childNodes[3],this._context=this._trackListEle.getContext("2d"),this._trackList=[],this._highlightRanges=[],this.zoomTo(t.startTime,t.stopTime),this._onMouseDown=(a=this,function(e){a._mouseMode!==ha&&(0===e.button?(a._mouseMode=da,a._scrubElement&&(a._scrubElement.style.backgroundPosition="-16px 0"),a._onMouseMove(e)):(a._mouseX=e.clientX,2===e.button?a._mouseMode=ma:a._mouseMode=pa)),e.preventDefault()}),this._onMouseUp=function(e){return function(t){e._mouseMode=ua,e._scrubElement&&(e._scrubElement.style.backgroundPosition="0 0"),e._timelineDrag=0,e._timelineDragLocation=void 0}}(this),this._onMouseMove=function(e){return function(t){let i;if(e._mouseMode===da){t.preventDefault();const i=t.clientX-e._topDiv.getBoundingClientRect().left;i<0?(e._timelineDragLocation=0,e._timelineDrag=-.01*e._timeBarSecondsSpan):i>e._topDiv.clientWidth?(e._timelineDragLocation=e._topDiv.clientWidth,e._timelineDrag=.01*e._timeBarSecondsSpan):(e._timelineDragLocation=void 0,e._setTimeBarTime(i,i*e._timeBarSecondsSpan/e._topDiv.clientWidth))}else if(e._mouseMode===pa){if(i=e._mouseX-t.clientX,e._mouseX=t.clientX,0!==i){const{JulianDate:t}=Cesium,n=i*e._timeBarSecondsSpan/e._topDiv.clientWidth;e.zoomTo(t.addSeconds(e._startJulian,n,new t),t.addSeconds(e._endJulian,n,new t))}}else e._mouseMode===ma&&(i=e._mouseX-t.clientX,e._mouseX=t.clientX,0!==i&&e.zoomFrom(Math.pow(1.01,i)))}}(this),this._onMouseWheel=function(e){return function(t){let i=t.wheelDeltaY||t.wheelDelta||-t.detail;ca=Math.max(Math.min(Math.abs(i),ca),1),i/=ca,e.zoomFrom(Math.pow(1.05,-i))}}(this),this._onTouchStart=function(e){return function(t){const i=t.touches.length;let n,o;const r=e._topDiv.getBoundingClientRect().left;t.preventDefault(),e._mouseMode=ha,1===i?(n=Cesium.JulianDate.secondsDifference(e._scrubJulian,e._startJulian),o=Math.round(n*e._topDiv.clientWidth/e._timeBarSecondsSpan+r),Math.abs(t.touches[0].clientX-o)<50?(e._touchMode=ga,e._scrubElement&&(e._scrubElement.style.backgroundPosition=1===i?"-16px 0":"0 0")):(e._touchMode=ya,e._touchState.centerX=t.touches[0].clientX-r)):2===i?(e._touchMode=fa,e._touchState.centerX=.5*(t.touches[0].clientX+t.touches[1].clientX)-r,e._touchState.spanX=Math.abs(t.touches[0].clientX-t.touches[1].clientX)):e._touchMode=ba}}(this),this._onTouchMove=function(e){return function(t){let i,n,o,r,a,s,l=1;const c=e._topDiv.getBoundingClientRect().left;if(e._touchMode===ya&&(e._touchMode=fa),e._mouseMode=ha,e._touchMode===ga)t.preventDefault(),1===t.changedTouches.length&&(n=t.changedTouches[0].clientX-c,n>=0&&n<=e._topDiv.clientWidth&&e._setTimeBarTime(n,n*e._timeBarSecondsSpan/e._topDiv.clientWidth));else if(e._touchMode===fa){o=t.touches.length,2===o?(r=.5*(t.touches[0].clientX+t.touches[1].clientX)-c,a=Math.abs(t.touches[0].clientX-t.touches[1].clientX)):1===o&&(r=t.touches[0].clientX-c,a=0);const{defined:n,JulianDate:u}=Cesium;n(r)&&(a>0&&e._touchState.spanX>0?(l=e._touchState.spanX/a,s=u.addSeconds(e._startJulian,(e._touchState.centerX*e._timeBarSecondsSpan-r*e._timeBarSecondsSpan*l)/e._topDiv.clientWidth,new u)):(i=e._touchState.centerX-r,s=u.addSeconds(e._startJulian,i*e._timeBarSecondsSpan/e._topDiv.clientWidth,new u)),e.zoomTo(s,u.addSeconds(s,e._timeBarSecondsSpan*l,new u)),e._touchState.centerX=r,e._touchState.spanX=a)}}}(this),this._onTouchEnd=function(e){return function(t){const i=t.touches.length,n=e._topDiv.getBoundingClientRect().left;e._touchMode===ya?(e._touchMode=ga,e._onTouchMove(t)):e._touchMode===ga&&e._onTouchMove(t),e._mouseMode=ha,1!==i?e._touchMode=i>0?ba:va:e._touchMode===fa&&(e._touchState.centerX=t.touches[0].clientX-n),e._scrubElement&&(e._scrubElement.style.backgroundPosition="0 0")}}(this);const s=this._timeBarEle;o.addEventListener("mouseup",this._onMouseUp,!1),o.addEventListener("mousemove",this._onMouseMove,!1),s.addEventListener("mousedown",this._onMouseDown,!1),s.addEventListener("DOMMouseScroll",this._onMouseWheel,!1),s.addEventListener("mousewheel",this._onMouseWheel,!1),s.addEventListener("touchstart",this._onTouchStart,!1),s.addEventListener("touchmove",this._onTouchMove,!1),s.addEventListener("touchend",this._onTouchEnd,!1),s.addEventListener("touchcancel",this._onTouchEnd,!1),this._topDiv.oncontextmenu=function(){return!1},t.onTick.addEventListener(this.updateFromClock,this),this.updateFromClock()}addEventListener(e,t,i){this._topDiv.addEventListener(e,t,i)}removeEventListener(e,t,i){this._topDiv.removeEventListener(e,t,i)}isDestroyed(){return!1}destroy(){this._clock.onTick.removeEventListener(this.updateFromClock,this);const e=this.container.ownerDocument;e.removeEventListener("mouseup",this._onMouseUp,!1),e.removeEventListener("mousemove",this._onMouseMove,!1);const t=this._timeBarEle;t.removeEventListener("mousedown",this._onMouseDown,!1),t.removeEventListener("DOMMouseScroll",this._onMouseWheel,!1),t.removeEventListener("mousewheel",this._onMouseWheel,!1),t.removeEventListener("touchstart",this._onTouchStart,!1),t.removeEventListener("touchmove",this._onTouchMove,!1),t.removeEventListener("touchend",this._onTouchEnd,!1),t.removeEventListener("touchcancel",this._onTouchEnd,!1),this.container.removeChild(this._topDiv),Cesium.destroyObject(this)}addHighlightRange(e,t,i){const n=new sa(e,t,i);return this._highlightRanges.push(n),this.resize(),n}addTrack(e,t,i,n){const o=new la(e,t,i,n);return this._trackList.push(o),this._lastHeight=void 0,this.resize(),o}resize(){const e=this.container.clientWidth,t=this.container.clientHeight;if(e===this._lastWidth&&t===this._lastHeight)return;this._trackContainer.style.height=`${t}px`;let i=1;this._trackList.forEach((function(e){i+=e.height})),this._trackListEle.style.height=`${i.toString()}px`,this._trackListEle.width=this._trackListEle.clientWidth,this._trackListEle.height=i,this._makeTics(),this._lastXPos=void 0,this._lastWidth=e,this._lastHeight=t}zoomTo(e,t){const{defined:i,JulianDate:n,DeveloperError:o,ClockRange:r}=Cesium;if(!i(e))throw new o("startTime is required.");if(!i(t))throw new o("stopTime is required");if(n.lessThanOrEquals(t,e))throw new o("Start time must come before end time.");if(this._startJulian=e,this._endJulian=t,this._timeBarSecondsSpan=n.secondsDifference(t,e),this._clock&&this._clock.clockRange!==r.UNBOUNDED){const e=this._clock.startTime,t=this._clock.stopTime,i=n.secondsDifference(t,e),o=n.secondsDifference(e,this._startJulian),r=n.secondsDifference(t,this._endJulian);this._timeBarSecondsSpan>=i?(this._timeBarSecondsSpan=i,this._startJulian=this._clock.startTime,this._endJulian=this._clock.stopTime):o>0?(this._endJulian=n.addSeconds(this._endJulian,o,new n),this._startJulian=e,this._timeBarSecondsSpan=n.secondsDifference(this._endJulian,this._startJulian)):r<0&&(this._startJulian=n.addSeconds(this._startJulian,r,new n),this._endJulian=t,this._timeBarSecondsSpan=n.secondsDifference(this._endJulian,this._startJulian))}this._makeTics();const a=new Event("setzoom",{bubbles:!0,cancelable:!0,composed:!0});a.startJulian=this._startJulian,a.endJulian=this._endJulian,a.epochJulian=this._epochJulian,a.totalSpan=this._timeBarSecondsSpan,a.mainTicSpan=this._mainTicSpan,this._topDiv.dispatchEvent(a)}updateFromClock(){const{defined:e,JulianDate:t}=Cesium;this._scrubJulian=this._clock.currentTime;const i=this._scrubElement;if(e(this._scrubElement)){const e=t.secondsDifference(this._scrubJulian,this._startJulian),n=Math.round(e*this._topDiv.clientWidth/this._timeBarSecondsSpan);this._lastXPos!==n&&(this._lastXPos=n,i.style.left=n-8+"px",this._needleEle.style.left=`${n}px`)}e(this._timelineDragLocation)&&(this._setTimeBarTime(this._timelineDragLocation,this._timelineDragLocation*this._timeBarSecondsSpan/this._topDiv.clientWidth),this.zoomTo(t.addSeconds(this._startJulian,this._timelineDrag,new t),t.addSeconds(this._endJulian,this._timelineDrag,new t)))}_setTimeBarTime(e,t){const{JulianDate:i}=Cesium;if(e=Math.round(e),this._scrubJulian=i.addSeconds(this._startJulian,t,new i),this._scrubElement){const t=e-8;this._scrubElement.style.left=`${t.toString()}px`,this._needleEle.style.left=`${e.toString()}px`}const n=new Event("settime",{bubbles:!0,cancelable:!0,composed:!0});n.clientX=e,n.timeSeconds=t,n.timeJulian=this._scrubJulian,n.clock=this._clock,this._topDiv.dispatchEvent(n)}zoomFrom(e){const{JulianDate:t}=Cesium;let i=t.secondsDifference(this._scrubJulian,this._startJulian);e>1||i<0||i>this._timeBarSecondsSpan?i=.5*this._timeBarSecondsSpan:i+=i-.5*this._timeBarSecondsSpan;const n=this._timeBarSecondsSpan-i;this.zoomTo(t.addSeconds(this._startJulian,i-i*e,new t),t.addSeconds(this._endJulian,n*e-n,new t))}makeLabel(e){const{JulianDate:t}=Cesium,i=t.toGregorianDate(e),n=i.millisecond;let o=" UTC";if(n>0&&this._timeBarSecondsSpan<3600){for(o=Math.floor(n).toString();o.length<3;)o=`0${o}`;o=`.${o}`}return`${wa[i.month-1]} ${i.day} ${i.year} ${_a(i.hour)}:${_a(i.minute)}:${_a(i.second)}${o}`}_makeTics(){const{JulianDate:e}=Cesium,t=this._timeBarEle,i=e.secondsDifference(this._scrubJulian,this._startJulian),n=Math.round(i*this._topDiv.clientWidth/this._timeBarSecondsSpan),o=n-8;let r;const a=this;this._needleEle.style.left=`${n.toString()}px`;let s="";const l=.01,c=31536e6,u=1e-10;let d=0,p=this._timeBarSecondsSpan;p<l?(p=l,this._timeBarSecondsSpan=l,this._endJulian=e.addSeconds(this._startJulian,l,new e)):p>c&&(p=c,this._timeBarSecondsSpan=c,this._endJulian=e.addSeconds(this._startJulian,c,new e));let m=this._timeBarEle.clientWidth;m<10&&(m=10);const h=this._startJulian,v=Math.min(p/m*1e-5,.4);let g;const f=e.toGregorianDate(h);g=p>31536e4?e.fromDate(new Date(Date.UTC(100*Math.floor(f.year/100),0))):p>31536e3?e.fromDate(new Date(Date.UTC(10*Math.floor(f.year/10),0))):p>86400?e.fromDate(new Date(Date.UTC(f.year,0))):e.fromDate(new Date(Date.UTC(f.year,f.month,f.day)));const y=e.secondsDifference(this._startJulian,e.addSeconds(g,v,new e));let b=y+p;function C(e){return Math.floor(y/e)*e}function w(e,t){return Math.ceil(e/t+.5)*t}function _(e){return(e-y)/p}function O(e,t){return e-t*Math.round(e/t)}this._epochJulian=g,this._rulerEle.innerHTML=this.makeLabel(e.addSeconds(this._endJulian,-.01,new e));let x=this._rulerEle.offsetWidth+20;x<30&&(x=180);const P=d;d-=u;const S={startTime:y,startJulian:h,epochJulian:g,duration:p,timeBarWidth:m,getAlpha:_};this._highlightRanges.forEach((function(e){s+=e.render(S)}));let E=0,T=0,I=0,M=x/m;M>1&&(M=1),M*=this._timeBarSecondsSpan;let D=-1,j=-1;const L=Ca.length;let A;for(A=0;A<L;++A){const e=Ca[A];if(++D,E=e,e>M&&e>d)break;j<0&&m*(e/this._timeBarSecondsSpan)>=this.smallestTicInPixels&&(j=D)}if(D>0){for(;D>0;)if(--D,Math.abs(O(E,Ca[D]))<1e-5){Ca[D]>=d&&(T=Ca[D]);break}if(j>=0)for(;j<D;){if(Math.abs(O(T,Ca[j]))<1e-5&&Ca[j]>=d){I=Ca[j];break}++j}}d=P,d>u&&I<1e-5&&Math.abs(d-E)>u&&(I=d,d<=E+u&&(T=0));let k,R=-999999;if(m*(I/this._timeBarSecondsSpan)>=3)for(r=C(I);r<=b;r=w(r,I))s+=`<span class="cesium-timeline-ticTiny" style="left: ${Math.round(m*_(r)).toString()}px;"></span>`;if(m*(T/this._timeBarSecondsSpan)>=3)for(r=C(T);r<=b;r=w(r,T))s+=`<span class="cesium-timeline-ticSub" style="left: ${Math.round(m*_(r)).toString()}px;"></span>`;if(m*(E/this._timeBarSecondsSpan)>=2){this._mainTicSpan=E,b+=E,r=C(E);const t=e.computeTaiMinusUtc(g);for(;r<=b;){let i=e.addSeconds(h,r-y,new e);if(E>2.1){const n=e.computeTaiMinusUtc(i);Math.abs(n-t)>.1&&(r+=n-t,i=e.addSeconds(h,r-y,new e))}const n=Math.round(m*_(r)),o=this.makeLabel(i);this._rulerEle.innerHTML=o,k=this._rulerEle.offsetWidth,k<10&&(k=x);const a=n-(k/2-1);a>R?(R=a+k+5,s+=`<span class="cesium-timeline-ticMain" style="left: ${n.toString()}px;"></span><span class="cesium-timeline-ticLabel" style="left: ${a.toString()}px;">${o}</span>`):s+=`<span class="cesium-timeline-ticSub" style="left: ${n.toString()}px;"></span>`,r=w(r,E)}}else this._mainTicSpan=-1;s+=`<span class="cesium-timeline-icon16" style="left:${o}px;bottom:0;background-position: 0 0;"></span>`,t.innerHTML=s,this._scrubElement=t.lastChild,this._context.clearRect(0,0,this._trackListEle.width,this._trackListEle.height),S.y=0,this._trackList.forEach((function(e){e.render(a._context,S),S.y+=e.height}))}},VcTooltip:Vl,VcViewer:Kl,VcViewshed:fp,VcZoomControl:xu,VcZoomControlSm:Du,Viewshed:aa,VisibilityState:Er,VolumeUnits:Dr,ajaxBarProps:Zs,amapImageryProviderProps:rg,analysesProps:zb,arcgisImageryProviderProps:sg,arcgisTerrainProviderProps:kf,baiduImageryProviderProps:xg,billboarGraphicsProps:_y,billboardCollectionProps:zp,billboardProps:Gp,bingImageryProviderProps:Sg,boxGeometryProps:Pm,boxGraphicsProps:xy,boxOutlineGeometryProps:Em,btnProps:bs,buildLocaleContext:fo,buildTranslator:vo,cesiumTerrainProviderProps:Lf,circleGeometryProps:Im,circleOutlineGeometryProps:Dm,classificationPrimitiveProps:kd,cloudCollectionProps:$p,commonEmits:Hl,compassProps:Cc,compassSmProps:lu,corridorGeometryProps:Vm,corridorOutlineGeometryProps:Nm,cumulusCloudProps:Up,customDatasourceProps:uy,cylinderGeometryProps:Fm,cylinderGraphicsProps:Ey,cylinderOutlineGeometryProps:Hm,czmlDatasourceProps:py,datasourceEmits:Yl,default:Zb,distanceLegendProps:eu,drawingEmit:Jl,drawingsProps:$v,dynamicOverlayProps:Bp,echartsOverlayProps:xp,ellipseGeometryProps:Wm,ellipseGraphicsProps:Iy,ellipseOutlineGeometryProps:Zm,ellipsoidGeometryProps:Ym,ellipsoidGraphicsProps:Dy,entityProps:Ed,fabActionProps:ul,fabProps:al,frustumGeometryProps:Qm,frustumOutlineGeometryProps:eh,geojsonDatasourceProps:hy,geometryInstanceProps:wm,googleImageryProviderProps:Tg,graphicsEmits:Wl,gridImageryProviderProps:Mg,groundPolylineGeometryProps:ih,groundPolylinePrimitiveProps:Nd,groundPrimitiveProps:Vd,heatmapOverlayProps:_p,htmlOverlayProps:Pd,i3sDataProviderProps:np,iconProps:ka,imageryLayerProps:Dd,install:qb,ionImageryProviderProps:{},kmlDatasourceProps:gy,labelCollectionProps:qp,labelGraphicsProps:Ly,labelProps:Jp,makeInstaller:Pe,mapboxImageryProviderProps:Lg,measurementsProps:Od,modelGraphicsProps:ky,modelPrimitiveProps:Fd,myLocationProps:Ac,navigationProps:ru,navigationSmProps:hu,osmBuildingsProps:qd,osmImageryProviderProps:kg,overviewProps:gu,particlePrimitiveProps:Xd,pathGraphicsProps:Vy,pickEventEmits:Ul,planeGeometryProps:oh,planeGraphicsProps:Ny,pointCollectionProps:Qp,pointGraphicsProps:Fy,pointProps:em,polygonCoplanarOutlineProps:km,polygonCoplanarProps:Lm,polygonGeometryProps:sh,polygonGraphicsProps:Hy,polygonOutlineGeometryProps:ch,polygonProps:sm,polylineGeometryProps:dh,polylineGraphicsProps:Wy,polylineProps:nm,polylineVolumeGeometryProps:mh,polylineVolumeGraphicsProps:Zy,polylineVolumeOutlineGeometryProps:vh,postProcessStageCollectionProps:Ob,postProcessStageProps:yb,postProcessStageScanProps:wb,primitiveClusterProps:sp,primitiveCollectionEmits:ql,primitiveCollectionProps:rm,primitiveEmits:Zl,primitiveProps:Hd,printProps:Mc,providerEmits:$l,rectangleGeometryProps:fh,rectangleGraphicsProps:Yy,rectangleOutlineGeometryProps:bh,selectionIndicatorProps:wu,simplePolylineGeometryProps:wh,singletileImageryProviderProps:Vg,skeletonAnimations:Qs,skeletonProps:Ks,skeletonTypes:Xs,sliderProps:wl,sphereGeometryOutlineProps:Ph,sphereGeometryProps:Oh,statusBarProps:Jc,supermapImageryProviderProps:nf,tencentImageryProviderProps:lf,tiandituImageryProviderProps:bf,tiandituTerrainProviderProps:Nf,tileCoordinatesImageryProviderProps:wf,tiledcacheImageryProviderProps:Pf,tilesetGraphicsProps:Xy,tilesetPrimitiveProps:$d,timeDynamicPointCloudProps:tp,tmsImageryProviderProps:Of,tooltipProps:Ns,translate:go,typhoonOverlayProps:pv,urltemplateImageryProviderProps:Ef,useCommon:xo,useDatasources:Po,useEvents:bo,useGeometries:So,useGraphics:Eo,useHandler:lr,useLocale:yo,usePrimitiveCollectionItems:cr,usePrimitiveCollections:ur,usePrimitives:dr,useProviders:xr,useVueCesium:Pr,version:Yb,viewerProps:xa,viewshedProps:Kd,voxelPromitiveProps:rp,vrTheworldImageryProviderProps:Vf,wallGeometryProps:Eh,wallGraphicsProps:Ky,wallOutlineProps:Ih,windmapOverlayProps:Rp,wmsImageryProviderProps:If,wmtsImageryProviderProps:Df,zoomControlProps:Pc,zoomControlSmProps:uu},Symbol.toStringTag,{value:"Module"}));var Xb={name:"en-us",nativeName:"English (US)",vc:{loadError:"needs to be child of VcViewer",navigation:{compass:{outerTip:"Drag outer ring: rotate view. Double-click: reset view.",innerTip:"Drag inner gyroscope: free orbit. TIP: You can also free orbit by holding the CTRL key and dragging the map.",title:"Click and drag to rotate the camera."},zoomCotrol:{zoomInTip:"Zoom in",zoomResetTip:"Reset zoom",zoomOutTip:"Zoom out"},print:{printTip:"Viewer screenshot/print",printViewTitle:"VueCesium Print View",credit:"Map Credits",screenshot:"Screenshot"},myLocation:{myLocationTip:"Centre map at your current location",positioning:"Positioning...",fail:"Positioning failed",centreMap:"My Location",lat:"Lat",lng:"Lng",address:"Address"},statusBar:{lat:"Lat",lng:"Lng",zone:"ZONE",e:"E",n:"N",elev:"Elev",level:"Level",heading:"H",pitch:"P",roll:"R",cameraHeight:"CameraH",tip:"Click to switch the mouse display coordinates to UTM projection coordinates"}},navigationSm:{compass:{outerTip:"Drag outer ring: rotate view. Double-click: reset view."},zoomCotrol:{zoomInTip:"Zoom in",zoomBarTip:"Drag the bar up to zoom in, and down to zoom out.",zoomOutTip:"Zoom out"}},measurement:{expand:"Expand",collapse:"Collapse",editor:{move:"Move the point",insert:"Insert a point",remove:"Remove the point",removeAll:"Remove all the points"},distance:{tip:"Distance",drawingTipStart:"Click the left button to draw the starting point of the distance measurement.",drawingTipEnd:"Click the left mouse button to draw the end point of the distance measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},"component-distance":{tip:"Component Distance",drawingTipStart:"Click the left mouse button to draw the starting point of component distance measurement.",drawingTipEnd:"Click the left mouse button to draw the end point of the component distance measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},polyline:{tip:"Polyline Distance",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},horizontal:{tip:"Horizontal Distance",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},vertical:{tip:"Vertical Distance",drawingTipStart:"Click the left button to draw the starting point of the vertical distance measurement.",drawingTipEnd:"Click the left button to draw the end point of the vertical distance measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},height:{tip:"Height ",drawingTipStart:"Click the left button to draw the height measurement point.",drawingTipEnd:"Click the left button to draw the height measurement point.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},area:{tip:"Area",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},point:{tip:"Point Coordinate",drawingTipStart:"Click the left button to draw the point coordinate measurement.",drawingTipEnd:"Click the left button to draw the point coordinate measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification.",lng:"lng:",lat:"lat:",height:"height:",slope:"slope:"},rectangle:{tip:"Rectangle",drawingTipStart:"Click the left button to draw the rectangle measurement.",drawingTipEnd:"Click the left button to draw the rectangle measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},regular:{tip:"Regular",drawingTipStart:"Click the left button to draw the regular measurement.",drawingTipEnd:"Click the left button to draw the regular measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},circle:{tip:"Circle",drawingTipStart:"Click the left button to draw the circle measurement.",drawingTipEnd:"Click the left button to draw the circle measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},clear:{tip:"Clear measurement results"}},drawing:{expand:"Expand",collapse:"Collapse",editor:{move:"Move the point",insert:"Insert a point",remove:"Remove the point",removeAll:"Remove all the points"},pin:{tip:"Drawing pin",drawingTipStart:"Click the left button to draw a pin.",drawingTipEnd:"Click the left button to draw a pin.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},point:{tip:"Drawing point",drawingTipStart:"Click the left button to draw a point.",drawingTipEnd:"Click the left button to draw a point.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},polyline:{tip:"Drawing polyline",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the drawing.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},polygon:{tip:"Drawing polygon",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the drawing.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},rectangle:{tip:"Drawing rectangle",drawingTipStart:"Click the left button to draw the starting point of the rectangle.",drawingTipEnd:"Click the left button to draw the end point of the rectangle.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},circle:{tip:"Drawing circle",drawingTipStart:"Click the left button to draw the starting point of the circle.",drawingTipEnd:"Click the left button to draw the end point of the circle.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},regular:{tip:"Drawing regular",drawingTipStart:"Click the left button to draw the starting point of the regular.",drawingTipEnd:"Click the left button to draw the end point of the circle.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},clear:{tip:"Clear drawing results"}},analysis:{expand:"Expand",collapse:"Collapse",editor:{move:"Move the point",insert:"Insert a point",remove:"Remove the point",removeAll:"Remove all the points"},sightline:{tip:"Sightline",drawingTipStart:"Click the left button to draw the view point of the sightline analysis.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the sightline analysis.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},viewshed:{tip:"Viewshed",drawingTipStart:"Click the left button to draw the view point of the viewshed analysis.",drawingTipEnd:"Click the left button to draw the end point of the viewshed analysis.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},clear:{tip:"Clear analysis results"}},overview:{show:"Show",hidden:"Hidden"},typhoon:{warn:"Failed to play typhoon, reason: no typhoon data with corresponding number found."}}};export{hm as V,_o as a,ze as b,xm as c,Zh as d,Qh as e,Ke as f,dp as g,mp as h,pm as i,Cm as j,Mb as k,Kl as l,Ne as m,br as n,ja as o,Xb as p,ho as q,Jb as r,Pr as u};
